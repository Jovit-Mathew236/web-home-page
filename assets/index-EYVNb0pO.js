function TK(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var IK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var fN={exports:{}},UE={},hN={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv=Symbol.for("react.element"),BK=Symbol.for("react.portal"),RK=Symbol.for("react.fragment"),PK=Symbol.for("react.strict_mode"),DK=Symbol.for("react.profiler"),LK=Symbol.for("react.provider"),FK=Symbol.for("react.context"),OK=Symbol.for("react.forward_ref"),zK=Symbol.for("react.suspense"),UK=Symbol.for("react.memo"),kK=Symbol.for("react.lazy"),yP=Symbol.iterator;function NK(t){return t===null||typeof t!="object"?null:(t=yP&&t[yP]||t["@@iterator"],typeof t=="function"?t:null)}var dN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pN=Object.assign,mN={};function g0(t,e,n){this.props=t,this.context=e,this.refs=mN,this.updater=n||dN}g0.prototype.isReactComponent={};g0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};g0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gN(){}gN.prototype=g0.prototype;function v6(t,e,n){this.props=t,this.context=e,this.refs=mN,this.updater=n||dN}var y6=v6.prototype=new gN;y6.constructor=v6;pN(y6,g0.prototype);y6.isPureReactComponent=!0;var xP=Array.isArray,AN=Object.prototype.hasOwnProperty,x6={current:null},vN={key:!0,ref:!0,__self:!0,__source:!0};function yN(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AN.call(e,i)&&!vN.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Sv,type:t,key:s,ref:o,props:r,_owner:x6.current}}function GK(t,e){return{$$typeof:Sv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _6(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sv}function HK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _P=/\/+/g;function o4(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HK(""+t.key):e.toString(36)}function b_(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sv:case BK:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+o4(o,0):i,xP(r)?(n="",t!=null&&(n=t.replace(_P,"$&/")+"/"),b_(r,e,n,"",function(c){return c})):r!=null&&(_6(r)&&(r=GK(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(_P,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",xP(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+o4(s,a);o+=b_(s,e,n,l,r)}else if(l=NK(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+o4(s,a++),o+=b_(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function n2(t,e,n){if(t==null)return t;var i=[],r=0;return b_(t,i,"","",function(s){return e.call(n,s,r++)}),i}function QK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xs={current:null},M_={transition:null},VK={ReactCurrentDispatcher:Xs,ReactCurrentBatchConfig:M_,ReactCurrentOwner:x6};function xN(){throw Error("act(...) is not supported in production builds of React.")}Rn.Children={map:n2,forEach:function(t,e,n){n2(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return n2(t,function(){e++}),e},toArray:function(t){return n2(t,function(e){return e})||[]},only:function(t){if(!_6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rn.Component=g0;Rn.Fragment=RK;Rn.Profiler=DK;Rn.PureComponent=v6;Rn.StrictMode=PK;Rn.Suspense=zK;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VK;Rn.act=xN;Rn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pN({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=x6.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)AN.call(e,l)&&!vN.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Sv,type:t.type,key:r,ref:s,props:i,_owner:o}};Rn.createContext=function(t){return t={$$typeof:FK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LK,_context:t},t.Consumer=t};Rn.createElement=yN;Rn.createFactory=function(t){var e=yN.bind(null,t);return e.type=t,e};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(t){return{$$typeof:OK,render:t}};Rn.isValidElement=_6;Rn.lazy=function(t){return{$$typeof:kK,_payload:{_status:-1,_result:t},_init:QK}};Rn.memo=function(t,e){return{$$typeof:UK,type:t,compare:e===void 0?null:e}};Rn.startTransition=function(t){var e=M_.transition;M_.transition={};try{t()}finally{M_.transition=e}};Rn.unstable_act=xN;Rn.useCallback=function(t,e){return Xs.current.useCallback(t,e)};Rn.useContext=function(t){return Xs.current.useContext(t)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(t){return Xs.current.useDeferredValue(t)};Rn.useEffect=function(t,e){return Xs.current.useEffect(t,e)};Rn.useId=function(){return Xs.current.useId()};Rn.useImperativeHandle=function(t,e,n){return Xs.current.useImperativeHandle(t,e,n)};Rn.useInsertionEffect=function(t,e){return Xs.current.useInsertionEffect(t,e)};Rn.useLayoutEffect=function(t,e){return Xs.current.useLayoutEffect(t,e)};Rn.useMemo=function(t,e){return Xs.current.useMemo(t,e)};Rn.useReducer=function(t,e,n){return Xs.current.useReducer(t,e,n)};Rn.useRef=function(t){return Xs.current.useRef(t)};Rn.useState=function(t){return Xs.current.useState(t)};Rn.useSyncExternalStore=function(t,e,n){return Xs.current.useSyncExternalStore(t,e,n)};Rn.useTransition=function(){return Xs.current.useTransition()};Rn.version="18.3.1";hN.exports=Rn;var E=hN.exports;const Es=m0(E),c3=TK({__proto__:null,default:Es},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WK=E,jK=Symbol.for("react.element"),XK=Symbol.for("react.fragment"),YK=Object.prototype.hasOwnProperty,qK=WK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$K={key:!0,ref:!0,__self:!0,__source:!0};function _N(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)YK.call(e,i)&&!$K.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:jK,type:t,key:s,ref:o,props:r,_owner:qK.current}}UE.Fragment=XK;UE.jsx=_N;UE.jsxs=_N;fN.exports=UE;var Re=fN.exports,R5={},EN={exports:{}},Ho={},wN={exports:{}},SN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var X=U.length;U.push($);e:for(;0<X;){var Q=X-1>>>1,J=U[Q];if(0<r(J,$))U[Q]=$,U[X]=J,X=Q;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var $=U[0],X=U.pop();if(X!==$){U[0]=X;e:for(var Q=0,J=U.length,ne=J>>>1;Q<ne;){var O=2*(Q+1)-1,N=U[O],G=O+1,H=U[G];if(0>r(N,X))G<J&&0>r(H,N)?(U[Q]=H,U[G]=X,Q=G):(U[Q]=N,U[O]=X,Q=O);else if(G<J&&0>r(H,X))U[Q]=H,U[G]=X,Q=G;else break e}}return $}function r(U,$){var X=U.sortIndex-$.sortIndex;return X!==0?X:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,g=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=U)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function w(U){if(g=!1,y(U),!p)if(n(l)!==null)p=!0,j(S);else{var $=n(c);$!==null&&Z(w,$.startTime-U)}}function S(U,$){p=!1,g&&(g=!1,m(M),M=-1),d=!0;var X=h;try{for(y($),f=n(l);f!==null&&(!(f.expirationTime>$)||U&&!D());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var J=Q(f.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(l)&&i(l),y($)}else i(l);f=n(l)}if(f!==null)var ne=!0;else{var O=n(c);O!==null&&Z(w,O.startTime-$),ne=!1}return ne}finally{f=null,h=X,d=!1}}var C=!1,b=null,M=-1,I=5,T=-1;function D(){return!(t.unstable_now()-T<I)}function R(){if(b!==null){var U=t.unstable_now();T=U;var $=!0;try{$=b(!0,U)}finally{$?z():(C=!1,b=null)}}else C=!1}var z;if(typeof v=="function")z=function(){v(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=R,z=function(){V.postMessage(null)}}else z=function(){A(R,0)};function j(U){b=U,C||(C=!0,z())}function Z(U,$){M=A(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,j(S))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var X=h;h=$;try{return U()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=h;h=U;try{return $()}finally{h=X}},t.unstable_scheduleCallback=function(U,$,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,U={id:u++,callback:$,priorityLevel:U,startTime:X,expirationTime:J,sortIndex:-1},X>Q?(U.sortIndex=X,e(c,U),n(l)===null&&U===n(c)&&(g?(m(M),M=-1):g=!0,Z(w,X-Q))):(U.sortIndex=J,e(l,U),p||d||(p=!0,j(S))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var $=h;return function(){var X=h;h=$;try{return U.apply(this,arguments)}finally{h=X}}}})(SN);wN.exports=SN;var KK=wN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JK=E,No=KK;function ht(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CN=new Set,EA={};function cd(t,e){Qm(t,e),Qm(t+"Capture",e)}function Qm(t,e){for(EA[t]=e,t=0;t<e.length;t++)CN.add(e[t])}var Xc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P5=Object.prototype.hasOwnProperty,ZK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EP={},wP={};function eJ(t){return P5.call(wP,t)?!0:P5.call(EP,t)?!1:ZK.test(t)?wP[t]=!0:(EP[t]=!0,!1)}function tJ(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nJ(t,e,n,i){if(e===null||typeof e>"u"||tJ(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ys(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cs[t]=new Ys(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cs[e]=new Ys(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cs[t]=new Ys(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cs[t]=new Ys(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cs[t]=new Ys(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cs[t]=new Ys(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cs[t]=new Ys(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cs[t]=new Ys(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cs[t]=new Ys(t,5,!1,t.toLowerCase(),null,!1,!1)});var E6=/[\-:]([a-z])/g;function w6(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E6,w6);cs[e]=new Ys(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E6,w6);cs[e]=new Ys(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E6,w6);cs[e]=new Ys(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cs[t]=new Ys(t,1,!1,t.toLowerCase(),null,!1,!1)});cs.xlinkHref=new Ys("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cs[t]=new Ys(t,1,!1,t.toLowerCase(),null,!0,!0)});function S6(t,e,n,i){var r=cs.hasOwnProperty(e)?cs[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nJ(e,n,r,i)&&(n=null),i||r===null?eJ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ru=JK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i2=Symbol.for("react.element"),rm=Symbol.for("react.portal"),sm=Symbol.for("react.fragment"),C6=Symbol.for("react.strict_mode"),D5=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),MN=Symbol.for("react.context"),b6=Symbol.for("react.forward_ref"),L5=Symbol.for("react.suspense"),F5=Symbol.for("react.suspense_list"),M6=Symbol.for("react.memo"),Ou=Symbol.for("react.lazy"),TN=Symbol.for("react.offscreen"),SP=Symbol.iterator;function h1(t){return t===null||typeof t!="object"?null:(t=SP&&t[SP]||t["@@iterator"],typeof t=="function"?t:null)}var Hi=Object.assign,a4;function Pg(t){if(a4===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);a4=e&&e[1]||""}return`
`+a4+t}var l4=!1;function c4(t,e){if(!t||l4)return"";l4=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{l4=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pg(t):""}function iJ(t){switch(t.tag){case 5:return Pg(t.type);case 16:return Pg("Lazy");case 13:return Pg("Suspense");case 19:return Pg("SuspenseList");case 0:case 2:case 15:return t=c4(t.type,!1),t;case 11:return t=c4(t.type.render,!1),t;case 1:return t=c4(t.type,!0),t;default:return""}}function O5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sm:return"Fragment";case rm:return"Portal";case D5:return"Profiler";case C6:return"StrictMode";case L5:return"Suspense";case F5:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MN:return(t.displayName||"Context")+".Consumer";case bN:return(t._context.displayName||"Context")+".Provider";case b6:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M6:return e=t.displayName||null,e!==null?e:O5(t.type)||"Memo";case Ou:e=t._payload,t=t._init;try{return O5(t(e))}catch{}}return null}function rJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O5(e);case 8:return e===C6?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sJ(t){var e=IN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function r2(t){t._valueTracker||(t._valueTracker=sJ(t))}function BN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=IN(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function u3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function z5(t,e){var n=e.checked;return Hi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function CP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=mf(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RN(t,e){e=e.checked,e!=null&&S6(t,"checked",e,!1)}function U5(t,e){RN(t,e);var n=mf(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k5(t,e.type,n):e.hasOwnProperty("defaultValue")&&k5(t,e.type,mf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function k5(t,e,n){(e!=="number"||u3(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dg=Array.isArray;function _m(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+mf(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function N5(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ht(91));return Hi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ht(92));if(Dg(n)){if(1<n.length)throw Error(ht(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mf(n)}}function PN(t,e){var n=mf(e.value),i=mf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function TP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G5(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var s2,LN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(s2=s2||document.createElement("div"),s2.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=s2.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wA(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oJ=["Webkit","ms","Moz","O"];Object.keys(Wg).forEach(function(t){oJ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wg[e]=Wg[t]})});function FN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wg.hasOwnProperty(t)&&Wg[t]?(""+e).trim():e+"px"}function ON(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=FN(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aJ=Hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function H5(t,e){if(e){if(aJ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ht(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ht(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ht(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ht(62))}}function Q5(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V5=null;function T6(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var W5=null,Em=null,wm=null;function IP(t){if(t=Mv(t)){if(typeof W5!="function")throw Error(ht(280));var e=t.stateNode;e&&(e=QE(e),W5(t.stateNode,t.type,e))}}function zN(t){Em?wm?wm.push(t):wm=[t]:Em=t}function UN(){if(Em){var t=Em,e=wm;if(wm=Em=null,IP(t),e)for(t=0;t<e.length;t++)IP(e[t])}}function kN(t,e){return t(e)}function NN(){}var u4=!1;function GN(t,e,n){if(u4)return t(e,n);u4=!0;try{return kN(t,e,n)}finally{u4=!1,(Em!==null||wm!==null)&&(NN(),UN())}}function SA(t,e){var n=t.stateNode;if(n===null)return null;var i=QE(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ht(231,e,typeof n));return n}var j5=!1;if(Xc)try{var d1={};Object.defineProperty(d1,"passive",{get:function(){j5=!0}}),window.addEventListener("test",d1,d1),window.removeEventListener("test",d1,d1)}catch{j5=!1}function lJ(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var jg=!1,f3=null,h3=!1,X5=null,cJ={onError:function(t){jg=!0,f3=t}};function uJ(t,e,n,i,r,s,o,a,l){jg=!1,f3=null,lJ.apply(cJ,arguments)}function fJ(t,e,n,i,r,s,o,a,l){if(uJ.apply(this,arguments),jg){if(jg){var c=f3;jg=!1,f3=null}else throw Error(ht(198));h3||(h3=!0,X5=c)}}function ud(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function BP(t){if(ud(t)!==t)throw Error(ht(188))}function hJ(t){var e=t.alternate;if(!e){if(e=ud(t),e===null)throw Error(ht(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return BP(r),t;if(s===i)return BP(r),e;s=s.sibling}throw Error(ht(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ht(189))}}if(n.alternate!==i)throw Error(ht(190))}if(n.tag!==3)throw Error(ht(188));return n.stateNode.current===n?t:e}function QN(t){return t=hJ(t),t!==null?VN(t):null}function VN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VN(t);if(e!==null)return e;t=t.sibling}return null}var WN=No.unstable_scheduleCallback,RP=No.unstable_cancelCallback,dJ=No.unstable_shouldYield,pJ=No.unstable_requestPaint,lr=No.unstable_now,mJ=No.unstable_getCurrentPriorityLevel,I6=No.unstable_ImmediatePriority,jN=No.unstable_UserBlockingPriority,d3=No.unstable_NormalPriority,gJ=No.unstable_LowPriority,XN=No.unstable_IdlePriority,kE=null,Kl=null;function AJ(t){if(Kl&&typeof Kl.onCommitFiberRoot=="function")try{Kl.onCommitFiberRoot(kE,t,void 0,(t.current.flags&128)===128)}catch{}}var al=Math.clz32?Math.clz32:xJ,vJ=Math.log,yJ=Math.LN2;function xJ(t){return t>>>=0,t===0?32:31-(vJ(t)/yJ|0)|0}var o2=64,a2=4194304;function Lg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function p3(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Lg(a):(s&=o,s!==0&&(i=Lg(s)))}else o=n&~r,o!==0?i=Lg(o):s!==0&&(i=Lg(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-al(e),r=1<<n,i|=t[n],e&=~r;return i}function _J(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EJ(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-al(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=_J(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Y5(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YN(){var t=o2;return o2<<=1,!(o2&4194240)&&(o2=64),t}function f4(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-al(e),t[e]=n}function wJ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-al(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function B6(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-al(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Zn=0;function qN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $N,R6,KN,JN,ZN,q5=!1,l2=[],Zu=null,ef=null,tf=null,CA=new Map,bA=new Map,ku=[],SJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PP(t,e){switch(t){case"focusin":case"focusout":Zu=null;break;case"dragenter":case"dragleave":ef=null;break;case"mouseover":case"mouseout":tf=null;break;case"pointerover":case"pointerout":CA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bA.delete(e.pointerId)}}function p1(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Mv(e),e!==null&&R6(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function CJ(t,e,n,i,r){switch(e){case"focusin":return Zu=p1(Zu,t,e,n,i,r),!0;case"dragenter":return ef=p1(ef,t,e,n,i,r),!0;case"mouseover":return tf=p1(tf,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return CA.set(s,p1(CA.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,bA.set(s,p1(bA.get(s)||null,t,e,n,i,r)),!0}return!1}function eG(t){var e=Ch(t.target);if(e!==null){var n=ud(e);if(n!==null){if(e=n.tag,e===13){if(e=HN(n),e!==null){t.blockedOn=e,ZN(t.priority,function(){KN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function T_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$5(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);V5=i,n.target.dispatchEvent(i),V5=null}else return e=Mv(n),e!==null&&R6(e),t.blockedOn=n,!1;e.shift()}return!0}function DP(t,e,n){T_(t)&&n.delete(e)}function bJ(){q5=!1,Zu!==null&&T_(Zu)&&(Zu=null),ef!==null&&T_(ef)&&(ef=null),tf!==null&&T_(tf)&&(tf=null),CA.forEach(DP),bA.forEach(DP)}function m1(t,e){t.blockedOn===e&&(t.blockedOn=null,q5||(q5=!0,No.unstable_scheduleCallback(No.unstable_NormalPriority,bJ)))}function MA(t){function e(r){return m1(r,t)}if(0<l2.length){m1(l2[0],t);for(var n=1;n<l2.length;n++){var i=l2[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Zu!==null&&m1(Zu,t),ef!==null&&m1(ef,t),tf!==null&&m1(tf,t),CA.forEach(e),bA.forEach(e),n=0;n<ku.length;n++)i=ku[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ku.length&&(n=ku[0],n.blockedOn===null);)eG(n),n.blockedOn===null&&ku.shift()}var Sm=ru.ReactCurrentBatchConfig,m3=!0;function MJ(t,e,n,i){var r=Zn,s=Sm.transition;Sm.transition=null;try{Zn=1,P6(t,e,n,i)}finally{Zn=r,Sm.transition=s}}function TJ(t,e,n,i){var r=Zn,s=Sm.transition;Sm.transition=null;try{Zn=4,P6(t,e,n,i)}finally{Zn=r,Sm.transition=s}}function P6(t,e,n,i){if(m3){var r=$5(t,e,n,i);if(r===null)_4(t,e,i,g3,n),PP(t,i);else if(CJ(r,t,e,n,i))i.stopPropagation();else if(PP(t,i),e&4&&-1<SJ.indexOf(t)){for(;r!==null;){var s=Mv(r);if(s!==null&&$N(s),s=$5(t,e,n,i),s===null&&_4(t,e,i,g3,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else _4(t,e,i,null,n)}}var g3=null;function $5(t,e,n,i){if(g3=null,t=T6(i),t=Ch(t),t!==null)if(e=ud(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return g3=t,null}function tG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mJ()){case I6:return 1;case jN:return 4;case d3:case gJ:return 16;case XN:return 536870912;default:return 16}default:return 16}}var Qu=null,D6=null,I_=null;function nG(){if(I_)return I_;var t,e=D6,n=e.length,i,r="value"in Qu?Qu.value:Qu.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return I_=r.slice(t,1<i?1-i:void 0)}function B_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function c2(){return!0}function LP(){return!1}function Qo(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?c2:LP,this.isPropagationStopped=LP,this}return Hi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=c2)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=c2)},persist:function(){},isPersistent:c2}),e}var A0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L6=Qo(A0),bv=Hi({},A0,{view:0,detail:0}),IJ=Qo(bv),h4,d4,g1,NE=Hi({},bv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F6,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==g1&&(g1&&t.type==="mousemove"?(h4=t.screenX-g1.screenX,d4=t.screenY-g1.screenY):d4=h4=0,g1=t),h4)},movementY:function(t){return"movementY"in t?t.movementY:d4}}),FP=Qo(NE),BJ=Hi({},NE,{dataTransfer:0}),RJ=Qo(BJ),PJ=Hi({},bv,{relatedTarget:0}),p4=Qo(PJ),DJ=Hi({},A0,{animationName:0,elapsedTime:0,pseudoElement:0}),LJ=Qo(DJ),FJ=Hi({},A0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OJ=Qo(FJ),zJ=Hi({},A0,{data:0}),OP=Qo(zJ),UJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GJ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NJ[t])?!!e[t]:!1}function F6(){return GJ}var HJ=Hi({},bv,{key:function(t){if(t.key){var e=UJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=B_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kJ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F6,charCode:function(t){return t.type==="keypress"?B_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?B_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QJ=Qo(HJ),VJ=Hi({},NE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zP=Qo(VJ),WJ=Hi({},bv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F6}),jJ=Qo(WJ),XJ=Hi({},A0,{propertyName:0,elapsedTime:0,pseudoElement:0}),YJ=Qo(XJ),qJ=Hi({},NE,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$J=Qo(qJ),KJ=[9,13,27,32],O6=Xc&&"CompositionEvent"in window,Xg=null;Xc&&"documentMode"in document&&(Xg=document.documentMode);var JJ=Xc&&"TextEvent"in window&&!Xg,iG=Xc&&(!O6||Xg&&8<Xg&&11>=Xg),UP=" ",kP=!1;function rG(t,e){switch(t){case"keyup":return KJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var om=!1;function ZJ(t,e){switch(t){case"compositionend":return sG(e);case"keypress":return e.which!==32?null:(kP=!0,UP);case"textInput":return t=e.data,t===UP&&kP?null:t;default:return null}}function eZ(t,e){if(om)return t==="compositionend"||!O6&&rG(t,e)?(t=nG(),I_=D6=Qu=null,om=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iG&&e.locale!=="ko"?null:e.data;default:return null}}var tZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tZ[t.type]:e==="textarea"}function oG(t,e,n,i){zN(i),e=A3(e,"onChange"),0<e.length&&(n=new L6("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Yg=null,TA=null;function nZ(t){AG(t,0)}function GE(t){var e=cm(t);if(BN(e))return t}function iZ(t,e){if(t==="change")return e}var aG=!1;if(Xc){var m4;if(Xc){var g4="oninput"in document;if(!g4){var GP=document.createElement("div");GP.setAttribute("oninput","return;"),g4=typeof GP.oninput=="function"}m4=g4}else m4=!1;aG=m4&&(!document.documentMode||9<document.documentMode)}function HP(){Yg&&(Yg.detachEvent("onpropertychange",lG),TA=Yg=null)}function lG(t){if(t.propertyName==="value"&&GE(TA)){var e=[];oG(e,TA,t,T6(t)),GN(nZ,e)}}function rZ(t,e,n){t==="focusin"?(HP(),Yg=e,TA=n,Yg.attachEvent("onpropertychange",lG)):t==="focusout"&&HP()}function sZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return GE(TA)}function oZ(t,e){if(t==="click")return GE(e)}function aZ(t,e){if(t==="input"||t==="change")return GE(e)}function lZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dl=typeof Object.is=="function"?Object.is:lZ;function IA(t,e){if(dl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!P5.call(e,r)||!dl(t[r],e[r]))return!1}return!0}function QP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VP(t,e){var n=QP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QP(n)}}function cG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uG(){for(var t=window,e=u3();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=u3(t.document)}return e}function z6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cZ(t){var e=uG(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cG(n.ownerDocument.documentElement,n)){if(i!==null&&z6(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=VP(n,s);var o=VP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uZ=Xc&&"documentMode"in document&&11>=document.documentMode,am=null,K5=null,qg=null,J5=!1;function WP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J5||am==null||am!==u3(i)||(i=am,"selectionStart"in i&&z6(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qg&&IA(qg,i)||(qg=i,i=A3(K5,"onSelect"),0<i.length&&(e=new L6("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=am)))}function u2(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lm={animationend:u2("Animation","AnimationEnd"),animationiteration:u2("Animation","AnimationIteration"),animationstart:u2("Animation","AnimationStart"),transitionend:u2("Transition","TransitionEnd")},A4={},fG={};Xc&&(fG=document.createElement("div").style,"AnimationEvent"in window||(delete lm.animationend.animation,delete lm.animationiteration.animation,delete lm.animationstart.animation),"TransitionEvent"in window||delete lm.transitionend.transition);function HE(t){if(A4[t])return A4[t];if(!lm[t])return t;var e=lm[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fG)return A4[t]=e[n];return t}var hG=HE("animationend"),dG=HE("animationiteration"),pG=HE("animationstart"),mG=HE("transitionend"),gG=new Map,jP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mf(t,e){gG.set(t,e),cd(e,[t])}for(var v4=0;v4<jP.length;v4++){var y4=jP[v4],fZ=y4.toLowerCase(),hZ=y4[0].toUpperCase()+y4.slice(1);Mf(fZ,"on"+hZ)}Mf(hG,"onAnimationEnd");Mf(dG,"onAnimationIteration");Mf(pG,"onAnimationStart");Mf("dblclick","onDoubleClick");Mf("focusin","onFocus");Mf("focusout","onBlur");Mf(mG,"onTransitionEnd");Qm("onMouseEnter",["mouseout","mouseover"]);Qm("onMouseLeave",["mouseout","mouseover"]);Qm("onPointerEnter",["pointerout","pointerover"]);Qm("onPointerLeave",["pointerout","pointerover"]);cd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cd("onBeforeInput",["compositionend","keypress","textInput","paste"]);cd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fg));function XP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,fJ(i,e,void 0,t),t.currentTarget=null}function AG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;XP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;XP(r,a,c),s=l}}}if(h3)throw t=X5,h3=!1,X5=null,t}function xi(t,e){var n=e[iT];n===void 0&&(n=e[iT]=new Set);var i=t+"__bubble";n.has(i)||(vG(e,t,2,!1),n.add(i))}function x4(t,e,n){var i=0;e&&(i|=4),vG(n,t,i,e)}var f2="_reactListening"+Math.random().toString(36).slice(2);function BA(t){if(!t[f2]){t[f2]=!0,CN.forEach(function(n){n!=="selectionchange"&&(dZ.has(n)||x4(n,!1,t),x4(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[f2]||(e[f2]=!0,x4("selectionchange",!1,e))}}function vG(t,e,n,i){switch(tG(e)){case 1:var r=MJ;break;case 4:r=TJ;break;default:r=P6}n=r.bind(null,e,n,t),r=void 0,!j5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _4(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ch(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}GN(function(){var c=s,u=T6(n),f=[];e:{var h=gG.get(t);if(h!==void 0){var d=L6,p=t;switch(t){case"keypress":if(B_(n)===0)break e;case"keydown":case"keyup":d=QJ;break;case"focusin":p="focus",d=p4;break;case"focusout":p="blur",d=p4;break;case"beforeblur":case"afterblur":d=p4;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=FP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=RJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=jJ;break;case hG:case dG:case pG:d=LJ;break;case mG:d=YJ;break;case"scroll":d=IJ;break;case"wheel":d=$J;break;case"copy":case"cut":case"paste":d=OJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=zP}var g=(e&4)!==0,A=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=c,y;v!==null;){y=v;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,m!==null&&(w=SA(v,m),w!=null&&g.push(RA(v,w,y)))),A)break;v=v.return}0<g.length&&(h=new d(h,p,null,n,u),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==V5&&(p=n.relatedTarget||n.fromElement)&&(Ch(p)||p[Yc]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?Ch(p):null,p!==null&&(A=ud(p),p!==A||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(g=FP,w="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=zP,w="onPointerLeave",m="onPointerEnter",v="pointer"),A=d==null?h:cm(d),y=p==null?h:cm(p),h=new g(w,v+"leave",d,n,u),h.target=A,h.relatedTarget=y,w=null,Ch(u)===c&&(g=new g(m,v+"enter",p,n,u),g.target=y,g.relatedTarget=A,w=g),A=w,d&&p)t:{for(g=d,m=p,v=0,y=g;y;y=Fd(y))v++;for(y=0,w=m;w;w=Fd(w))y++;for(;0<v-y;)g=Fd(g),v--;for(;0<y-v;)m=Fd(m),y--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Fd(g),m=Fd(m)}g=null}else g=null;d!==null&&YP(f,h,d,g,!1),p!==null&&A!==null&&YP(f,A,p,g,!0)}}e:{if(h=c?cm(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var S=iZ;else if(NP(h))if(aG)S=aZ;else{S=sZ;var C=rZ}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=oZ);if(S&&(S=S(t,c))){oG(f,S,n,u);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&k5(h,"number",h.value)}switch(C=c?cm(c):window,t){case"focusin":(NP(C)||C.contentEditable==="true")&&(am=C,K5=c,qg=null);break;case"focusout":qg=K5=am=null;break;case"mousedown":J5=!0;break;case"contextmenu":case"mouseup":case"dragend":J5=!1,WP(f,n,u);break;case"selectionchange":if(uZ)break;case"keydown":case"keyup":WP(f,n,u)}var b;if(O6)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else om?rG(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(iG&&n.locale!=="ko"&&(om||M!=="onCompositionStart"?M==="onCompositionEnd"&&om&&(b=nG()):(Qu=u,D6="value"in Qu?Qu.value:Qu.textContent,om=!0)),C=A3(c,M),0<C.length&&(M=new OP(M,t,null,n,u),f.push({event:M,listeners:C}),b?M.data=b:(b=sG(n),b!==null&&(M.data=b)))),(b=JJ?ZJ(t,n):eZ(t,n))&&(c=A3(c,"onBeforeInput"),0<c.length&&(u=new OP("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=b))}AG(f,e)})}function RA(t,e,n){return{instance:t,listener:e,currentTarget:n}}function A3(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=SA(t,n),s!=null&&i.unshift(RA(t,s,r)),s=SA(t,e),s!=null&&i.push(RA(t,s,r))),t=t.return}return i}function Fd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function YP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=SA(n,s),l!=null&&o.unshift(RA(n,l,a))):r||(l=SA(n,s),l!=null&&o.push(RA(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pZ=/\r\n?/g,mZ=/\u0000|\uFFFD/g;function qP(t){return(typeof t=="string"?t:""+t).replace(pZ,`
`).replace(mZ,"")}function h2(t,e,n){if(e=qP(e),qP(t)!==e&&n)throw Error(ht(425))}function v3(){}var Z5=null,eT=null;function tT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nT=typeof setTimeout=="function"?setTimeout:void 0,gZ=typeof clearTimeout=="function"?clearTimeout:void 0,$P=typeof Promise=="function"?Promise:void 0,AZ=typeof queueMicrotask=="function"?queueMicrotask:typeof $P<"u"?function(t){return $P.resolve(null).then(t).catch(vZ)}:nT;function vZ(t){setTimeout(function(){throw t})}function E4(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),MA(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);MA(e)}function nf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var v0=Math.random().toString(36).slice(2),Xl="__reactFiber$"+v0,PA="__reactProps$"+v0,Yc="__reactContainer$"+v0,iT="__reactEvents$"+v0,yZ="__reactListeners$"+v0,xZ="__reactHandles$"+v0;function Ch(t){var e=t[Xl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yc]||n[Xl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KP(t);t!==null;){if(n=t[Xl])return n;t=KP(t)}return e}t=n,n=t.parentNode}return null}function Mv(t){return t=t[Xl]||t[Yc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cm(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ht(33))}function QE(t){return t[PA]||null}var rT=[],um=-1;function Tf(t){return{current:t}}function Ei(t){0>um||(t.current=rT[um],rT[um]=null,um--)}function mi(t,e){um++,rT[um]=t.current,t.current=e}var gf={},Cs=Tf(gf),go=Tf(!1),jh=gf;function Vm(t,e){var n=t.type.contextTypes;if(!n)return gf;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ao(t){return t=t.childContextTypes,t!=null}function y3(){Ei(go),Ei(Cs)}function JP(t,e,n){if(Cs.current!==gf)throw Error(ht(168));mi(Cs,e),mi(go,n)}function yG(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ht(108,rJ(t)||"Unknown",r));return Hi({},n,i)}function x3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gf,jh=Cs.current,mi(Cs,t),mi(go,go.current),!0}function ZP(t,e,n){var i=t.stateNode;if(!i)throw Error(ht(169));n?(t=yG(t,e,jh),i.__reactInternalMemoizedMergedChildContext=t,Ei(go),Ei(Cs),mi(Cs,t)):Ei(go),mi(go,n)}var Lc=null,VE=!1,w4=!1;function xG(t){Lc===null?Lc=[t]:Lc.push(t)}function _Z(t){VE=!0,xG(t)}function If(){if(!w4&&Lc!==null){w4=!0;var t=0,e=Zn;try{var n=Lc;for(Zn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Lc=null,VE=!1}catch(r){throw Lc!==null&&(Lc=Lc.slice(t+1)),WN(I6,If),r}finally{Zn=e,w4=!1}}return null}var fm=[],hm=0,_3=null,E3=0,ha=[],da=0,Xh=null,kc=1,Nc="";function xh(t,e){fm[hm++]=E3,fm[hm++]=_3,_3=t,E3=e}function _G(t,e,n){ha[da++]=kc,ha[da++]=Nc,ha[da++]=Xh,Xh=t;var i=kc;t=Nc;var r=32-al(i)-1;i&=~(1<<r),n+=1;var s=32-al(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,kc=1<<32-al(e)+r|n<<r|i,Nc=s+t}else kc=1<<s|n<<r|i,Nc=t}function U6(t){t.return!==null&&(xh(t,1),_G(t,1,0))}function k6(t){for(;t===_3;)_3=fm[--hm],fm[hm]=null,E3=fm[--hm],fm[hm]=null;for(;t===Xh;)Xh=ha[--da],ha[da]=null,Nc=ha[--da],ha[da]=null,kc=ha[--da],ha[da]=null}var zo=null,Lo=null,Ri=!1,el=null;function EG(t,e){var n=xa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e7(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zo=t,Lo=nf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zo=t,Lo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xh!==null?{id:kc,overflow:Nc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zo=t,Lo=null,!0):!1;default:return!1}}function sT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oT(t){if(Ri){var e=Lo;if(e){var n=e;if(!e7(t,e)){if(sT(t))throw Error(ht(418));e=nf(n.nextSibling);var i=zo;e&&e7(t,e)?EG(i,n):(t.flags=t.flags&-4097|2,Ri=!1,zo=t)}}else{if(sT(t))throw Error(ht(418));t.flags=t.flags&-4097|2,Ri=!1,zo=t}}}function t7(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zo=t}function d2(t){if(t!==zo)return!1;if(!Ri)return t7(t),Ri=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tT(t.type,t.memoizedProps)),e&&(e=Lo)){if(sT(t))throw wG(),Error(ht(418));for(;e;)EG(t,e),e=nf(e.nextSibling)}if(t7(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ht(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lo=nf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lo=null}}else Lo=zo?nf(t.stateNode.nextSibling):null;return!0}function wG(){for(var t=Lo;t;)t=nf(t.nextSibling)}function Wm(){Lo=zo=null,Ri=!1}function N6(t){el===null?el=[t]:el.push(t)}var EZ=ru.ReactCurrentBatchConfig;function A1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ht(309));var i=n.stateNode}if(!i)throw Error(ht(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ht(284));if(!n._owner)throw Error(ht(290,t))}return t}function p2(t,e){throw t=Object.prototype.toString.call(e),Error(ht(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n7(t){var e=t._init;return e(t._payload)}function SG(t){function e(m,v){if(t){var y=m.deletions;y===null?(m.deletions=[v],m.flags|=16):y.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function i(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function r(m,v){return m=af(m,v),m.index=0,m.sibling=null,m}function s(m,v,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<v?(m.flags|=2,v):y):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,y,w){return v===null||v.tag!==6?(v=B4(y,m.mode,w),v.return=m,v):(v=r(v,y),v.return=m,v)}function l(m,v,y,w){var S=y.type;return S===sm?u(m,v,y.props.children,w,y.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ou&&n7(S)===v.type)?(w=r(v,y.props),w.ref=A1(m,v,y),w.return=m,w):(w=z_(y.type,y.key,y.props,null,m.mode,w),w.ref=A1(m,v,y),w.return=m,w)}function c(m,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=R4(y,m.mode,w),v.return=m,v):(v=r(v,y.children||[]),v.return=m,v)}function u(m,v,y,w,S){return v===null||v.tag!==7?(v=Uh(y,m.mode,w,S),v.return=m,v):(v=r(v,y),v.return=m,v)}function f(m,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=B4(""+v,m.mode,y),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case i2:return y=z_(v.type,v.key,v.props,null,m.mode,y),y.ref=A1(m,null,v),y.return=m,y;case rm:return v=R4(v,m.mode,y),v.return=m,v;case Ou:var w=v._init;return f(m,w(v._payload),y)}if(Dg(v)||h1(v))return v=Uh(v,m.mode,y,null),v.return=m,v;p2(m,v)}return null}function h(m,v,y,w){var S=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(m,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case i2:return y.key===S?l(m,v,y,w):null;case rm:return y.key===S?c(m,v,y,w):null;case Ou:return S=y._init,h(m,v,S(y._payload),w)}if(Dg(y)||h1(y))return S!==null?null:u(m,v,y,w,null);p2(m,y)}return null}function d(m,v,y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(y)||null,a(v,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case i2:return m=m.get(w.key===null?y:w.key)||null,l(v,m,w,S);case rm:return m=m.get(w.key===null?y:w.key)||null,c(v,m,w,S);case Ou:var C=w._init;return d(m,v,y,C(w._payload),S)}if(Dg(w)||h1(w))return m=m.get(y)||null,u(v,m,w,S,null);p2(v,w)}return null}function p(m,v,y,w){for(var S=null,C=null,b=v,M=v=0,I=null;b!==null&&M<y.length;M++){b.index>M?(I=b,b=null):I=b.sibling;var T=h(m,b,y[M],w);if(T===null){b===null&&(b=I);break}t&&b&&T.alternate===null&&e(m,b),v=s(T,v,M),C===null?S=T:C.sibling=T,C=T,b=I}if(M===y.length)return n(m,b),Ri&&xh(m,M),S;if(b===null){for(;M<y.length;M++)b=f(m,y[M],w),b!==null&&(v=s(b,v,M),C===null?S=b:C.sibling=b,C=b);return Ri&&xh(m,M),S}for(b=i(m,b);M<y.length;M++)I=d(b,m,M,y[M],w),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?M:I.key),v=s(I,v,M),C===null?S=I:C.sibling=I,C=I);return t&&b.forEach(function(D){return e(m,D)}),Ri&&xh(m,M),S}function g(m,v,y,w){var S=h1(y);if(typeof S!="function")throw Error(ht(150));if(y=S.call(y),y==null)throw Error(ht(151));for(var C=S=null,b=v,M=v=0,I=null,T=y.next();b!==null&&!T.done;M++,T=y.next()){b.index>M?(I=b,b=null):I=b.sibling;var D=h(m,b,T.value,w);if(D===null){b===null&&(b=I);break}t&&b&&D.alternate===null&&e(m,b),v=s(D,v,M),C===null?S=D:C.sibling=D,C=D,b=I}if(T.done)return n(m,b),Ri&&xh(m,M),S;if(b===null){for(;!T.done;M++,T=y.next())T=f(m,T.value,w),T!==null&&(v=s(T,v,M),C===null?S=T:C.sibling=T,C=T);return Ri&&xh(m,M),S}for(b=i(m,b);!T.done;M++,T=y.next())T=d(b,m,M,T.value,w),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?M:T.key),v=s(T,v,M),C===null?S=T:C.sibling=T,C=T);return t&&b.forEach(function(R){return e(m,R)}),Ri&&xh(m,M),S}function A(m,v,y,w){if(typeof y=="object"&&y!==null&&y.type===sm&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case i2:e:{for(var S=y.key,C=v;C!==null;){if(C.key===S){if(S=y.type,S===sm){if(C.tag===7){n(m,C.sibling),v=r(C,y.props.children),v.return=m,m=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ou&&n7(S)===C.type){n(m,C.sibling),v=r(C,y.props),v.ref=A1(m,C,y),v.return=m,m=v;break e}n(m,C);break}else e(m,C);C=C.sibling}y.type===sm?(v=Uh(y.props.children,m.mode,w,y.key),v.return=m,m=v):(w=z_(y.type,y.key,y.props,null,m.mode,w),w.ref=A1(m,v,y),w.return=m,m=w)}return o(m);case rm:e:{for(C=y.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(m,v.sibling),v=r(v,y.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=R4(y,m.mode,w),v.return=m,m=v}return o(m);case Ou:return C=y._init,A(m,v,C(y._payload),w)}if(Dg(y))return p(m,v,y,w);if(h1(y))return g(m,v,y,w);p2(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(m,v.sibling),v=r(v,y),v.return=m,m=v):(n(m,v),v=B4(y,m.mode,w),v.return=m,m=v),o(m)):n(m,v)}return A}var jm=SG(!0),CG=SG(!1),w3=Tf(null),S3=null,dm=null,G6=null;function H6(){G6=dm=S3=null}function Q6(t){var e=w3.current;Ei(w3),t._currentValue=e}function aT(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Cm(t,e){S3=t,G6=dm=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lo=!0),t.firstContext=null)}function Ta(t){var e=t._currentValue;if(G6!==t)if(t={context:t,memoizedValue:e,next:null},dm===null){if(S3===null)throw Error(ht(308));dm=t,S3.dependencies={lanes:0,firstContext:t}}else dm=dm.next=t;return e}var bh=null;function V6(t){bh===null?bh=[t]:bh.push(t)}function bG(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,V6(e)):(n.next=r.next,r.next=n),e.interleaved=n,qc(t,i)}function qc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zu=!1;function W6(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rf(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Un&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,qc(t,n)}return r=i.interleaved,r===null?(e.next=e,V6(i)):(e.next=r.next,r.next=e),i.interleaved=e,qc(t,n)}function R_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,B6(t,n)}}function i7(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function C3(t,e,n,i){var r=t.updateQueue;zu=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,d=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,d=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Hi({},f,h);break e;case 2:zu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);qh|=o,t.lanes=o,t.memoizedState=f}}function r7(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ht(191,r));r.call(i)}}}var Tv={},Jl=Tf(Tv),DA=Tf(Tv),LA=Tf(Tv);function Mh(t){if(t===Tv)throw Error(ht(174));return t}function j6(t,e){switch(mi(LA,e),mi(DA,t),mi(Jl,Tv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G5(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G5(e,t)}Ei(Jl),mi(Jl,e)}function Xm(){Ei(Jl),Ei(DA),Ei(LA)}function TG(t){Mh(LA.current);var e=Mh(Jl.current),n=G5(e,t.type);e!==n&&(mi(DA,t),mi(Jl,n))}function X6(t){DA.current===t&&(Ei(Jl),Ei(DA))}var zi=Tf(0);function b3(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var S4=[];function Y6(){for(var t=0;t<S4.length;t++)S4[t]._workInProgressVersionPrimary=null;S4.length=0}var P_=ru.ReactCurrentDispatcher,C4=ru.ReactCurrentBatchConfig,Yh=0,Ni=null,Mr=null,Vr=null,M3=!1,$g=!1,FA=0,wZ=0;function ps(){throw Error(ht(321))}function q6(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dl(t[n],e[n]))return!1;return!0}function $6(t,e,n,i,r,s){if(Yh=s,Ni=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,P_.current=t===null||t.memoizedState===null?MZ:TZ,t=n(i,r),$g){s=0;do{if($g=!1,FA=0,25<=s)throw Error(ht(301));s+=1,Vr=Mr=null,e.updateQueue=null,P_.current=IZ,t=n(i,r)}while($g)}if(P_.current=T3,e=Mr!==null&&Mr.next!==null,Yh=0,Vr=Mr=Ni=null,M3=!1,e)throw Error(ht(300));return t}function K6(){var t=FA!==0;return FA=0,t}function Ul(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Ni.memoizedState=Vr=t:Vr=Vr.next=t,Vr}function Ia(){if(Mr===null){var t=Ni.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var e=Vr===null?Ni.memoizedState:Vr.next;if(e!==null)Vr=e,Mr=t;else{if(t===null)throw Error(ht(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Vr===null?Ni.memoizedState=Vr=t:Vr=Vr.next=t}return Vr}function OA(t,e){return typeof e=="function"?e(t):e}function b4(t){var e=Ia(),n=e.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=t;var i=Mr,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Yh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Ni.lanes|=u,qh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,dl(i,e.memoizedState)||(lo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ni.lanes|=s,qh|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function M4(t){var e=Ia(),n=e.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);dl(s,e.memoizedState)||(lo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function IG(){}function BG(t,e){var n=Ni,i=Ia(),r=e(),s=!dl(i.memoizedState,r);if(s&&(i.memoizedState=r,lo=!0),i=i.queue,J6(DG.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Vr!==null&&Vr.memoizedState.tag&1){if(n.flags|=2048,zA(9,PG.bind(null,n,i,r,e),void 0,null),Xr===null)throw Error(ht(349));Yh&30||RG(n,e,r)}return r}function RG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ni.updateQueue,e===null?(e={lastEffect:null,stores:null},Ni.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PG(t,e,n,i){e.value=n,e.getSnapshot=i,LG(e)&&FG(t)}function DG(t,e,n){return n(function(){LG(e)&&FG(t)})}function LG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dl(t,n)}catch{return!0}}function FG(t){var e=qc(t,1);e!==null&&ll(e,t,1,-1)}function s7(t){var e=Ul();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:OA,lastRenderedState:t},e.queue=t,t=t.dispatch=bZ.bind(null,Ni,t),[e.memoizedState,t]}function zA(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ni.updateQueue,e===null?(e={lastEffect:null,stores:null},Ni.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function OG(){return Ia().memoizedState}function D_(t,e,n,i){var r=Ul();Ni.flags|=t,r.memoizedState=zA(1|e,n,void 0,i===void 0?null:i)}function WE(t,e,n,i){var r=Ia();i=i===void 0?null:i;var s=void 0;if(Mr!==null){var o=Mr.memoizedState;if(s=o.destroy,i!==null&&q6(i,o.deps)){r.memoizedState=zA(e,n,s,i);return}}Ni.flags|=t,r.memoizedState=zA(1|e,n,s,i)}function o7(t,e){return D_(8390656,8,t,e)}function J6(t,e){return WE(2048,8,t,e)}function zG(t,e){return WE(4,2,t,e)}function UG(t,e){return WE(4,4,t,e)}function kG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NG(t,e,n){return n=n!=null?n.concat([t]):null,WE(4,4,kG.bind(null,e,t),n)}function Z6(){}function GG(t,e){var n=Ia();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&q6(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HG(t,e){var n=Ia();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&q6(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function QG(t,e,n){return Yh&21?(dl(n,e)||(n=YN(),Ni.lanes|=n,qh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lo=!0),t.memoizedState=n)}function SZ(t,e){var n=Zn;Zn=n!==0&&4>n?n:4,t(!0);var i=C4.transition;C4.transition={};try{t(!1),e()}finally{Zn=n,C4.transition=i}}function VG(){return Ia().memoizedState}function CZ(t,e,n){var i=of(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},WG(t))jG(e,n);else if(n=bG(t,e,n,i),n!==null){var r=Ws();ll(n,t,i,r),XG(n,e,i)}}function bZ(t,e,n){var i=of(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(WG(t))jG(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,dl(a,o)){var l=e.interleaved;l===null?(r.next=r,V6(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=bG(t,e,r,i),n!==null&&(r=Ws(),ll(n,t,i,r),XG(n,e,i))}}function WG(t){var e=t.alternate;return t===Ni||e!==null&&e===Ni}function jG(t,e){$g=M3=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XG(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,B6(t,n)}}var T3={readContext:Ta,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},MZ={readContext:Ta,useCallback:function(t,e){return Ul().memoizedState=[t,e===void 0?null:e],t},useContext:Ta,useEffect:o7,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,D_(4194308,4,kG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return D_(4194308,4,t,e)},useInsertionEffect:function(t,e){return D_(4,2,t,e)},useMemo:function(t,e){var n=Ul();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ul();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=CZ.bind(null,Ni,t),[i.memoizedState,t]},useRef:function(t){var e=Ul();return t={current:t},e.memoizedState=t},useState:s7,useDebugValue:Z6,useDeferredValue:function(t){return Ul().memoizedState=t},useTransition:function(){var t=s7(!1),e=t[0];return t=SZ.bind(null,t[1]),Ul().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ni,r=Ul();if(Ri){if(n===void 0)throw Error(ht(407));n=n()}else{if(n=e(),Xr===null)throw Error(ht(349));Yh&30||RG(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,o7(DG.bind(null,i,s,t),[t]),i.flags|=2048,zA(9,PG.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ul(),e=Xr.identifierPrefix;if(Ri){var n=Nc,i=kc;n=(i&~(1<<32-al(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=FA++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wZ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TZ={readContext:Ta,useCallback:GG,useContext:Ta,useEffect:J6,useImperativeHandle:NG,useInsertionEffect:zG,useLayoutEffect:UG,useMemo:HG,useReducer:b4,useRef:OG,useState:function(){return b4(OA)},useDebugValue:Z6,useDeferredValue:function(t){var e=Ia();return QG(e,Mr.memoizedState,t)},useTransition:function(){var t=b4(OA)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:IG,useSyncExternalStore:BG,useId:VG,unstable_isNewReconciler:!1},IZ={readContext:Ta,useCallback:GG,useContext:Ta,useEffect:J6,useImperativeHandle:NG,useInsertionEffect:zG,useLayoutEffect:UG,useMemo:HG,useReducer:M4,useRef:OG,useState:function(){return M4(OA)},useDebugValue:Z6,useDeferredValue:function(t){var e=Ia();return Mr===null?e.memoizedState=t:QG(e,Mr.memoizedState,t)},useTransition:function(){var t=M4(OA)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:IG,useSyncExternalStore:BG,useId:VG,unstable_isNewReconciler:!1};function Ka(t,e){if(t&&t.defaultProps){e=Hi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lT(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Hi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jE={isMounted:function(t){return(t=t._reactInternals)?ud(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ws(),r=of(t),s=Qc(i,r);s.payload=e,n!=null&&(s.callback=n),e=rf(t,s,r),e!==null&&(ll(e,t,r,i),R_(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ws(),r=of(t),s=Qc(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=rf(t,s,r),e!==null&&(ll(e,t,r,i),R_(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ws(),i=of(t),r=Qc(n,i);r.tag=2,e!=null&&(r.callback=e),e=rf(t,r,i),e!==null&&(ll(e,t,i,n),R_(e,t,i))}};function a7(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!IA(n,i)||!IA(r,s):!0}function YG(t,e,n){var i=!1,r=gf,s=e.contextType;return typeof s=="object"&&s!==null?s=Ta(s):(r=Ao(e)?jh:Cs.current,i=e.contextTypes,s=(i=i!=null)?Vm(t,r):gf),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jE,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function l7(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&jE.enqueueReplaceState(e,e.state,null)}function cT(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},W6(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ta(s):(s=Ao(e)?jh:Cs.current,r.context=Vm(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lT(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&jE.enqueueReplaceState(r,r.state,null),C3(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ym(t,e){try{var n="",i=e;do n+=iJ(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function T4(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BZ=typeof WeakMap=="function"?WeakMap:Map;function qG(t,e,n){n=Qc(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){B3||(B3=!0,xT=i),uT(t,e)},n}function $G(t,e,n){n=Qc(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){uT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uT(t,e),typeof i!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function c7(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new BZ;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=VZ.bind(null,t,e,n),e.then(t,t))}function u7(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f7(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qc(-1,1),e.tag=2,rf(n,e,1))),n.lanes|=1),t)}var RZ=ru.ReactCurrentOwner,lo=!1;function Us(t,e,n,i){e.child=t===null?CG(e,null,n,i):jm(e,t.child,n,i)}function h7(t,e,n,i,r){n=n.render;var s=e.ref;return Cm(e,r),i=$6(t,e,n,i,s,r),n=K6(),t!==null&&!lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$c(t,e,r)):(Ri&&n&&U6(e),e.flags|=1,Us(t,e,i,r),e.child)}function d7(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!a8(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KG(t,e,s,i,r)):(t=z_(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:IA,n(o,i)&&t.ref===e.ref)return $c(t,e,r)}return e.flags|=1,t=af(s,i),t.ref=e.ref,t.return=e,e.child=t}function KG(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(IA(s,i)&&t.ref===e.ref)if(lo=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(lo=!0);else return e.lanes=t.lanes,$c(t,e,r)}return fT(t,e,n,i,r)}function JG(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(mm,Po),Po|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mi(mm,Po),Po|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,mi(mm,Po),Po|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,mi(mm,Po),Po|=i;return Us(t,e,r,n),e.child}function ZG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fT(t,e,n,i,r){var s=Ao(n)?jh:Cs.current;return s=Vm(e,s),Cm(e,r),n=$6(t,e,n,i,s,r),i=K6(),t!==null&&!lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$c(t,e,r)):(Ri&&i&&U6(e),e.flags|=1,Us(t,e,n,r),e.child)}function p7(t,e,n,i,r){if(Ao(n)){var s=!0;x3(e)}else s=!1;if(Cm(e,r),e.stateNode===null)L_(t,e),YG(e,n,i),cT(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ta(c):(c=Ao(n)?jh:Cs.current,c=Vm(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&l7(e,o,i,c),zu=!1;var h=e.memoizedState;o.state=h,C3(e,i,o,r),l=e.memoizedState,a!==i||h!==l||go.current||zu?(typeof u=="function"&&(lT(e,n,u,i),l=e.memoizedState),(a=zu||a7(e,n,a,i,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,MG(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ka(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ta(l):(l=Ao(n)?jh:Cs.current,l=Vm(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&l7(e,o,i,l),zu=!1,h=e.memoizedState,o.state=h,C3(e,i,o,r);var p=e.memoizedState;a!==f||h!==p||go.current||zu?(typeof d=="function"&&(lT(e,n,d,i),p=e.memoizedState),(c=zu||a7(e,n,c,i,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return hT(t,e,n,i,s,r)}function hT(t,e,n,i,r,s){ZG(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ZP(e,n,!1),$c(t,e,s);i=e.stateNode,RZ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=jm(e,t.child,null,s),e.child=jm(e,null,a,s)):Us(t,e,a,s),e.memoizedState=i.state,r&&ZP(e,n,!0),e.child}function eH(t){var e=t.stateNode;e.pendingContext?JP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JP(t,e.context,!1),j6(t,e.containerInfo)}function m7(t,e,n,i,r){return Wm(),N6(r),e.flags|=256,Us(t,e,n,i),e.child}var dT={dehydrated:null,treeContext:null,retryLane:0};function pT(t){return{baseLanes:t,cachePool:null,transitions:null}}function tH(t,e,n){var i=e.pendingProps,r=zi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),mi(zi,r&1),t===null)return oT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qE(o,i,0,null),t=Uh(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pT(n),e.memoizedState=dT,t):e8(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return PZ(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=af(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=af(a,s):(s=Uh(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?pT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dT,i}return s=t.child,t=s.sibling,i=af(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function e8(t,e){return e=qE({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function m2(t,e,n,i){return i!==null&&N6(i),jm(e,t.child,null,n),t=e8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PZ(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=T4(Error(ht(422))),m2(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=qE({mode:"visible",children:i.children},r,0,null),s=Uh(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&jm(e,t.child,null,o),e.child.memoizedState=pT(o),e.memoizedState=dT,s);if(!(e.mode&1))return m2(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ht(419)),i=T4(s,i,void 0),m2(t,e,o,i)}if(a=(o&t.childLanes)!==0,lo||a){if(i=Xr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,qc(t,r),ll(i,t,r,-1))}return o8(),i=T4(Error(ht(421))),m2(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=WZ.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Lo=nf(r.nextSibling),zo=e,Ri=!0,el=null,t!==null&&(ha[da++]=kc,ha[da++]=Nc,ha[da++]=Xh,kc=t.id,Nc=t.overflow,Xh=e),e=e8(e,i.children),e.flags|=4096,e)}function g7(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),aT(t.return,e,n)}function I4(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function nH(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Us(t,e,i.children,n),i=zi.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g7(t,n,e);else if(t.tag===19)g7(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(mi(zi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&b3(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),I4(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&b3(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}I4(e,!0,n,null,s);break;case"together":I4(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function L_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $c(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ht(153));if(e.child!==null){for(t=e.child,n=af(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=af(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DZ(t,e,n){switch(e.tag){case 3:eH(e),Wm();break;case 5:TG(e);break;case 1:Ao(e.type)&&x3(e);break;case 4:j6(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;mi(w3,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mi(zi,zi.current&1),e.flags|=128,null):n&e.child.childLanes?tH(t,e,n):(mi(zi,zi.current&1),t=$c(t,e,n),t!==null?t.sibling:null);mi(zi,zi.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return nH(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),mi(zi,zi.current),i)break;return null;case 22:case 23:return e.lanes=0,JG(t,e,n)}return $c(t,e,n)}var iH,mT,rH,sH;iH=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mT=function(){};rH=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Mh(Jl.current);var s=null;switch(n){case"input":r=z5(t,r),i=z5(t,i),s=[];break;case"select":r=Hi({},r,{value:void 0}),i=Hi({},i,{value:void 0}),s=[];break;case"textarea":r=N5(t,r),i=N5(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=v3)}H5(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(EA.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(EA.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xi("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sH=function(t,e,n,i){n!==i&&(e.flags|=4)};function v1(t,e){if(!Ri)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ms(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LZ(t,e,n){var i=e.pendingProps;switch(k6(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(e),null;case 1:return Ao(e.type)&&y3(),ms(e),null;case 3:return i=e.stateNode,Xm(),Ei(go),Ei(Cs),Y6(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(d2(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,el!==null&&(wT(el),el=null))),mT(t,e),ms(e),null;case 5:X6(e);var r=Mh(LA.current);if(n=e.type,t!==null&&e.stateNode!=null)rH(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ht(166));return ms(e),null}if(t=Mh(Jl.current),d2(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Xl]=e,i[PA]=s,t=(e.mode&1)!==0,n){case"dialog":xi("cancel",i),xi("close",i);break;case"iframe":case"object":case"embed":xi("load",i);break;case"video":case"audio":for(r=0;r<Fg.length;r++)xi(Fg[r],i);break;case"source":xi("error",i);break;case"img":case"image":case"link":xi("error",i),xi("load",i);break;case"details":xi("toggle",i);break;case"input":CP(i,s),xi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xi("invalid",i);break;case"textarea":MP(i,s),xi("invalid",i)}H5(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&h2(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&h2(i.textContent,a,t),r=["children",""+a]):EA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xi("scroll",i)}switch(n){case"input":r2(i),bP(i,s,!0);break;case"textarea":r2(i),TP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=v3)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Xl]=e,t[PA]=i,iH(t,e,!1,!1),e.stateNode=t;e:{switch(o=Q5(n,i),n){case"dialog":xi("cancel",t),xi("close",t),r=i;break;case"iframe":case"object":case"embed":xi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Fg.length;r++)xi(Fg[r],t);r=i;break;case"source":xi("error",t),r=i;break;case"img":case"image":case"link":xi("error",t),xi("load",t),r=i;break;case"details":xi("toggle",t),r=i;break;case"input":CP(t,i),r=z5(t,i),xi("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Hi({},i,{value:void 0}),xi("invalid",t);break;case"textarea":MP(t,i),r=N5(t,i),xi("invalid",t);break;default:r=i}H5(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ON(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LN(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wA(t,l):typeof l=="number"&&wA(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(EA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xi("scroll",t):l!=null&&S6(t,s,l,o))}switch(n){case"input":r2(t),bP(t,i,!1);break;case"textarea":r2(t),TP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+mf(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?_m(t,!!i.multiple,s,!1):i.defaultValue!=null&&_m(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=v3)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ms(e),null;case 6:if(t&&e.stateNode!=null)sH(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ht(166));if(n=Mh(LA.current),Mh(Jl.current),d2(e)){if(i=e.stateNode,n=e.memoizedProps,i[Xl]=e,(s=i.nodeValue!==n)&&(t=zo,t!==null))switch(t.tag){case 3:h2(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&h2(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Xl]=e,e.stateNode=i}return ms(e),null;case 13:if(Ei(zi),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ri&&Lo!==null&&e.mode&1&&!(e.flags&128))wG(),Wm(),e.flags|=98560,s=!1;else if(s=d2(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ht(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ht(317));s[Xl]=e}else Wm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ms(e),s=!1}else el!==null&&(wT(el),el=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||zi.current&1?Ir===0&&(Ir=3):o8())),e.updateQueue!==null&&(e.flags|=4),ms(e),null);case 4:return Xm(),mT(t,e),t===null&&BA(e.stateNode.containerInfo),ms(e),null;case 10:return Q6(e.type._context),ms(e),null;case 17:return Ao(e.type)&&y3(),ms(e),null;case 19:if(Ei(zi),s=e.memoizedState,s===null)return ms(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)v1(s,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=b3(t),o!==null){for(e.flags|=128,v1(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mi(zi,zi.current&1|2),e.child}t=t.sibling}s.tail!==null&&lr()>qm&&(e.flags|=128,i=!0,v1(s,!1),e.lanes=4194304)}else{if(!i)if(t=b3(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),v1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ri)return ms(e),null}else 2*lr()-s.renderingStartTime>qm&&n!==1073741824&&(e.flags|=128,i=!0,v1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lr(),e.sibling=null,n=zi.current,mi(zi,i?n&1|2:n&1),e):(ms(e),null);case 22:case 23:return s8(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Po&1073741824&&(ms(e),e.subtreeFlags&6&&(e.flags|=8192)):ms(e),null;case 24:return null;case 25:return null}throw Error(ht(156,e.tag))}function FZ(t,e){switch(k6(e),e.tag){case 1:return Ao(e.type)&&y3(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xm(),Ei(go),Ei(Cs),Y6(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X6(e),null;case 13:if(Ei(zi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ht(340));Wm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ei(zi),null;case 4:return Xm(),null;case 10:return Q6(e.type._context),null;case 22:case 23:return s8(),null;case 24:return null;default:return null}}var g2=!1,_s=!1,OZ=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function pm(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xi(t,e,i)}else n.current=null}function gT(t,e,n){try{n()}catch(i){Xi(t,e,i)}}var A7=!1;function zZ(t,e){if(Z5=m3,t=uG(),z6(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eT={focusedElem:t,selectionRange:n},m3=!1,Rt=e;Rt!==null;)if(e=Rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rt=t;else for(;Rt!==null;){e=Rt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,A=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ka(e.type,g),A);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(w){Xi(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Rt=t;break}Rt=e.return}return p=A7,A7=!1,p}function Kg(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&gT(e,n,s)}r=r.next}while(r!==i)}}function XE(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function AT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oH(t){var e=t.alternate;e!==null&&(t.alternate=null,oH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xl],delete e[PA],delete e[iT],delete e[yZ],delete e[xZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aH(t){return t.tag===5||t.tag===3||t.tag===4}function v7(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vT(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=v3));else if(i!==4&&(t=t.child,t!==null))for(vT(t,e,n),t=t.sibling;t!==null;)vT(t,e,n),t=t.sibling}function yT(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(yT(t,e,n),t=t.sibling;t!==null;)yT(t,e,n),t=t.sibling}var os=null,Za=!1;function vu(t,e,n){for(n=n.child;n!==null;)lH(t,e,n),n=n.sibling}function lH(t,e,n){if(Kl&&typeof Kl.onCommitFiberUnmount=="function")try{Kl.onCommitFiberUnmount(kE,n)}catch{}switch(n.tag){case 5:_s||pm(n,e);case 6:var i=os,r=Za;os=null,vu(t,e,n),os=i,Za=r,os!==null&&(Za?(t=os,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):os.removeChild(n.stateNode));break;case 18:os!==null&&(Za?(t=os,n=n.stateNode,t.nodeType===8?E4(t.parentNode,n):t.nodeType===1&&E4(t,n),MA(t)):E4(os,n.stateNode));break;case 4:i=os,r=Za,os=n.stateNode.containerInfo,Za=!0,vu(t,e,n),os=i,Za=r;break;case 0:case 11:case 14:case 15:if(!_s&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gT(n,e,o),r=r.next}while(r!==i)}vu(t,e,n);break;case 1:if(!_s&&(pm(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Xi(n,e,a)}vu(t,e,n);break;case 21:vu(t,e,n);break;case 22:n.mode&1?(_s=(i=_s)||n.memoizedState!==null,vu(t,e,n),_s=i):vu(t,e,n);break;default:vu(t,e,n)}}function y7(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OZ),e.forEach(function(i){var r=jZ.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ka(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:os=a.stateNode,Za=!1;break e;case 3:os=a.stateNode.containerInfo,Za=!0;break e;case 4:os=a.stateNode.containerInfo,Za=!0;break e}a=a.return}if(os===null)throw Error(ht(160));lH(s,o,r),os=null,Za=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Xi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cH(e,t),e=e.sibling}function cH(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ka(e,t),Il(t),i&4){try{Kg(3,t,t.return),XE(3,t)}catch(g){Xi(t,t.return,g)}try{Kg(5,t,t.return)}catch(g){Xi(t,t.return,g)}}break;case 1:ka(e,t),Il(t),i&512&&n!==null&&pm(n,n.return);break;case 5:if(ka(e,t),Il(t),i&512&&n!==null&&pm(n,n.return),t.flags&32){var r=t.stateNode;try{wA(r,"")}catch(g){Xi(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&RN(r,s),Q5(a,o);var c=Q5(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?ON(r,f):u==="dangerouslySetInnerHTML"?LN(r,f):u==="children"?wA(r,f):S6(r,u,f,c)}switch(a){case"input":U5(r,s);break;case"textarea":PN(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?_m(r,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?_m(r,!!s.multiple,s.defaultValue,!0):_m(r,!!s.multiple,s.multiple?[]:"",!1))}r[PA]=s}catch(g){Xi(t,t.return,g)}}break;case 6:if(ka(e,t),Il(t),i&4){if(t.stateNode===null)throw Error(ht(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Xi(t,t.return,g)}}break;case 3:if(ka(e,t),Il(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{MA(e.containerInfo)}catch(g){Xi(t,t.return,g)}break;case 4:ka(e,t),Il(t);break;case 13:ka(e,t),Il(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(i8=lr())),i&4&&y7(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(_s=(c=_s)||u,ka(e,t),_s=c):ka(e,t),Il(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Rt=t,u=t.child;u!==null;){for(f=Rt=u;Rt!==null;){switch(h=Rt,d=h.child,h.tag){case 0:case 11:case 14:case 15:Kg(4,h,h.return);break;case 1:pm(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Xi(i,n,g)}}break;case 5:pm(h,h.return);break;case 22:if(h.memoizedState!==null){_7(f);continue}}d!==null?(d.return=h,Rt=d):_7(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=FN("display",o))}catch(g){Xi(t,t.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Xi(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ka(e,t),Il(t),i&4&&y7(t);break;case 21:break;default:ka(e,t),Il(t)}}function Il(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aH(n)){var i=n;break e}n=n.return}throw Error(ht(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(wA(r,""),i.flags&=-33);var s=v7(t);yT(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=v7(t);vT(t,a,o);break;default:throw Error(ht(161))}}catch(l){Xi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UZ(t,e,n){Rt=t,uH(t)}function uH(t,e,n){for(var i=(t.mode&1)!==0;Rt!==null;){var r=Rt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||g2;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||_s;a=g2;var c=_s;if(g2=o,(_s=l)&&!c)for(Rt=r;Rt!==null;)o=Rt,l=o.child,o.tag===22&&o.memoizedState!==null?E7(r):l!==null?(l.return=o,Rt=l):E7(r);for(;s!==null;)Rt=s,uH(s),s=s.sibling;Rt=r,g2=a,_s=c}x7(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Rt=s):x7(t)}}function x7(t){for(;Rt!==null;){var e=Rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_s||XE(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_s)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ka(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&r7(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r7(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&MA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}_s||e.flags&512&&AT(e)}catch(h){Xi(e,e.return,h)}}if(e===t){Rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Rt=n;break}Rt=e.return}}function _7(t){for(;Rt!==null;){var e=Rt;if(e===t){Rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Rt=n;break}Rt=e.return}}function E7(t){for(;Rt!==null;){var e=Rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{XE(4,e)}catch(l){Xi(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Xi(e,r,l)}}var s=e.return;try{AT(e)}catch(l){Xi(e,s,l)}break;case 5:var o=e.return;try{AT(e)}catch(l){Xi(e,o,l)}}}catch(l){Xi(e,e.return,l)}if(e===t){Rt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Rt=a;break}Rt=e.return}}var kZ=Math.ceil,I3=ru.ReactCurrentDispatcher,t8=ru.ReactCurrentOwner,Ca=ru.ReactCurrentBatchConfig,Un=0,Xr=null,_r=null,ls=0,Po=0,mm=Tf(0),Ir=0,UA=null,qh=0,YE=0,n8=0,Jg=null,ao=null,i8=0,qm=1/0,Ic=null,B3=!1,xT=null,sf=null,A2=!1,Vu=null,R3=0,Zg=0,_T=null,F_=-1,O_=0;function Ws(){return Un&6?lr():F_!==-1?F_:F_=lr()}function of(t){return t.mode&1?Un&2&&ls!==0?ls&-ls:EZ.transition!==null?(O_===0&&(O_=YN()),O_):(t=Zn,t!==0||(t=window.event,t=t===void 0?16:tG(t.type)),t):1}function ll(t,e,n,i){if(50<Zg)throw Zg=0,_T=null,Error(ht(185));Cv(t,n,i),(!(Un&2)||t!==Xr)&&(t===Xr&&(!(Un&2)&&(YE|=n),Ir===4&&Nu(t,ls)),vo(t,i),n===1&&Un===0&&!(e.mode&1)&&(qm=lr()+500,VE&&If()))}function vo(t,e){var n=t.callbackNode;EJ(t,e);var i=p3(t,t===Xr?ls:0);if(i===0)n!==null&&RP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&RP(n),e===1)t.tag===0?_Z(w7.bind(null,t)):xG(w7.bind(null,t)),AZ(function(){!(Un&6)&&If()}),n=null;else{switch(qN(i)){case 1:n=I6;break;case 4:n=jN;break;case 16:n=d3;break;case 536870912:n=XN;break;default:n=d3}n=vH(n,fH.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fH(t,e){if(F_=-1,O_=0,Un&6)throw Error(ht(327));var n=t.callbackNode;if(bm()&&t.callbackNode!==n)return null;var i=p3(t,t===Xr?ls:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=P3(t,i);else{e=i;var r=Un;Un|=2;var s=dH();(Xr!==t||ls!==e)&&(Ic=null,qm=lr()+500,zh(t,e));do try{HZ();break}catch(a){hH(t,a)}while(!0);H6(),I3.current=s,Un=r,_r!==null?e=0:(Xr=null,ls=0,e=Ir)}if(e!==0){if(e===2&&(r=Y5(t),r!==0&&(i=r,e=ET(t,r))),e===1)throw n=UA,zh(t,0),Nu(t,i),vo(t,lr()),n;if(e===6)Nu(t,i);else{if(r=t.current.alternate,!(i&30)&&!NZ(r)&&(e=P3(t,i),e===2&&(s=Y5(t),s!==0&&(i=s,e=ET(t,s))),e===1))throw n=UA,zh(t,0),Nu(t,i),vo(t,lr()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ht(345));case 2:_h(t,ao,Ic);break;case 3:if(Nu(t,i),(i&130023424)===i&&(e=i8+500-lr(),10<e)){if(p3(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ws(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=nT(_h.bind(null,t,ao,Ic),e);break}_h(t,ao,Ic);break;case 4:if(Nu(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-al(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=lr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kZ(i/1960))-i,10<i){t.timeoutHandle=nT(_h.bind(null,t,ao,Ic),i);break}_h(t,ao,Ic);break;case 5:_h(t,ao,Ic);break;default:throw Error(ht(329))}}}return vo(t,lr()),t.callbackNode===n?fH.bind(null,t):null}function ET(t,e){var n=Jg;return t.current.memoizedState.isDehydrated&&(zh(t,e).flags|=256),t=P3(t,e),t!==2&&(e=ao,ao=n,e!==null&&wT(e)),t}function wT(t){ao===null?ao=t:ao.push.apply(ao,t)}function NZ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!dl(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nu(t,e){for(e&=~n8,e&=~YE,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-al(e),i=1<<n;t[n]=-1,e&=~i}}function w7(t){if(Un&6)throw Error(ht(327));bm();var e=p3(t,0);if(!(e&1))return vo(t,lr()),null;var n=P3(t,e);if(t.tag!==0&&n===2){var i=Y5(t);i!==0&&(e=i,n=ET(t,i))}if(n===1)throw n=UA,zh(t,0),Nu(t,e),vo(t,lr()),n;if(n===6)throw Error(ht(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_h(t,ao,Ic),vo(t,lr()),null}function r8(t,e){var n=Un;Un|=1;try{return t(e)}finally{Un=n,Un===0&&(qm=lr()+500,VE&&If())}}function $h(t){Vu!==null&&Vu.tag===0&&!(Un&6)&&bm();var e=Un;Un|=1;var n=Ca.transition,i=Zn;try{if(Ca.transition=null,Zn=1,t)return t()}finally{Zn=i,Ca.transition=n,Un=e,!(Un&6)&&If()}}function s8(){Po=mm.current,Ei(mm)}function zh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gZ(n)),_r!==null)for(n=_r.return;n!==null;){var i=n;switch(k6(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&y3();break;case 3:Xm(),Ei(go),Ei(Cs),Y6();break;case 5:X6(i);break;case 4:Xm();break;case 13:Ei(zi);break;case 19:Ei(zi);break;case 10:Q6(i.type._context);break;case 22:case 23:s8()}n=n.return}if(Xr=t,_r=t=af(t.current,null),ls=Po=e,Ir=0,UA=null,n8=YE=qh=0,ao=Jg=null,bh!==null){for(e=0;e<bh.length;e++)if(n=bh[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}bh=null}return t}function hH(t,e){do{var n=_r;try{if(H6(),P_.current=T3,M3){for(var i=Ni.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}M3=!1}if(Yh=0,Vr=Mr=Ni=null,$g=!1,FA=0,t8.current=null,n===null||n.return===null){Ir=1,UA=e,_r=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ls,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=u7(o);if(d!==null){d.flags&=-257,f7(d,o,a,s,e),d.mode&1&&c7(s,c,e),e=d,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){c7(s,c,e),o8();break e}l=Error(ht(426))}}else if(Ri&&a.mode&1){var A=u7(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),f7(A,o,a,s,e),N6(Ym(l,a));break e}}s=l=Ym(l,a),Ir!==4&&(Ir=2),Jg===null?Jg=[s]:Jg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=qG(s,l,e);i7(s,m);break e;case 1:a=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sf===null||!sf.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=$G(s,a,e);i7(s,w);break e}}s=s.return}while(s!==null)}mH(n)}catch(S){e=S,_r===n&&n!==null&&(_r=n=n.return);continue}break}while(!0)}function dH(){var t=I3.current;return I3.current=T3,t===null?T3:t}function o8(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Xr===null||!(qh&268435455)&&!(YE&268435455)||Nu(Xr,ls)}function P3(t,e){var n=Un;Un|=2;var i=dH();(Xr!==t||ls!==e)&&(Ic=null,zh(t,e));do try{GZ();break}catch(r){hH(t,r)}while(!0);if(H6(),Un=n,I3.current=i,_r!==null)throw Error(ht(261));return Xr=null,ls=0,Ir}function GZ(){for(;_r!==null;)pH(_r)}function HZ(){for(;_r!==null&&!dJ();)pH(_r)}function pH(t){var e=AH(t.alternate,t,Po);t.memoizedProps=t.pendingProps,e===null?mH(t):_r=e,t8.current=null}function mH(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FZ(n,e),n!==null){n.flags&=32767,_r=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,_r=null;return}}else if(n=LZ(n,e,Po),n!==null){_r=n;return}if(e=e.sibling,e!==null){_r=e;return}_r=e=t}while(e!==null);Ir===0&&(Ir=5)}function _h(t,e,n){var i=Zn,r=Ca.transition;try{Ca.transition=null,Zn=1,QZ(t,e,n,i)}finally{Ca.transition=r,Zn=i}return null}function QZ(t,e,n,i){do bm();while(Vu!==null);if(Un&6)throw Error(ht(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ht(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wJ(t,s),t===Xr&&(_r=Xr=null,ls=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||A2||(A2=!0,vH(d3,function(){return bm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ca.transition,Ca.transition=null;var o=Zn;Zn=1;var a=Un;Un|=4,t8.current=null,zZ(t,n),cH(n,t),cZ(eT),m3=!!Z5,eT=Z5=null,t.current=n,UZ(n),pJ(),Un=a,Zn=o,Ca.transition=s}else t.current=n;if(A2&&(A2=!1,Vu=t,R3=r),s=t.pendingLanes,s===0&&(sf=null),AJ(n.stateNode),vo(t,lr()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(B3)throw B3=!1,t=xT,xT=null,t;return R3&1&&t.tag!==0&&bm(),s=t.pendingLanes,s&1?t===_T?Zg++:(Zg=0,_T=t):Zg=0,If(),null}function bm(){if(Vu!==null){var t=qN(R3),e=Ca.transition,n=Zn;try{if(Ca.transition=null,Zn=16>t?16:t,Vu===null)var i=!1;else{if(t=Vu,Vu=null,R3=0,Un&6)throw Error(ht(331));var r=Un;for(Un|=4,Rt=t.current;Rt!==null;){var s=Rt,o=s.child;if(Rt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Rt=c;Rt!==null;){var u=Rt;switch(u.tag){case 0:case 11:case 15:Kg(8,u,s)}var f=u.child;if(f!==null)f.return=u,Rt=f;else for(;Rt!==null;){u=Rt;var h=u.sibling,d=u.return;if(oH(u),u===c){Rt=null;break}if(h!==null){h.return=d,Rt=h;break}Rt=d}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var A=g.sibling;g.sibling=null,g=A}while(g!==null)}}Rt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Rt=o;else e:for(;Rt!==null;){if(s=Rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kg(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Rt=m;break e}Rt=s.return}}var v=t.current;for(Rt=v;Rt!==null;){o=Rt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Rt=y;else e:for(o=v;Rt!==null;){if(a=Rt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:XE(9,a)}}catch(S){Xi(a,a.return,S)}if(a===o){Rt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Rt=w;break e}Rt=a.return}}if(Un=r,If(),Kl&&typeof Kl.onPostCommitFiberRoot=="function")try{Kl.onPostCommitFiberRoot(kE,t)}catch{}i=!0}return i}finally{Zn=n,Ca.transition=e}}return!1}function S7(t,e,n){e=Ym(n,e),e=qG(t,e,1),t=rf(t,e,1),e=Ws(),t!==null&&(Cv(t,1,e),vo(t,e))}function Xi(t,e,n){if(t.tag===3)S7(t,t,n);else for(;e!==null;){if(e.tag===3){S7(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sf===null||!sf.has(i))){t=Ym(n,t),t=$G(e,t,1),e=rf(e,t,1),t=Ws(),e!==null&&(Cv(e,1,t),vo(e,t));break}}e=e.return}}function VZ(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ws(),t.pingedLanes|=t.suspendedLanes&n,Xr===t&&(ls&n)===n&&(Ir===4||Ir===3&&(ls&130023424)===ls&&500>lr()-i8?zh(t,0):n8|=n),vo(t,e)}function gH(t,e){e===0&&(t.mode&1?(e=a2,a2<<=1,!(a2&130023424)&&(a2=4194304)):e=1);var n=Ws();t=qc(t,e),t!==null&&(Cv(t,e,n),vo(t,n))}function WZ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gH(t,n)}function jZ(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ht(314))}i!==null&&i.delete(e),gH(t,n)}var AH;AH=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||go.current)lo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return lo=!1,DZ(t,e,n);lo=!!(t.flags&131072)}else lo=!1,Ri&&e.flags&1048576&&_G(e,E3,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;L_(t,e),t=e.pendingProps;var r=Vm(e,Cs.current);Cm(e,n),r=$6(null,e,i,t,r,n);var s=K6();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ao(i)?(s=!0,x3(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,W6(e),r.updater=jE,e.stateNode=r,r._reactInternals=e,cT(e,i,t,n),e=hT(null,e,i,!0,s,n)):(e.tag=0,Ri&&s&&U6(e),Us(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(L_(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=YZ(i),t=Ka(i,t),r){case 0:e=fT(null,e,i,t,n);break e;case 1:e=p7(null,e,i,t,n);break e;case 11:e=h7(null,e,i,t,n);break e;case 14:e=d7(null,e,i,Ka(i.type,t),n);break e}throw Error(ht(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ka(i,r),fT(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ka(i,r),p7(t,e,i,r,n);case 3:e:{if(eH(e),t===null)throw Error(ht(387));i=e.pendingProps,s=e.memoizedState,r=s.element,MG(t,e),C3(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ym(Error(ht(423)),e),e=m7(t,e,i,n,r);break e}else if(i!==r){r=Ym(Error(ht(424)),e),e=m7(t,e,i,n,r);break e}else for(Lo=nf(e.stateNode.containerInfo.firstChild),zo=e,Ri=!0,el=null,n=CG(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wm(),i===r){e=$c(t,e,n);break e}Us(t,e,i,n)}e=e.child}return e;case 5:return TG(e),t===null&&oT(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,tT(i,r)?o=null:s!==null&&tT(i,s)&&(e.flags|=32),ZG(t,e),Us(t,e,o,n),e.child;case 6:return t===null&&oT(e),null;case 13:return tH(t,e,n);case 4:return j6(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=jm(e,null,i,n):Us(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ka(i,r),h7(t,e,i,r,n);case 7:return Us(t,e,e.pendingProps,n),e.child;case 8:return Us(t,e,e.pendingProps.children,n),e.child;case 12:return Us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,mi(w3,i._currentValue),i._currentValue=o,s!==null)if(dl(s.value,o)){if(s.children===r.children&&!go.current){e=$c(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Qc(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),aT(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ht(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),aT(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Us(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Cm(e,n),r=Ta(r),i=i(r),e.flags|=1,Us(t,e,i,n),e.child;case 14:return i=e.type,r=Ka(i,e.pendingProps),r=Ka(i.type,r),d7(t,e,i,r,n);case 15:return KG(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ka(i,r),L_(t,e),e.tag=1,Ao(i)?(t=!0,x3(e)):t=!1,Cm(e,n),YG(e,i,r),cT(e,i,r,n),hT(null,e,i,!0,t,n);case 19:return nH(t,e,n);case 22:return JG(t,e,n)}throw Error(ht(156,e.tag))};function vH(t,e){return WN(t,e)}function XZ(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(t,e,n,i){return new XZ(t,e,n,i)}function a8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YZ(t){if(typeof t=="function")return a8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===b6)return 11;if(t===M6)return 14}return 2}function af(t,e){var n=t.alternate;return n===null?(n=xa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function z_(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")a8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sm:return Uh(n.children,r,s,e);case C6:o=8,r|=8;break;case D5:return t=xa(12,n,e,r|2),t.elementType=D5,t.lanes=s,t;case L5:return t=xa(13,n,e,r),t.elementType=L5,t.lanes=s,t;case F5:return t=xa(19,n,e,r),t.elementType=F5,t.lanes=s,t;case TN:return qE(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bN:o=10;break e;case MN:o=9;break e;case b6:o=11;break e;case M6:o=14;break e;case Ou:o=16,i=null;break e}throw Error(ht(130,t==null?t:typeof t,""))}return e=xa(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Uh(t,e,n,i){return t=xa(7,t,i,e),t.lanes=n,t}function qE(t,e,n,i){return t=xa(22,t,i,e),t.elementType=TN,t.lanes=n,t.stateNode={isHidden:!1},t}function B4(t,e,n){return t=xa(6,t,null,e),t.lanes=n,t}function R4(t,e,n){return e=xa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qZ(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f4(0),this.expirationTimes=f4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f4(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function l8(t,e,n,i,r,s,o,a,l){return t=new qZ(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xa(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},W6(s),t}function $Z(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rm,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function yH(t){if(!t)return gf;t=t._reactInternals;e:{if(ud(t)!==t||t.tag!==1)throw Error(ht(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ao(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ht(171))}if(t.tag===1){var n=t.type;if(Ao(n))return yG(t,n,e)}return e}function xH(t,e,n,i,r,s,o,a,l){return t=l8(n,i,!0,t,r,s,o,a,l),t.context=yH(null),n=t.current,i=Ws(),r=of(n),s=Qc(i,r),s.callback=e??null,rf(n,s,r),t.current.lanes=r,Cv(t,r,i),vo(t,i),t}function $E(t,e,n,i){var r=e.current,s=Ws(),o=of(r);return n=yH(n),e.context===null?e.context=n:e.pendingContext=n,e=Qc(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=rf(r,e,o),t!==null&&(ll(t,r,o,s),R_(t,r,o)),o}function D3(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C7(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function c8(t,e){C7(t,e),(t=t.alternate)&&C7(t,e)}function KZ(){return null}var _H=typeof reportError=="function"?reportError:function(t){console.error(t)};function u8(t){this._internalRoot=t}KE.prototype.render=u8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ht(409));$E(t,e,null,null)};KE.prototype.unmount=u8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$h(function(){$E(null,t,null,null)}),e[Yc]=null}};function KE(t){this._internalRoot=t}KE.prototype.unstable_scheduleHydration=function(t){if(t){var e=JN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ku.length&&e!==0&&e<ku[n].priority;n++);ku.splice(n,0,t),n===0&&eG(t)}};function f8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function JE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b7(){}function JZ(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=D3(o);s.call(c)}}var o=xH(e,i,t,0,null,!1,!1,"",b7);return t._reactRootContainer=o,t[Yc]=o.current,BA(t.nodeType===8?t.parentNode:t),$h(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=D3(l);a.call(c)}}var l=l8(t,0,!1,null,null,!1,!1,"",b7);return t._reactRootContainer=l,t[Yc]=l.current,BA(t.nodeType===8?t.parentNode:t),$h(function(){$E(e,l,n,i)}),l}function ZE(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=D3(o);a.call(l)}}$E(e,o,t,r)}else o=JZ(n,e,t,r,i);return D3(o)}$N=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lg(e.pendingLanes);n!==0&&(B6(e,n|1),vo(e,lr()),!(Un&6)&&(qm=lr()+500,If()))}break;case 13:$h(function(){var i=qc(t,1);if(i!==null){var r=Ws();ll(i,t,1,r)}}),c8(t,1)}};R6=function(t){if(t.tag===13){var e=qc(t,134217728);if(e!==null){var n=Ws();ll(e,t,134217728,n)}c8(t,134217728)}};KN=function(t){if(t.tag===13){var e=of(t),n=qc(t,e);if(n!==null){var i=Ws();ll(n,t,e,i)}c8(t,e)}};JN=function(){return Zn};ZN=function(t,e){var n=Zn;try{return Zn=t,e()}finally{Zn=n}};W5=function(t,e,n){switch(e){case"input":if(U5(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=QE(i);if(!r)throw Error(ht(90));BN(i),U5(i,r)}}}break;case"textarea":PN(t,n);break;case"select":e=n.value,e!=null&&_m(t,!!n.multiple,e,!1)}};kN=r8;NN=$h;var ZZ={usingClientEntryPoint:!1,Events:[Mv,cm,QE,zN,UN,r8]},y1={findFiberByHostInstance:Ch,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eee={bundleType:y1.bundleType,version:y1.version,rendererPackageName:y1.rendererPackageName,rendererConfig:y1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ru.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QN(t),t===null?null:t.stateNode},findFiberByHostInstance:y1.findFiberByHostInstance||KZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var v2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!v2.isDisabled&&v2.supportsFiber)try{kE=v2.inject(eee),Kl=v2}catch{}}Ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZZ;Ho.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f8(e))throw Error(ht(200));return $Z(t,e,null,n)};Ho.createRoot=function(t,e){if(!f8(t))throw Error(ht(299));var n=!1,i="",r=_H;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=l8(t,1,!1,null,null,n,!1,i,r),t[Yc]=e.current,BA(t.nodeType===8?t.parentNode:t),new u8(e)};Ho.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ht(188)):(t=Object.keys(t).join(","),Error(ht(268,t)));return t=QN(e),t=t===null?null:t.stateNode,t};Ho.flushSync=function(t){return $h(t)};Ho.hydrate=function(t,e,n){if(!JE(e))throw Error(ht(200));return ZE(null,t,e,!0,n)};Ho.hydrateRoot=function(t,e,n){if(!f8(t))throw Error(ht(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=_H;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xH(e,null,t,1,n??null,r,!1,s,o),t[Yc]=e.current,BA(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new KE(e)};Ho.render=function(t,e,n){if(!JE(e))throw Error(ht(200));return ZE(null,t,e,!1,n)};Ho.unmountComponentAtNode=function(t){if(!JE(t))throw Error(ht(40));return t._reactRootContainer?($h(function(){ZE(null,null,t,!1,function(){t._reactRootContainer=null,t[Yc]=null})}),!0):!1};Ho.unstable_batchedUpdates=r8;Ho.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!JE(n))throw Error(ht(200));if(t==null||t._reactInternals===void 0)throw Error(ht(38));return ZE(t,e,n,!1,i)};Ho.version="18.3.1-next-f1338f8080-20240426";function EH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EH)}catch(t){console.error(t)}}EH(),EN.exports=Ho;var tee=EN.exports,h8,M7=tee;h8=R5.createRoot=M7.createRoot,R5.hydrateRoot=M7.hydrateRoot;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yl="166",pa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wH=0,ST=1,SH=2,nee=3,CH=0,ew=1,eA=2,Ja=3,js=0,Ki=1,Qn=2,ba=0,lf=1,L3=2,CT=3,bT=4,tw=5,Gu=100,bH=101,MH=102,TH=103,IH=104,BH=200,nw=201,RH=202,PH=203,kA=204,F3=205,DH=206,LH=207,FH=208,OH=209,zH=210,UH=211,kH=212,NH=213,GH=214,HH=0,QH=1,VH=2,NA=3,WH=4,jH=5,XH=6,YH=7,Iv=0,qH=1,$H=2,cl=0,KH=1,JH=2,ZH=3,d8=4,eQ=5,tQ=6,nQ=7,MT="attached",iQ="detached",Af=300,pl=301,vf=302,yf=303,GA=304,y0=306,qr=1e3,wi=1001,$m=1002,fn=1003,iw=1004,iee=1004,Th=1005,ree=1005,Vt=1006,Mm=1007,see=1007,Qs=1008,TT=1008,Jn=1009,Km=1010,Bv=1011,ic=1012,cf=1013,Ss=1014,vn=1015,On=1016,rw=1017,sw=1018,Kh=1020,p8=35902,m8=1021,g8=1022,In=1023,A8=1024,v8=1025,Zl=1026,Jh=1027,co=1028,x0=1029,Gc=1030,_0=1031,oee=1032,xf=1033,Tm=33776,tA=33777,nA=33778,Im=33779,HA=35840,O3=35841,QA=35842,z3=35843,VA=36196,WA=37492,jA=37496,XA=37808,U3=37809,k3=37810,N3=37811,Jm=37812,G3=37813,H3=37814,Q3=37815,V3=37816,W3=37817,j3=37818,X3=37819,Y3=37820,q3=37821,Bm=36492,$3=36494,K3=36495,y8=36283,J3=36284,Z3=36285,eE=36286,rQ=2200,sQ=2201,oQ=2202,Zm=2300,e0=2301,U_=2302,Ih=2400,Bh=2401,YA=2402,ow=2500,x8=2501,aQ=0,_8=1,tE=2,lQ=3200,aw=3201,Bf=0,cQ=1,Oc="",oo="srgb",Ba="srgb-linear",lw="display-p3",Rv="display-p3-linear",qA="linear",di="srgb",$A="rec709",KA="p3",aee=0,Hl=7680,k_=7681,lee=7682,cee=7683,uee=34055,fee=34056,hee=5386,dee=512,pee=513,uQ=514,mee=515,gee=516,fQ=517,Aee=518,nE=519,hQ=512,dQ=513,pQ=514,E8=515,mQ=516,gQ=517,AQ=518,vQ=519,JA=35044,ws=35048,vee=35040,yee=35045,xee=35049,_ee=35041,Eee=35046,wee=35050,See=35042,Cee="100",IT="300 es",$l=2e3,ZA=2001;let $r=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let T7=1234567;const kh=Math.PI/180,t0=180/Math.PI;function Uo(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(gs[t&255]+gs[t>>8&255]+gs[t>>16&255]+gs[t>>24&255]+"-"+gs[e&255]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[n&63|128]+gs[n>>8&255]+"-"+gs[n>>16&255]+gs[n>>24&255]+gs[i&255]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]).toLowerCase()}function $i(t,e,n){return Math.max(e,Math.min(n,t))}function w8(t,e){return(t%e+e)%e}function bee(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function Mee(t,e,n){return t!==e?(n-t)/(e-t):0}function iA(t,e,n){return(1-n)*t+n*e}function Tee(t,e,n,i){return iA(t,e,1-Math.exp(-n*i))}function Iee(t,e=1){return e-Math.abs(w8(t,e*2)-e)}function Bee(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Ree(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Pee(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Dee(t,e){return t+Math.random()*(e-t)}function Lee(t){return t*(.5-Math.random())}function Fee(t){t!==void 0&&(T7=t);let e=T7+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Oee(t){return t*kh}function zee(t){return t*t0}function Uee(t){return(t&t-1)===0&&t!==0}function kee(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Nee(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Gee(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*u,l*f,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Gs(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function gn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const zt={DEG2RAD:kh,RAD2DEG:t0,generateUUID:Uo,clamp:$i,euclideanModulo:w8,mapLinear:bee,inverseLerp:Mee,lerp:iA,damp:Tee,pingpong:Iee,smoothstep:Bee,smootherstep:Ree,randInt:Pee,randFloat:Dee,randFloatSpread:Lee,seededRandom:Fee,degToRad:Oee,radToDeg:zee,isPowerOfTwo:Uee,ceilPowerOfTwo:kee,floorPowerOfTwo:Nee,setQuaternionFromProperEuler:Gee,normalize:gn,denormalize:Gs};class Ie{constructor(e=0,n=0){Ie.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos($i(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jt{constructor(e,n,i,r,s,o,a,l,c){jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,c)}set(e,n,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],g=r[0],A=r[3],m=r[6],v=r[1],y=r[4],w=r[7],S=r[2],C=r[5],b=r[8];return s[0]=o*g+a*v+l*S,s[3]=o*A+a*y+l*C,s[6]=o*m+a*w+l*b,s[1]=c*g+u*v+f*S,s[4]=c*A+u*y+f*C,s[7]=c*m+u*w+f*b,s[2]=h*g+d*v+p*S,s[5]=h*A+d*y+p*C,s[8]=h*m+d*w+p*b,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,d=c*s-o*l,p=n*f+i*h+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=f*g,e[1]=(r*c-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(u*n-r*l)*g,e[5]=(r*s-a*n)*g,e[6]=d*g,e[7]=(i*l-c*n)*g,e[8]=(o*n-i*s)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(P4.makeScale(e,n)),this}rotate(e){return this.premultiply(P4.makeRotation(-e)),this}translate(e,n){return this.premultiply(P4.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const P4=new jt;function yQ(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Hee={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gm(t,e){return new Hee[t](e)}function ev(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function xQ(){const t=ev("canvas");return t.style.display="block",t}const I7={};function S8(t){t in I7||(I7[t]=!0,console.warn(t))}function Qee(t,e,n){return new Promise(function(i,r){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}}setTimeout(s,n)})}const B7=new jt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),R7=new jt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),y2={[Ba]:{transfer:qA,primaries:$A,toReference:t=>t,fromReference:t=>t},[oo]:{transfer:di,primaries:$A,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Rv]:{transfer:qA,primaries:KA,toReference:t=>t.applyMatrix3(R7),fromReference:t=>t.applyMatrix3(B7)},[lw]:{transfer:di,primaries:KA,toReference:t=>t.convertSRGBToLinear().applyMatrix3(R7),fromReference:t=>t.applyMatrix3(B7).convertLinearToSRGB()}},Vee=new Set([Ba,Rv]),Xn={enabled:!0,_workingColorSpace:Ba,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Vee.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=y2[e].toReference,r=y2[n].fromReference;return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return y2[t].primaries},getTransfer:function(t){return t===Oc?qA:y2[t].transfer}};function Rm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function D4(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Od;class _Q{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Od===void 0&&(Od=ev("canvas")),Od.width=e.width,Od.height=e.height;const i=Od.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Od}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=ev("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Rm(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Rm(n[i]/255)*255):n[i]=Rm(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Wee=0;class Rh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Wee++}),this.uuid=Uo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(L4(r[o].image)):s.push(L4(r[o]))}else s=L4(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function L4(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?_Q.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jee=0,Bn=class N_ extends $r{constructor(e=N_.DEFAULT_IMAGE,n=N_.DEFAULT_MAPPING,i=wi,r=wi,s=Vt,o=Qs,a=In,l=Jn,c=N_.DEFAULT_ANISOTROPY,u=Oc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jee++}),this.uuid=Uo(),this.name="",this.source=new Rh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Af)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case qr:e.x=e.x-Math.floor(e.x);break;case wi:e.x=e.x<0?0:1;break;case $m:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case qr:e.y=e.y-Math.floor(e.y);break;case wi:e.y=e.y<0?0:1;break;case $m:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Bn.DEFAULT_IMAGE=null;Bn.DEFAULT_MAPPING=Af;Bn.DEFAULT_ANISOTROPY=1;class Jt{constructor(e=0,n=0,i=0,r=1){Jt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],p=l[9],g=l[2],A=l[6],m=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-g)<.01&&Math.abs(p-A)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+g)<.1&&Math.abs(p+A)<.1&&Math.abs(c+d+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const y=(c+1)/2,w=(d+1)/2,S=(m+1)/2,C=(u+h)/4,b=(f+g)/4,M=(p+A)/4;return y>w&&y>S?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=C/i,s=b/i):w>S?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=C/r,s=M/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=b/s,r=M/s),this.set(i,r,s,n),this}let v=Math.sqrt((A-p)*(A-p)+(f-g)*(f-g)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(A-p)/v,this.y=(f-g)/v,this.z=(h-u)/v,this.w=Math.acos((c+d+m-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EQ extends $r{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Jt(0,0,e,n),this.scissorTest=!1,this.viewport=new Jt(0,0,e,n);const r={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Vt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Bn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Rh(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ln extends EQ{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class cw extends Bn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=fn,this.minFilter=fn,this.wrapR=wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Xee extends Ln{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new cw(null,e,n,i),this.texture.isRenderTargetTexture=!0}}let C8=class extends Bn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=fn,this.minFilter=fn,this.wrapR=wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class Yee extends Ln{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new C8(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Tt{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=s[o+0],d=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(a===1){e[n+0]=h,e[n+1]=d,e[n+2]=p,e[n+3]=g;return}if(f!==g||l!==h||c!==d||u!==p){let A=1-a;const m=l*h+c*d+u*p+f*g,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const S=Math.sqrt(y),C=Math.atan2(S,m*v);A=Math.sin(A*C)/S,a=Math.sin(a*C)/S}const w=a*v;if(l=l*A+h*w,c=c*A+d*w,u=u*A+p*w,f=f*A+g*w,A===1-a){const S=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=S,c*=S,u*=S,f*=S}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[n]=a*p+u*f+l*d-c*h,e[n+1]=l*p+u*h+c*f-a*d,e[n+2]=c*p+u*d+a*h-l*f,e[n+3]=u*p-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),h=l(i/2),d=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"YZX":this._x=h*u*f+c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f-h*d*p;break;case"XZY":this._x=h*u*f-c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($i(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class L{constructor(e=0,n=0,i=0){L.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(P7.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(P7.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*n-s*r),f=2*(s*i-o*n);return this.x=n+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return F4.copy(this).projectOnVector(e),this.sub(F4)}reflect(e){return this.sub(F4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos($i(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const F4=new L,P7=new Tt;class xn{constructor(e=new L(1/0,1/0,1/0),n=new L(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Na.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Na.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Na.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Na):Na.fromBufferAttribute(s,o),Na.applyMatrix4(e.matrixWorld),this.expandByPoint(Na);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),x2.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),x2.copy(i.boundingBox)),x2.applyMatrix4(e.matrixWorld),this.union(x2)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Na),Na.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(x1),_2.subVectors(this.max,x1),zd.subVectors(e.a,x1),Ud.subVectors(e.b,x1),kd.subVectors(e.c,x1),yu.subVectors(Ud,zd),xu.subVectors(kd,Ud),Jf.subVectors(zd,kd);let n=[0,-yu.z,yu.y,0,-xu.z,xu.y,0,-Jf.z,Jf.y,yu.z,0,-yu.x,xu.z,0,-xu.x,Jf.z,0,-Jf.x,-yu.y,yu.x,0,-xu.y,xu.x,0,-Jf.y,Jf.x,0];return!O4(n,zd,Ud,kd,_2)||(n=[1,0,0,0,1,0,0,0,1],!O4(n,zd,Ud,kd,_2))?!1:(E2.crossVectors(yu,xu),n=[E2.x,E2.y,E2.z],O4(n,zd,Ud,kd,_2))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Na).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Na).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(gc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gc=[new L,new L,new L,new L,new L,new L,new L,new L],Na=new L,x2=new xn,zd=new L,Ud=new L,kd=new L,yu=new L,xu=new L,Jf=new L,x1=new L,_2=new L,E2=new L,Zf=new L;function O4(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Zf.fromArray(t,s);const a=r.x*Math.abs(Zf.x)+r.y*Math.abs(Zf.y)+r.z*Math.abs(Zf.z),l=e.dot(Zf),c=n.dot(Zf),u=i.dot(Zf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const qee=new xn,_1=new L,z4=new L;let $n=class{constructor(e=new L,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):qee.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_1.subVectors(e,this.center);const n=_1.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(_1,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(z4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_1.copy(e.center).add(z4)),this.expandByPoint(_1.copy(e.center).sub(z4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Ac=new L,U4=new L,w2=new L,_u=new L,k4=new L,S2=new L,N4=new L;class Da{constructor(e=new L,n=new L(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ac)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ac.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ac.copy(this.origin).addScaledVector(this.direction,n),Ac.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){U4.copy(e).add(n).multiplyScalar(.5),w2.copy(n).sub(e).normalize(),_u.copy(this.origin).sub(U4);const s=e.distanceTo(n)*.5,o=-this.direction.dot(w2),a=_u.dot(this.direction),l=-_u.dot(w2),c=_u.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*l-a,h=o*a-l,p=s*u,f>=0)if(h>=-p)if(h<=p){const g=1/u;f*=g,h*=g,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-p?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c):h<=p?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(U4).addScaledVector(w2,h),d}intersectSphere(e,n){Ac.subVectors(e.center,this.origin);const i=Ac.dot(this.direction),r=Ac.dot(Ac)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Ac)!==null}intersectTriangle(e,n,i,r,s){k4.subVectors(n,e),S2.subVectors(i,e),N4.crossVectors(k4,S2);let o=this.direction.dot(N4),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;_u.subVectors(this.origin,e);const l=a*this.direction.dot(S2.crossVectors(_u,S2));if(l<0)return null;const c=a*this.direction.dot(k4.cross(_u));if(c<0||l+c>o)return null;const u=-a*_u.dot(N4);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ge{constructor(e,n,i,r,s,o,a,l,c,u,f,h,d,p,g,A){Ge.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,c,u,f,h,d,p,g,A)}set(e,n,i,r,s,o,a,l,c,u,f,h,d,p,g,A){const m=this.elements;return m[0]=e,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=f,m[14]=h,m[3]=d,m[7]=p,m[11]=g,m[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ge().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Nd.setFromMatrixColumn(e,0).length(),s=1/Nd.setFromMatrixColumn(e,1).length(),o=1/Nd.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,d=o*f,p=a*u,g=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+p*c,n[5]=h-g*c,n[9]=-a*l,n[2]=g-h*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,p=c*u,g=c*f;n[0]=h+g*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=g+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,p=c*u,g=c*f;n[0]=h-g*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=g-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,p=a*u,g=a*f;n[0]=l*u,n[4]=p*c-d,n[8]=h*c+g,n[1]=l*f,n[5]=g*c+h,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,p=a*l,g=a*c;n[0]=l*u,n[4]=g-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*f+p,n[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,d=o*c,p=a*l,g=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+g,n[5]=o*u,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*u,n[10]=g*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose($ee,e,Kee)}lookAt(e,n,i){const r=this.elements;return Io.subVectors(e,n),Io.lengthSq()===0&&(Io.z=1),Io.normalize(),Eu.crossVectors(i,Io),Eu.lengthSq()===0&&(Math.abs(i.z)===1?Io.x+=1e-4:Io.z+=1e-4,Io.normalize(),Eu.crossVectors(i,Io)),Eu.normalize(),C2.crossVectors(Io,Eu),r[0]=Eu.x,r[4]=C2.x,r[8]=Io.x,r[1]=Eu.y,r[5]=C2.y,r[9]=Io.y,r[2]=Eu.z,r[6]=C2.z,r[10]=Io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],g=i[6],A=i[10],m=i[14],v=i[3],y=i[7],w=i[11],S=i[15],C=r[0],b=r[4],M=r[8],I=r[12],T=r[1],D=r[5],R=r[9],z=r[13],F=r[2],V=r[6],j=r[10],Z=r[14],U=r[3],$=r[7],X=r[11],Q=r[15];return s[0]=o*C+a*T+l*F+c*U,s[4]=o*b+a*D+l*V+c*$,s[8]=o*M+a*R+l*j+c*X,s[12]=o*I+a*z+l*Z+c*Q,s[1]=u*C+f*T+h*F+d*U,s[5]=u*b+f*D+h*V+d*$,s[9]=u*M+f*R+h*j+d*X,s[13]=u*I+f*z+h*Z+d*Q,s[2]=p*C+g*T+A*F+m*U,s[6]=p*b+g*D+A*V+m*$,s[10]=p*M+g*R+A*j+m*X,s[14]=p*I+g*z+A*Z+m*Q,s[3]=v*C+y*T+w*F+S*U,s[7]=v*b+y*D+w*V+S*$,s[11]=v*M+y*R+w*j+S*X,s[15]=v*I+y*z+w*Z+S*Q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],p=e[3],g=e[7],A=e[11],m=e[15];return p*(+s*l*f-r*c*f-s*a*h+i*c*h+r*a*d-i*l*d)+g*(+n*l*d-n*c*h+s*o*h-r*o*d+r*c*u-s*l*u)+A*(+n*c*f-n*a*d-s*o*f+i*o*d+s*a*u-i*c*u)+m*(-r*a*u-n*l*f+n*a*h+r*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],A=e[14],m=e[15],v=f*A*c-g*h*c+g*l*d-a*A*d-f*l*m+a*h*m,y=p*h*c-u*A*c-p*l*d+o*A*d+u*l*m-o*h*m,w=u*g*c-p*f*c+p*a*d-o*g*d-u*a*m+o*f*m,S=p*f*l-u*g*l-p*a*h+o*g*h+u*a*A-o*f*A,C=n*v+i*y+r*w+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/C;return e[0]=v*b,e[1]=(g*h*s-f*A*s-g*r*d+i*A*d+f*r*m-i*h*m)*b,e[2]=(a*A*s-g*l*s+g*r*c-i*A*c-a*r*m+i*l*m)*b,e[3]=(f*l*s-a*h*s-f*r*c+i*h*c+a*r*d-i*l*d)*b,e[4]=y*b,e[5]=(u*A*s-p*h*s+p*r*d-n*A*d-u*r*m+n*h*m)*b,e[6]=(p*l*s-o*A*s-p*r*c+n*A*c+o*r*m-n*l*m)*b,e[7]=(o*h*s-u*l*s+u*r*c-n*h*c-o*r*d+n*l*d)*b,e[8]=w*b,e[9]=(p*f*s-u*g*s-p*i*d+n*g*d+u*i*m-n*f*m)*b,e[10]=(o*g*s-p*a*s+p*i*c-n*g*c-o*i*m+n*a*m)*b,e[11]=(u*a*s-o*f*s-u*i*c+n*f*c+o*i*d-n*a*d)*b,e[12]=S*b,e[13]=(u*g*r-p*f*r+p*i*h-n*g*h-u*i*A+n*f*A)*b,e[14]=(p*a*r-o*g*r-p*i*l+n*g*l+o*i*A-n*a*A)*b,e[15]=(o*f*r-u*a*r+u*i*l-n*f*l-o*i*h+n*a*h)*b,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,f=a+a,h=s*c,d=s*u,p=s*f,g=o*u,A=o*f,m=a*f,v=l*c,y=l*u,w=l*f,S=i.x,C=i.y,b=i.z;return r[0]=(1-(g+m))*S,r[1]=(d+w)*S,r[2]=(p-y)*S,r[3]=0,r[4]=(d-w)*C,r[5]=(1-(h+m))*C,r[6]=(A+v)*C,r[7]=0,r[8]=(p+y)*b,r[9]=(A-v)*b,r[10]=(1-(h+g))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Nd.set(r[0],r[1],r[2]).length();const o=Nd.set(r[4],r[5],r[6]).length(),a=Nd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ga.copy(this);const c=1/s,u=1/o,f=1/a;return Ga.elements[0]*=c,Ga.elements[1]*=c,Ga.elements[2]*=c,Ga.elements[4]*=u,Ga.elements[5]*=u,Ga.elements[6]*=u,Ga.elements[8]*=f,Ga.elements[9]*=f,Ga.elements[10]*=f,n.setFromRotationMatrix(Ga),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o,a=$l){const l=this.elements,c=2*s/(n-e),u=2*s/(i-r),f=(n+e)/(n-e),h=(i+r)/(i-r);let d,p;if(a===$l)d=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===ZA)d=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,r,s,o,a=$l){const l=this.elements,c=1/(n-e),u=1/(i-r),f=1/(o-s),h=(n+e)*c,d=(i+r)*u;let p,g;if(a===$l)p=(o+s)*f,g=-2*f;else if(a===ZA)p=s*f,g=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Nd=new L,Ga=new Ge,$ee=new L(0,0,0),Kee=new L(1,1,1),Eu=new L,C2=new L,Io=new L,D7=new Ge,L7=new Tt;class gi{constructor(e=0,n=0,i=0,r=gi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],d=r[10];switch(n){case"XYZ":this._y=Math.asin($i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-$i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin($i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-$i(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin($i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-$i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return D7.makeRotationFromQuaternion(e),this.setFromRotationMatrix(D7,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return L7.setFromEuler(this),this.setFromQuaternion(L7,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gi.DEFAULT_ORDER="XYZ";class Nh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jee=0;const F7=new L,Gd=new Tt,vc=new Ge,b2=new L,E1=new L,Zee=new L,ete=new Tt,O7=new L(1,0,0),z7=new L(0,1,0),U7=new L(0,0,1),k7={type:"added"},tte={type:"removed"},Hd={type:"childadded",child:null},G4={type:"childremoved",child:null};class Ht extends $r{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jee++}),this.uuid=Uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ht.DEFAULT_UP.clone();const e=new L,n=new gi,i=new Tt,r=new L(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ge},normalMatrix:{value:new jt}}),this.matrix=new Ge,this.matrixWorld=new Ge,this.matrixAutoUpdate=Ht.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Gd.setFromAxisAngle(e,n),this.quaternion.multiply(Gd),this}rotateOnWorldAxis(e,n){return Gd.setFromAxisAngle(e,n),this.quaternion.premultiply(Gd),this}rotateX(e){return this.rotateOnAxis(O7,e)}rotateY(e){return this.rotateOnAxis(z7,e)}rotateZ(e){return this.rotateOnAxis(U7,e)}translateOnAxis(e,n){return F7.copy(e).applyQuaternion(this.quaternion),this.position.add(F7.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(O7,e)}translateY(e){return this.translateOnAxis(z7,e)}translateZ(e){return this.translateOnAxis(U7,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(vc.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?b2.copy(e):b2.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),E1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vc.lookAt(E1,b2,this.up):vc.lookAt(b2,E1,this.up),this.quaternion.setFromRotationMatrix(vc),r&&(vc.extractRotation(r.matrixWorld),Gd.setFromRotationMatrix(vc),this.quaternion.premultiply(Gd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(k7),Hd.child=e,this.dispatchEvent(Hd),Hd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(tte),G4.child=e,this.dispatchEvent(G4),G4.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),vc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vc.multiply(e.parent.matrixWorld)),e.applyMatrix4(vc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(k7),Hd.child=e,this.dispatchEvent(Hd),Hd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E1,e,Zee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E1,ete,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ht.DEFAULT_UP=new L(0,1,0);Ht.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ha=new L,yc=new L,H4=new L,xc=new L,Qd=new L,Vd=new L,N7=new L,Q4=new L,V4=new L,W4=new L;class Tr{constructor(e=new L,n=new L,i=new L){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Ha.subVectors(e,n),r.cross(Ha);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Ha.subVectors(r,n),yc.subVectors(i,n),H4.subVectors(e,n);const o=Ha.dot(Ha),a=Ha.dot(yc),l=Ha.dot(H4),c=yc.dot(yc),u=yc.dot(H4),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const h=1/f,d=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-d-p,p,d)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,xc)===null?!1:xc.x>=0&&xc.y>=0&&xc.x+xc.y<=1}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,xc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,xc.x),l.addScaledVector(o,xc.y),l.addScaledVector(a,xc.z),l)}static isFrontFacing(e,n,i,r){return Ha.subVectors(i,n),yc.subVectors(e,n),Ha.cross(yc).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ha.subVectors(this.c,this.b),yc.subVectors(this.a,this.b),Ha.cross(yc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Tr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Tr.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,s){return Tr.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Tr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Tr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;Qd.subVectors(r,i),Vd.subVectors(s,i),Q4.subVectors(e,i);const l=Qd.dot(Q4),c=Vd.dot(Q4);if(l<=0&&c<=0)return n.copy(i);V4.subVectors(e,r);const u=Qd.dot(V4),f=Vd.dot(V4);if(u>=0&&f<=u)return n.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(Qd,o);W4.subVectors(e,s);const d=Qd.dot(W4),p=Vd.dot(W4);if(p>=0&&d<=p)return n.copy(s);const g=d*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(Vd,a);const A=u*p-d*f;if(A<=0&&f-u>=0&&d-p>=0)return N7.subVectors(s,r),a=(f-u)/(f-u+(d-p)),n.copy(r).addScaledVector(N7,a);const m=1/(A+g+h);return o=g*m,a=h*m,n.copy(i).addScaledVector(Qd,o).addScaledVector(Vd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wu={h:0,s:0,l:0},M2={h:0,s:0,l:0};function j4(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Je{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=oo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xn.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Xn.workingColorSpace){return this.r=e,this.g=n,this.b=i,Xn.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Xn.workingColorSpace){if(e=w8(e,1),n=$i(n,0,1),i=$i(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=j4(o,s,e+1/3),this.g=j4(o,s,e),this.b=j4(o,s,e-1/3)}return Xn.toWorkingColorSpace(this,r),this}setStyle(e,n=oo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=oo){const i=wQ[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rm(e.r),this.g=Rm(e.g),this.b=Rm(e.b),this}copyLinearToSRGB(e){return this.r=D4(e.r),this.g=D4(e.g),this.b=D4(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=oo){return Xn.fromWorkingColorSpace(As.copy(this),e),Math.round($i(As.r*255,0,255))*65536+Math.round($i(As.g*255,0,255))*256+Math.round($i(As.b*255,0,255))}getHexString(e=oo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Xn.workingColorSpace){Xn.fromWorkingColorSpace(As.copy(this),n);const i=As.r,r=As.g,s=As.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(As.copy(this),n),e.r=As.r,e.g=As.g,e.b=As.b,e}getStyle(e=oo){Xn.fromWorkingColorSpace(As.copy(this),e);const n=As.r,i=As.g,r=As.b;return e!==oo?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(wu),this.setHSL(wu.h+e,wu.s+n,wu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(wu),e.getHSL(M2);const i=iA(wu.h,M2.h,n),r=iA(wu.s,M2.s,n),s=iA(wu.l,M2.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const As=new Je;Je.NAMES=wQ;let nte=0;class cr extends $r{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nte++}),this.uuid=Uo(),this.name="",this.type="Material",this.blending=lf,this.side=js,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kA,this.blendDst=F3,this.blendEquation=Gu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Je(0,0,0),this.blendAlpha=0,this.depthFunc=NA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hl,this.stencilZFail=Hl,this.stencilZPass=Hl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==lf&&(i.blending=this.blending),this.side!==js&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==kA&&(i.blendSrc=this.blendSrc),this.blendDst!==F3&&(i.blendDst=this.blendDst),this.blendEquation!==Gu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==NA&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==nE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Hl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Hl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class Br extends cr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gi,this.combine=Iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zc=ite();function ite(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ro(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=$i(t,-65504,65504),zc.floatView[0]=t;const e=zc.uint32View[0],n=e>>23&511;return zc.baseTable[n]+((e&8388607)>>zc.shiftTable[n])}function Og(t){const e=t>>10;return zc.uint32View[0]=zc.mantissaTable[zc.offsetTable[e]+(t&1023)]+zc.exponentTable[e],zc.floatView[0]}const rl={toHalfFloat:ro,fromHalfFloat:Og},mr=new L,T2=new Ie;class Gt{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=JA,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=vn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return S8("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)T2.fromBufferAttribute(this,n),T2.applyMatrix3(e),this.setXY(n,T2.x,T2.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)mr.fromBufferAttribute(this,n),mr.applyMatrix3(e),this.setXYZ(n,mr.x,mr.y,mr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)mr.fromBufferAttribute(this,n),mr.applyMatrix4(e),this.setXYZ(n,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)mr.fromBufferAttribute(this,n),mr.applyNormalMatrix(e),this.setXYZ(n,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)mr.fromBufferAttribute(this,n),mr.transformDirection(e),this.setXYZ(n,mr.x,mr.y,mr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Gs(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Gs(n,this.array)),n}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Gs(n,this.array)),n}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Gs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Gs(n,this.array)),n}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),s=gn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==JA&&(e.usage=this.usage),e}}class rte extends Gt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class ste extends Gt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class ote extends Gt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class ate extends Gt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class uw extends Gt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class lte extends Gt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class b8 extends Gt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class cte extends Gt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Og(this.array[e*this.itemSize]);return this.normalized&&(n=Gs(n,this.array)),n}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize]=ro(n),this}getY(e){let n=Og(this.array[e*this.itemSize+1]);return this.normalized&&(n=Gs(n,this.array)),n}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+1]=ro(n),this}getZ(e){let n=Og(this.array[e*this.itemSize+2]);return this.normalized&&(n=Gs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+2]=ro(n),this}getW(e){let n=Og(this.array[e*this.itemSize+3]);return this.normalized&&(n=Gs(n,this.array)),n}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+3]=ro(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.array[e+0]=ro(n),this.array[e+1]=ro(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.array[e+0]=ro(n),this.array[e+1]=ro(i),this.array[e+2]=ro(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),s=gn(s,this.array)),this.array[e+0]=ro(n),this.array[e+1]=ro(i),this.array[e+2]=ro(r),this.array[e+3]=ro(s),this}}class At extends Gt{constructor(e,n,i){super(new Float32Array(e),n,i)}}let ute=0;const ea=new Ge,X4=new Ht,Wd=new L,Bo=new xn,w1=new xn,Gr=new L;class Dt extends $r{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ute++}),this.uuid=Uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yQ(e)?b8:uw)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new jt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ea.makeRotationFromQuaternion(e),this.applyMatrix4(ea),this}rotateX(e){return ea.makeRotationX(e),this.applyMatrix4(ea),this}rotateY(e){return ea.makeRotationY(e),this.applyMatrix4(ea),this}rotateZ(e){return ea.makeRotationZ(e),this.applyMatrix4(ea),this}translate(e,n,i){return ea.makeTranslation(e,n,i),this.applyMatrix4(ea),this}scale(e,n,i){return ea.makeScale(e,n,i),this.applyMatrix4(ea),this}lookAt(e){return X4.lookAt(e),X4.updateMatrix(),this.applyMatrix4(X4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wd).negate(),this.translate(Wd.x,Wd.y,Wd.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new At(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Bo.setFromBufferAttribute(s),this.morphTargetsRelative?(Gr.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(Gr),Gr.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(Gr)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $n);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new L,1/0);return}if(e){const i=this.boundingSphere.center;if(Bo.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];w1.setFromBufferAttribute(a),this.morphTargetsRelative?(Gr.addVectors(Bo.min,w1.min),Bo.expandByPoint(Gr),Gr.addVectors(Bo.max,w1.max),Bo.expandByPoint(Gr)):(Bo.expandByPoint(w1.min),Bo.expandByPoint(w1.max))}Bo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Gr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Gr.fromBufferAttribute(a,c),l&&(Wd.fromBufferAttribute(e,c),Gr.add(Wd)),r=Math.max(r,i.distanceToSquared(Gr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<i.count;M++)a[M]=new L,l[M]=new L;const c=new L,u=new L,f=new L,h=new Ie,d=new Ie,p=new Ie,g=new L,A=new L;function m(M,I,T){c.fromBufferAttribute(i,M),u.fromBufferAttribute(i,I),f.fromBufferAttribute(i,T),h.fromBufferAttribute(s,M),d.fromBufferAttribute(s,I),p.fromBufferAttribute(s,T),u.sub(c),f.sub(c),d.sub(h),p.sub(h);const D=1/(d.x*p.y-p.x*d.y);isFinite(D)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(D),A.copy(f).multiplyScalar(d.x).addScaledVector(u,-p.x).multiplyScalar(D),a[M].add(g),a[I].add(g),a[T].add(g),l[M].add(A),l[I].add(A),l[T].add(A))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let M=0,I=v.length;M<I;++M){const T=v[M],D=T.start,R=T.count;for(let z=D,F=D+R;z<F;z+=3)m(e.getX(z+0),e.getX(z+1),e.getX(z+2))}const y=new L,w=new L,S=new L,C=new L;function b(M){S.fromBufferAttribute(r,M),C.copy(S);const I=a[M];y.copy(I),y.sub(S.multiplyScalar(S.dot(I))).normalize(),w.crossVectors(C,I);const D=w.dot(l[M])<0?-1:1;o.setXYZW(M,y.x,y.y,y.z,D)}for(let M=0,I=v.length;M<I;++M){const T=v[M],D=T.start,R=T.count;for(let z=D,F=D+R;z<F;z+=3)b(e.getX(z+0)),b(e.getX(z+1)),b(e.getX(z+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new L,s=new L,o=new L,a=new L,l=new L,c=new L,u=new L,f=new L;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),g=e.getX(h+1),A=e.getX(h+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,A),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,A),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(A,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)r.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Gr.fromBufferAttribute(e,n),Gr.normalize(),e.setXYZ(n,Gr.x,Gr.y,Gr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let d=0,p=0;for(let g=0,A=l.length;g<A;g++){a.isInterleavedBufferAttribute?d=l[g]*a.data.stride+a.offset:d=l[g]*u;for(let m=0;m<u;m++)h[p++]=c[d++]}return new Gt(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Dt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,i);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G7=new Ge,eh=new Da,I2=new $n,H7=new L,jd=new L,Xd=new L,Yd=new L,Y4=new L,B2=new L,R2=new Ie,P2=new Ie,D2=new Ie,Q7=new L,V7=new L,W7=new L,L2=new L,F2=new L;class ut extends Ht{constructor(e=new Dt,n=new Br){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){B2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(Y4.fromBufferAttribute(f,e),o?B2.addScaledVector(Y4,u):B2.addScaledVector(Y4.sub(n),u))}n.add(B2)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),I2.copy(i.boundingSphere),I2.applyMatrix4(s),eh.copy(e.ray).recast(e.near),!(I2.containsPoint(eh.origin)===!1&&(eh.intersectSphere(I2,H7)===null||eh.origin.distanceToSquared(H7)>(e.far-e.near)**2))&&(G7.copy(s).invert(),eh.copy(e.ray).applyMatrix4(G7),!(i.boundingBox!==null&&eh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,eh)))}_computeIntersections(e,n,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const A=h[p],m=o[A.materialIndex],v=Math.max(A.start,d.start),y=Math.min(a.count,Math.min(A.start+A.count,d.start+d.count));for(let w=v,S=y;w<S;w+=3){const C=a.getX(w),b=a.getX(w+1),M=a.getX(w+2);r=O2(this,m,e,i,c,u,f,C,b,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=A.materialIndex,n.push(r))}}else{const p=Math.max(0,d.start),g=Math.min(a.count,d.start+d.count);for(let A=p,m=g;A<m;A+=3){const v=a.getX(A),y=a.getX(A+1),w=a.getX(A+2);r=O2(this,o,e,i,c,u,f,v,y,w),r&&(r.faceIndex=Math.floor(A/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const A=h[p],m=o[A.materialIndex],v=Math.max(A.start,d.start),y=Math.min(l.count,Math.min(A.start+A.count,d.start+d.count));for(let w=v,S=y;w<S;w+=3){const C=w,b=w+1,M=w+2;r=O2(this,m,e,i,c,u,f,C,b,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=A.materialIndex,n.push(r))}}else{const p=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let A=p,m=g;A<m;A+=3){const v=A,y=A+1,w=A+2;r=O2(this,o,e,i,c,u,f,v,y,w),r&&(r.faceIndex=Math.floor(A/3),n.push(r))}}}}function fte(t,e,n,i,r,s,o,a){let l;if(e.side===Ki?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===js,a),l===null)return null;F2.copy(a),F2.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(F2);return c<n.near||c>n.far?null:{distance:c,point:F2.clone(),object:t}}function O2(t,e,n,i,r,s,o,a,l,c){t.getVertexPosition(a,jd),t.getVertexPosition(l,Xd),t.getVertexPosition(c,Yd);const u=fte(t,e,n,i,jd,Xd,Yd,L2);if(u){r&&(R2.fromBufferAttribute(r,a),P2.fromBufferAttribute(r,l),D2.fromBufferAttribute(r,c),u.uv=Tr.getInterpolation(L2,jd,Xd,Yd,R2,P2,D2,new Ie)),s&&(R2.fromBufferAttribute(s,a),P2.fromBufferAttribute(s,l),D2.fromBufferAttribute(s,c),u.uv1=Tr.getInterpolation(L2,jd,Xd,Yd,R2,P2,D2,new Ie)),o&&(Q7.fromBufferAttribute(o,a),V7.fromBufferAttribute(o,l),W7.fromBufferAttribute(o,c),u.normal=Tr.getInterpolation(L2,jd,Xd,Yd,Q7,V7,W7,new L),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new L,materialIndex:0};Tr.getNormal(jd,Xd,Yd,f.normal),u.face=f}return u}class ks extends Dt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(u,3)),this.setAttribute("uv",new At(f,2));function p(g,A,m,v,y,w,S,C,b,M,I){const T=w/b,D=S/M,R=w/2,z=S/2,F=C/2,V=b+1,j=M+1;let Z=0,U=0;const $=new L;for(let X=0;X<j;X++){const Q=X*D-z;for(let J=0;J<V;J++){const ne=J*T-R;$[g]=ne*v,$[A]=Q*y,$[m]=F,c.push($.x,$.y,$.z),$[g]=0,$[A]=0,$[m]=C>0?1:-1,u.push($.x,$.y,$.z),f.push(J/b),f.push(1-X/M),Z+=1}}for(let X=0;X<M;X++)for(let Q=0;Q<b;Q++){const J=h+Q+V*X,ne=h+Q+V*(X+1),O=h+(Q+1)+V*(X+1),N=h+(Q+1)+V*X;l.push(J,ne,N),l.push(ne,O,N),U+=6}a.addGroup(d,U,I),d+=U,h+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ks(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function n0(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Os(t){const e={};for(let n=0;n<t.length;n++){const i=n0(t[n]);for(const r in i)e[r]=i[r]}return e}function hte(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function SQ(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xn.workingColorSpace}const Ra={clone:n0,merge:Os};var dte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pte=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fn extends cr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dte,this.fragmentShader=pte,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=n0(e.uniforms),this.uniformsGroups=hte(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Rf extends Ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ge,this.projectionMatrix=new Ge,this.projectionMatrixInverse=new Ge,this.coordinateSystem=$l}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Su=new L,j7=new Ie,X7=new Ie;let an=class extends Rf{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=t0*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return t0*2*Math.atan(Math.tan(kh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Su.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Su.x,Su.y).multiplyScalar(-e/Su.z),Su.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Su.x,Su.y).multiplyScalar(-e/Su.z)}getViewSize(e,n){return this.getViewBounds(e,j7,X7),n.subVectors(X7,j7)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(kh*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const qd=-90,$d=1;let fw=class extends Ht{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new an(qd,$d,e,n);r.layers=this.layers,this.add(r);const s=new an(qd,$d,e,n);s.layers=this.layers,this.add(s);const o=new an(qd,$d,e,n);o.layers=this.layers,this.add(o);const a=new an(qd,$d,e,n);a.layers=this.layers,this.add(a);const l=new an(qd,$d,e,n);l.layers=this.layers,this.add(l);const c=new an(qd,$d,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===$l)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ZA)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,s),e.setRenderTarget(i,1,r),e.render(n,o),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,r),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}},Pv=class extends Bn{constructor(e,n,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:pl,super(e,n,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};class E0 extends Ln{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Pv(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Vt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ks(5,5,5),s=new Fn({name:"CubemapFromEquirect",uniforms:n0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ki,blending:ba});s.uniforms.tEquirect.value=n;const o=new ut(r,s),a=n.minFilter;return n.minFilter===Qs&&(n.minFilter=Vt),new fw(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const q4=new L,mte=new L,gte=new jt;let Wr=class{constructor(e=new L(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=q4.subVectors(i,n).cross(mte.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(q4),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||gte.getNormalMatrix(e),r=this.coplanarPoint(q4).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const th=new $n,z2=new L;class fd{constructor(e=new Wr,n=new Wr,i=new Wr,r=new Wr,s=new Wr,o=new Wr){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=$l){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],h=r[7],d=r[8],p=r[9],g=r[10],A=r[11],m=r[12],v=r[13],y=r[14],w=r[15];if(i[0].setComponents(l-s,h-c,A-d,w-m).normalize(),i[1].setComponents(l+s,h+c,A+d,w+m).normalize(),i[2].setComponents(l+o,h+u,A+p,w+v).normalize(),i[3].setComponents(l-o,h-u,A-p,w-v).normalize(),i[4].setComponents(l-a,h-f,A-g,w-y).normalize(),n===$l)i[5].setComponents(l+a,h+f,A+g,w+y).normalize();else if(n===ZA)i[5].setComponents(a,f,g,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),th.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),th.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(th)}intersectsSprite(e){return th.center.set(0,0,0),th.radius=.7071067811865476,th.applyMatrix4(e.matrixWorld),this.intersectsSphere(th)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(z2.x=r.normal.x>0?e.max.x:e.min.x,z2.y=r.normal.y>0?e.max.y:e.min.y,z2.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(z2)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function CQ(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Ate(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,f=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,u),a.onUploadCallback();let d;if(c instanceof Float32Array)d=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?d=t.HALF_FLOAT:d=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)d=t.SHORT;else if(c instanceof Uint32Array)d=t.UNSIGNED_INT;else if(c instanceof Int32Array)d=t.INT;else if(c instanceof Int8Array)d=t.BYTE;else if(c instanceof Uint8Array)d=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)d=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:d,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const u=l.array,f=l._updateRange,h=l.updateRanges;if(t.bindBuffer(c,a),f.count===-1&&h.length===0&&t.bufferSubData(c,0,u),h.length!==0){for(let d=0,p=h.length;d<p;d++){const g=h[d];t.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}f.count!==-1&&(t.bufferSubData(c,f.offset*u.BYTES_PER_ELEMENT,u,f.offset,f.count),f.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class vr extends Dt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,h=n/l,d=[],p=[],g=[],A=[];for(let m=0;m<u;m++){const v=m*h-o;for(let y=0;y<c;y++){const w=y*f-s;p.push(w,-v,0),g.push(0,0,1),A.push(y/a),A.push(1-m/l)}}for(let m=0;m<l;m++)for(let v=0;v<a;v++){const y=v+c*m,w=v+c*(m+1),S=v+1+c*(m+1),C=v+1+c*m;d.push(y,w,C),d.push(w,S,C)}this.setIndex(d),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(g,3)),this.setAttribute("uv",new At(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vr(e.width,e.height,e.widthSegments,e.heightSegments)}}var vte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,yte=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,xte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_te=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ete=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wte=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ste=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Cte=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bte=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Mte=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Tte=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ite=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Bte=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Rte=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Pte=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dte=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Lte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Fte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ote=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zte=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ute=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Nte=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Gte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Hte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Qte=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Vte=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Wte=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jte=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Xte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yte="gl_FragColor = linearToOutputTexel( gl_FragColor );",qte=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,$te=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Kte=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ene=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ine=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,one=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ane=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,une=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,gne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ane=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,xne=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_ne=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ene=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wne=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Sne=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cne=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bne=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Mne=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tne=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ine=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Bne=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Rne=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pne=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Dne=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Lne=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fne=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,One=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Une=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kne=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Nne=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Gne=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Hne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Qne=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Vne=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Wne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,jne=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Xne=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Yne=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qne=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$ne=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kne=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Jne=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zne=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,eie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,tie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,iie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,sie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,aie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,cie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,uie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,die=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Aie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,vie=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xie=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_ie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Eie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Sie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Cie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Mie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Tie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Iie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Bie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Rie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Pie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Die=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Oie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Uie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,kie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Hie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$ie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zt={alphahash_fragment:vte,alphahash_pars_fragment:yte,alphamap_fragment:xte,alphamap_pars_fragment:_te,alphatest_fragment:Ete,alphatest_pars_fragment:wte,aomap_fragment:Ste,aomap_pars_fragment:Cte,batching_pars_vertex:bte,batching_vertex:Mte,begin_vertex:Tte,beginnormal_vertex:Ite,bsdfs:Bte,iridescence_fragment:Rte,bumpmap_pars_fragment:Pte,clipping_planes_fragment:Dte,clipping_planes_pars_fragment:Lte,clipping_planes_pars_vertex:Fte,clipping_planes_vertex:Ote,color_fragment:zte,color_pars_fragment:Ute,color_pars_vertex:kte,color_vertex:Nte,common:Gte,cube_uv_reflection_fragment:Hte,defaultnormal_vertex:Qte,displacementmap_pars_vertex:Vte,displacementmap_vertex:Wte,emissivemap_fragment:jte,emissivemap_pars_fragment:Xte,colorspace_fragment:Yte,colorspace_pars_fragment:qte,envmap_fragment:$te,envmap_common_pars_fragment:Kte,envmap_pars_fragment:Jte,envmap_pars_vertex:Zte,envmap_physical_pars_fragment:une,envmap_vertex:ene,fog_vertex:tne,fog_pars_vertex:nne,fog_fragment:ine,fog_pars_fragment:rne,gradientmap_pars_fragment:sne,lightmap_pars_fragment:one,lights_lambert_fragment:ane,lights_lambert_pars_fragment:lne,lights_pars_begin:cne,lights_toon_fragment:fne,lights_toon_pars_fragment:hne,lights_phong_fragment:dne,lights_phong_pars_fragment:pne,lights_physical_fragment:mne,lights_physical_pars_fragment:gne,lights_fragment_begin:Ane,lights_fragment_maps:vne,lights_fragment_end:yne,logdepthbuf_fragment:xne,logdepthbuf_pars_fragment:_ne,logdepthbuf_pars_vertex:Ene,logdepthbuf_vertex:wne,map_fragment:Sne,map_pars_fragment:Cne,map_particle_fragment:bne,map_particle_pars_fragment:Mne,metalnessmap_fragment:Tne,metalnessmap_pars_fragment:Ine,morphinstance_vertex:Bne,morphcolor_vertex:Rne,morphnormal_vertex:Pne,morphtarget_pars_vertex:Dne,morphtarget_vertex:Lne,normal_fragment_begin:Fne,normal_fragment_maps:One,normal_pars_fragment:zne,normal_pars_vertex:Une,normal_vertex:kne,normalmap_pars_fragment:Nne,clearcoat_normal_fragment_begin:Gne,clearcoat_normal_fragment_maps:Hne,clearcoat_pars_fragment:Qne,iridescence_pars_fragment:Vne,opaque_fragment:Wne,packing:jne,premultiplied_alpha_fragment:Xne,project_vertex:Yne,dithering_fragment:qne,dithering_pars_fragment:$ne,roughnessmap_fragment:Kne,roughnessmap_pars_fragment:Jne,shadowmap_pars_fragment:Zne,shadowmap_pars_vertex:eie,shadowmap_vertex:tie,shadowmask_pars_fragment:nie,skinbase_vertex:iie,skinning_pars_vertex:rie,skinning_vertex:sie,skinnormal_vertex:oie,specularmap_fragment:aie,specularmap_pars_fragment:lie,tonemapping_fragment:cie,tonemapping_pars_fragment:uie,transmission_fragment:fie,transmission_pars_fragment:hie,uv_pars_fragment:die,uv_pars_vertex:pie,uv_vertex:mie,worldpos_vertex:gie,background_vert:Aie,background_frag:vie,backgroundCube_vert:yie,backgroundCube_frag:xie,cube_vert:_ie,cube_frag:Eie,depth_vert:wie,depth_frag:Sie,distanceRGBA_vert:Cie,distanceRGBA_frag:bie,equirect_vert:Mie,equirect_frag:Tie,linedashed_vert:Iie,linedashed_frag:Bie,meshbasic_vert:Rie,meshbasic_frag:Pie,meshlambert_vert:Die,meshlambert_frag:Lie,meshmatcap_vert:Fie,meshmatcap_frag:Oie,meshnormal_vert:zie,meshnormal_frag:Uie,meshphong_vert:kie,meshphong_frag:Nie,meshphysical_vert:Gie,meshphysical_frag:Hie,meshtoon_vert:Qie,meshtoon_frag:Vie,points_vert:Wie,points_frag:jie,shadow_vert:Xie,shadow_frag:Yie,sprite_vert:qie,sprite_frag:$ie},wt={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jt}},envmap:{envMap:{value:null},envMapRotation:{value:new jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0},uvTransform:{value:new jt}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}}},tl={basic:{uniforms:Os([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:Zt.meshbasic_vert,fragmentShader:Zt.meshbasic_frag},lambert:{uniforms:Os([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Je(0)}}]),vertexShader:Zt.meshlambert_vert,fragmentShader:Zt.meshlambert_frag},phong:{uniforms:Os([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Zt.meshphong_vert,fragmentShader:Zt.meshphong_frag},standard:{uniforms:Os([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},toon:{uniforms:Os([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new Je(0)}}]),vertexShader:Zt.meshtoon_vert,fragmentShader:Zt.meshtoon_frag},matcap:{uniforms:Os([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:Zt.meshmatcap_vert,fragmentShader:Zt.meshmatcap_frag},points:{uniforms:Os([wt.points,wt.fog]),vertexShader:Zt.points_vert,fragmentShader:Zt.points_frag},dashed:{uniforms:Os([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zt.linedashed_vert,fragmentShader:Zt.linedashed_frag},depth:{uniforms:Os([wt.common,wt.displacementmap]),vertexShader:Zt.depth_vert,fragmentShader:Zt.depth_frag},normal:{uniforms:Os([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:Zt.meshnormal_vert,fragmentShader:Zt.meshnormal_frag},sprite:{uniforms:Os([wt.sprite,wt.fog]),vertexShader:Zt.sprite_vert,fragmentShader:Zt.sprite_frag},background:{uniforms:{uvTransform:{value:new jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Zt.background_vert,fragmentShader:Zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jt}},vertexShader:Zt.backgroundCube_vert,fragmentShader:Zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zt.cube_vert,fragmentShader:Zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zt.equirect_vert,fragmentShader:Zt.equirect_frag},distanceRGBA:{uniforms:Os([wt.common,wt.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zt.distanceRGBA_vert,fragmentShader:Zt.distanceRGBA_frag},shadow:{uniforms:Os([wt.lights,wt.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Zt.shadow_vert,fragmentShader:Zt.shadow_frag}};tl.physical={uniforms:Os([tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jt},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jt},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jt},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jt}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag};const U2={r:0,b:0,g:0},nh=new gi,Kie=new Ge;function Jie(t,e,n,i,r,s,o){const a=new Je(0);let l=s===!0?0:1,c,u,f=null,h=0,d=null;function p(v){let y=v.isScene===!0?v.background:null;return y&&y.isTexture&&(y=(v.backgroundBlurriness>0?n:e).get(y)),y}function g(v){let y=!1;const w=p(v);w===null?m(a,l):w&&w.isColor&&(m(w,1),y=!0);const S=t.xr.getEnvironmentBlendMode();S==="additive"?i.buffers.color.setClear(0,0,0,1,o):S==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||y)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function A(v,y){const w=p(y);w&&(w.isCubeTexture||w.mapping===y0)?(u===void 0&&(u=new ut(new ks(1,1,1),new Fn({name:"BackgroundCubeMaterial",uniforms:n0(tl.backgroundCube.uniforms),vertexShader:tl.backgroundCube.vertexShader,fragmentShader:tl.backgroundCube.fragmentShader,side:Ki,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,C,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),nh.copy(y.backgroundRotation),nh.x*=-1,nh.y*=-1,nh.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(nh.y*=-1,nh.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Kie.makeRotationFromEuler(nh)),u.material.toneMapped=Xn.getTransfer(w.colorSpace)!==di,(f!==w||h!==w.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,d=t.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new ut(new vr(2,2),new Fn({name:"BackgroundMaterial",uniforms:n0(tl.background.uniforms),vertexShader:tl.background.vertexShader,fragmentShader:tl.background.fragmentShader,side:js,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Xn.getTransfer(w.colorSpace)!==di,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=w,h=w.version,d=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function m(v,y){v.getRGB(U2,SQ(t)),i.buffers.color.setClear(U2.r,U2.g,U2.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,m(a,l)},render:g,addToRenderList:A}}function Zie(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function a(T,D,R,z,F){let V=!1;const j=f(z,R,D);s!==j&&(s=j,c(s.object)),V=d(T,z,R,F),V&&p(T,z,R,F),F!==null&&e.update(F,t.ELEMENT_ARRAY_BUFFER),(V||o)&&(o=!1,w(T,D,R,z),F!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return t.createVertexArray()}function c(T){return t.bindVertexArray(T)}function u(T){return t.deleteVertexArray(T)}function f(T,D,R){const z=R.wireframe===!0;let F=i[T.id];F===void 0&&(F={},i[T.id]=F);let V=F[D.id];V===void 0&&(V={},F[D.id]=V);let j=V[z];return j===void 0&&(j=h(l()),V[z]=j),j}function h(T){const D=[],R=[],z=[];for(let F=0;F<n;F++)D[F]=0,R[F]=0,z[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:R,attributeDivisors:z,object:T,attributes:{},index:null}}function d(T,D,R,z){const F=s.attributes,V=D.attributes;let j=0;const Z=R.getAttributes();for(const U in Z)if(Z[U].location>=0){const X=F[U];let Q=V[U];if(Q===void 0&&(U==="instanceMatrix"&&T.instanceMatrix&&(Q=T.instanceMatrix),U==="instanceColor"&&T.instanceColor&&(Q=T.instanceColor)),X===void 0||X.attribute!==Q||Q&&X.data!==Q.data)return!0;j++}return s.attributesNum!==j||s.index!==z}function p(T,D,R,z){const F={},V=D.attributes;let j=0;const Z=R.getAttributes();for(const U in Z)if(Z[U].location>=0){let X=V[U];X===void 0&&(U==="instanceMatrix"&&T.instanceMatrix&&(X=T.instanceMatrix),U==="instanceColor"&&T.instanceColor&&(X=T.instanceColor));const Q={};Q.attribute=X,X&&X.data&&(Q.data=X.data),F[U]=Q,j++}s.attributes=F,s.attributesNum=j,s.index=z}function g(){const T=s.newAttributes;for(let D=0,R=T.length;D<R;D++)T[D]=0}function A(T){m(T,0)}function m(T,D){const R=s.newAttributes,z=s.enabledAttributes,F=s.attributeDivisors;R[T]=1,z[T]===0&&(t.enableVertexAttribArray(T),z[T]=1),F[T]!==D&&(t.vertexAttribDivisor(T,D),F[T]=D)}function v(){const T=s.newAttributes,D=s.enabledAttributes;for(let R=0,z=D.length;R<z;R++)D[R]!==T[R]&&(t.disableVertexAttribArray(R),D[R]=0)}function y(T,D,R,z,F,V,j){j===!0?t.vertexAttribIPointer(T,D,R,F,V):t.vertexAttribPointer(T,D,R,z,F,V)}function w(T,D,R,z){g();const F=z.attributes,V=R.getAttributes(),j=D.defaultAttributeValues;for(const Z in V){const U=V[Z];if(U.location>=0){let $=F[Z];if($===void 0&&(Z==="instanceMatrix"&&T.instanceMatrix&&($=T.instanceMatrix),Z==="instanceColor"&&T.instanceColor&&($=T.instanceColor)),$!==void 0){const X=$.normalized,Q=$.itemSize,J=e.get($);if(J===void 0)continue;const ne=J.buffer,O=J.type,N=J.bytesPerElement,G=O===t.INT||O===t.UNSIGNED_INT||$.gpuType===cf;if($.isInterleavedBufferAttribute){const H=$.data,oe=H.stride,de=$.offset;if(H.isInstancedInterleavedBuffer){for(let ce=0;ce<U.locationSize;ce++)m(U.location+ce,H.meshPerAttribute);T.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let ce=0;ce<U.locationSize;ce++)A(U.location+ce);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let ce=0;ce<U.locationSize;ce++)y(U.location+ce,Q/U.locationSize,O,X,oe*N,(de+Q/U.locationSize*ce)*N,G)}else{if($.isInstancedBufferAttribute){for(let H=0;H<U.locationSize;H++)m(U.location+H,$.meshPerAttribute);T.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let H=0;H<U.locationSize;H++)A(U.location+H);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let H=0;H<U.locationSize;H++)y(U.location+H,Q/U.locationSize,O,X,Q*N,Q/U.locationSize*H*N,G)}}else if(j!==void 0){const X=j[Z];if(X!==void 0)switch(X.length){case 2:t.vertexAttrib2fv(U.location,X);break;case 3:t.vertexAttrib3fv(U.location,X);break;case 4:t.vertexAttrib4fv(U.location,X);break;default:t.vertexAttrib1fv(U.location,X)}}}}v()}function S(){M();for(const T in i){const D=i[T];for(const R in D){const z=D[R];for(const F in z)u(z[F].object),delete z[F];delete D[R]}delete i[T]}}function C(T){if(i[T.id]===void 0)return;const D=i[T.id];for(const R in D){const z=D[R];for(const F in z)u(z[F].object),delete z[F];delete D[R]}delete i[T.id]}function b(T){for(const D in i){const R=i[D];if(R[T.id]===void 0)continue;const z=R[T.id];for(const F in z)u(z[F].object),delete z[F];delete R[T.id]}}function M(){I(),o=!0,s!==r&&(s=r,c(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:M,resetDefaultState:I,dispose:S,releaseStatesOfGeometry:C,releaseStatesOfProgram:b,initAttributes:g,enableAttribute:A,disableUnusedAttributes:v}}function ere(t,e,n){let i;function r(c){i=c}function s(c,u){t.drawArrays(i,c,u),n.update(u,i,1)}function o(c,u,f){f!==0&&(t.drawArraysInstanced(i,c,u,f),n.update(u,i,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,f);let d=0;for(let p=0;p<f;p++)d+=u[p];n.update(d,i,1)}function l(c,u,f,h){if(f===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<c.length;p++)o(c[p],u[p],h[p]);else{d.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,f);let p=0;for(let g=0;g<f;g++)p+=u[g];for(let g=0;g<h.length;g++)n.update(p,i,h[g])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function tre(t,e,n,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(C){return!(C!==In&&i.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(C){const b=C===On&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==Jn&&i.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==vn&&!b)}function l(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),A=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),w=d>0,S=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:g,maxAttributes:A,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:w,maxSamples:S}}function nre(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Wr,a=new jt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||i!==0||r;return r=h,i=f.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const p=f.clippingPlanes,g=f.clipIntersection,A=f.clipShadows,m=t.get(f);if(!r||p===null||p.length===0||s&&!A)s?u(null):c();else{const v=s?0:i,y=v*4;let w=m.clippingState||null;l.value=w,w=u(p,h,y,d);for(let S=0;S!==y;++S)w[S]=n[S];m.clippingState=w,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=v}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,p){const g=f!==null?f.length:0;let A=null;if(g!==0){if(A=l.value,p!==!0||A===null){const m=d+g*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(A===null||A.length<m)&&(A=new Float32Array(m));for(let y=0,w=d;y!==g;++y,w+=4)o.copy(f[y]).applyMatrix4(v,a),o.normal.toArray(A,w),A[w+3]=o.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,A}}function ire(t){let e=new WeakMap;function n(o,a){return a===yf?o.mapping=pl:a===GA&&(o.mapping=vf),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===yf||a===GA)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new E0(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let Hn=class extends Rf{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}};const Am=4,Y7=[.125,.215,.35,.446,.526,.582],wh=20,$4=new Hn,q7=new Je;let K4=null,J4=0,Z4=0,eb=!1;const Eh=(1+Math.sqrt(5))/2,Kd=1/Eh,$7=[new L(-Eh,Kd,0),new L(Eh,Kd,0),new L(-Kd,0,Eh),new L(Kd,0,Eh),new L(0,Eh,-Kd),new L(0,Eh,Kd),new L(-1,1,-1),new L(1,1,-1),new L(-1,1,1),new L(1,1,1)];class BT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){K4=this._renderer.getRenderTarget(),J4=this._renderer.getActiveCubeFace(),Z4=this._renderer.getActiveMipmapLevel(),eb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Z7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=J7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(K4,J4,Z4),this._renderer.xr.enabled=eb,e.scissorTest=!1,k2(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===pl||e.mapping===vf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),K4=this._renderer.getRenderTarget(),J4=this._renderer.getActiveCubeFace(),Z4=this._renderer.getActiveMipmapLevel(),eb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Vt,minFilter:Vt,generateMipmaps:!1,type:On,format:In,colorSpace:Ba,depthBuffer:!1},r=K7(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=K7(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rre(s)),this._blurMaterial=sre(s,e,n)}return r}_compileMaterial(e){const n=new ut(this._lodPlanes[0],e);this._renderer.compile(n,$4)}_sceneToCubeUV(e,n,i,r){const a=new an(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(q7),u.toneMapping=cl,u.autoClear=!1;const d=new Br({name:"PMREM.Background",side:Ki,depthWrite:!1,depthTest:!1}),p=new ut(new ks,d);let g=!1;const A=e.background;A?A.isColor&&(d.color.copy(A),e.background=null,g=!0):(d.color.copy(q7),g=!0);for(let m=0;m<6;m++){const v=m%3;v===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):v===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const y=this._cubeSize;k2(r,v*y,m>2?y:0,y,y),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=A}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===pl||e.mapping===vf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Z7()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=J7());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ut(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;k2(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,$4)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=$7[(r-s-1)%$7.length];this._blur(e,s-1,s,o,a)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new ut(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*wh-1),g=s/p,A=isFinite(s)?1+Math.floor(u*g):wh;A>wh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${wh}`);const m=[];let v=0;for(let b=0;b<wh;++b){const M=b/g,I=Math.exp(-M*M/2);m.push(I),b===0?v+=I:b<A&&(v+=2*I)}for(let b=0;b<m.length;b++)m[b]=m[b]/v;h.envMap.value=e.texture,h.samples.value=A,h.weights.value=m,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const w=this._sizeLods[r],S=3*w*(r>y-Am?r-y+Am:0),C=4*(this._cubeSize-w);k2(n,S,C,3*w,2*w),l.setRenderTarget(n),l.render(f,$4)}}function rre(t){const e=[],n=[],i=[];let r=t;const s=t-Am+1+Y7.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Am?l=Y7[o-t+Am-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,g=3,A=2,m=1,v=new Float32Array(g*p*d),y=new Float32Array(A*p*d),w=new Float32Array(m*p*d);for(let C=0;C<d;C++){const b=C%3*2/3-1,M=C>2?0:-1,I=[b,M,0,b+2/3,M,0,b+2/3,M+1,0,b,M,0,b+2/3,M+1,0,b,M+1,0];v.set(I,g*p*C),y.set(h,A*p*C);const T=[C,C,C,C,C,C];w.set(T,m*p*C)}const S=new Dt;S.setAttribute("position",new Gt(v,g)),S.setAttribute("uv",new Gt(y,A)),S.setAttribute("faceIndex",new Gt(w,m)),e.push(S),r>Am&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function K7(t,e,n){const i=new Ln(t,e,n);return i.texture.mapping=y0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function k2(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function sre(t,e,n){const i=new Float32Array(wh),r=new L(0,1,0);return new Fn({name:"SphericalGaussianBlur",defines:{n:wh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:M8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ba,depthTest:!1,depthWrite:!1})}function J7(){return new Fn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:M8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ba,depthTest:!1,depthWrite:!1})}function Z7(){return new Fn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:M8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ba,depthTest:!1,depthWrite:!1})}function M8(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ore(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===yf||l===GA,u=l===pl||l===vf;if(c||u){let f=e.get(a);const h=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new BT(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const d=a.image;return c&&d&&d.height>0||u&&d&&r(d)?(n===null&&(n=new BT(t)),f=c?n.fromEquirectangular(a):n.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function are(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&S8("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function lre(t,e,n,i){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const g=h.morphAttributes[p];for(let A=0,m=g.length;A<m;A++)e.remove(g[A])}h.removeEventListener("dispose",o),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],t.ARRAY_BUFFER);const d=f.morphAttributes;for(const p in d){const g=d[p];for(let A=0,m=g.length;A<m;A++)e.update(g[A],t.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,p=f.attributes.position;let g=0;if(d!==null){const v=d.array;g=d.version;for(let y=0,w=v.length;y<w;y+=3){const S=v[y+0],C=v[y+1],b=v[y+2];h.push(S,C,C,b,b,S)}}else if(p!==void 0){const v=p.array;g=p.version;for(let y=0,w=v.length/3-1;y<w;y+=3){const S=y+0,C=y+1,b=y+2;h.push(S,C,C,b,b,S)}}else return;const A=new(yQ(h)?b8:uw)(h,1);A.version=g;const m=s.get(f);m&&e.remove(m),s.set(f,A)}function u(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function cre(t,e,n){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,d){t.drawElements(i,d,s,h*o),n.update(d,i,1)}function c(h,d,p){p!==0&&(t.drawElementsInstanced(i,d,s,h*o,p),n.update(d,i,p))}function u(h,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,d,0,s,h,0,p);let A=0;for(let m=0;m<p;m++)A+=d[m];n.update(A,i,1)}function f(h,d,p,g){if(p===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let m=0;m<h.length;m++)c(h[m]/o,d[m],g[m]);else{A.multiDrawElementsInstancedWEBGL(i,d,0,s,h,0,g,0,p);let m=0;for(let v=0;v<p;v++)m+=d[v];for(let v=0;v<g.length;v++)n.update(m,i,g[v])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function ure(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function fre(t,e,n){const i=new WeakMap,r=new Jt;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let h=i.get(a);if(h===void 0||h.count!==f){let I=function(){b.dispose(),i.delete(a),a.removeEventListener("dispose",I)};h!==void 0&&h.texture.dispose();const d=a.morphAttributes.position!==void 0,p=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,A=a.morphAttributes.position||[],m=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let y=0;d===!0&&(y=1),p===!0&&(y=2),g===!0&&(y=3);let w=a.attributes.position.count*y,S=1;w>e.maxTextureSize&&(S=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const C=new Float32Array(w*S*4*f),b=new cw(C,w,S,f);b.type=vn,b.needsUpdate=!0;const M=y*4;for(let T=0;T<f;T++){const D=A[T],R=m[T],z=v[T],F=w*S*4*T;for(let V=0;V<D.count;V++){const j=V*M;d===!0&&(r.fromBufferAttribute(D,V),C[F+j+0]=r.x,C[F+j+1]=r.y,C[F+j+2]=r.z,C[F+j+3]=0),p===!0&&(r.fromBufferAttribute(R,V),C[F+j+4]=r.x,C[F+j+5]=r.y,C[F+j+6]=r.z,C[F+j+7]=0),g===!0&&(r.fromBufferAttribute(z,V),C[F+j+8]=r.x,C[F+j+9]=r.y,C[F+j+10]=r.z,C[F+j+11]=z.itemSize===4?r.w:1)}}h={count:f,texture:b,size:new Ie(w,S)},i.set(a,h),a.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let d=0;for(let g=0;g<c.length;g++)d+=c[g];const p=a.morphTargetsRelative?1:1-d;l.getUniforms().setValue(t,"morphTargetBaseInfluence",p),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function hre(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class hd extends Bn{constructor(e,n,i,r,s,o,a,l,c,u=Zl){if(u!==Zl&&u!==Jh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Zl&&(i=Ss),i===void 0&&u===Jh&&(i=Kh),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:fn,this.minFilter=l!==void 0?l:fn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const bQ=new Bn,eD=new hd(1,1),MQ=new cw,TQ=new C8,IQ=new Pv,tD=[],nD=[],iD=new Float32Array(16),rD=new Float32Array(9),sD=new Float32Array(4);function w0(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=tD[r];if(s===void 0&&(s=new Float32Array(r),tD[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Dr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Lr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function hw(t,e){let n=nD[e];n===void 0&&(n=new Int32Array(e),nD[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function dre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function pre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dr(n,e))return;t.uniform2fv(this.addr,e),Lr(n,e)}}function mre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Dr(n,e))return;t.uniform3fv(this.addr,e),Lr(n,e)}}function gre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dr(n,e))return;t.uniform4fv(this.addr,e),Lr(n,e)}}function Are(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Dr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Lr(n,e)}else{if(Dr(n,i))return;sD.set(i),t.uniformMatrix2fv(this.addr,!1,sD),Lr(n,i)}}function vre(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Dr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Lr(n,e)}else{if(Dr(n,i))return;rD.set(i),t.uniformMatrix3fv(this.addr,!1,rD),Lr(n,i)}}function yre(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Dr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Lr(n,e)}else{if(Dr(n,i))return;iD.set(i),t.uniformMatrix4fv(this.addr,!1,iD),Lr(n,i)}}function xre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _re(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dr(n,e))return;t.uniform2iv(this.addr,e),Lr(n,e)}}function Ere(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Dr(n,e))return;t.uniform3iv(this.addr,e),Lr(n,e)}}function wre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dr(n,e))return;t.uniform4iv(this.addr,e),Lr(n,e)}}function Sre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Cre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dr(n,e))return;t.uniform2uiv(this.addr,e),Lr(n,e)}}function bre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Dr(n,e))return;t.uniform3uiv(this.addr,e),Lr(n,e)}}function Mre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dr(n,e))return;t.uniform4uiv(this.addr,e),Lr(n,e)}}function Tre(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let s;this.type===t.SAMPLER_2D_SHADOW?(eD.compareFunction=E8,s=eD):s=bQ,n.setTexture2D(e||s,r)}function Ire(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||TQ,r)}function Bre(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||IQ,r)}function Rre(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||MQ,r)}function Pre(t){switch(t){case 5126:return dre;case 35664:return pre;case 35665:return mre;case 35666:return gre;case 35674:return Are;case 35675:return vre;case 35676:return yre;case 5124:case 35670:return xre;case 35667:case 35671:return _re;case 35668:case 35672:return Ere;case 35669:case 35673:return wre;case 5125:return Sre;case 36294:return Cre;case 36295:return bre;case 36296:return Mre;case 35678:case 36198:case 36298:case 36306:case 35682:return Tre;case 35679:case 36299:case 36307:return Ire;case 35680:case 36300:case 36308:case 36293:return Bre;case 36289:case 36303:case 36311:case 36292:return Rre}}function Dre(t,e){t.uniform1fv(this.addr,e)}function Lre(t,e){const n=w0(e,this.size,2);t.uniform2fv(this.addr,n)}function Fre(t,e){const n=w0(e,this.size,3);t.uniform3fv(this.addr,n)}function Ore(t,e){const n=w0(e,this.size,4);t.uniform4fv(this.addr,n)}function zre(t,e){const n=w0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ure(t,e){const n=w0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function kre(t,e){const n=w0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Nre(t,e){t.uniform1iv(this.addr,e)}function Gre(t,e){t.uniform2iv(this.addr,e)}function Hre(t,e){t.uniform3iv(this.addr,e)}function Qre(t,e){t.uniform4iv(this.addr,e)}function Vre(t,e){t.uniform1uiv(this.addr,e)}function Wre(t,e){t.uniform2uiv(this.addr,e)}function jre(t,e){t.uniform3uiv(this.addr,e)}function Xre(t,e){t.uniform4uiv(this.addr,e)}function Yre(t,e,n){const i=this.cache,r=e.length,s=hw(n,r);Dr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||bQ,s[o])}function qre(t,e,n){const i=this.cache,r=e.length,s=hw(n,r);Dr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||TQ,s[o])}function $re(t,e,n){const i=this.cache,r=e.length,s=hw(n,r);Dr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||IQ,s[o])}function Kre(t,e,n){const i=this.cache,r=e.length,s=hw(n,r);Dr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||MQ,s[o])}function Jre(t){switch(t){case 5126:return Dre;case 35664:return Lre;case 35665:return Fre;case 35666:return Ore;case 35674:return zre;case 35675:return Ure;case 35676:return kre;case 5124:case 35670:return Nre;case 35667:case 35671:return Gre;case 35668:case 35672:return Hre;case 35669:case 35673:return Qre;case 5125:return Vre;case 36294:return Wre;case 36295:return jre;case 36296:return Xre;case 35678:case 36198:case 36298:case 36306:case 35682:return Yre;case 35679:case 36299:case 36307:return qre;case 35680:case 36300:case 36308:case 36293:return $re;case 36289:case 36303:case 36311:case 36292:return Kre}}class Zre{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Pre(n.type)}}class ese{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Jre(n.type)}}class tse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const tb=/(\w+)(\])?(\[|\.)?/g;function oD(t,e){t.seq.push(e),t.map[e.id]=e}function nse(t,e,n){const i=t.name,r=i.length;for(tb.lastIndex=0;;){const s=tb.exec(i),o=tb.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){oD(n,c===void 0?new Zre(a,t,e):new ese(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new tse(a),oD(n,f)),n=f}}}class G_{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);nse(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function aD(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const ise=37297;let rse=0;function sse(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function ose(t){const e=Xn.getPrimaries(Xn.workingColorSpace),n=Xn.getPrimaries(t);let i;switch(e===n?i="":e===KA&&n===$A?i="LinearDisplayP3ToLinearSRGB":e===$A&&n===KA&&(i="LinearSRGBToLinearDisplayP3"),t){case Ba:case Rv:return[i,"LinearTransferOETF"];case oo:case lw:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}function lD(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+sse(t.getShaderSource(e),o)}else return r}function ase(t,e){const n=ose(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function lse(t,e){let n;switch(e){case KH:n="Linear";break;case JH:n="Reinhard";break;case ZH:n="OptimizedCineon";break;case d8:n="ACESFilmic";break;case tQ:n="AgX";break;case nQ:n="Neutral";break;case eQ:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function cse(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(zg).join(`
`)}function use(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function fse(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function zg(t){return t!==""}function cD(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uD(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hse=/^[ \t]*#include +<([\w\d./]+)>/gm;function RT(t){return t.replace(hse,pse)}const dse=new Map;function pse(t,e){let n=Zt[e];if(n===void 0){const i=dse.get(e);if(i!==void 0)n=Zt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return RT(n)}const mse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fD(t){return t.replace(mse,gse)}function gse(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function hD(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ase(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ew?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===eA?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ja&&(e="SHADOWMAP_TYPE_VSM"),e}function vse(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case pl:case vf:e="ENVMAP_TYPE_CUBE";break;case y0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yse(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case vf:e="ENVMAP_MODE_REFRACTION";break}return e}function xse(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Iv:e="ENVMAP_BLENDING_MULTIPLY";break;case qH:e="ENVMAP_BLENDING_MIX";break;case $H:e="ENVMAP_BLENDING_ADD";break}return e}function _se(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Ese(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Ase(n),c=vse(n),u=yse(n),f=xse(n),h=_se(n),d=cse(n),p=use(s),g=r.createProgram();let A,m,v=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(A=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(zg).join(`
`),A.length>0&&(A+=`
`),m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(zg).join(`
`),m.length>0&&(m+=`
`)):(A=[hD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(zg).join(`
`),m=[hD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==cl?"#define TONE_MAPPING":"",n.toneMapping!==cl?Zt.tonemapping_pars_fragment:"",n.toneMapping!==cl?lse("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Zt.colorspace_pars_fragment,ase("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(zg).join(`
`)),o=RT(o),o=cD(o,n),o=uD(o,n),a=RT(a),a=cD(a,n),a=uD(a,n),o=fD(o),a=fD(a),n.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,A=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,m=["#define varying in",n.glslVersion===IT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===IT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const y=v+A+o,w=v+m+a,S=aD(r,r.VERTEX_SHADER,y),C=aD(r,r.FRAGMENT_SHADER,w);r.attachShader(g,S),r.attachShader(g,C),n.index0AttributeName!==void 0?r.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g);function b(D){if(t.debug.checkShaderErrors){const R=r.getProgramInfoLog(g).trim(),z=r.getShaderInfoLog(S).trim(),F=r.getShaderInfoLog(C).trim();let V=!0,j=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(V=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,g,S,C);else{const Z=lD(r,S,"vertex"),U=lD(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+R+`
`+Z+`
`+U)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(z===""||F==="")&&(j=!1);j&&(D.diagnostics={runnable:V,programLog:R,vertexShader:{log:z,prefix:A},fragmentShader:{log:F,prefix:m}})}r.deleteShader(S),r.deleteShader(C),M=new G_(r,g),I=fse(r,g)}let M;this.getUniforms=function(){return M===void 0&&b(this),M};let I;this.getAttributes=function(){return I===void 0&&b(this),I};let T=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(g,ise)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=rse++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=C,this}let wse=0;class Sse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Cse(e),n.set(e,i)),i}}class Cse{constructor(e){this.id=wse++,this.code=e,this.usedTimes=0}}function bse(t,e,n,i,r,s,o){const a=new Nh,l=new Sse,c=new Set,u=[],f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(I){return c.add(I),I===0?"uv":`uv${I}`}function A(I,T,D,R,z){const F=R.fog,V=z.geometry,j=I.isMeshStandardMaterial?R.environment:null,Z=(I.isMeshStandardMaterial?n:e).get(I.envMap||j),U=Z&&Z.mapping===y0?Z.image.height:null,$=p[I.type];I.precision!==null&&(d=r.getMaxPrecision(I.precision),d!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",d,"instead."));const X=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Q=X!==void 0?X.length:0;let J=0;V.morphAttributes.position!==void 0&&(J=1),V.morphAttributes.normal!==void 0&&(J=2),V.morphAttributes.color!==void 0&&(J=3);let ne,O,N,G;if($){const gt=tl[$];ne=gt.vertexShader,O=gt.fragmentShader}else ne=I.vertexShader,O=I.fragmentShader,l.update(I),N=l.getVertexShaderID(I),G=l.getFragmentShaderID(I);const H=t.getRenderTarget(),oe=z.isInstancedMesh===!0,de=z.isBatchedMesh===!0,ce=!!I.map,ge=!!I.matcap,q=!!Z,xe=!!I.aoMap,ue=!!I.lightMap,me=!!I.bumpMap,pe=!!I.normalMap,Le=!!I.displacementMap,re=!!I.emissiveMap,ie=!!I.metalnessMap,te=!!I.roughnessMap,W=I.anisotropy>0,Me=I.clearcoat>0,De=I.dispersion>0,Ee=I.iridescence>0,_e=I.sheen>0,Ze=I.transmission>0,Oe=W&&!!I.anisotropyMap,we=Me&&!!I.clearcoatMap,be=Me&&!!I.clearcoatNormalMap,Be=Me&&!!I.clearcoatRoughnessMap,Ve=Ee&&!!I.iridescenceMap,ot=Ee&&!!I.iridescenceThicknessMap,$e=_e&&!!I.sheenColorMap,qe=_e&&!!I.sheenRoughnessMap,fe=!!I.specularMap,Ue=!!I.specularColorMap,it=!!I.specularIntensityMap,Ae=Ze&&!!I.transmissionMap,Ye=Ze&&!!I.thicknessMap,ye=!!I.gradientMap,He=!!I.alphaMap,lt=I.alphaTest>0,mt=!!I.alphaHash,dt=!!I.extensions;let Ot=cl;I.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(Ot=t.toneMapping);const Xt={shaderID:$,shaderType:I.type,shaderName:I.name,vertexShader:ne,fragmentShader:O,defines:I.defines,customVertexShaderID:N,customFragmentShaderID:G,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:d,batching:de,batchingColor:de&&z._colorsTexture!==null,instancing:oe,instancingColor:oe&&z.instanceColor!==null,instancingMorph:oe&&z.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:H===null?t.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:Ba,alphaToCoverage:!!I.alphaToCoverage,map:ce,matcap:ge,envMap:q,envMapMode:q&&Z.mapping,envMapCubeUVHeight:U,aoMap:xe,lightMap:ue,bumpMap:me,normalMap:pe,displacementMap:h&&Le,emissiveMap:re,normalMapObjectSpace:pe&&I.normalMapType===cQ,normalMapTangentSpace:pe&&I.normalMapType===Bf,metalnessMap:ie,roughnessMap:te,anisotropy:W,anisotropyMap:Oe,clearcoat:Me,clearcoatMap:we,clearcoatNormalMap:be,clearcoatRoughnessMap:Be,dispersion:De,iridescence:Ee,iridescenceMap:Ve,iridescenceThicknessMap:ot,sheen:_e,sheenColorMap:$e,sheenRoughnessMap:qe,specularMap:fe,specularColorMap:Ue,specularIntensityMap:it,transmission:Ze,transmissionMap:Ae,thicknessMap:Ye,gradientMap:ye,opaque:I.transparent===!1&&I.blending===lf&&I.alphaToCoverage===!1,alphaMap:He,alphaTest:lt,alphaHash:mt,combine:I.combine,mapUv:ce&&g(I.map.channel),aoMapUv:xe&&g(I.aoMap.channel),lightMapUv:ue&&g(I.lightMap.channel),bumpMapUv:me&&g(I.bumpMap.channel),normalMapUv:pe&&g(I.normalMap.channel),displacementMapUv:Le&&g(I.displacementMap.channel),emissiveMapUv:re&&g(I.emissiveMap.channel),metalnessMapUv:ie&&g(I.metalnessMap.channel),roughnessMapUv:te&&g(I.roughnessMap.channel),anisotropyMapUv:Oe&&g(I.anisotropyMap.channel),clearcoatMapUv:we&&g(I.clearcoatMap.channel),clearcoatNormalMapUv:be&&g(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Be&&g(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ve&&g(I.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&g(I.iridescenceThicknessMap.channel),sheenColorMapUv:$e&&g(I.sheenColorMap.channel),sheenRoughnessMapUv:qe&&g(I.sheenRoughnessMap.channel),specularMapUv:fe&&g(I.specularMap.channel),specularColorMapUv:Ue&&g(I.specularColorMap.channel),specularIntensityMapUv:it&&g(I.specularIntensityMap.channel),transmissionMapUv:Ae&&g(I.transmissionMap.channel),thicknessMapUv:Ye&&g(I.thicknessMap.channel),alphaMapUv:He&&g(I.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(pe||W),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!V.attributes.uv&&(ce||He),fog:!!F,useFog:I.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:z.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:J,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&D.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ot,decodeVideoTexture:ce&&I.map.isVideoTexture===!0&&Xn.getTransfer(I.map.colorSpace)===di,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Qn,flipSided:I.side===Ki,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:dt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&I.extensions.multiDraw===!0||de)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Xt.vertexUv1s=c.has(1),Xt.vertexUv2s=c.has(2),Xt.vertexUv3s=c.has(3),c.clear(),Xt}function m(I){const T=[];if(I.shaderID?T.push(I.shaderID):(T.push(I.customVertexShaderID),T.push(I.customFragmentShaderID)),I.defines!==void 0)for(const D in I.defines)T.push(D),T.push(I.defines[D]);return I.isRawShaderMaterial===!1&&(v(T,I),y(T,I),T.push(t.outputColorSpace)),T.push(I.customProgramCacheKey),T.join()}function v(I,T){I.push(T.precision),I.push(T.outputColorSpace),I.push(T.envMapMode),I.push(T.envMapCubeUVHeight),I.push(T.mapUv),I.push(T.alphaMapUv),I.push(T.lightMapUv),I.push(T.aoMapUv),I.push(T.bumpMapUv),I.push(T.normalMapUv),I.push(T.displacementMapUv),I.push(T.emissiveMapUv),I.push(T.metalnessMapUv),I.push(T.roughnessMapUv),I.push(T.anisotropyMapUv),I.push(T.clearcoatMapUv),I.push(T.clearcoatNormalMapUv),I.push(T.clearcoatRoughnessMapUv),I.push(T.iridescenceMapUv),I.push(T.iridescenceThicknessMapUv),I.push(T.sheenColorMapUv),I.push(T.sheenRoughnessMapUv),I.push(T.specularMapUv),I.push(T.specularColorMapUv),I.push(T.specularIntensityMapUv),I.push(T.transmissionMapUv),I.push(T.thicknessMapUv),I.push(T.combine),I.push(T.fogExp2),I.push(T.sizeAttenuation),I.push(T.morphTargetsCount),I.push(T.morphAttributeCount),I.push(T.numDirLights),I.push(T.numPointLights),I.push(T.numSpotLights),I.push(T.numSpotLightMaps),I.push(T.numHemiLights),I.push(T.numRectAreaLights),I.push(T.numDirLightShadows),I.push(T.numPointLightShadows),I.push(T.numSpotLightShadows),I.push(T.numSpotLightShadowsWithMaps),I.push(T.numLightProbes),I.push(T.shadowMapType),I.push(T.toneMapping),I.push(T.numClippingPlanes),I.push(T.numClipIntersection),I.push(T.depthPacking)}function y(I,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.doubleSided&&a.enable(10),T.flipSided&&a.enable(11),T.useDepthPacking&&a.enable(12),T.dithering&&a.enable(13),T.transmission&&a.enable(14),T.sheen&&a.enable(15),T.opaque&&a.enable(16),T.pointsUvs&&a.enable(17),T.decodeVideoTexture&&a.enable(18),T.alphaToCoverage&&a.enable(19),I.push(a.mask)}function w(I){const T=p[I.type];let D;if(T){const R=tl[T];D=Ra.clone(R.uniforms)}else D=I.uniforms;return D}function S(I,T){let D;for(let R=0,z=u.length;R<z;R++){const F=u[R];if(F.cacheKey===T){D=F,++D.usedTimes;break}}return D===void 0&&(D=new Ese(t,T,I,s),u.push(D)),D}function C(I){if(--I.usedTimes===0){const T=u.indexOf(I);u[T]=u[u.length-1],u.pop(),I.destroy()}}function b(I){l.remove(I)}function M(){l.dispose()}return{getParameters:A,getProgramCacheKey:m,getUniforms:w,acquireProgram:S,releaseProgram:C,releaseShaderCache:b,programs:u,dispose:M}}function Mse(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Tse(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function dD(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function pD(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(f,h,d,p,g,A){let m=t[e];return m===void 0?(m={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:g,group:A},t[e]=m):(m.id=f.id,m.object=f,m.geometry=h,m.material=d,m.groupOrder=p,m.renderOrder=f.renderOrder,m.z=g,m.group=A),e++,m}function a(f,h,d,p,g,A){const m=o(f,h,d,p,g,A);d.transmission>0?i.push(m):d.transparent===!0?r.push(m):n.push(m)}function l(f,h,d,p,g,A){const m=o(f,h,d,p,g,A);d.transmission>0?i.unshift(m):d.transparent===!0?r.unshift(m):n.unshift(m)}function c(f,h){n.length>1&&n.sort(f||Tse),i.length>1&&i.sort(h||dD),r.length>1&&r.sort(h||dD)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Ise(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new pD,t.set(i,[o])):r>=s.length?(o=new pD,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Bse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new L,color:new Je};break;case"SpotLight":n={position:new L,direction:new L,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new L,color:new Je,distance:0,decay:0};break;case"HemisphereLight":n={direction:new L,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":n={color:new Je,position:new L,halfWidth:new L,halfHeight:new L};break}return t[e.id]=n,n}}}function Rse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Pse=0;function Dse(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Lse(t){const e=new Bse,n=Rse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new L);const r=new L,s=new Ge,o=new Ge;function a(c){let u=0,f=0,h=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let d=0,p=0,g=0,A=0,m=0,v=0,y=0,w=0,S=0,C=0,b=0;c.sort(Dse);for(let I=0,T=c.length;I<T;I++){const D=c[I],R=D.color,z=D.intensity,F=D.distance,V=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=R.r*z,f+=R.g*z,h+=R.b*z;else if(D.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(D.sh.coefficients[j],z);b++}else if(D.isDirectionalLight){const j=e.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const Z=D.shadow,U=n.get(D);U.shadowIntensity=Z.intensity,U.shadowBias=Z.bias,U.shadowNormalBias=Z.normalBias,U.shadowRadius=Z.radius,U.shadowMapSize=Z.mapSize,i.directionalShadow[d]=U,i.directionalShadowMap[d]=V,i.directionalShadowMatrix[d]=D.shadow.matrix,v++}i.directional[d]=j,d++}else if(D.isSpotLight){const j=e.get(D);j.position.setFromMatrixPosition(D.matrixWorld),j.color.copy(R).multiplyScalar(z),j.distance=F,j.coneCos=Math.cos(D.angle),j.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),j.decay=D.decay,i.spot[g]=j;const Z=D.shadow;if(D.map&&(i.spotLightMap[S]=D.map,S++,Z.updateMatrices(D),D.castShadow&&C++),i.spotLightMatrix[g]=Z.matrix,D.castShadow){const U=n.get(D);U.shadowIntensity=Z.intensity,U.shadowBias=Z.bias,U.shadowNormalBias=Z.normalBias,U.shadowRadius=Z.radius,U.shadowMapSize=Z.mapSize,i.spotShadow[g]=U,i.spotShadowMap[g]=V,w++}g++}else if(D.isRectAreaLight){const j=e.get(D);j.color.copy(R).multiplyScalar(z),j.halfWidth.set(D.width*.5,0,0),j.halfHeight.set(0,D.height*.5,0),i.rectArea[A]=j,A++}else if(D.isPointLight){const j=e.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity),j.distance=D.distance,j.decay=D.decay,D.castShadow){const Z=D.shadow,U=n.get(D);U.shadowIntensity=Z.intensity,U.shadowBias=Z.bias,U.shadowNormalBias=Z.normalBias,U.shadowRadius=Z.radius,U.shadowMapSize=Z.mapSize,U.shadowCameraNear=Z.camera.near,U.shadowCameraFar=Z.camera.far,i.pointShadow[p]=U,i.pointShadowMap[p]=V,i.pointShadowMatrix[p]=D.shadow.matrix,y++}i.point[p]=j,p++}else if(D.isHemisphereLight){const j=e.get(D);j.skyColor.copy(D.color).multiplyScalar(z),j.groundColor.copy(D.groundColor).multiplyScalar(z),i.hemi[m]=j,m++}}A>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=wt.LTC_FLOAT_1,i.rectAreaLTC2=wt.LTC_FLOAT_2):(i.rectAreaLTC1=wt.LTC_HALF_1,i.rectAreaLTC2=wt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=f,i.ambient[2]=h;const M=i.hash;(M.directionalLength!==d||M.pointLength!==p||M.spotLength!==g||M.rectAreaLength!==A||M.hemiLength!==m||M.numDirectionalShadows!==v||M.numPointShadows!==y||M.numSpotShadows!==w||M.numSpotMaps!==S||M.numLightProbes!==b)&&(i.directional.length=d,i.spot.length=g,i.rectArea.length=A,i.point.length=p,i.hemi.length=m,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=w+S-C,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=b,M.directionalLength=d,M.pointLength=p,M.spotLength=g,M.rectAreaLength=A,M.hemiLength=m,M.numDirectionalShadows=v,M.numPointShadows=y,M.numSpotShadows=w,M.numSpotMaps=S,M.numLightProbes=b,i.version=Pse++)}function l(c,u){let f=0,h=0,d=0,p=0,g=0;const A=u.matrixWorldInverse;for(let m=0,v=c.length;m<v;m++){const y=c[m];if(y.isDirectionalLight){const w=i.directional[f];w.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(A),f++}else if(y.isSpotLight){const w=i.spot[d];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(A),w.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(A),d++}else if(y.isRectAreaLight){const w=i.rectArea[p];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(A),o.identity(),s.copy(y.matrixWorld),s.premultiply(A),o.extractRotation(s),w.halfWidth.set(y.width*.5,0,0),w.halfHeight.set(0,y.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),p++}else if(y.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(A),h++}else if(y.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(y.matrixWorld),w.direction.transformDirection(A),g++}}}return{setup:a,setupView:l,state:i}}function mD(t){const e=new Lse(t),n=[],i=[];function r(u){c.camera=u,n.length=0,i.length=0}function s(u){n.push(u)}function o(u){i.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Fse(t){let e=new WeakMap;function n(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new mD(t),e.set(r,[a])):s>=o.length?(a=new mD(t),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:n,dispose:i}}class Dv extends cr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lQ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class dw extends cr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ose=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Use(t,e,n){let i=new fd;const r=new Ie,s=new Ie,o=new Jt,a=new Dv({depthPacking:aw}),l=new dw,c={},u=n.maxTextureSize,f={[js]:Ki,[Ki]:js,[Qn]:Qn},h=new Fn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Ose,fragmentShader:zse}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new Dt;p.setAttribute("position",new Gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new ut(p,h),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ew;let m=this.type;this.render=function(C,b,M){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||C.length===0)return;const I=t.getRenderTarget(),T=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),R=t.state;R.setBlending(ba),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const z=m!==Ja&&this.type===Ja,F=m===Ja&&this.type!==Ja;for(let V=0,j=C.length;V<j;V++){const Z=C[V],U=Z.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const $=U.getFrameExtents();if(r.multiply($),s.copy(U.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/$.x),r.x=s.x*$.x,U.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/$.y),r.y=s.y*$.y,U.mapSize.y=s.y)),U.map===null||z===!0||F===!0){const Q=this.type!==Ja?{minFilter:fn,magFilter:fn}:{};U.map!==null&&U.map.dispose(),U.map=new Ln(r.x,r.y,Q),U.map.texture.name=Z.name+".shadowMap",U.camera.updateProjectionMatrix()}t.setRenderTarget(U.map),t.clear();const X=U.getViewportCount();for(let Q=0;Q<X;Q++){const J=U.getViewport(Q);o.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),R.viewport(o),U.updateMatrices(Z,Q),i=U.getFrustum(),w(b,M,U.camera,Z,this.type)}U.isPointLightShadow!==!0&&this.type===Ja&&v(U,M),U.needsUpdate=!1}m=this.type,A.needsUpdate=!1,t.setRenderTarget(I,T,D)};function v(C,b){const M=e.update(g);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,d.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Ln(r.x,r.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(b,null,M,h,g,null),d.uniforms.shadow_pass.value=C.mapPass.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(b,null,M,d,g,null)}function y(C,b,M,I){let T=null;const D=M.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)T=D;else if(T=M.isPointLight===!0?l:a,t.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const R=T.uuid,z=b.uuid;let F=c[R];F===void 0&&(F={},c[R]=F);let V=F[z];V===void 0&&(V=T.clone(),F[z]=V,b.addEventListener("dispose",S)),T=V}if(T.visible=b.visible,T.wireframe=b.wireframe,I===Ja?T.side=b.shadowSide!==null?b.shadowSide:b.side:T.side=b.shadowSide!==null?b.shadowSide:f[b.side],T.alphaMap=b.alphaMap,T.alphaTest=b.alphaTest,T.map=b.map,T.clipShadows=b.clipShadows,T.clippingPlanes=b.clippingPlanes,T.clipIntersection=b.clipIntersection,T.displacementMap=b.displacementMap,T.displacementScale=b.displacementScale,T.displacementBias=b.displacementBias,T.wireframeLinewidth=b.wireframeLinewidth,T.linewidth=b.linewidth,M.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const R=t.properties.get(T);R.light=M}return T}function w(C,b,M,I,T){if(C.visible===!1)return;if(C.layers.test(b.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&T===Ja)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,C.matrixWorld);const z=e.update(C),F=C.material;if(Array.isArray(F)){const V=z.groups;for(let j=0,Z=V.length;j<Z;j++){const U=V[j],$=F[U.materialIndex];if($&&$.visible){const X=y(C,$,I,T);C.onBeforeShadow(t,C,b,M,z,X,U),t.renderBufferDirect(M,null,z,X,C,U),C.onAfterShadow(t,C,b,M,z,X,U)}}}else if(F.visible){const V=y(C,F,I,T);C.onBeforeShadow(t,C,b,M,z,V,null),t.renderBufferDirect(M,null,z,V,C,null),C.onAfterShadow(t,C,b,M,z,V,null)}}const R=C.children;for(let z=0,F=R.length;z<F;z++)w(R[z],b,M,I,T)}function S(C){C.target.removeEventListener("dispose",S);for(const M in c){const I=c[M],T=C.target.uuid;T in I&&(I[T].dispose(),delete I[T])}}}function kse(t){function e(){let Ae=!1;const Ye=new Jt;let ye=null;const He=new Jt(0,0,0,0);return{setMask:function(lt){ye!==lt&&!Ae&&(t.colorMask(lt,lt,lt,lt),ye=lt)},setLocked:function(lt){Ae=lt},setClear:function(lt,mt,dt,Ot,Xt){Xt===!0&&(lt*=Ot,mt*=Ot,dt*=Ot),Ye.set(lt,mt,dt,Ot),He.equals(Ye)===!1&&(t.clearColor(lt,mt,dt,Ot),He.copy(Ye))},reset:function(){Ae=!1,ye=null,He.set(-1,0,0,0)}}}function n(){let Ae=!1,Ye=null,ye=null,He=null;return{setTest:function(lt){lt?G(t.DEPTH_TEST):H(t.DEPTH_TEST)},setMask:function(lt){Ye!==lt&&!Ae&&(t.depthMask(lt),Ye=lt)},setFunc:function(lt){if(ye!==lt){switch(lt){case HH:t.depthFunc(t.NEVER);break;case QH:t.depthFunc(t.ALWAYS);break;case VH:t.depthFunc(t.LESS);break;case NA:t.depthFunc(t.LEQUAL);break;case WH:t.depthFunc(t.EQUAL);break;case jH:t.depthFunc(t.GEQUAL);break;case XH:t.depthFunc(t.GREATER);break;case YH:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ye=lt}},setLocked:function(lt){Ae=lt},setClear:function(lt){He!==lt&&(t.clearDepth(lt),He=lt)},reset:function(){Ae=!1,Ye=null,ye=null,He=null}}}function i(){let Ae=!1,Ye=null,ye=null,He=null,lt=null,mt=null,dt=null,Ot=null,Xt=null;return{setTest:function(gt){Ae||(gt?G(t.STENCIL_TEST):H(t.STENCIL_TEST))},setMask:function(gt){Ye!==gt&&!Ae&&(t.stencilMask(gt),Ye=gt)},setFunc:function(gt,en,_n){(ye!==gt||He!==en||lt!==_n)&&(t.stencilFunc(gt,en,_n),ye=gt,He=en,lt=_n)},setOp:function(gt,en,_n){(mt!==gt||dt!==en||Ot!==_n)&&(t.stencilOp(gt,en,_n),mt=gt,dt=en,Ot=_n)},setLocked:function(gt){Ae=gt},setClear:function(gt){Xt!==gt&&(t.clearStencil(gt),Xt=gt)},reset:function(){Ae=!1,Ye=null,ye=null,He=null,lt=null,mt=null,dt=null,Ot=null,Xt=null}}}const r=new e,s=new n,o=new i,a=new WeakMap,l=new WeakMap;let c={},u={},f=new WeakMap,h=[],d=null,p=!1,g=null,A=null,m=null,v=null,y=null,w=null,S=null,C=new Je(0,0,0),b=0,M=!1,I=null,T=null,D=null,R=null,z=null;const F=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,j=0;const Z=t.getParameter(t.VERSION);Z.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(Z)[1]),V=j>=1):Z.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),V=j>=2);let U=null,$={};const X=t.getParameter(t.SCISSOR_BOX),Q=t.getParameter(t.VIEWPORT),J=new Jt().fromArray(X),ne=new Jt().fromArray(Q);function O(Ae,Ye,ye,He){const lt=new Uint8Array(4),mt=t.createTexture();t.bindTexture(Ae,mt),t.texParameteri(Ae,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ae,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let dt=0;dt<ye;dt++)Ae===t.TEXTURE_3D||Ae===t.TEXTURE_2D_ARRAY?t.texImage3D(Ye,0,t.RGBA,1,1,He,0,t.RGBA,t.UNSIGNED_BYTE,lt):t.texImage2D(Ye+dt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,lt);return mt}const N={};N[t.TEXTURE_2D]=O(t.TEXTURE_2D,t.TEXTURE_2D,1),N[t.TEXTURE_CUBE_MAP]=O(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),N[t.TEXTURE_2D_ARRAY]=O(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),N[t.TEXTURE_3D]=O(t.TEXTURE_3D,t.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),G(t.DEPTH_TEST),s.setFunc(NA),me(!1),pe(ST),G(t.CULL_FACE),xe(ba);function G(Ae){c[Ae]!==!0&&(t.enable(Ae),c[Ae]=!0)}function H(Ae){c[Ae]!==!1&&(t.disable(Ae),c[Ae]=!1)}function oe(Ae,Ye){return u[Ae]!==Ye?(t.bindFramebuffer(Ae,Ye),u[Ae]=Ye,Ae===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=Ye),Ae===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=Ye),!0):!1}function de(Ae,Ye){let ye=h,He=!1;if(Ae){ye=f.get(Ye),ye===void 0&&(ye=[],f.set(Ye,ye));const lt=Ae.textures;if(ye.length!==lt.length||ye[0]!==t.COLOR_ATTACHMENT0){for(let mt=0,dt=lt.length;mt<dt;mt++)ye[mt]=t.COLOR_ATTACHMENT0+mt;ye.length=lt.length,He=!0}}else ye[0]!==t.BACK&&(ye[0]=t.BACK,He=!0);He&&t.drawBuffers(ye)}function ce(Ae){return d!==Ae?(t.useProgram(Ae),d=Ae,!0):!1}const ge={[Gu]:t.FUNC_ADD,[bH]:t.FUNC_SUBTRACT,[MH]:t.FUNC_REVERSE_SUBTRACT};ge[TH]=t.MIN,ge[IH]=t.MAX;const q={[BH]:t.ZERO,[nw]:t.ONE,[RH]:t.SRC_COLOR,[kA]:t.SRC_ALPHA,[zH]:t.SRC_ALPHA_SATURATE,[FH]:t.DST_COLOR,[DH]:t.DST_ALPHA,[PH]:t.ONE_MINUS_SRC_COLOR,[F3]:t.ONE_MINUS_SRC_ALPHA,[OH]:t.ONE_MINUS_DST_COLOR,[LH]:t.ONE_MINUS_DST_ALPHA,[UH]:t.CONSTANT_COLOR,[kH]:t.ONE_MINUS_CONSTANT_COLOR,[NH]:t.CONSTANT_ALPHA,[GH]:t.ONE_MINUS_CONSTANT_ALPHA};function xe(Ae,Ye,ye,He,lt,mt,dt,Ot,Xt,gt){if(Ae===ba){p===!0&&(H(t.BLEND),p=!1);return}if(p===!1&&(G(t.BLEND),p=!0),Ae!==tw){if(Ae!==g||gt!==M){if((A!==Gu||y!==Gu)&&(t.blendEquation(t.FUNC_ADD),A=Gu,y=Gu),gt)switch(Ae){case lf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case L3:t.blendFunc(t.ONE,t.ONE);break;case CT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case bT:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case lf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case L3:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case CT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case bT:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}m=null,v=null,w=null,S=null,C.set(0,0,0),b=0,g=Ae,M=gt}return}lt=lt||Ye,mt=mt||ye,dt=dt||He,(Ye!==A||lt!==y)&&(t.blendEquationSeparate(ge[Ye],ge[lt]),A=Ye,y=lt),(ye!==m||He!==v||mt!==w||dt!==S)&&(t.blendFuncSeparate(q[ye],q[He],q[mt],q[dt]),m=ye,v=He,w=mt,S=dt),(Ot.equals(C)===!1||Xt!==b)&&(t.blendColor(Ot.r,Ot.g,Ot.b,Xt),C.copy(Ot),b=Xt),g=Ae,M=!1}function ue(Ae,Ye){Ae.side===Qn?H(t.CULL_FACE):G(t.CULL_FACE);let ye=Ae.side===Ki;Ye&&(ye=!ye),me(ye),Ae.blending===lf&&Ae.transparent===!1?xe(ba):xe(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),s.setFunc(Ae.depthFunc),s.setTest(Ae.depthTest),s.setMask(Ae.depthWrite),r.setMask(Ae.colorWrite);const He=Ae.stencilWrite;o.setTest(He),He&&(o.setMask(Ae.stencilWriteMask),o.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),o.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),re(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?G(t.SAMPLE_ALPHA_TO_COVERAGE):H(t.SAMPLE_ALPHA_TO_COVERAGE)}function me(Ae){I!==Ae&&(Ae?t.frontFace(t.CW):t.frontFace(t.CCW),I=Ae)}function pe(Ae){Ae!==wH?(G(t.CULL_FACE),Ae!==T&&(Ae===ST?t.cullFace(t.BACK):Ae===SH?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):H(t.CULL_FACE),T=Ae}function Le(Ae){Ae!==D&&(V&&t.lineWidth(Ae),D=Ae)}function re(Ae,Ye,ye){Ae?(G(t.POLYGON_OFFSET_FILL),(R!==Ye||z!==ye)&&(t.polygonOffset(Ye,ye),R=Ye,z=ye)):H(t.POLYGON_OFFSET_FILL)}function ie(Ae){Ae?G(t.SCISSOR_TEST):H(t.SCISSOR_TEST)}function te(Ae){Ae===void 0&&(Ae=t.TEXTURE0+F-1),U!==Ae&&(t.activeTexture(Ae),U=Ae)}function W(Ae,Ye,ye){ye===void 0&&(U===null?ye=t.TEXTURE0+F-1:ye=U);let He=$[ye];He===void 0&&(He={type:void 0,texture:void 0},$[ye]=He),(He.type!==Ae||He.texture!==Ye)&&(U!==ye&&(t.activeTexture(ye),U=ye),t.bindTexture(Ae,Ye||N[Ae]),He.type=Ae,He.texture=Ye)}function Me(){const Ae=$[U];Ae!==void 0&&Ae.type!==void 0&&(t.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function De(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ee(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function _e(){try{t.texSubImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ze(){try{t.texSubImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Oe(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function we(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Be(){try{t.texStorage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ve(){try{t.texImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ot(){try{t.texImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function $e(Ae){J.equals(Ae)===!1&&(t.scissor(Ae.x,Ae.y,Ae.z,Ae.w),J.copy(Ae))}function qe(Ae){ne.equals(Ae)===!1&&(t.viewport(Ae.x,Ae.y,Ae.z,Ae.w),ne.copy(Ae))}function fe(Ae,Ye){let ye=l.get(Ye);ye===void 0&&(ye=new WeakMap,l.set(Ye,ye));let He=ye.get(Ae);He===void 0&&(He=t.getUniformBlockIndex(Ye,Ae.name),ye.set(Ae,He))}function Ue(Ae,Ye){const He=l.get(Ye).get(Ae);a.get(Ye)!==He&&(t.uniformBlockBinding(Ye,He,Ae.__bindingPointIndex),a.set(Ye,He))}function it(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},U=null,$={},u={},f=new WeakMap,h=[],d=null,p=!1,g=null,A=null,m=null,v=null,y=null,w=null,S=null,C=new Je(0,0,0),b=0,M=!1,I=null,T=null,D=null,R=null,z=null,J.set(0,0,t.canvas.width,t.canvas.height),ne.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:G,disable:H,bindFramebuffer:oe,drawBuffers:de,useProgram:ce,setBlending:xe,setMaterial:ue,setFlipSided:me,setCullFace:pe,setLineWidth:Le,setPolygonOffset:re,setScissorTest:ie,activeTexture:te,bindTexture:W,unbindTexture:Me,compressedTexImage2D:De,compressedTexImage3D:Ee,texImage2D:Ve,texImage3D:ot,updateUBOMapping:fe,uniformBlockBinding:Ue,texStorage2D:be,texStorage3D:Be,texSubImage2D:_e,texSubImage3D:Ze,compressedTexSubImage2D:Oe,compressedTexSubImage3D:we,scissor:$e,viewport:qe,reset:it}}function Nse(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function Gse(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function Hse(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function PT(t,e,n,i){const r=Qse(i);switch(n){case m8:return t*e;case A8:return t*e;case v8:return t*e*2;case co:return t*e/r.components*r.byteLength;case x0:return t*e/r.components*r.byteLength;case Gc:return t*e*2/r.components*r.byteLength;case _0:return t*e*2/r.components*r.byteLength;case g8:return t*e*3/r.components*r.byteLength;case In:return t*e*4/r.components*r.byteLength;case xf:return t*e*4/r.components*r.byteLength;case Tm:case tA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case nA:case Im:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case O3:case z3:return Math.max(t,16)*Math.max(e,8)/4;case HA:case QA:return Math.max(t,8)*Math.max(e,8)/2;case VA:case WA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case jA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case XA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case U3:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case k3:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case N3:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Jm:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case G3:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case H3:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Q3:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case V3:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case W3:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case j3:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case X3:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Y3:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case q3:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Bm:case $3:case K3:return Math.ceil(t/4)*Math.ceil(e/4)*16;case y8:case J3:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Z3:case eE:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Qse(t){switch(t){case Jn:case Km:return{byteLength:1,components:1};case ic:case Bv:case On:return{byteLength:2,components:1};case rw:case sw:return{byteLength:2,components:4};case Ss:case cf:case vn:return{byteLength:4,components:1};case p8:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const Vse={contain:Nse,cover:Gse,fill:Hse,getByteLength:PT};function Wse(t,e,n,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ie,u=new WeakMap;let f;const h=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(te,W){return d?new OffscreenCanvas(te,W):ev("canvas")}function g(te,W,Me){let De=1;const Ee=ie(te);if((Ee.width>Me||Ee.height>Me)&&(De=Me/Math.max(Ee.width,Ee.height)),De<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const _e=Math.floor(De*Ee.width),Ze=Math.floor(De*Ee.height);f===void 0&&(f=p(_e,Ze));const Oe=W?p(_e,Ze):f;return Oe.width=_e,Oe.height=Ze,Oe.getContext("2d").drawImage(te,0,0,_e,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+_e+"x"+Ze+")."),Oe}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),te;return te}function A(te){return te.generateMipmaps&&te.minFilter!==fn&&te.minFilter!==Vt}function m(te){t.generateMipmap(te)}function v(te,W,Me,De,Ee=!1){if(te!==null){if(t[te]!==void 0)return t[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let _e=W;if(W===t.RED&&(Me===t.FLOAT&&(_e=t.R32F),Me===t.HALF_FLOAT&&(_e=t.R16F),Me===t.UNSIGNED_BYTE&&(_e=t.R8)),W===t.RED_INTEGER&&(Me===t.UNSIGNED_BYTE&&(_e=t.R8UI),Me===t.UNSIGNED_SHORT&&(_e=t.R16UI),Me===t.UNSIGNED_INT&&(_e=t.R32UI),Me===t.BYTE&&(_e=t.R8I),Me===t.SHORT&&(_e=t.R16I),Me===t.INT&&(_e=t.R32I)),W===t.RG&&(Me===t.FLOAT&&(_e=t.RG32F),Me===t.HALF_FLOAT&&(_e=t.RG16F),Me===t.UNSIGNED_BYTE&&(_e=t.RG8)),W===t.RG_INTEGER&&(Me===t.UNSIGNED_BYTE&&(_e=t.RG8UI),Me===t.UNSIGNED_SHORT&&(_e=t.RG16UI),Me===t.UNSIGNED_INT&&(_e=t.RG32UI),Me===t.BYTE&&(_e=t.RG8I),Me===t.SHORT&&(_e=t.RG16I),Me===t.INT&&(_e=t.RG32I)),W===t.RGB&&Me===t.UNSIGNED_INT_5_9_9_9_REV&&(_e=t.RGB9_E5),W===t.RGBA){const Ze=Ee?qA:Xn.getTransfer(De);Me===t.FLOAT&&(_e=t.RGBA32F),Me===t.HALF_FLOAT&&(_e=t.RGBA16F),Me===t.UNSIGNED_BYTE&&(_e=Ze===di?t.SRGB8_ALPHA8:t.RGBA8),Me===t.UNSIGNED_SHORT_4_4_4_4&&(_e=t.RGBA4),Me===t.UNSIGNED_SHORT_5_5_5_1&&(_e=t.RGB5_A1)}return(_e===t.R16F||_e===t.R32F||_e===t.RG16F||_e===t.RG32F||_e===t.RGBA16F||_e===t.RGBA32F)&&e.get("EXT_color_buffer_float"),_e}function y(te,W){let Me;return te?W===null||W===Ss||W===Kh?Me=t.DEPTH24_STENCIL8:W===vn?Me=t.DEPTH32F_STENCIL8:W===ic&&(Me=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Ss||W===Kh?Me=t.DEPTH_COMPONENT24:W===vn?Me=t.DEPTH_COMPONENT32F:W===ic&&(Me=t.DEPTH_COMPONENT16),Me}function w(te,W){return A(te)===!0||te.isFramebufferTexture&&te.minFilter!==fn&&te.minFilter!==Vt?Math.log2(Math.max(W.width,W.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?W.mipmaps.length:1}function S(te){const W=te.target;W.removeEventListener("dispose",S),b(W),W.isVideoTexture&&u.delete(W)}function C(te){const W=te.target;W.removeEventListener("dispose",C),I(W)}function b(te){const W=i.get(te);if(W.__webglInit===void 0)return;const Me=te.source,De=h.get(Me);if(De){const Ee=De[W.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&M(te),Object.keys(De).length===0&&h.delete(Me)}i.remove(te)}function M(te){const W=i.get(te);t.deleteTexture(W.__webglTexture);const Me=te.source,De=h.get(Me);delete De[W.__cacheKey],o.memory.textures--}function I(te){const W=i.get(te);if(te.depthTexture&&te.depthTexture.dispose(),te.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(W.__webglFramebuffer[De]))for(let Ee=0;Ee<W.__webglFramebuffer[De].length;Ee++)t.deleteFramebuffer(W.__webglFramebuffer[De][Ee]);else t.deleteFramebuffer(W.__webglFramebuffer[De]);W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer[De])}else{if(Array.isArray(W.__webglFramebuffer))for(let De=0;De<W.__webglFramebuffer.length;De++)t.deleteFramebuffer(W.__webglFramebuffer[De]);else t.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&t.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let De=0;De<W.__webglColorRenderbuffer.length;De++)W.__webglColorRenderbuffer[De]&&t.deleteRenderbuffer(W.__webglColorRenderbuffer[De]);W.__webglDepthRenderbuffer&&t.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const Me=te.textures;for(let De=0,Ee=Me.length;De<Ee;De++){const _e=i.get(Me[De]);_e.__webglTexture&&(t.deleteTexture(_e.__webglTexture),o.memory.textures--),i.remove(Me[De])}i.remove(te)}let T=0;function D(){T=0}function R(){const te=T;return te>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+r.maxTextures),T+=1,te}function z(te){const W=[];return W.push(te.wrapS),W.push(te.wrapT),W.push(te.wrapR||0),W.push(te.magFilter),W.push(te.minFilter),W.push(te.anisotropy),W.push(te.internalFormat),W.push(te.format),W.push(te.type),W.push(te.generateMipmaps),W.push(te.premultiplyAlpha),W.push(te.flipY),W.push(te.unpackAlignment),W.push(te.colorSpace),W.join()}function F(te,W){const Me=i.get(te);if(te.isVideoTexture&&Le(te),te.isRenderTargetTexture===!1&&te.version>0&&Me.__version!==te.version){const De=te.image;if(De===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(De.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ne(Me,te,W);return}}n.bindTexture(t.TEXTURE_2D,Me.__webglTexture,t.TEXTURE0+W)}function V(te,W){const Me=i.get(te);if(te.version>0&&Me.__version!==te.version){ne(Me,te,W);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Me.__webglTexture,t.TEXTURE0+W)}function j(te,W){const Me=i.get(te);if(te.version>0&&Me.__version!==te.version){ne(Me,te,W);return}n.bindTexture(t.TEXTURE_3D,Me.__webglTexture,t.TEXTURE0+W)}function Z(te,W){const Me=i.get(te);if(te.version>0&&Me.__version!==te.version){O(Me,te,W);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Me.__webglTexture,t.TEXTURE0+W)}const U={[qr]:t.REPEAT,[wi]:t.CLAMP_TO_EDGE,[$m]:t.MIRRORED_REPEAT},$={[fn]:t.NEAREST,[iw]:t.NEAREST_MIPMAP_NEAREST,[Th]:t.NEAREST_MIPMAP_LINEAR,[Vt]:t.LINEAR,[Mm]:t.LINEAR_MIPMAP_NEAREST,[Qs]:t.LINEAR_MIPMAP_LINEAR},X={[hQ]:t.NEVER,[vQ]:t.ALWAYS,[dQ]:t.LESS,[E8]:t.LEQUAL,[pQ]:t.EQUAL,[AQ]:t.GEQUAL,[mQ]:t.GREATER,[gQ]:t.NOTEQUAL};function Q(te,W){if(W.type===vn&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===Vt||W.magFilter===Mm||W.magFilter===Th||W.magFilter===Qs||W.minFilter===Vt||W.minFilter===Mm||W.minFilter===Th||W.minFilter===Qs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(te,t.TEXTURE_WRAP_S,U[W.wrapS]),t.texParameteri(te,t.TEXTURE_WRAP_T,U[W.wrapT]),(te===t.TEXTURE_3D||te===t.TEXTURE_2D_ARRAY)&&t.texParameteri(te,t.TEXTURE_WRAP_R,U[W.wrapR]),t.texParameteri(te,t.TEXTURE_MAG_FILTER,$[W.magFilter]),t.texParameteri(te,t.TEXTURE_MIN_FILTER,$[W.minFilter]),W.compareFunction&&(t.texParameteri(te,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(te,t.TEXTURE_COMPARE_FUNC,X[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===fn||W.minFilter!==Th&&W.minFilter!==Qs||W.type===vn&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||i.get(W).__currentAnisotropy){const Me=e.get("EXT_texture_filter_anisotropic");t.texParameterf(te,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy}}}function J(te,W){let Me=!1;te.__webglInit===void 0&&(te.__webglInit=!0,W.addEventListener("dispose",S));const De=W.source;let Ee=h.get(De);Ee===void 0&&(Ee={},h.set(De,Ee));const _e=z(W);if(_e!==te.__cacheKey){Ee[_e]===void 0&&(Ee[_e]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Me=!0),Ee[_e].usedTimes++;const Ze=Ee[te.__cacheKey];Ze!==void 0&&(Ee[te.__cacheKey].usedTimes--,Ze.usedTimes===0&&M(W)),te.__cacheKey=_e,te.__webglTexture=Ee[_e].texture}return Me}function ne(te,W,Me){let De=t.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(De=t.TEXTURE_2D_ARRAY),W.isData3DTexture&&(De=t.TEXTURE_3D);const Ee=J(te,W),_e=W.source;n.bindTexture(De,te.__webglTexture,t.TEXTURE0+Me);const Ze=i.get(_e);if(_e.version!==Ze.__version||Ee===!0){n.activeTexture(t.TEXTURE0+Me);const Oe=Xn.getPrimaries(Xn.workingColorSpace),we=W.colorSpace===Oc?null:Xn.getPrimaries(W.colorSpace),be=W.colorSpace===Oc||Oe===we?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,be);let Be=g(W.image,!1,r.maxTextureSize);Be=re(W,Be);const Ve=s.convert(W.format,W.colorSpace),ot=s.convert(W.type);let $e=v(W.internalFormat,Ve,ot,W.colorSpace,W.isVideoTexture);Q(De,W);let qe;const fe=W.mipmaps,Ue=W.isVideoTexture!==!0,it=Ze.__version===void 0||Ee===!0,Ae=_e.dataReady,Ye=w(W,Be);if(W.isDepthTexture)$e=y(W.format===Jh,W.type),it&&(Ue?n.texStorage2D(t.TEXTURE_2D,1,$e,Be.width,Be.height):n.texImage2D(t.TEXTURE_2D,0,$e,Be.width,Be.height,0,Ve,ot,null));else if(W.isDataTexture)if(fe.length>0){Ue&&it&&n.texStorage2D(t.TEXTURE_2D,Ye,$e,fe[0].width,fe[0].height);for(let ye=0,He=fe.length;ye<He;ye++)qe=fe[ye],Ue?Ae&&n.texSubImage2D(t.TEXTURE_2D,ye,0,0,qe.width,qe.height,Ve,ot,qe.data):n.texImage2D(t.TEXTURE_2D,ye,$e,qe.width,qe.height,0,Ve,ot,qe.data);W.generateMipmaps=!1}else Ue?(it&&n.texStorage2D(t.TEXTURE_2D,Ye,$e,Be.width,Be.height),Ae&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Be.width,Be.height,Ve,ot,Be.data)):n.texImage2D(t.TEXTURE_2D,0,$e,Be.width,Be.height,0,Ve,ot,Be.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){Ue&&it&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ye,$e,fe[0].width,fe[0].height,Be.depth);for(let ye=0,He=fe.length;ye<He;ye++)if(qe=fe[ye],W.format!==In)if(Ve!==null)if(Ue){if(Ae)if(W.layerUpdates.size>0){const lt=PT(qe.width,qe.height,W.format,W.type);for(const mt of W.layerUpdates){const dt=qe.data.subarray(mt*lt/qe.data.BYTES_PER_ELEMENT,(mt+1)*lt/qe.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ye,0,0,mt,qe.width,qe.height,1,Ve,dt,0,0)}W.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ye,0,0,0,qe.width,qe.height,Be.depth,Ve,qe.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ye,$e,qe.width,qe.height,Be.depth,0,qe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ue?Ae&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,ye,0,0,0,qe.width,qe.height,Be.depth,Ve,ot,qe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ye,$e,qe.width,qe.height,Be.depth,0,Ve,ot,qe.data)}else{Ue&&it&&n.texStorage2D(t.TEXTURE_2D,Ye,$e,fe[0].width,fe[0].height);for(let ye=0,He=fe.length;ye<He;ye++)qe=fe[ye],W.format!==In?Ve!==null?Ue?Ae&&n.compressedTexSubImage2D(t.TEXTURE_2D,ye,0,0,qe.width,qe.height,Ve,qe.data):n.compressedTexImage2D(t.TEXTURE_2D,ye,$e,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?Ae&&n.texSubImage2D(t.TEXTURE_2D,ye,0,0,qe.width,qe.height,Ve,ot,qe.data):n.texImage2D(t.TEXTURE_2D,ye,$e,qe.width,qe.height,0,Ve,ot,qe.data)}else if(W.isDataArrayTexture)if(Ue){if(it&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ye,$e,Be.width,Be.height,Be.depth),Ae)if(W.layerUpdates.size>0){const ye=PT(Be.width,Be.height,W.format,W.type);for(const He of W.layerUpdates){const lt=Be.data.subarray(He*ye/Be.data.BYTES_PER_ELEMENT,(He+1)*ye/Be.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,He,Be.width,Be.height,1,Ve,ot,lt)}W.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Be.width,Be.height,Be.depth,Ve,ot,Be.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,$e,Be.width,Be.height,Be.depth,0,Ve,ot,Be.data);else if(W.isData3DTexture)Ue?(it&&n.texStorage3D(t.TEXTURE_3D,Ye,$e,Be.width,Be.height,Be.depth),Ae&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Be.width,Be.height,Be.depth,Ve,ot,Be.data)):n.texImage3D(t.TEXTURE_3D,0,$e,Be.width,Be.height,Be.depth,0,Ve,ot,Be.data);else if(W.isFramebufferTexture){if(it)if(Ue)n.texStorage2D(t.TEXTURE_2D,Ye,$e,Be.width,Be.height);else{let ye=Be.width,He=Be.height;for(let lt=0;lt<Ye;lt++)n.texImage2D(t.TEXTURE_2D,lt,$e,ye,He,0,Ve,ot,null),ye>>=1,He>>=1}}else if(fe.length>0){if(Ue&&it){const ye=ie(fe[0]);n.texStorage2D(t.TEXTURE_2D,Ye,$e,ye.width,ye.height)}for(let ye=0,He=fe.length;ye<He;ye++)qe=fe[ye],Ue?Ae&&n.texSubImage2D(t.TEXTURE_2D,ye,0,0,Ve,ot,qe):n.texImage2D(t.TEXTURE_2D,ye,$e,Ve,ot,qe);W.generateMipmaps=!1}else if(Ue){if(it){const ye=ie(Be);n.texStorage2D(t.TEXTURE_2D,Ye,$e,ye.width,ye.height)}Ae&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ve,ot,Be)}else n.texImage2D(t.TEXTURE_2D,0,$e,Ve,ot,Be);A(W)&&m(De),Ze.__version=_e.version,W.onUpdate&&W.onUpdate(W)}te.__version=W.version}function O(te,W,Me){if(W.image.length!==6)return;const De=J(te,W),Ee=W.source;n.bindTexture(t.TEXTURE_CUBE_MAP,te.__webglTexture,t.TEXTURE0+Me);const _e=i.get(Ee);if(Ee.version!==_e.__version||De===!0){n.activeTexture(t.TEXTURE0+Me);const Ze=Xn.getPrimaries(Xn.workingColorSpace),Oe=W.colorSpace===Oc?null:Xn.getPrimaries(W.colorSpace),we=W.colorSpace===Oc||Ze===Oe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,we);const be=W.isCompressedTexture||W.image[0].isCompressedTexture,Be=W.image[0]&&W.image[0].isDataTexture,Ve=[];for(let He=0;He<6;He++)!be&&!Be?Ve[He]=g(W.image[He],!0,r.maxCubemapSize):Ve[He]=Be?W.image[He].image:W.image[He],Ve[He]=re(W,Ve[He]);const ot=Ve[0],$e=s.convert(W.format,W.colorSpace),qe=s.convert(W.type),fe=v(W.internalFormat,$e,qe,W.colorSpace),Ue=W.isVideoTexture!==!0,it=_e.__version===void 0||De===!0,Ae=Ee.dataReady;let Ye=w(W,ot);Q(t.TEXTURE_CUBE_MAP,W);let ye;if(be){Ue&&it&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ye,fe,ot.width,ot.height);for(let He=0;He<6;He++){ye=Ve[He].mipmaps;for(let lt=0;lt<ye.length;lt++){const mt=ye[lt];W.format!==In?$e!==null?Ue?Ae&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt,0,0,mt.width,mt.height,$e,mt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt,fe,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ue?Ae&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt,0,0,mt.width,mt.height,$e,qe,mt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt,fe,mt.width,mt.height,0,$e,qe,mt.data)}}}else{if(ye=W.mipmaps,Ue&&it){ye.length>0&&Ye++;const He=ie(Ve[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Ye,fe,He.width,He.height)}for(let He=0;He<6;He++)if(Be){Ue?Ae&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,Ve[He].width,Ve[He].height,$e,qe,Ve[He].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,fe,Ve[He].width,Ve[He].height,0,$e,qe,Ve[He].data);for(let lt=0;lt<ye.length;lt++){const dt=ye[lt].image[He].image;Ue?Ae&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt+1,0,0,dt.width,dt.height,$e,qe,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt+1,fe,dt.width,dt.height,0,$e,qe,dt.data)}}else{Ue?Ae&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,$e,qe,Ve[He]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,fe,$e,qe,Ve[He]);for(let lt=0;lt<ye.length;lt++){const mt=ye[lt];Ue?Ae&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt+1,0,0,$e,qe,mt.image[He]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,lt+1,fe,$e,qe,mt.image[He])}}}A(W)&&m(t.TEXTURE_CUBE_MAP),_e.__version=Ee.version,W.onUpdate&&W.onUpdate(W)}te.__version=W.version}function N(te,W,Me,De,Ee,_e){const Ze=s.convert(Me.format,Me.colorSpace),Oe=s.convert(Me.type),we=v(Me.internalFormat,Ze,Oe,Me.colorSpace);if(!i.get(W).__hasExternalTextures){const Be=Math.max(1,W.width>>_e),Ve=Math.max(1,W.height>>_e);Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY?n.texImage3D(Ee,_e,we,Be,Ve,W.depth,0,Ze,Oe,null):n.texImage2D(Ee,_e,we,Be,Ve,0,Ze,Oe,null)}n.bindFramebuffer(t.FRAMEBUFFER,te),pe(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,De,Ee,i.get(Me).__webglTexture,0,me(W)):(Ee===t.TEXTURE_2D||Ee>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,De,Ee,i.get(Me).__webglTexture,_e),n.bindFramebuffer(t.FRAMEBUFFER,null)}function G(te,W,Me){if(t.bindRenderbuffer(t.RENDERBUFFER,te),W.depthBuffer){const De=W.depthTexture,Ee=De&&De.isDepthTexture?De.type:null,_e=y(W.stencilBuffer,Ee),Ze=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Oe=me(W);pe(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Oe,_e,W.width,W.height):Me?t.renderbufferStorageMultisample(t.RENDERBUFFER,Oe,_e,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,_e,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ze,t.RENDERBUFFER,te)}else{const De=W.textures;for(let Ee=0;Ee<De.length;Ee++){const _e=De[Ee],Ze=s.convert(_e.format,_e.colorSpace),Oe=s.convert(_e.type),we=v(_e.internalFormat,Ze,Oe,_e.colorSpace),be=me(W);Me&&pe(W)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,be,we,W.width,W.height):pe(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,we,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,we,W.width,W.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function H(te,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,te),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),F(W.depthTexture,0);const De=i.get(W.depthTexture).__webglTexture,Ee=me(W);if(W.depthTexture.format===Zl)pe(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0,Ee):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0);else if(W.depthTexture.format===Jh)pe(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0,Ee):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function oe(te){const W=i.get(te),Me=te.isWebGLCubeRenderTarget===!0;if(te.depthTexture&&!W.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");H(W.__webglFramebuffer,te)}else if(Me){W.__webglDepthbuffer=[];for(let De=0;De<6;De++)n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer[De]),W.__webglDepthbuffer[De]=t.createRenderbuffer(),G(W.__webglDepthbuffer[De],te,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=t.createRenderbuffer(),G(W.__webglDepthbuffer,te,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function de(te,W,Me){const De=i.get(te);W!==void 0&&N(De.__webglFramebuffer,te,te.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Me!==void 0&&oe(te)}function ce(te){const W=te.texture,Me=i.get(te),De=i.get(W);te.addEventListener("dispose",C);const Ee=te.textures,_e=te.isWebGLCubeRenderTarget===!0,Ze=Ee.length>1;if(Ze||(De.__webglTexture===void 0&&(De.__webglTexture=t.createTexture()),De.__version=W.version,o.memory.textures++),_e){Me.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)if(W.mipmaps&&W.mipmaps.length>0){Me.__webglFramebuffer[Oe]=[];for(let we=0;we<W.mipmaps.length;we++)Me.__webglFramebuffer[Oe][we]=t.createFramebuffer()}else Me.__webglFramebuffer[Oe]=t.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){Me.__webglFramebuffer=[];for(let Oe=0;Oe<W.mipmaps.length;Oe++)Me.__webglFramebuffer[Oe]=t.createFramebuffer()}else Me.__webglFramebuffer=t.createFramebuffer();if(Ze)for(let Oe=0,we=Ee.length;Oe<we;Oe++){const be=i.get(Ee[Oe]);be.__webglTexture===void 0&&(be.__webglTexture=t.createTexture(),o.memory.textures++)}if(te.samples>0&&pe(te)===!1){Me.__webglMultisampledFramebuffer=t.createFramebuffer(),Me.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Me.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Ee.length;Oe++){const we=Ee[Oe];Me.__webglColorRenderbuffer[Oe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Me.__webglColorRenderbuffer[Oe]);const be=s.convert(we.format,we.colorSpace),Be=s.convert(we.type),Ve=v(we.internalFormat,be,Be,we.colorSpace,te.isXRRenderTarget===!0),ot=me(te);t.renderbufferStorageMultisample(t.RENDERBUFFER,ot,Ve,te.width,te.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Oe,t.RENDERBUFFER,Me.__webglColorRenderbuffer[Oe])}t.bindRenderbuffer(t.RENDERBUFFER,null),te.depthBuffer&&(Me.__webglDepthRenderbuffer=t.createRenderbuffer(),G(Me.__webglDepthRenderbuffer,te,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(_e){n.bindTexture(t.TEXTURE_CUBE_MAP,De.__webglTexture),Q(t.TEXTURE_CUBE_MAP,W);for(let Oe=0;Oe<6;Oe++)if(W.mipmaps&&W.mipmaps.length>0)for(let we=0;we<W.mipmaps.length;we++)N(Me.__webglFramebuffer[Oe][we],te,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,we);else N(Me.__webglFramebuffer[Oe],te,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0);A(W)&&m(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ze){for(let Oe=0,we=Ee.length;Oe<we;Oe++){const be=Ee[Oe],Be=i.get(be);n.bindTexture(t.TEXTURE_2D,Be.__webglTexture),Q(t.TEXTURE_2D,be),N(Me.__webglFramebuffer,te,be,t.COLOR_ATTACHMENT0+Oe,t.TEXTURE_2D,0),A(be)&&m(t.TEXTURE_2D)}n.unbindTexture()}else{let Oe=t.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Oe=te.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Oe,De.__webglTexture),Q(Oe,W),W.mipmaps&&W.mipmaps.length>0)for(let we=0;we<W.mipmaps.length;we++)N(Me.__webglFramebuffer[we],te,W,t.COLOR_ATTACHMENT0,Oe,we);else N(Me.__webglFramebuffer,te,W,t.COLOR_ATTACHMENT0,Oe,0);A(W)&&m(Oe),n.unbindTexture()}te.depthBuffer&&oe(te)}function ge(te){const W=te.textures;for(let Me=0,De=W.length;Me<De;Me++){const Ee=W[Me];if(A(Ee)){const _e=te.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ze=i.get(Ee).__webglTexture;n.bindTexture(_e,Ze),m(_e),n.unbindTexture()}}}const q=[],xe=[];function ue(te){if(te.samples>0){if(pe(te)===!1){const W=te.textures,Me=te.width,De=te.height;let Ee=t.COLOR_BUFFER_BIT;const _e=te.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ze=i.get(te),Oe=W.length>1;if(Oe)for(let we=0;we<W.length;we++)n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+we,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+we,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let we=0;we<W.length;we++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Ee|=t.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Ee|=t.STENCIL_BUFFER_BIT)),Oe){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ze.__webglColorRenderbuffer[we]);const be=i.get(W[we]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,be,0)}t.blitFramebuffer(0,0,Me,De,0,0,Me,De,Ee,t.NEAREST),l===!0&&(q.length=0,xe.length=0,q.push(t.COLOR_ATTACHMENT0+we),te.depthBuffer&&te.resolveDepthBuffer===!1&&(q.push(_e),xe.push(_e),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,xe)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,q))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Oe)for(let we=0;we<W.length;we++){n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+we,t.RENDERBUFFER,Ze.__webglColorRenderbuffer[we]);const be=i.get(W[we]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+we,t.TEXTURE_2D,be,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&l){const W=te.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[W])}}}function me(te){return Math.min(r.maxSamples,te.samples)}function pe(te){const W=i.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Le(te){const W=o.render.frame;u.get(te)!==W&&(u.set(te,W),te.update())}function re(te,W){const Me=te.colorSpace,De=te.format,Ee=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||Me!==Ba&&Me!==Oc&&(Xn.getTransfer(Me)===di?(De!==In||Ee!==Jn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Me)),W}function ie(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(c.width=te.naturalWidth||te.width,c.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(c.width=te.displayWidth,c.height=te.displayHeight):(c.width=te.width,c.height=te.height),c}this.allocateTextureUnit=R,this.resetTextureUnits=D,this.setTexture2D=F,this.setTexture2DArray=V,this.setTexture3D=j,this.setTextureCube=Z,this.rebindTextures=de,this.setupRenderTarget=ce,this.updateRenderTargetMipmap=ge,this.updateMultisampleRenderTarget=ue,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=N,this.useMultisampledRTT=pe}function BQ(t,e){function n(i,r=Oc){let s;const o=Xn.getTransfer(r);if(i===Jn)return t.UNSIGNED_BYTE;if(i===rw)return t.UNSIGNED_SHORT_4_4_4_4;if(i===sw)return t.UNSIGNED_SHORT_5_5_5_1;if(i===p8)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===Km)return t.BYTE;if(i===Bv)return t.SHORT;if(i===ic)return t.UNSIGNED_SHORT;if(i===cf)return t.INT;if(i===Ss)return t.UNSIGNED_INT;if(i===vn)return t.FLOAT;if(i===On)return t.HALF_FLOAT;if(i===m8)return t.ALPHA;if(i===g8)return t.RGB;if(i===In)return t.RGBA;if(i===A8)return t.LUMINANCE;if(i===v8)return t.LUMINANCE_ALPHA;if(i===Zl)return t.DEPTH_COMPONENT;if(i===Jh)return t.DEPTH_STENCIL;if(i===co)return t.RED;if(i===x0)return t.RED_INTEGER;if(i===Gc)return t.RG;if(i===_0)return t.RG_INTEGER;if(i===xf)return t.RGBA_INTEGER;if(i===Tm||i===tA||i===nA||i===Im)if(o===di)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Tm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===tA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===nA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Im)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Tm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===tA)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===nA)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Im)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===HA||i===O3||i===QA||i===z3)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===HA)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===O3)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===QA)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===z3)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===VA||i===WA||i===jA)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===VA||i===WA)return o===di?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===jA)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===XA||i===U3||i===k3||i===N3||i===Jm||i===G3||i===H3||i===Q3||i===V3||i===W3||i===j3||i===X3||i===Y3||i===q3)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===XA)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===U3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===k3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===N3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Jm)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===G3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===H3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Q3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===V3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===W3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===j3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===X3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Y3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===q3)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Bm||i===$3||i===K3)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Bm)return o===di?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===$3)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===K3)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===y8||i===J3||i===Z3||i===eE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Bm)return s.COMPRESSED_RED_RGTC1_EXT;if(i===J3)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Z3)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===eE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Kh?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}class RQ extends an{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uo extends Ht{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jse={type:"move"};class nb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new L,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new L),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new L,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new L),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const A=n.getJointPose(g,i),m=this._getHandJoint(c,g);A!==null&&(m.matrix.fromArray(A.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=A.radius),m.visible=A!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,p=.005;c.inputState.pinching&&h>d+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new uo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}const Xse=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Yse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class qse{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const r=new Bn,s=e.properties.get(r);s.__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new Fn({vertexShader:Xse,fragmentShader:Yse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new ut(new vr(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class $se extends $r{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,p=null;const g=new qse,A=n.getContextAttributes();let m=null,v=null;const y=[],w=[],S=new Ie;let C=null;const b=new an;b.layers.enable(1),b.viewport=new Jt;const M=new an;M.layers.enable(2),M.viewport=new Jt;const I=[b,M],T=new RQ;T.layers.enable(1),T.layers.enable(2);let D=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let N=y[O];return N===void 0&&(N=new nb,y[O]=N),N.getTargetRaySpace()},this.getControllerGrip=function(O){let N=y[O];return N===void 0&&(N=new nb,y[O]=N),N.getGripSpace()},this.getHand=function(O){let N=y[O];return N===void 0&&(N=new nb,y[O]=N),N.getHandSpace()};function z(O){const N=w.indexOf(O.inputSource);if(N===-1)return;const G=y[N];G!==void 0&&(G.update(O.inputSource,O.frame,c||o),G.dispatchEvent({type:O.type,data:O.inputSource}))}function F(){r.removeEventListener("select",z),r.removeEventListener("selectstart",z),r.removeEventListener("selectend",z),r.removeEventListener("squeeze",z),r.removeEventListener("squeezestart",z),r.removeEventListener("squeezeend",z),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",V);for(let O=0;O<y.length;O++){const N=w[O];N!==null&&(w[O]=null,y[O].disconnect(N))}D=null,R=null,g.reset(),e.setRenderTarget(m),d=null,h=null,f=null,r=null,v=null,ne.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(O){c=O},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",z),r.addEventListener("selectstart",z),r.addEventListener("selectend",z),r.addEventListener("squeeze",z),r.addEventListener("squeezestart",z),r.addEventListener("squeezeend",z),r.addEventListener("end",F),r.addEventListener("inputsourceschange",V),A.xrCompatible!==!0&&await n.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(S),r.renderState.layers===void 0){const N={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,n,N),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new Ln(d.framebufferWidth,d.framebufferHeight,{format:In,type:Jn,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let N=null,G=null,H=null;A.depth&&(H=A.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,N=A.stencil?Jh:Zl,G=A.stencil?Kh:Ss);const oe={colorFormat:n.RGBA8,depthFormat:H,scaleFactor:s};f=new XRWebGLBinding(r,n),h=f.createProjectionLayer(oe),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new Ln(h.textureWidth,h.textureHeight,{format:In,type:Jn,depthTexture:new hd(h.textureWidth,h.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,N),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),ne.setContext(r),ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function V(O){for(let N=0;N<O.removed.length;N++){const G=O.removed[N],H=w.indexOf(G);H>=0&&(w[H]=null,y[H].disconnect(G))}for(let N=0;N<O.added.length;N++){const G=O.added[N];let H=w.indexOf(G);if(H===-1){for(let de=0;de<y.length;de++)if(de>=w.length){w.push(G),H=de;break}else if(w[de]===null){w[de]=G,H=de;break}if(H===-1)break}const oe=y[H];oe&&oe.connect(G)}}const j=new L,Z=new L;function U(O,N,G){j.setFromMatrixPosition(N.matrixWorld),Z.setFromMatrixPosition(G.matrixWorld);const H=j.distanceTo(Z),oe=N.projectionMatrix.elements,de=G.projectionMatrix.elements,ce=oe[14]/(oe[10]-1),ge=oe[14]/(oe[10]+1),q=(oe[9]+1)/oe[5],xe=(oe[9]-1)/oe[5],ue=(oe[8]-1)/oe[0],me=(de[8]+1)/de[0],pe=ce*ue,Le=ce*me,re=H/(-ue+me),ie=re*-ue;N.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(ie),O.translateZ(re),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const te=ce+re,W=ge+re,Me=pe-ie,De=Le+(H-ie),Ee=q*ge/W*te,_e=xe*ge/W*te;O.projectionMatrix.makePerspective(Me,De,Ee,_e,te,W),O.projectionMatrixInverse.copy(O.projectionMatrix).invert()}function $(O,N){N===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(N.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;g.texture!==null&&(O.near=g.depthNear,O.far=g.depthFar),T.near=M.near=b.near=O.near,T.far=M.far=b.far=O.far,(D!==T.near||R!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),D=T.near,R=T.far,b.near=D,b.far=R,M.near=D,M.far=R,b.updateProjectionMatrix(),M.updateProjectionMatrix(),O.updateProjectionMatrix());const N=O.parent,G=T.cameras;$(T,N);for(let H=0;H<G.length;H++)$(G[H],N);G.length===2?U(T,b,M):T.projectionMatrix.copy(b.projectionMatrix),X(O,T,N)};function X(O,N,G){G===null?O.matrix.copy(N.matrixWorld):(O.matrix.copy(G.matrixWorld),O.matrix.invert(),O.matrix.multiply(N.matrixWorld)),O.matrix.decompose(O.position,O.quaternion,O.scale),O.updateMatrixWorld(!0),O.projectionMatrix.copy(N.projectionMatrix),O.projectionMatrixInverse.copy(N.projectionMatrixInverse),O.isPerspectiveCamera&&(O.fov=t0*2*Math.atan(1/O.projectionMatrix.elements[5]),O.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(O){l=O,h!==null&&(h.fixedFoveation=O),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=O)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(T)};let Q=null;function J(O,N){if(u=N.getViewerPose(c||o),p=N,u!==null){const G=u.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let H=!1;G.length!==T.cameras.length&&(T.cameras.length=0,H=!0);for(let de=0;de<G.length;de++){const ce=G[de];let ge=null;if(d!==null)ge=d.getViewport(ce);else{const xe=f.getViewSubImage(h,ce);ge=xe.viewport,de===0&&(e.setRenderTargetTextures(v,xe.colorTexture,h.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(v))}let q=I[de];q===void 0&&(q=new an,q.layers.enable(de),q.viewport=new Jt,I[de]=q),q.matrix.fromArray(ce.transform.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale),q.projectionMatrix.fromArray(ce.projectionMatrix),q.projectionMatrixInverse.copy(q.projectionMatrix).invert(),q.viewport.set(ge.x,ge.y,ge.width,ge.height),de===0&&(T.matrix.copy(q.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),H===!0&&T.cameras.push(q)}const oe=r.enabledFeatures;if(oe&&oe.includes("depth-sensing")){const de=f.getDepthInformation(G[0]);de&&de.isValid&&de.texture&&g.init(e,de,r.renderState)}}for(let G=0;G<y.length;G++){const H=w[G],oe=y[G];H!==null&&oe!==void 0&&oe.update(H,N,c||o)}Q&&Q(O,N),N.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:N}),p=null}const ne=new CQ;ne.setAnimationLoop(J),this.setAnimationLoop=function(O){Q=O},this.dispose=function(){}}}const ih=new gi,Kse=new Ge;function Jse(t,e){function n(A,m){A.matrixAutoUpdate===!0&&A.updateMatrix(),m.value.copy(A.matrix)}function i(A,m){m.color.getRGB(A.fogColor.value,SQ(t)),m.isFog?(A.fogNear.value=m.near,A.fogFar.value=m.far):m.isFogExp2&&(A.fogDensity.value=m.density)}function r(A,m,v,y,w){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(A,m):m.isMeshToonMaterial?(s(A,m),f(A,m)):m.isMeshPhongMaterial?(s(A,m),u(A,m)):m.isMeshStandardMaterial?(s(A,m),h(A,m),m.isMeshPhysicalMaterial&&d(A,m,w)):m.isMeshMatcapMaterial?(s(A,m),p(A,m)):m.isMeshDepthMaterial?s(A,m):m.isMeshDistanceMaterial?(s(A,m),g(A,m)):m.isMeshNormalMaterial?s(A,m):m.isLineBasicMaterial?(o(A,m),m.isLineDashedMaterial&&a(A,m)):m.isPointsMaterial?l(A,m,v,y):m.isSpriteMaterial?c(A,m):m.isShadowMaterial?(A.color.value.copy(m.color),A.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(A,m){A.opacity.value=m.opacity,m.color&&A.diffuse.value.copy(m.color),m.emissive&&A.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(A.map.value=m.map,n(m.map,A.mapTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,n(m.alphaMap,A.alphaMapTransform)),m.bumpMap&&(A.bumpMap.value=m.bumpMap,n(m.bumpMap,A.bumpMapTransform),A.bumpScale.value=m.bumpScale,m.side===Ki&&(A.bumpScale.value*=-1)),m.normalMap&&(A.normalMap.value=m.normalMap,n(m.normalMap,A.normalMapTransform),A.normalScale.value.copy(m.normalScale),m.side===Ki&&A.normalScale.value.negate()),m.displacementMap&&(A.displacementMap.value=m.displacementMap,n(m.displacementMap,A.displacementMapTransform),A.displacementScale.value=m.displacementScale,A.displacementBias.value=m.displacementBias),m.emissiveMap&&(A.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,A.emissiveMapTransform)),m.specularMap&&(A.specularMap.value=m.specularMap,n(m.specularMap,A.specularMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest);const v=e.get(m),y=v.envMap,w=v.envMapRotation;y&&(A.envMap.value=y,ih.copy(w),ih.x*=-1,ih.y*=-1,ih.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(ih.y*=-1,ih.z*=-1),A.envMapRotation.value.setFromMatrix4(Kse.makeRotationFromEuler(ih)),A.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=m.reflectivity,A.ior.value=m.ior,A.refractionRatio.value=m.refractionRatio),m.lightMap&&(A.lightMap.value=m.lightMap,A.lightMapIntensity.value=m.lightMapIntensity,n(m.lightMap,A.lightMapTransform)),m.aoMap&&(A.aoMap.value=m.aoMap,A.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,A.aoMapTransform))}function o(A,m){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,m.map&&(A.map.value=m.map,n(m.map,A.mapTransform))}function a(A,m){A.dashSize.value=m.dashSize,A.totalSize.value=m.dashSize+m.gapSize,A.scale.value=m.scale}function l(A,m,v,y){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,A.size.value=m.size*v,A.scale.value=y*.5,m.map&&(A.map.value=m.map,n(m.map,A.uvTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,n(m.alphaMap,A.alphaMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest)}function c(A,m){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,A.rotation.value=m.rotation,m.map&&(A.map.value=m.map,n(m.map,A.mapTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,n(m.alphaMap,A.alphaMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest)}function u(A,m){A.specular.value.copy(m.specular),A.shininess.value=Math.max(m.shininess,1e-4)}function f(A,m){m.gradientMap&&(A.gradientMap.value=m.gradientMap)}function h(A,m){A.metalness.value=m.metalness,m.metalnessMap&&(A.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,A.metalnessMapTransform)),A.roughness.value=m.roughness,m.roughnessMap&&(A.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,A.roughnessMapTransform)),m.envMap&&(A.envMapIntensity.value=m.envMapIntensity)}function d(A,m,v){A.ior.value=m.ior,m.sheen>0&&(A.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),A.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(A.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,A.sheenColorMapTransform)),m.sheenRoughnessMap&&(A.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,A.sheenRoughnessMapTransform))),m.clearcoat>0&&(A.clearcoat.value=m.clearcoat,A.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(A.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,A.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(A.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Ki&&A.clearcoatNormalScale.value.negate())),m.dispersion>0&&(A.dispersion.value=m.dispersion),m.iridescence>0&&(A.iridescence.value=m.iridescence,A.iridescenceIOR.value=m.iridescenceIOR,A.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(A.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,A.iridescenceMapTransform)),m.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),m.transmission>0&&(A.transmission.value=m.transmission,A.transmissionSamplerMap.value=v.texture,A.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(A.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,A.transmissionMapTransform)),A.thickness.value=m.thickness,m.thicknessMap&&(A.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=m.attenuationDistance,A.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(A.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(A.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=m.specularIntensity,A.specularColor.value.copy(m.specularColor),m.specularColorMap&&(A.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,A.specularColorMapTransform)),m.specularIntensityMap&&(A.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,A.specularIntensityMapTransform))}function p(A,m){m.matcap&&(A.matcap.value=m.matcap)}function g(A,m){const v=e.get(m).light;A.referencePosition.value.setFromMatrixPosition(v.matrixWorld),A.nearDistance.value=v.shadow.camera.near,A.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Zse(t,e,n,i){let r={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(v,y){const w=y.program;i.uniformBlockBinding(v,w)}function c(v,y){let w=r[v.id];w===void 0&&(p(v),w=u(v),r[v.id]=w,v.addEventListener("dispose",A));const S=y.program;i.updateUBOMapping(v,S);const C=e.render.frame;s[v.id]!==C&&(h(v),s[v.id]=C)}function u(v){const y=f();v.__bindingPointIndex=y;const w=t.createBuffer(),S=v.__size,C=v.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,S,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,w),w}function f(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){const y=r[v.id],w=v.uniforms,S=v.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let C=0,b=w.length;C<b;C++){const M=Array.isArray(w[C])?w[C]:[w[C]];for(let I=0,T=M.length;I<T;I++){const D=M[I];if(d(D,C,I,S)===!0){const R=D.__offset,z=Array.isArray(D.value)?D.value:[D.value];let F=0;for(let V=0;V<z.length;V++){const j=z[V],Z=g(j);typeof j=="number"||typeof j=="boolean"?(D.__data[0]=j,t.bufferSubData(t.UNIFORM_BUFFER,R+F,D.__data)):j.isMatrix3?(D.__data[0]=j.elements[0],D.__data[1]=j.elements[1],D.__data[2]=j.elements[2],D.__data[3]=0,D.__data[4]=j.elements[3],D.__data[5]=j.elements[4],D.__data[6]=j.elements[5],D.__data[7]=0,D.__data[8]=j.elements[6],D.__data[9]=j.elements[7],D.__data[10]=j.elements[8],D.__data[11]=0):(j.toArray(D.__data,F),F+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,D.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(v,y,w,S){const C=v.value,b=y+"_"+w;if(S[b]===void 0)return typeof C=="number"||typeof C=="boolean"?S[b]=C:S[b]=C.clone(),!0;{const M=S[b];if(typeof C=="number"||typeof C=="boolean"){if(M!==C)return S[b]=C,!0}else if(M.equals(C)===!1)return M.copy(C),!0}return!1}function p(v){const y=v.uniforms;let w=0;const S=16;for(let b=0,M=y.length;b<M;b++){const I=Array.isArray(y[b])?y[b]:[y[b]];for(let T=0,D=I.length;T<D;T++){const R=I[T],z=Array.isArray(R.value)?R.value:[R.value];for(let F=0,V=z.length;F<V;F++){const j=z[F],Z=g(j),U=w%S;U!==0&&S-U<Z.boundary&&(w+=S-U),R.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=w,w+=Z.storage}}}const C=w%S;return C>0&&(w+=S-C),v.__size=w,v.__cache={},this}function g(v){const y={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function A(v){const y=v.target;y.removeEventListener("dispose",A);const w=o.indexOf(y.__bindingPointIndex);o.splice(w,1),t.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function m(){for(const v in r)t.deleteBuffer(r[v]);o=[],r={},s={}}return{bind:l,update:c,dispose:m}}class T8{constructor(e={}){const{canvas:n=xQ(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const d=new Uint32Array(4),p=new Int32Array(4);let g=null,A=null;const m=[],v=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=oo,this.toneMapping=cl,this.toneMappingExposure=1;const y=this;let w=!1,S=0,C=0,b=null,M=-1,I=null;const T=new Jt,D=new Jt;let R=null;const z=new Je(0);let F=0,V=n.width,j=n.height,Z=1,U=null,$=null;const X=new Jt(0,0,V,j),Q=new Jt(0,0,V,j);let J=!1;const ne=new fd;let O=!1,N=!1;const G=new Ge,H=new L,oe=new Jt,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ce=!1;function ge(){return b===null?Z:1}let q=i;function xe(K,ae){return n.getContext(K,ae)}try{const K={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${yl}`),n.addEventListener("webglcontextlost",ye,!1),n.addEventListener("webglcontextrestored",He,!1),n.addEventListener("webglcontextcreationerror",lt,!1),q===null){const ae="webgl2";if(q=xe(ae,K),q===null)throw xe(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw console.error("THREE.WebGLRenderer: "+K.message),K}let ue,me,pe,Le,re,ie,te,W,Me,De,Ee,_e,Ze,Oe,we,be,Be,Ve,ot,$e,qe,fe,Ue,it;function Ae(){ue=new are(q),ue.init(),fe=new BQ(q,ue),me=new tre(q,ue,e,fe),pe=new kse(q),Le=new ure(q),re=new Mse,ie=new Wse(q,ue,pe,re,me,fe,Le),te=new ire(y),W=new ore(y),Me=new Ate(q),Ue=new Zie(q,Me),De=new lre(q,Me,Le,Ue),Ee=new hre(q,De,Me,Le),ot=new fre(q,me,ie),be=new nre(re),_e=new bse(y,te,W,ue,me,Ue,be),Ze=new Jse(y,re),Oe=new Ise,we=new Fse(ue),Ve=new Jie(y,te,W,pe,Ee,h,l),Be=new Use(y,Ee,me),it=new Zse(q,Le,me,pe),$e=new ere(q,ue,Le),qe=new cre(q,ue,Le),Le.programs=_e.programs,y.capabilities=me,y.extensions=ue,y.properties=re,y.renderLists=Oe,y.shadowMap=Be,y.state=pe,y.info=Le}Ae();const Ye=new $se(y,q);this.xr=Ye,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const K=ue.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=ue.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(K){K!==void 0&&(Z=K,this.setSize(V,j,!1))},this.getSize=function(K){return K.set(V,j)},this.setSize=function(K,ae,le=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=K,j=ae,n.width=Math.floor(K*Z),n.height=Math.floor(ae*Z),le===!0&&(n.style.width=K+"px",n.style.height=ae+"px"),this.setViewport(0,0,K,ae)},this.getDrawingBufferSize=function(K){return K.set(V*Z,j*Z).floor()},this.setDrawingBufferSize=function(K,ae,le){V=K,j=ae,Z=le,n.width=Math.floor(K*le),n.height=Math.floor(ae*le),this.setViewport(0,0,K,ae)},this.getCurrentViewport=function(K){return K.copy(T)},this.getViewport=function(K){return K.copy(X)},this.setViewport=function(K,ae,le,Se){K.isVector4?X.set(K.x,K.y,K.z,K.w):X.set(K,ae,le,Se),pe.viewport(T.copy(X).multiplyScalar(Z).round())},this.getScissor=function(K){return K.copy(Q)},this.setScissor=function(K,ae,le,Se){K.isVector4?Q.set(K.x,K.y,K.z,K.w):Q.set(K,ae,le,Se),pe.scissor(D.copy(Q).multiplyScalar(Z).round())},this.getScissorTest=function(){return J},this.setScissorTest=function(K){pe.setScissorTest(J=K)},this.setOpaqueSort=function(K){U=K},this.setTransparentSort=function(K){$=K},this.getClearColor=function(K){return K.copy(Ve.getClearColor())},this.setClearColor=function(){Ve.setClearColor.apply(Ve,arguments)},this.getClearAlpha=function(){return Ve.getClearAlpha()},this.setClearAlpha=function(){Ve.setClearAlpha.apply(Ve,arguments)},this.clear=function(K=!0,ae=!0,le=!0){let Se=0;if(K){let he=!1;if(b!==null){const Ne=b.texture.format;he=Ne===xf||Ne===_0||Ne===x0}if(he){const Ne=b.texture.type,Qe=Ne===Jn||Ne===Ss||Ne===ic||Ne===Kh||Ne===rw||Ne===sw,Xe=Ve.getClearColor(),Pe=Ve.getClearAlpha(),vt=Xe.r,at=Xe.g,st=Xe.b;Qe?(d[0]=vt,d[1]=at,d[2]=st,d[3]=Pe,q.clearBufferuiv(q.COLOR,0,d)):(p[0]=vt,p[1]=at,p[2]=st,p[3]=Pe,q.clearBufferiv(q.COLOR,0,p))}else Se|=q.COLOR_BUFFER_BIT}ae&&(Se|=q.DEPTH_BUFFER_BIT),le&&(Se|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ye,!1),n.removeEventListener("webglcontextrestored",He,!1),n.removeEventListener("webglcontextcreationerror",lt,!1),Oe.dispose(),we.dispose(),re.dispose(),te.dispose(),W.dispose(),Ee.dispose(),Ue.dispose(),it.dispose(),_e.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",_n),Ye.removeEventListener("sessionend",vi),zn.stop()};function ye(K){K.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const K=Le.autoReset,ae=Be.enabled,le=Be.autoUpdate,Se=Be.needsUpdate,he=Be.type;Ae(),Le.autoReset=K,Be.enabled=ae,Be.autoUpdate=le,Be.needsUpdate=Se,Be.type=he}function lt(K){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function mt(K){const ae=K.target;ae.removeEventListener("dispose",mt),dt(ae)}function dt(K){Ot(K),re.remove(K)}function Ot(K){const ae=re.get(K).programs;ae!==void 0&&(ae.forEach(function(le){_e.releaseProgram(le)}),K.isShaderMaterial&&_e.releaseShaderCache(K))}this.renderBufferDirect=function(K,ae,le,Se,he,Ne){ae===null&&(ae=de);const Qe=he.isMesh&&he.matrixWorld.determinant()<0,Xe=ee(K,ae,le,Se,he);pe.setMaterial(Se,Qe);let Pe=le.index,vt=1;if(Se.wireframe===!0){if(Pe=De.getWireframeAttribute(le),Pe===void 0)return;vt=2}const at=le.drawRange,st=le.attributes.position;let _t=at.start*vt,It=(at.start+at.count)*vt;Ne!==null&&(_t=Math.max(_t,Ne.start*vt),It=Math.min(It,(Ne.start+Ne.count)*vt)),Pe!==null?(_t=Math.max(_t,0),It=Math.min(It,Pe.count)):st!=null&&(_t=Math.max(_t,0),It=Math.min(It,st.count));const Lt=It-_t;if(Lt<0||Lt===1/0)return;Ue.setup(he,Se,Xe,le,Pe);let qt,yt=$e;if(Pe!==null&&(qt=Me.get(Pe),yt=qe,yt.setIndex(qt)),he.isMesh)Se.wireframe===!0?(pe.setLineWidth(Se.wireframeLinewidth*ge()),yt.setMode(q.LINES)):yt.setMode(q.TRIANGLES);else if(he.isLine){let ct=Se.linewidth;ct===void 0&&(ct=1),pe.setLineWidth(ct*ge()),he.isLineSegments?yt.setMode(q.LINES):he.isLineLoop?yt.setMode(q.LINE_LOOP):yt.setMode(q.LINE_STRIP)}else he.isPoints?yt.setMode(q.POINTS):he.isSprite&&yt.setMode(q.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)yt.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(ue.get("WEBGL_multi_draw"))yt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const ct=he._multiDrawStarts,Ut=he._multiDrawCounts,Ft=he._multiDrawCount,Qt=Pe?Me.get(Pe).bytesPerElement:1,Pn=re.get(Se).currentProgram.getUniforms();for(let Dn=0;Dn<Ft;Dn++)Pn.setValue(q,"_gl_DrawID",Dn),yt.render(ct[Dn]/Qt,Ut[Dn])}else if(he.isInstancedMesh)yt.renderInstances(_t,Lt,he.count);else if(le.isInstancedBufferGeometry){const ct=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,Ut=Math.min(le.instanceCount,ct);yt.renderInstances(_t,Lt,Ut)}else yt.render(_t,Lt)};function Xt(K,ae,le){K.transparent===!0&&K.side===Qn&&K.forceSinglePass===!1?(K.side=Ki,K.needsUpdate=!0,Yt(K,ae,le),K.side=js,K.needsUpdate=!0,Yt(K,ae,le),K.side=Qn):Yt(K,ae,le)}this.compile=function(K,ae,le=null){le===null&&(le=K),A=we.get(le),A.init(ae),v.push(A),le.traverseVisible(function(he){he.isLight&&he.layers.test(ae.layers)&&(A.pushLight(he),he.castShadow&&A.pushShadow(he))}),K!==le&&K.traverseVisible(function(he){he.isLight&&he.layers.test(ae.layers)&&(A.pushLight(he),he.castShadow&&A.pushShadow(he))}),A.setupLights();const Se=new Set;return K.traverse(function(he){const Ne=he.material;if(Ne)if(Array.isArray(Ne))for(let Qe=0;Qe<Ne.length;Qe++){const Xe=Ne[Qe];Xt(Xe,le,he),Se.add(Xe)}else Xt(Ne,le,he),Se.add(Ne)}),v.pop(),A=null,Se},this.compileAsync=function(K,ae,le=null){const Se=this.compile(K,ae,le);return new Promise(he=>{function Ne(){if(Se.forEach(function(Qe){re.get(Qe).currentProgram.isReady()&&Se.delete(Qe)}),Se.size===0){he(K);return}setTimeout(Ne,10)}ue.get("KHR_parallel_shader_compile")!==null?Ne():setTimeout(Ne,10)})};let gt=null;function en(K){gt&&gt(K)}function _n(){zn.stop()}function vi(){zn.start()}const zn=new CQ;zn.setAnimationLoop(en),typeof self<"u"&&zn.setContext(self),this.setAnimationLoop=function(K){gt=K,Ye.setAnimationLoop(K),K===null?zn.stop():zn.start()},Ye.addEventListener("sessionstart",_n),Ye.addEventListener("sessionend",vi),this.render=function(K,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(ae),ae=Ye.getCamera()),K.isScene===!0&&K.onBeforeRender(y,K,ae,b),A=we.get(K,v.length),A.init(ae),v.push(A),G.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),ne.setFromProjectionMatrix(G),N=this.localClippingEnabled,O=be.init(this.clippingPlanes,N),g=Oe.get(K,m.length),g.init(),m.push(g),Ye.enabled===!0&&Ye.isPresenting===!0){const Ne=y.xr.getDepthSensingMesh();Ne!==null&&er(Ne,ae,-1/0,y.sortObjects)}er(K,ae,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(U,$),ce=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,ce&&Ve.addToRenderList(g,K),this.info.render.frame++,O===!0&&be.beginShadows();const le=A.state.shadowsArray;Be.render(le,K,ae),O===!0&&be.endShadows(),this.info.autoReset===!0&&this.info.reset();const Se=g.opaque,he=g.transmissive;if(A.setupLights(),ae.isArrayCamera){const Ne=ae.cameras;if(he.length>0)for(let Qe=0,Xe=Ne.length;Qe<Xe;Qe++){const Pe=Ne[Qe];hr(Se,he,K,Pe)}ce&&Ve.render(K);for(let Qe=0,Xe=Ne.length;Qe<Xe;Qe++){const Pe=Ne[Qe];tr(g,K,Pe,Pe.viewport)}}else he.length>0&&hr(Se,he,K,ae),ce&&Ve.render(K),tr(g,K,ae);b!==null&&(ie.updateMultisampleRenderTarget(b),ie.updateRenderTargetMipmap(b)),K.isScene===!0&&K.onAfterRender(y,K,ae),Ue.resetDefaultState(),M=-1,I=null,v.pop(),v.length>0?(A=v[v.length-1],O===!0&&be.setGlobalState(y.clippingPlanes,A.state.camera)):A=null,m.pop(),m.length>0?g=m[m.length-1]:g=null};function er(K,ae,le,Se){if(K.visible===!1)return;if(K.layers.test(ae.layers)){if(K.isGroup)le=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(ae);else if(K.isLight)A.pushLight(K),K.castShadow&&A.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||ne.intersectsSprite(K)){Se&&oe.setFromMatrixPosition(K.matrixWorld).applyMatrix4(G);const Qe=Ee.update(K),Xe=K.material;Xe.visible&&g.push(K,Qe,Xe,le,oe.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||ne.intersectsObject(K))){const Qe=Ee.update(K),Xe=K.material;if(Se&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),oe.copy(K.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),oe.copy(Qe.boundingSphere.center)),oe.applyMatrix4(K.matrixWorld).applyMatrix4(G)),Array.isArray(Xe)){const Pe=Qe.groups;for(let vt=0,at=Pe.length;vt<at;vt++){const st=Pe[vt],_t=Xe[st.materialIndex];_t&&_t.visible&&g.push(K,Qe,_t,le,oe.z,st)}}else Xe.visible&&g.push(K,Qe,Xe,le,oe.z,null)}}const Ne=K.children;for(let Qe=0,Xe=Ne.length;Qe<Xe;Qe++)er(Ne[Qe],ae,le,Se)}function tr(K,ae,le,Se){const he=K.opaque,Ne=K.transmissive,Qe=K.transparent;A.setupLightsView(le),O===!0&&be.setGlobalState(y.clippingPlanes,le),Se&&pe.viewport(T.copy(Se)),he.length>0&&Di(he,ae,le),Ne.length>0&&Di(Ne,ae,le),Qe.length>0&&Di(Qe,ae,le),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function hr(K,ae,le,Se){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[Se.id]===void 0&&(A.state.transmissionRenderTarget[Se.id]=new Ln(1,1,{generateMipmaps:!0,type:ue.has("EXT_color_buffer_half_float")||ue.has("EXT_color_buffer_float")?On:Jn,minFilter:Qs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace}));const Ne=A.state.transmissionRenderTarget[Se.id],Qe=Se.viewport||T;Ne.setSize(Qe.z,Qe.w);const Xe=y.getRenderTarget();y.setRenderTarget(Ne),y.getClearColor(z),F=y.getClearAlpha(),F<1&&y.setClearColor(16777215,.5),ce?Ve.render(le):y.clear();const Pe=y.toneMapping;y.toneMapping=cl;const vt=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),A.setupLightsView(Se),O===!0&&be.setGlobalState(y.clippingPlanes,Se),Di(K,le,Se),ie.updateMultisampleRenderTarget(Ne),ie.updateRenderTargetMipmap(Ne),ue.has("WEBGL_multisampled_render_to_texture")===!1){let at=!1;for(let st=0,_t=ae.length;st<_t;st++){const It=ae[st],Lt=It.object,qt=It.geometry,yt=It.material,ct=It.group;if(yt.side===Qn&&Lt.layers.test(Se.layers)){const Ut=yt.side;yt.side=Ki,yt.needsUpdate=!0,fi(Lt,le,Se,qt,yt,ct),yt.side=Ut,yt.needsUpdate=!0,at=!0}}at===!0&&(ie.updateMultisampleRenderTarget(Ne),ie.updateRenderTargetMipmap(Ne))}y.setRenderTarget(Xe),y.setClearColor(z,F),vt!==void 0&&(Se.viewport=vt),y.toneMapping=Pe}function Di(K,ae,le){const Se=ae.isScene===!0?ae.overrideMaterial:null;for(let he=0,Ne=K.length;he<Ne;he++){const Qe=K[he],Xe=Qe.object,Pe=Qe.geometry,vt=Se===null?Qe.material:Se,at=Qe.group;Xe.layers.test(le.layers)&&fi(Xe,ae,le,Pe,vt,at)}}function fi(K,ae,le,Se,he,Ne){K.onBeforeRender(y,ae,le,Se,he,Ne),K.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),he.transparent===!0&&he.side===Qn&&he.forceSinglePass===!1?(he.side=Ki,he.needsUpdate=!0,y.renderBufferDirect(le,ae,Se,he,K,Ne),he.side=js,he.needsUpdate=!0,y.renderBufferDirect(le,ae,Se,he,K,Ne),he.side=Qn):y.renderBufferDirect(le,ae,Se,he,K,Ne),K.onAfterRender(y,ae,le,Se,he,Ne)}function Yt(K,ae,le){ae.isScene!==!0&&(ae=de);const Se=re.get(K),he=A.state.lights,Ne=A.state.shadowsArray,Qe=he.state.version,Xe=_e.getParameters(K,he.state,Ne,ae,le),Pe=_e.getProgramCacheKey(Xe);let vt=Se.programs;Se.environment=K.isMeshStandardMaterial?ae.environment:null,Se.fog=ae.fog,Se.envMap=(K.isMeshStandardMaterial?W:te).get(K.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&K.envMap===null?ae.environmentRotation:K.envMapRotation,vt===void 0&&(K.addEventListener("dispose",mt),vt=new Map,Se.programs=vt);let at=vt.get(Pe);if(at!==void 0){if(Se.currentProgram===at&&Se.lightsStateVersion===Qe)return Or(K,Xe),at}else Xe.uniforms=_e.getUniforms(K),K.onBeforeCompile(Xe,y),at=_e.acquireProgram(Xe,Pe),vt.set(Pe,at),Se.uniforms=Xe.uniforms;const st=Se.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(st.clippingPlanes=be.uniform),Or(K,Xe),Se.needsLights=Ce(K),Se.lightsStateVersion=Qe,Se.needsLights&&(st.ambientLightColor.value=he.state.ambient,st.lightProbe.value=he.state.probe,st.directionalLights.value=he.state.directional,st.directionalLightShadows.value=he.state.directionalShadow,st.spotLights.value=he.state.spot,st.spotLightShadows.value=he.state.spotShadow,st.rectAreaLights.value=he.state.rectArea,st.ltc_1.value=he.state.rectAreaLTC1,st.ltc_2.value=he.state.rectAreaLTC2,st.pointLights.value=he.state.point,st.pointLightShadows.value=he.state.pointShadow,st.hemisphereLights.value=he.state.hemi,st.directionalShadowMap.value=he.state.directionalShadowMap,st.directionalShadowMatrix.value=he.state.directionalShadowMatrix,st.spotShadowMap.value=he.state.spotShadowMap,st.spotLightMatrix.value=he.state.spotLightMatrix,st.spotLightMap.value=he.state.spotLightMap,st.pointShadowMap.value=he.state.pointShadowMap,st.pointShadowMatrix.value=he.state.pointShadowMatrix),Se.currentProgram=at,Se.uniformsList=null,at}function si(K){if(K.uniformsList===null){const ae=K.currentProgram.getUniforms();K.uniformsList=G_.seqWithValue(ae.seq,K.uniforms)}return K.uniformsList}function Or(K,ae){const le=re.get(K);le.outputColorSpace=ae.outputColorSpace,le.batching=ae.batching,le.batchingColor=ae.batchingColor,le.instancing=ae.instancing,le.instancingColor=ae.instancingColor,le.instancingMorph=ae.instancingMorph,le.skinning=ae.skinning,le.morphTargets=ae.morphTargets,le.morphNormals=ae.morphNormals,le.morphColors=ae.morphColors,le.morphTargetsCount=ae.morphTargetsCount,le.numClippingPlanes=ae.numClippingPlanes,le.numIntersection=ae.numClipIntersection,le.vertexAlphas=ae.vertexAlphas,le.vertexTangents=ae.vertexTangents,le.toneMapping=ae.toneMapping}function ee(K,ae,le,Se,he){ae.isScene!==!0&&(ae=de),ie.resetTextureUnits();const Ne=ae.fog,Qe=Se.isMeshStandardMaterial?ae.environment:null,Xe=b===null?y.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:Ba,Pe=(Se.isMeshStandardMaterial?W:te).get(Se.envMap||Qe),vt=Se.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,at=!!le.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),st=!!le.morphAttributes.position,_t=!!le.morphAttributes.normal,It=!!le.morphAttributes.color;let Lt=cl;Se.toneMapped&&(b===null||b.isXRRenderTarget===!0)&&(Lt=y.toneMapping);const qt=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,yt=qt!==void 0?qt.length:0,ct=re.get(Se),Ut=A.state.lights;if(O===!0&&(N===!0||K!==I)){const on=K===I&&Se.id===M;be.setState(Se,K,on)}let Ft=!1;Se.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==Ut.state.version||ct.outputColorSpace!==Xe||he.isBatchedMesh&&ct.batching===!1||!he.isBatchedMesh&&ct.batching===!0||he.isBatchedMesh&&ct.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&ct.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&ct.instancing===!1||!he.isInstancedMesh&&ct.instancing===!0||he.isSkinnedMesh&&ct.skinning===!1||!he.isSkinnedMesh&&ct.skinning===!0||he.isInstancedMesh&&ct.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&ct.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&ct.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&ct.instancingMorph===!1&&he.morphTexture!==null||ct.envMap!==Pe||Se.fog===!0&&ct.fog!==Ne||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==be.numPlanes||ct.numIntersection!==be.numIntersection)||ct.vertexAlphas!==vt||ct.vertexTangents!==at||ct.morphTargets!==st||ct.morphNormals!==_t||ct.morphColors!==It||ct.toneMapping!==Lt||ct.morphTargetsCount!==yt)&&(Ft=!0):(Ft=!0,ct.__version=Se.version);let Qt=ct.currentProgram;Ft===!0&&(Qt=Yt(Se,ae,he));let Pn=!1,Dn=!1,ni=!1;const ln=Qt.getUniforms(),hn=ct.uniforms;if(pe.useProgram(Qt.program)&&(Pn=!0,Dn=!0,ni=!0),Se.id!==M&&(M=Se.id,Dn=!0),Pn||I!==K){ln.setValue(q,"projectionMatrix",K.projectionMatrix),ln.setValue(q,"viewMatrix",K.matrixWorldInverse);const on=ln.map.cameraPosition;on!==void 0&&on.setValue(q,H.setFromMatrixPosition(K.matrixWorld)),me.logarithmicDepthBuffer&&ln.setValue(q,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&ln.setValue(q,"isOrthographic",K.isOrthographicCamera===!0),I!==K&&(I=K,Dn=!0,ni=!0)}if(he.isSkinnedMesh){ln.setOptional(q,he,"bindMatrix"),ln.setOptional(q,he,"bindMatrixInverse");const on=he.skeleton;on&&(on.boneTexture===null&&on.computeBoneTexture(),ln.setValue(q,"boneTexture",on.boneTexture,ie))}he.isBatchedMesh&&(ln.setOptional(q,he,"batchingTexture"),ln.setValue(q,"batchingTexture",he._matricesTexture,ie),ln.setOptional(q,he,"batchingIdTexture"),ln.setValue(q,"batchingIdTexture",he._indirectTexture,ie),ln.setOptional(q,he,"batchingColorTexture"),he._colorsTexture!==null&&ln.setValue(q,"batchingColorTexture",he._colorsTexture,ie));const oi=le.morphAttributes;if((oi.position!==void 0||oi.normal!==void 0||oi.color!==void 0)&&ot.update(he,le,Qt),(Dn||ct.receiveShadow!==he.receiveShadow)&&(ct.receiveShadow=he.receiveShadow,ln.setValue(q,"receiveShadow",he.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(hn.envMap.value=Pe,hn.flipEnvMap.value=Pe.isCubeTexture&&Pe.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&ae.environment!==null&&(hn.envMapIntensity.value=ae.environmentIntensity),Dn&&(ln.setValue(q,"toneMappingExposure",y.toneMappingExposure),ct.needsLights&&se(hn,ni),Ne&&Se.fog===!0&&Ze.refreshFogUniforms(hn,Ne),Ze.refreshMaterialUniforms(hn,Se,Z,j,A.state.transmissionRenderTarget[K.id]),G_.upload(q,si(ct),hn,ie)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(G_.upload(q,si(ct),hn,ie),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&ln.setValue(q,"center",he.center),ln.setValue(q,"modelViewMatrix",he.modelViewMatrix),ln.setValue(q,"normalMatrix",he.normalMatrix),ln.setValue(q,"modelMatrix",he.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const on=Se.uniformsGroups;for(let nn=0,ii=on.length;nn<ii;nn++){const Jr=on[nn];it.update(Jr,Qt),it.bind(Jr,Qt)}}return Qt}function se(K,ae){K.ambientLightColor.needsUpdate=ae,K.lightProbe.needsUpdate=ae,K.directionalLights.needsUpdate=ae,K.directionalLightShadows.needsUpdate=ae,K.pointLights.needsUpdate=ae,K.pointLightShadows.needsUpdate=ae,K.spotLights.needsUpdate=ae,K.spotLightShadows.needsUpdate=ae,K.rectAreaLights.needsUpdate=ae,K.hemisphereLights.needsUpdate=ae}function Ce(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(K,ae,le){re.get(K.texture).__webglTexture=ae,re.get(K.depthTexture).__webglTexture=le;const Se=re.get(K);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=le===void 0,Se.__autoAllocateDepthBuffer||ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(K,ae){const le=re.get(K);le.__webglFramebuffer=ae,le.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function(K,ae=0,le=0){b=K,S=ae,C=le;let Se=!0,he=null,Ne=!1,Qe=!1;if(K){const Pe=re.get(K);Pe.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer(q.FRAMEBUFFER,null),Se=!1):Pe.__webglFramebuffer===void 0?ie.setupRenderTarget(K):Pe.__hasExternalTextures&&ie.rebindTextures(K,re.get(K.texture).__webglTexture,re.get(K.depthTexture).__webglTexture);const vt=K.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(Qe=!0);const at=re.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(at[ae])?he=at[ae][le]:he=at[ae],Ne=!0):K.samples>0&&ie.useMultisampledRTT(K)===!1?he=re.get(K).__webglMultisampledFramebuffer:Array.isArray(at)?he=at[le]:he=at,T.copy(K.viewport),D.copy(K.scissor),R=K.scissorTest}else T.copy(X).multiplyScalar(Z).floor(),D.copy(Q).multiplyScalar(Z).floor(),R=J;if(pe.bindFramebuffer(q.FRAMEBUFFER,he)&&Se&&pe.drawBuffers(K,he),pe.viewport(T),pe.scissor(D),pe.setScissorTest(R),Ne){const Pe=re.get(K.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Pe.__webglTexture,le)}else if(Qe){const Pe=re.get(K.texture),vt=ae||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,Pe.__webglTexture,le||0,vt)}M=-1},this.readRenderTargetPixels=function(K,ae,le,Se,he,Ne,Qe){if(!(K&&K.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Xe=re.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Qe!==void 0&&(Xe=Xe[Qe]),Xe){pe.bindFramebuffer(q.FRAMEBUFFER,Xe);try{const Pe=K.texture,vt=Pe.format,at=Pe.type;if(!me.textureFormatReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(at)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=K.width-Se&&le>=0&&le<=K.height-he&&q.readPixels(ae,le,Se,he,fe.convert(vt),fe.convert(at),Ne)}finally{const Pe=b!==null?re.get(b).__webglFramebuffer:null;pe.bindFramebuffer(q.FRAMEBUFFER,Pe)}}},this.readRenderTargetPixelsAsync=async function(K,ae,le,Se,he,Ne,Qe){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Xe=re.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Qe!==void 0&&(Xe=Xe[Qe]),Xe){pe.bindFramebuffer(q.FRAMEBUFFER,Xe);try{const Pe=K.texture,vt=Pe.format,at=Pe.type;if(!me.textureFormatReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!me.textureTypeReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ae>=0&&ae<=K.width-Se&&le>=0&&le<=K.height-he){const st=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,st),q.bufferData(q.PIXEL_PACK_BUFFER,Ne.byteLength,q.STREAM_READ),q.readPixels(ae,le,Se,he,fe.convert(vt),fe.convert(at),0),q.flush();const _t=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);await Qee(q,_t,4);try{q.bindBuffer(q.PIXEL_PACK_BUFFER,st),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Ne)}finally{q.deleteBuffer(st),q.deleteSync(_t)}return Ne}}finally{const Pe=b!==null?re.get(b).__webglFramebuffer:null;pe.bindFramebuffer(q.FRAMEBUFFER,Pe)}}},this.copyFramebufferToTexture=function(K,ae=null,le=0){K.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ae=arguments[0]||null,K=arguments[1]);const Se=Math.pow(2,-le),he=Math.floor(K.image.width*Se),Ne=Math.floor(K.image.height*Se),Qe=ae!==null?ae.x:0,Xe=ae!==null?ae.y:0;ie.setTexture2D(K,0),q.copyTexSubImage2D(q.TEXTURE_2D,le,0,0,Qe,Xe,he,Ne),pe.unbindTexture()},this.copyTextureToTexture=function(K,ae,le=null,Se=null,he=0){K.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,K=arguments[1],ae=arguments[2],he=arguments[3]||0,le=null);let Ne,Qe,Xe,Pe,vt,at;le!==null?(Ne=le.max.x-le.min.x,Qe=le.max.y-le.min.y,Xe=le.min.x,Pe=le.min.y):(Ne=K.image.width,Qe=K.image.height,Xe=0,Pe=0),Se!==null?(vt=Se.x,at=Se.y):(vt=0,at=0);const st=fe.convert(ae.format),_t=fe.convert(ae.type);ie.setTexture2D(ae,0),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ae.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,ae.unpackAlignment);const It=q.getParameter(q.UNPACK_ROW_LENGTH),Lt=q.getParameter(q.UNPACK_IMAGE_HEIGHT),qt=q.getParameter(q.UNPACK_SKIP_PIXELS),yt=q.getParameter(q.UNPACK_SKIP_ROWS),ct=q.getParameter(q.UNPACK_SKIP_IMAGES),Ut=K.isCompressedTexture?K.mipmaps[he]:K.image;q.pixelStorei(q.UNPACK_ROW_LENGTH,Ut.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Ut.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Xe),q.pixelStorei(q.UNPACK_SKIP_ROWS,Pe),K.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,he,vt,at,Ne,Qe,st,_t,Ut.data):K.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,he,vt,at,Ut.width,Ut.height,st,Ut.data):q.texSubImage2D(q.TEXTURE_2D,he,vt,at,Ne,Qe,st,_t,Ut),q.pixelStorei(q.UNPACK_ROW_LENGTH,It),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Lt),q.pixelStorei(q.UNPACK_SKIP_PIXELS,qt),q.pixelStorei(q.UNPACK_SKIP_ROWS,yt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,ct),he===0&&ae.generateMipmaps&&q.generateMipmap(q.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(K,ae,le=null,Se=null,he=0){K.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),le=arguments[0]||null,Se=arguments[1]||null,K=arguments[2],ae=arguments[3],he=arguments[4]||0);let Ne,Qe,Xe,Pe,vt,at,st,_t,It;const Lt=K.isCompressedTexture?K.mipmaps[he]:K.image;le!==null?(Ne=le.max.x-le.min.x,Qe=le.max.y-le.min.y,Xe=le.max.z-le.min.z,Pe=le.min.x,vt=le.min.y,at=le.min.z):(Ne=Lt.width,Qe=Lt.height,Xe=Lt.depth,Pe=0,vt=0,at=0),Se!==null?(st=Se.x,_t=Se.y,It=Se.z):(st=0,_t=0,It=0);const qt=fe.convert(ae.format),yt=fe.convert(ae.type);let ct;if(ae.isData3DTexture)ie.setTexture3D(ae,0),ct=q.TEXTURE_3D;else if(ae.isDataArrayTexture||ae.isCompressedArrayTexture)ie.setTexture2DArray(ae,0),ct=q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ae.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,ae.unpackAlignment);const Ut=q.getParameter(q.UNPACK_ROW_LENGTH),Ft=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Qt=q.getParameter(q.UNPACK_SKIP_PIXELS),Pn=q.getParameter(q.UNPACK_SKIP_ROWS),Dn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,Lt.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Lt.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Pe),q.pixelStorei(q.UNPACK_SKIP_ROWS,vt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,at),K.isDataTexture||K.isData3DTexture?q.texSubImage3D(ct,he,st,_t,It,Ne,Qe,Xe,qt,yt,Lt.data):ae.isCompressedArrayTexture?q.compressedTexSubImage3D(ct,he,st,_t,It,Ne,Qe,Xe,qt,Lt.data):q.texSubImage3D(ct,he,st,_t,It,Ne,Qe,Xe,qt,yt,Lt),q.pixelStorei(q.UNPACK_ROW_LENGTH,Ut),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Ft),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Qt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Pn),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Dn),he===0&&ae.generateMipmaps&&q.generateMipmap(ct),pe.unbindTexture()},this.initRenderTarget=function(K){re.get(K).__webglFramebuffer===void 0&&ie.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?ie.setTextureCube(K,0):K.isData3DTexture?ie.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?ie.setTexture2DArray(K,0):ie.setTexture2D(K,0),pe.unbindTexture()},this.resetState=function(){S=0,C=0,b=null,pe.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $l}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===lw?"display-p3":"srgb",n.unpackColorSpace=Xn.workingColorSpace===Rv?"display-p3":"srgb"}}class pw{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Je(e),this.density=n}clone(){return new pw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class mw{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Je(e),this.near=n,this.far=i}clone(){return new mw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Go extends Ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gi,this.environmentIntensity=1,this.environmentRotation=new gi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Lv{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=JA,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Uo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return S8("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ls=new L;class fo{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Ls.fromBufferAttribute(this,n),Ls.applyMatrix4(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Ls.fromBufferAttribute(this,n),Ls.applyNormalMatrix(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Ls.fromBufferAttribute(this,n),Ls.transformDirection(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Gs(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gn(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Gs(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Gs(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Gs(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Gs(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),s=gn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Gt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class I8 extends cr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jd;const S1=new L,Zd=new L,ep=new L,tp=new Ie,C1=new Ie,PQ=new Ge,N2=new L,b1=new L,G2=new L,gD=new Ie,ib=new Ie,AD=new Ie;class DQ extends Ht{constructor(e=new I8){if(super(),this.isSprite=!0,this.type="Sprite",Jd===void 0){Jd=new Dt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Lv(n,5);Jd.setIndex([0,1,2,0,2,3]),Jd.setAttribute("position",new fo(i,3,0,!1)),Jd.setAttribute("uv",new fo(i,2,3,!1))}this.geometry=Jd,this.material=e,this.center=new Ie(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zd.setFromMatrixScale(this.matrixWorld),PQ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ep.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zd.multiplyScalar(-ep.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;H2(N2.set(-.5,-.5,0),ep,o,Zd,r,s),H2(b1.set(.5,-.5,0),ep,o,Zd,r,s),H2(G2.set(.5,.5,0),ep,o,Zd,r,s),gD.set(0,0),ib.set(1,0),AD.set(1,1);let a=e.ray.intersectTriangle(N2,b1,G2,!1,S1);if(a===null&&(H2(b1.set(-.5,.5,0),ep,o,Zd,r,s),ib.set(0,1),a=e.ray.intersectTriangle(N2,G2,b1,!1,S1),a===null))return;const l=e.ray.origin.distanceTo(S1);l<e.near||l>e.far||n.push({distance:l,point:S1.clone(),uv:Tr.getInterpolation(S1,N2,b1,G2,gD,ib,AD,new Ie),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function H2(t,e,n,i,r,s){tp.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(C1.x=s*tp.x-r*tp.y,C1.y=r*tp.x+s*tp.y):C1.copy(tp),t.copy(e),t.x+=C1.x,t.y+=C1.y,t.applyMatrix4(PQ)}const Q2=new L,vD=new L;class LQ extends Ht{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Q2.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Q2);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Q2.setFromMatrixPosition(e.matrixWorld),vD.setFromMatrixPosition(this.matrixWorld);const i=Q2.distanceTo(vD)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const yD=new L,xD=new Jt,_D=new Jt,eoe=new L,ED=new Ge,V2=new L,rb=new $n,wD=new Ge,sb=new Da;class Fv extends ut{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=MT,this.bindMatrix=new Ge,this.bindMatrixInverse=new Ge,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new xn),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,V2),this.boundingBox.expandByPoint(V2)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new $n),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,V2),this.boundingSphere.expandByPoint(V2)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rb.copy(this.boundingSphere),rb.applyMatrix4(r),e.ray.intersectsSphere(rb)!==!1&&(wD.copy(r).invert(),sb.copy(e.ray).applyMatrix4(wD),!(this.boundingBox!==null&&sb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,sb)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jt,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===MT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===iQ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;xD.fromBufferAttribute(r.attributes.skinIndex,e),_D.fromBufferAttribute(r.attributes.skinWeight,e),yD.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=_D.getComponent(s);if(o!==0){const a=xD.getComponent(s);ED.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(eoe.copy(yD).applyMatrix4(ED),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class i0 extends Ht{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yr extends Bn{constructor(e=null,n=1,i=1,r,s,o,a,l,c=fn,u=fn,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const SD=new Ge,toe=new Ge;class S0{constructor(e=[],n=[]){this.uuid=Uo(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ge)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Ge;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:toe;SD.multiplyMatrices(a,n[s]),SD.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new S0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Yr(n,e,e,In,vn);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new i0),this.bones.push(o),this.boneInverses.push(new Ge().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class ml extends Gt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const np=new Ge,CD=new Ge,W2=[],bD=new xn,noe=new Ge,M1=new ut,T1=new $n;class Ov extends ut{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ml(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,noe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new xn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,np),bD.copy(e.boundingBox).applyMatrix4(np),this.boundingBox.union(bD)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new $n),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,np),T1.copy(e.boundingSphere).applyMatrix4(np),this.boundingSphere.union(T1)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(M1.geometry=this.geometry,M1.material=this.material,M1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),T1.copy(this.boundingSphere),T1.applyMatrix4(i),e.ray.intersectsSphere(T1)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,np),CD.multiplyMatrices(i,np),M1.matrixWorld=CD,M1.raycast(e,W2);for(let o=0,a=W2.length;o<a;o++){const l=W2[o];l.instanceId=s,l.object=this,n.push(l)}W2.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ml(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Yr(new Float32Array(r*this.count),r,this.count,co,vn));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function ioe(t,e){return t.z-e.z}function roe(t,e){return e.z-t.z}class soe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n,o.index=i}reset(){this.list.length=0,this.index=0}}const Cu=new Ge,ob=new Ge,ooe=new Ge,aoe=new Je(1,1,1),MD=new Ge,ab=new fd,j2=new xn,rh=new $n,I1=new L,TD=new L,loe=new L,lb=new soe,vs=new ut,X2=[];function coe(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class FQ extends ut{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,n,i=n*2,r){super(new Dt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Yr(n,e,e,In,vn);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new Yr(n,e,e,x0,Ss);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new Yr(n,e,e,In,vn);i.colorSpace=Xn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),f=new Gt(u,l,c);n.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new Gt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=n.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xn);const e=this._geometryCount,n=this.boundingBox,i=this._drawInfo;n.makeEmpty();for(let r=0;r<e;r++){if(i[r].active===!1)continue;const s=i[r].geometryIndex;this.getMatrixAt(r,Cu),this.getBoundingBoxAt(s,j2).applyMatrix4(Cu),n.union(j2)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $n);const e=this.boundingSphere,n=this._drawInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const s=n[i].geometryIndex;this.getMatrixAt(i,Cu),this.getBoundingSphereAt(s,rh).applyMatrix4(Cu),e.union(rh)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const n=this._drawInfo.length-1,i=this._matricesTexture,r=i.image.data;ooe.toArray(r,n*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(aoe.toArray(s.image.data,n*4),s.needsUpdate=!0),n}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=n,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:u?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new xn,sphereInitialized:!1,sphere:new $n}),this.setGeometryAt(f,e),f}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const d in i.attributes){const p=n.getAttribute(d),g=i.getAttribute(d);coe(p,g,l);const A=p.itemSize;for(let m=p.count,v=c;m<v;m++){const y=l+m;for(let w=0;w<A;w++)g.setComponent(y,w,0)}g.needsUpdate=!0,g.addUpdateRange(l*A,c*A)}if(r){const d=a.indexStart;for(let p=0;p<o.count;p++)s.setX(d+p,l+o.getX(p));for(let p=o.count,g=a.indexCount;p<g;p++)s.setX(d+p,l);s.needsUpdate=!0,s.addUpdateRange(d,a.indexCount)}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],h=n.getAttribute("position");return f.count=r?o.count:h.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,u=l.start+l.count;c<u;c++){let f=c;o&&(f=o.getX(f)),r.expandByPoint(I1.fromBufferAttribute(a,f))}i.boxInitialized=!0}return n.copy(r),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,j2),j2.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let c=0;for(let u=l.start,f=l.start+l.count;u<f;u++){let h=u;o&&(h=o.getX(h)),I1.fromBufferAttribute(a,h),c=Math.max(c,r.center.distanceToSquared(I1))}r.radius=Math.sqrt(c),i.sphereInitialized=!0}return n.copy(r),n}setMatrixAt(e,n){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(n.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:n.fromArray(r,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(n.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,n){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:n.fromArray(i,e*4)}setVisibleAt(e,n){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===n?this:(i[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}raycast(e,n){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;vs.material=this.material,vs.geometry.index=o.index,vs.geometry.attributes=o.attributes,vs.geometry.boundingBox===null&&(vs.geometry.boundingBox=new xn),vs.geometry.boundingSphere===null&&(vs.geometry.boundingSphere=new $n);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];vs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,vs.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,vs.geometry.boundingBox),this.getBoundingSphereAt(c,vs.geometry.boundingSphere),vs.raycast(e,X2);for(let f=0,h=X2.length;f<h;f++){const d=X2[f];d.object=this,d.batchId=a,n.push(d)}X2.length=0}vs.material=null,vs.geometry.index=null,vs.geometry.attributes={},vs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._drawInfo=e._drawInfo.map(n=>({...n})),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,h=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;h&&(MD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),ab.setFromProjectionMatrix(MD,e.coordinateSystem));let g=0;if(this.sortObjects){ob.copy(this.matrixWorld).invert(),I1.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ob),TD.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ob);for(let v=0,y=l.length;v<y;v++)if(l[v].visible&&l[v].active){const w=l[v].geometryIndex;this.getMatrixAt(v,Cu),this.getBoundingSphereAt(w,rh).applyMatrix4(Cu);let S=!1;if(h&&(S=!ab.intersectsSphere(rh)),!S){const C=loe.subVectors(rh.center,I1).dot(TD);lb.push(f[w],C,v)}}const A=lb.list,m=this.customSort;m===null?A.sort(s.transparent?roe:ioe):m.call(this,A,i);for(let v=0,y=A.length;v<y;v++){const w=A[v];c[g]=w.start*a,u[g]=w.count,p[g]=w.index,g++}lb.reset()}else for(let A=0,m=l.length;A<m;A++)if(l[A].visible&&l[A].active){const v=l[A].geometryIndex;let y=!1;if(h&&(this.getMatrixAt(A,Cu),this.getBoundingSphereAt(v,rh).applyMatrix4(Cu),y=!ab.intersectsSphere(rh)),!y){const w=f[v];c[g]=w.start*a,u[g]=w.count,p[g]=A,g++}}d.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Ji extends cr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const iE=new L,rE=new L,ID=new Ge,B1=new Da,Y2=new $n,cb=new L,BD=new L;let un=class extends Ht{constructor(e=new Dt,n=new Ji){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)iE.fromBufferAttribute(n,r-1),rE.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=iE.distanceTo(rE);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Y2.copy(i.boundingSphere),Y2.applyMatrix4(r),Y2.radius+=s,e.ray.intersectsSphere(Y2)===!1)return;ID.copy(r).invert(),B1.copy(e.ray).applyMatrix4(ID);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){const d=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=d,A=p-1;g<A;g+=c){const m=u.getX(g),v=u.getX(g+1),y=q2(this,e,B1,l,m,v);y&&n.push(y)}if(this.isLineLoop){const g=u.getX(p-1),A=u.getX(d),m=q2(this,e,B1,l,g,A);m&&n.push(m)}}else{const d=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let g=d,A=p-1;g<A;g+=c){const m=q2(this,e,B1,l,g,g+1);m&&n.push(m)}if(this.isLineLoop){const g=q2(this,e,B1,l,p-1,d);g&&n.push(g)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function q2(t,e,n,i,r,s){const o=t.geometry.attributes.position;if(iE.fromBufferAttribute(o,r),rE.fromBufferAttribute(o,s),n.distanceSqToSegment(iE,rE,cb,BD)>i)return;cb.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(cb);if(!(l<e.near||l>e.far))return{distance:l,point:BD.clone().applyMatrix4(t.matrixWorld),index:r,face:null,faceIndex:null,object:t}}const RD=new L,PD=new L;class xl extends un{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)RD.fromBufferAttribute(n,r),PD.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+RD.distanceTo(PD);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class B8 extends un{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class zv extends cr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const DD=new Ge,DT=new Da,$2=new $n,K2=new L;let R8=class extends Ht{constructor(e=new Dt,n=new zv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$2.copy(i.boundingSphere),$2.applyMatrix4(r),$2.radius+=s,e.ray.intersectsSphere($2)===!1)return;DD.copy(r).invert(),DT.copy(e.ray).applyMatrix4(DD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let p=h,g=d;p<g;p++){const A=c.getX(p);K2.fromBufferAttribute(f,A),LD(K2,A,l,r,e,n,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let p=h,g=d;p<g;p++)K2.fromBufferAttribute(f,p),LD(K2,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function LD(t,e,n,i,r,s,o){const a=DT.distanceSqToPoint(t);if(a<n){const l=new L;DT.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}let OQ=class extends Bn{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Vt,this.magFilter=s!==void 0?s:Vt,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};class uoe extends Bn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=fn,this.minFilter=fn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Pf extends Bn{constructor(e,n,i,r,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}let foe=class extends Pf{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=wi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},hoe=class extends Pf{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,pl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}};class gw extends Bn{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class La{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],h=i[r+1]-u,d=(o-u)/h;return(r+d)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Ie:new L);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new L,r=[],s=[],o=[],a=new L,l=new Ge;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new L)}s[0]=new L,o[0]=new L;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos($i(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(n===!0){let d=Math.acos($i(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Gh extends La{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Ie){const i=n,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class zQ extends Gh{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function P8(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,r(o,a,h,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const J2=new L,ub=new P8,fb=new P8,hb=new P8;class Aw extends La{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new L){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(J2.subVectors(r[0],r[1]).add(r[0]),c=J2);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(J2.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=J2),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(f),d),g=Math.pow(f.distanceToSquared(h),d),A=Math.pow(h.distanceToSquared(u),d);g<1e-4&&(g=1),p<1e-4&&(p=g),A<1e-4&&(A=g),ub.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,p,g,A),fb.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,p,g,A),hb.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,p,g,A)}else this.curveType==="catmullrom"&&(ub.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),fb.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),hb.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set(ub.calc(l),fb.calc(l),hb.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new L().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function FD(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function doe(t,e){const n=1-t;return n*n*e}function poe(t,e){return 2*(1-t)*t*e}function moe(t,e){return t*t*e}function rA(t,e,n,i){return doe(t,e)+poe(t,n)+moe(t,i)}function goe(t,e){const n=1-t;return n*n*n*e}function Aoe(t,e){const n=1-t;return 3*n*n*t*e}function voe(t,e){return 3*(1-t)*t*t*e}function yoe(t,e){return t*t*t*e}function sA(t,e,n,i,r){return goe(t,e)+Aoe(t,n)+voe(t,i)+yoe(t,r)}class D8 extends La{constructor(e=new Ie,n=new Ie,i=new Ie,r=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ie){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(sA(e,r.x,s.x,o.x,a.x),sA(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class L8 extends La{constructor(e=new L,n=new L,i=new L,r=new L){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new L){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(sA(e,r.x,s.x,o.x,a.x),sA(e,r.y,s.y,o.y,a.y),sA(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class F8 extends La{constructor(e=new Ie,n=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ie){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ie){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UQ extends La{constructor(e=new L,n=new L){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new L){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new L){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O8 extends La{constructor(e=new Ie,n=new Ie,i=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ie){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(rA(e,r.x,s.x,o.x),rA(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vw extends La{constructor(e=new L,n=new L,i=new L){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new L){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(rA(e,r.x,s.x,o.x),rA(e,r.y,s.y,o.y),rA(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class z8 extends La{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ie){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(FD(a,l.x,c.x,u.x,f.x),FD(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ie().fromArray(r))}return this}}var sE=Object.freeze({__proto__:null,ArcCurve:zQ,CatmullRomCurve3:Aw,CubicBezierCurve:D8,CubicBezierCurve3:L8,EllipseCurve:Gh,LineCurve:F8,LineCurve3:UQ,QuadraticBezierCurve:O8,QuadraticBezierCurve3:vw,SplineCurve:z8});class U8 extends La{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new sE[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new sE[r.type]().fromJSON(r))}return this}}class uf extends U8{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new F8(this.currentPoint.clone(),new Ie(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new O8(this.currentPoint.clone(),new Ie(e,n),new Ie(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new D8(this.currentPoint.clone(),new Ie(e,n),new Ie(i,r),new Ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new z8(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new Gh(e,n,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Uv extends Dt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=$i(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,f=new L,h=new Ie,d=new L,p=new L,g=new L;let A=0,m=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:A=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,d.x=m*1,d.y=-A,d.z=m*0,g.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:A=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,d.x=m*1,d.y=-A,d.z=m*0,p.copy(d),d.x+=g.x,d.y+=g.y,d.z+=g.z,d.normalize(),l.push(d.x,d.y,d.z),g.copy(p)}for(let v=0;v<=n;v++){const y=i+v*u*r,w=Math.sin(y),S=Math.cos(y);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*w,f.y=e[C].y,f.z=e[C].x*S,o.push(f.x,f.y,f.z),h.x=v/n,h.y=C/(e.length-1),a.push(h.x,h.y);const b=l[3*C+0]*w,M=l[3*C+1],I=l[3*C+0]*S;c.push(b,M,I)}}for(let v=0;v<n;v++)for(let y=0;y<e.length-1;y++){const w=y+v*e.length,S=w,C=w+e.length,b=w+e.length+1,M=w+1;s.push(S,C,M),s.push(b,M,C)}this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("uv",new At(a,2)),this.setAttribute("normal",new At(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uv(e.points,e.segments,e.phiStart,e.phiLength)}}class yw extends Uv{constructor(e=1,n=1,i=4,r=8){const s=new uf;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new yw(e.radius,e.length,e.capSegments,e.radialSegments)}}class xw extends Dt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new L,u=new Ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=i+f/n*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(a,3)),this.setAttribute("uv",new At(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qr extends Dt{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],d=[];let p=0;const g=[],A=i/2;let m=0;v(),o===!1&&(e>0&&y(!0),n>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(h,3)),this.setAttribute("uv",new At(d,2));function v(){const w=new L,S=new L;let C=0;const b=(n-e)/i;for(let M=0;M<=s;M++){const I=[],T=M/s,D=T*(n-e)+e;for(let R=0;R<=r;R++){const z=R/r,F=z*l+a,V=Math.sin(F),j=Math.cos(F);S.x=D*V,S.y=-T*i+A,S.z=D*j,f.push(S.x,S.y,S.z),w.set(V,b,j).normalize(),h.push(w.x,w.y,w.z),d.push(z,1-T),I.push(p++)}g.push(I)}for(let M=0;M<r;M++)for(let I=0;I<s;I++){const T=g[I][M],D=g[I+1][M],R=g[I+1][M+1],z=g[I][M+1];u.push(T,D,z),u.push(D,R,z),C+=6}c.addGroup(m,C,0),m+=C}function y(w){const S=p,C=new Ie,b=new L;let M=0;const I=w===!0?e:n,T=w===!0?1:-1;for(let R=1;R<=r;R++)f.push(0,A*T,0),h.push(0,T,0),d.push(.5,.5),p++;const D=p;for(let R=0;R<=r;R++){const F=R/r*l+a,V=Math.cos(F),j=Math.sin(F);b.x=I*j,b.y=A*T,b.z=I*V,f.push(b.x,b.y,b.z),h.push(0,T,0),C.x=V*.5+.5,C.y=j*.5*T+.5,d.push(C.x,C.y),p++}for(let R=0;R<r;R++){const z=S+R,F=D+R;w===!0?u.push(F,F+1,z):u.push(F+1,F,z),M+=3}c.addGroup(m,M,w===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _w extends Qr{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new _w(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Df extends Dt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(s.slice(),3)),this.setAttribute("uv",new At(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){const y=new L,w=new L,S=new L;for(let C=0;C<n.length;C+=3)d(n[C+0],y),d(n[C+1],w),d(n[C+2],S),l(y,w,S,v)}function l(v,y,w,S){const C=S+1,b=[];for(let M=0;M<=C;M++){b[M]=[];const I=v.clone().lerp(w,M/C),T=y.clone().lerp(w,M/C),D=C-M;for(let R=0;R<=D;R++)R===0&&M===C?b[M][R]=I:b[M][R]=I.clone().lerp(T,R/D)}for(let M=0;M<C;M++)for(let I=0;I<2*(C-M)-1;I++){const T=Math.floor(I/2);I%2===0?(h(b[M][T+1]),h(b[M+1][T]),h(b[M][T])):(h(b[M][T+1]),h(b[M+1][T+1]),h(b[M+1][T]))}}function c(v){const y=new L;for(let w=0;w<s.length;w+=3)y.x=s[w+0],y.y=s[w+1],y.z=s[w+2],y.normalize().multiplyScalar(v),s[w+0]=y.x,s[w+1]=y.y,s[w+2]=y.z}function u(){const v=new L;for(let y=0;y<s.length;y+=3){v.x=s[y+0],v.y=s[y+1],v.z=s[y+2];const w=A(v)/2/Math.PI+.5,S=m(v)/Math.PI+.5;o.push(w,1-S)}p(),f()}function f(){for(let v=0;v<o.length;v+=6){const y=o[v+0],w=o[v+2],S=o[v+4],C=Math.max(y,w,S),b=Math.min(y,w,S);C>.9&&b<.1&&(y<.2&&(o[v+0]+=1),w<.2&&(o[v+2]+=1),S<.2&&(o[v+4]+=1))}}function h(v){s.push(v.x,v.y,v.z)}function d(v,y){const w=v*3;y.x=e[w+0],y.y=e[w+1],y.z=e[w+2]}function p(){const v=new L,y=new L,w=new L,S=new L,C=new Ie,b=new Ie,M=new Ie;for(let I=0,T=0;I<s.length;I+=9,T+=6){v.set(s[I+0],s[I+1],s[I+2]),y.set(s[I+3],s[I+4],s[I+5]),w.set(s[I+6],s[I+7],s[I+8]),C.set(o[T+0],o[T+1]),b.set(o[T+2],o[T+3]),M.set(o[T+4],o[T+5]),S.copy(v).add(y).add(w).divideScalar(3);const D=A(S);g(C,T+0,v,D),g(b,T+2,y,D),g(M,T+4,w,D)}}function g(v,y,w,S){S<0&&v.x===1&&(o[y]=v.x-1),w.x===0&&w.z===0&&(o[y]=S/2/Math.PI+.5)}function A(v){return Math.atan2(v.z,-v.x)}function m(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.vertices,e.indices,e.radius,e.details)}}class Ew extends Df{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ew(e.radius,e.detail)}}const Z2=new L,ex=new L,db=new L,tx=new Tr;class k8 extends Dt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(kh*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:g,b:A,c:m}=tx;if(g.fromBufferAttribute(a,c[0]),A.fromBufferAttribute(a,c[1]),m.fromBufferAttribute(a,c[2]),tx.getNormal(db),f[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,f[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let v=0;v<3;v++){const y=(v+1)%3,w=f[v],S=f[y],C=tx[u[v]],b=tx[u[y]],M=`${w}_${S}`,I=`${S}_${w}`;I in h&&h[I]?(db.dot(h[I].normal)<=s&&(d.push(C.x,C.y,C.z),d.push(b.x,b.y,b.z)),h[I]=null):M in h||(h[M]={index0:c[v],index1:c[y],normal:db.clone()})}}for(const p in h)if(h[p]){const{index0:g,index1:A}=h[p];Z2.fromBufferAttribute(a,g),ex.fromBufferAttribute(a,A),d.push(Z2.x,Z2.y,Z2.z),d.push(ex.x,ex.y,ex.z)}this.setAttribute("position",new At(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Vc=class extends uf{constructor(e){super(e),this.uuid=Uo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new uf().fromJSON(r))}return this}};const xoe={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=kQ(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,d;if(i&&(s=Coe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<r;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?32767/d:0}return tv(s,o,n,a,l,d,0),o}};function kQ(t,e,n,i,r){let s,o;if(r===Ooe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=OD(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=OD(s,t[s],t[s+1],o);return o&&ww(o,o.next)&&(iv(o),o=o.next),o}function Zh(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(ww(n,n.next)||Ui(n.prev,n,n.next)===0)){if(iv(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function tv(t,e,n,i,r,s,o){if(!t)return;!o&&s&&Boe(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Eoe(t,i,r,s):_oe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),iv(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=woe(Zh(t),e,n),tv(t,e,n,i,r,s,2)):o===2&&Soe(t,e,n,i,r,s):tv(Zh(t),e,n,i,r,s,1);break}}}function _oe(t){const e=t.prev,n=t,i=t.next;if(Ui(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,d=a>l?a>c?a:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&vm(r,a,s,l,o,c,p.x,p.y)&&Ui(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Eoe(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Ui(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,h=o.y,d=a<l?a<c?a:c:l<c?l:c,p=u<f?u<h?u:h:f<h?f:h,g=a>l?a>c?a:c:l>c?l:c,A=u>f?u>h?u:h:f>h?f:h,m=LT(d,p,e,n,i),v=LT(g,A,e,n,i);let y=t.prevZ,w=t.nextZ;for(;y&&y.z>=m&&w&&w.z<=v;){if(y.x>=d&&y.x<=g&&y.y>=p&&y.y<=A&&y!==r&&y!==o&&vm(a,u,l,f,c,h,y.x,y.y)&&Ui(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=d&&w.x<=g&&w.y>=p&&w.y<=A&&w!==r&&w!==o&&vm(a,u,l,f,c,h,w.x,w.y)&&Ui(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=g&&y.y>=p&&y.y<=A&&y!==r&&y!==o&&vm(a,u,l,f,c,h,y.x,y.y)&&Ui(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=v;){if(w.x>=d&&w.x<=g&&w.y>=p&&w.y<=A&&w!==r&&w!==o&&vm(a,u,l,f,c,h,w.x,w.y)&&Ui(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function woe(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!ww(r,s)&&NQ(r,i,i.next,s)&&nv(r,s)&&nv(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),iv(i),iv(i.next),i=t=s),i=i.next}while(i!==t);return Zh(i)}function Soe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Doe(o,a)){let l=GQ(o,a);o=Zh(o,o.next),l=Zh(l,l.next),tv(o,e,n,i,r,s,0),tv(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function Coe(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=kQ(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Poe(c));for(r.sort(boe),s=0;s<r.length;s++)n=Moe(r[s],n);return n}function boe(t,e){return t.x-e.x}function Moe(t,e){const n=Toe(t,e);if(!n)return e;const i=GQ(n,t);return Zh(i,i.next),Zh(n,n.next)}function Toe(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>i&&(i=h,r=n.x<n.next.x?n:n.next,h===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&vm(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),nv(n,t)&&(f<u||f===u&&(n.x>r.x||n.x===r.x&&Ioe(r,n)))&&(r=n,u=f)),n=n.next;while(n!==a);return r}function Ioe(t,e){return Ui(t.prev,t,e.prev)<0&&Ui(e.next,t,t.next)<0}function Boe(t,e,n,i){let r=t;do r.z===0&&(r.z=LT(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Roe(r)}function Roe(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function LT(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Poe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function vm(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function Doe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Loe(t,e)&&(nv(t,e)&&nv(e,t)&&Foe(t,e)&&(Ui(t.prev,t,e.prev)||Ui(t,e.prev,e))||ww(t,e)&&Ui(t.prev,t,t.next)>0&&Ui(e.prev,e,e.next)>0)}function Ui(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ww(t,e){return t.x===e.x&&t.y===e.y}function NQ(t,e,n,i){const r=ix(Ui(t,e,n)),s=ix(Ui(t,e,i)),o=ix(Ui(n,i,t)),a=ix(Ui(n,i,e));return!!(r!==s&&o!==a||r===0&&nx(t,n,e)||s===0&&nx(t,i,e)||o===0&&nx(n,t,i)||a===0&&nx(n,e,i))}function nx(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ix(t){return t>0?1:t<0?-1:0}function Loe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&NQ(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function nv(t,e){return Ui(t.prev,t,t.next)<0?Ui(t,e,t.next)>=0&&Ui(t,t.prev,e)>=0:Ui(t,e,t.prev)<0||Ui(t,t.next,e)<0}function Foe(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function GQ(t,e){const n=new FT(t.i,t.x,t.y),i=new FT(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function OD(t,e,n,i){const r=new FT(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function iv(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function FT(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ooe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class ul{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ul.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];zD(e),UD(i,e);let o=e.length;n.forEach(zD);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,UD(i,n[l]);const a=xoe.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function zD(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function UD(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class kv extends Dt{constructor(e=new Vc([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new At(r,3)),this.setAttribute("uv",new At(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:d-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,A=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,v=n.UVGenerator!==void 0?n.UVGenerator:zoe;let y,w=!1,S,C,b,M;m&&(y=m.getSpacedPoints(u),w=!0,h=!1,S=m.computeFrenetFrames(u,!1),C=new L,b=new L,M=new L),h||(A=0,d=0,p=0,g=0);const I=a.extractPoints(c);let T=I.shape;const D=I.holes;if(!ul.isClockWise(T)){T=T.reverse();for(let q=0,xe=D.length;q<xe;q++){const ue=D[q];ul.isClockWise(ue)&&(D[q]=ue.reverse())}}const z=ul.triangulateShape(T,D),F=T;for(let q=0,xe=D.length;q<xe;q++){const ue=D[q];T=T.concat(ue)}function V(q,xe,ue){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),q.clone().addScaledVector(xe,ue)}const j=T.length,Z=z.length;function U(q,xe,ue){let me,pe,Le;const re=q.x-xe.x,ie=q.y-xe.y,te=ue.x-q.x,W=ue.y-q.y,Me=re*re+ie*ie,De=re*W-ie*te;if(Math.abs(De)>Number.EPSILON){const Ee=Math.sqrt(Me),_e=Math.sqrt(te*te+W*W),Ze=xe.x-ie/Ee,Oe=xe.y+re/Ee,we=ue.x-W/_e,be=ue.y+te/_e,Be=((we-Ze)*W-(be-Oe)*te)/(re*W-ie*te);me=Ze+re*Be-q.x,pe=Oe+ie*Be-q.y;const Ve=me*me+pe*pe;if(Ve<=2)return new Ie(me,pe);Le=Math.sqrt(Ve/2)}else{let Ee=!1;re>Number.EPSILON?te>Number.EPSILON&&(Ee=!0):re<-Number.EPSILON?te<-Number.EPSILON&&(Ee=!0):Math.sign(ie)===Math.sign(W)&&(Ee=!0),Ee?(me=-ie,pe=re,Le=Math.sqrt(Me)):(me=re,pe=ie,Le=Math.sqrt(Me/2))}return new Ie(me/Le,pe/Le)}const $=[];for(let q=0,xe=F.length,ue=xe-1,me=q+1;q<xe;q++,ue++,me++)ue===xe&&(ue=0),me===xe&&(me=0),$[q]=U(F[q],F[ue],F[me]);const X=[];let Q,J=$.concat();for(let q=0,xe=D.length;q<xe;q++){const ue=D[q];Q=[];for(let me=0,pe=ue.length,Le=pe-1,re=me+1;me<pe;me++,Le++,re++)Le===pe&&(Le=0),re===pe&&(re=0),Q[me]=U(ue[me],ue[Le],ue[re]);X.push(Q),J=J.concat(Q)}for(let q=0;q<A;q++){const xe=q/A,ue=d*Math.cos(xe*Math.PI/2),me=p*Math.sin(xe*Math.PI/2)+g;for(let pe=0,Le=F.length;pe<Le;pe++){const re=V(F[pe],$[pe],me);H(re.x,re.y,-ue)}for(let pe=0,Le=D.length;pe<Le;pe++){const re=D[pe];Q=X[pe];for(let ie=0,te=re.length;ie<te;ie++){const W=V(re[ie],Q[ie],me);H(W.x,W.y,-ue)}}}const ne=p+g;for(let q=0;q<j;q++){const xe=h?V(T[q],J[q],ne):T[q];w?(b.copy(S.normals[0]).multiplyScalar(xe.x),C.copy(S.binormals[0]).multiplyScalar(xe.y),M.copy(y[0]).add(b).add(C),H(M.x,M.y,M.z)):H(xe.x,xe.y,0)}for(let q=1;q<=u;q++)for(let xe=0;xe<j;xe++){const ue=h?V(T[xe],J[xe],ne):T[xe];w?(b.copy(S.normals[q]).multiplyScalar(ue.x),C.copy(S.binormals[q]).multiplyScalar(ue.y),M.copy(y[q]).add(b).add(C),H(M.x,M.y,M.z)):H(ue.x,ue.y,f/u*q)}for(let q=A-1;q>=0;q--){const xe=q/A,ue=d*Math.cos(xe*Math.PI/2),me=p*Math.sin(xe*Math.PI/2)+g;for(let pe=0,Le=F.length;pe<Le;pe++){const re=V(F[pe],$[pe],me);H(re.x,re.y,f+ue)}for(let pe=0,Le=D.length;pe<Le;pe++){const re=D[pe];Q=X[pe];for(let ie=0,te=re.length;ie<te;ie++){const W=V(re[ie],Q[ie],me);w?H(W.x,W.y+y[u-1].y,y[u-1].x+ue):H(W.x,W.y,f+ue)}}}O(),N();function O(){const q=r.length/3;if(h){let xe=0,ue=j*xe;for(let me=0;me<Z;me++){const pe=z[me];oe(pe[2]+ue,pe[1]+ue,pe[0]+ue)}xe=u+A*2,ue=j*xe;for(let me=0;me<Z;me++){const pe=z[me];oe(pe[0]+ue,pe[1]+ue,pe[2]+ue)}}else{for(let xe=0;xe<Z;xe++){const ue=z[xe];oe(ue[2],ue[1],ue[0])}for(let xe=0;xe<Z;xe++){const ue=z[xe];oe(ue[0]+j*u,ue[1]+j*u,ue[2]+j*u)}}i.addGroup(q,r.length/3-q,0)}function N(){const q=r.length/3;let xe=0;G(F,xe),xe+=F.length;for(let ue=0,me=D.length;ue<me;ue++){const pe=D[ue];G(pe,xe),xe+=pe.length}i.addGroup(q,r.length/3-q,1)}function G(q,xe){let ue=q.length;for(;--ue>=0;){const me=ue;let pe=ue-1;pe<0&&(pe=q.length-1);for(let Le=0,re=u+A*2;Le<re;Le++){const ie=j*Le,te=j*(Le+1),W=xe+me+ie,Me=xe+pe+ie,De=xe+pe+te,Ee=xe+me+te;de(W,Me,De,Ee)}}}function H(q,xe,ue){l.push(q),l.push(xe),l.push(ue)}function oe(q,xe,ue){ce(q),ce(xe),ce(ue);const me=r.length/3,pe=v.generateTopUV(i,r,me-3,me-2,me-1);ge(pe[0]),ge(pe[1]),ge(pe[2])}function de(q,xe,ue,me){ce(q),ce(xe),ce(me),ce(xe),ce(ue),ce(me);const pe=r.length/3,Le=v.generateSideWallUV(i,r,pe-6,pe-3,pe-2,pe-1);ge(Le[0]),ge(Le[1]),ge(Le[3]),ge(Le[1]),ge(Le[2]),ge(Le[3])}function ce(q){r.push(l[q*3+0]),r.push(l[q*3+1]),r.push(l[q*3+2])}function ge(q){s.push(q.x),s.push(q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return Uoe(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new sE[r.type]().fromJSON(r)),new kv(i,e.options)}}const zoe={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(c,u)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],d=e[r*3+1],p=e[r*3+2],g=e[s*3],A=e[s*3+1],m=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ie(o,1-l),new Ie(c,1-f),new Ie(h,1-p),new Ie(g,1-m)]:[new Ie(a,1-l),new Ie(u,1-f),new Ie(d,1-p),new Ie(A,1-m)]}};function Uoe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Nv extends Df{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Nv(e.radius,e.detail)}}class la extends Df{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new la(e.radius,e.detail)}}class Sw extends Dt{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const h=(n-e)/r,d=new L,p=new Ie;for(let g=0;g<=r;g++){for(let A=0;A<=i;A++){const m=s+A/i*o;d.x=f*Math.cos(m),d.y=f*Math.sin(m),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}f+=h}for(let g=0;g<r;g++){const A=g*(i+1);for(let m=0;m<i;m++){const v=m+A,y=v,w=v+i+1,S=v+i+2,C=v+1;a.push(y,w,C),a.push(w,S,C)}}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Cw extends Dt{constructor(e=new Vc([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new At(r,3)),this.setAttribute("normal",new At(s,3)),this.setAttribute("uv",new At(o,2));function c(u){const f=r.length/3,h=u.extractPoints(n);let d=h.shape;const p=h.holes;ul.isClockWise(d)===!1&&(d=d.reverse());for(let A=0,m=p.length;A<m;A++){const v=p[A];ul.isClockWise(v)===!0&&(p[A]=v.reverse())}const g=ul.triangulateShape(d,p);for(let A=0,m=p.length;A<m;A++){const v=p[A];d=d.concat(v)}for(let A=0,m=d.length;A<m;A++){const v=d[A];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let A=0,m=g.length;A<m;A++){const v=g[A],y=v[0]+f,w=v[1]+f,S=v[2]+f;i.push(y,w,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return koe(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new Cw(i,e.curveSegments)}}function koe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class dd extends Dt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new L,h=new L,d=[],p=[],g=[],A=[];for(let m=0;m<=i;m++){const v=[],y=m/i;let w=0;m===0&&o===0?w=.5/n:m===i&&l===Math.PI&&(w=-.5/n);for(let S=0;S<=n;S++){const C=S/n;f.x=-e*Math.cos(r+C*s)*Math.sin(o+y*a),f.y=e*Math.cos(o+y*a),f.z=e*Math.sin(r+C*s)*Math.sin(o+y*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),A.push(C+w,1-y),v.push(c++)}u.push(v)}for(let m=0;m<i;m++)for(let v=0;v<n;v++){const y=u[m][v+1],w=u[m][v],S=u[m+1][v],C=u[m+1][v+1];(m!==0||o>0)&&d.push(y,w,C),(m!==i-1||l<Math.PI)&&d.push(w,S,C)}this.setIndex(d),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(g,3)),this.setAttribute("uv",new At(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class bw extends Df{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new bw(e.radius,e.detail)}}class Wu extends Dt{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new L,f=new L,h=new L;for(let d=0;d<=i;d++)for(let p=0;p<=r;p++){const g=p/r*s,A=d/i*Math.PI*2;f.x=(e+n*Math.cos(A))*Math.cos(g),f.y=(e+n*Math.cos(A))*Math.sin(g),f.z=n*Math.sin(A),a.push(f.x,f.y,f.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=r;p++){const g=(r+1)*d+p-1,A=(r+1)*(d-1)+p-1,m=(r+1)*(d-1)+p,v=(r+1)*d+p;o.push(g,A,v),o.push(A,m,v)}this.setIndex(o),this.setAttribute("position",new At(a,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mw extends Dt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new L,h=new L,d=new L,p=new L,g=new L,A=new L,m=new L;for(let y=0;y<=i;++y){const w=y/i*s*Math.PI*2;v(w,s,o,e,d),v(w+.01,s,o,e,p),A.subVectors(p,d),m.addVectors(p,d),g.crossVectors(A,m),m.crossVectors(g,A),g.normalize(),m.normalize();for(let S=0;S<=r;++S){const C=S/r*Math.PI*2,b=-n*Math.cos(C),M=n*Math.sin(C);f.x=d.x+(b*m.x+M*g.x),f.y=d.y+(b*m.y+M*g.y),f.z=d.z+(b*m.z+M*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(y/i),u.push(S/r)}}for(let y=1;y<=i;y++)for(let w=1;w<=r;w++){const S=(r+1)*(y-1)+(w-1),C=(r+1)*y+(w-1),b=(r+1)*y+w,M=(r+1)*(y-1)+w;a.push(S,C,M),a.push(C,b,M)}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2));function v(y,w,S,C,b){const M=Math.cos(y),I=Math.sin(y),T=S/w*y,D=Math.cos(T);b.x=C*(2+D)*.5*M,b.y=C*(2+D)*I*.5,b.z=C*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Tw extends Dt{constructor(e=new vw(new L(-1,-1,0),new L(-1,1,0),new L(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new L,l=new L,c=new Ie;let u=new L;const f=[],h=[],d=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(h,3)),this.setAttribute("uv",new At(d,2));function g(){for(let y=0;y<n;y++)A(y);A(s===!1?n:0),v(),m()}function A(y){u=e.getPointAt(y/n,u);const w=o.normals[y],S=o.binormals[y];for(let C=0;C<=r;C++){const b=C/r*Math.PI*2,M=Math.sin(b),I=-Math.cos(b);l.x=I*w.x+M*S.x,l.y=I*w.y+M*S.y,l.z=I*w.z+M*S.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function m(){for(let y=1;y<=n;y++)for(let w=1;w<=r;w++){const S=(r+1)*(y-1)+(w-1),C=(r+1)*y+(w-1),b=(r+1)*y+w,M=(r+1)*(y-1)+w;p.push(S,C,M),p.push(C,b,M)}}function v(){for(let y=0;y<=n;y++)for(let w=0;w<=r;w++)c.x=y/n,c.y=w/r,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Tw(new sE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class N8 extends Dt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new L,s=new L;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,d=f.count;for(let p=h,g=h+d;p<g;p+=3)for(let A=0;A<3;A++){const m=a.getX(p+A),v=a.getX(p+(A+1)%3);r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,v),kD(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),kD(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new At(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kD(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var ND=Object.freeze({__proto__:null,BoxGeometry:ks,CapsuleGeometry:yw,CircleGeometry:xw,ConeGeometry:_w,CylinderGeometry:Qr,DodecahedronGeometry:Ew,EdgesGeometry:k8,ExtrudeGeometry:kv,IcosahedronGeometry:Nv,LatheGeometry:Uv,OctahedronGeometry:la,PlaneGeometry:vr,PolyhedronGeometry:Df,RingGeometry:Sw,ShapeGeometry:Cw,SphereGeometry:dd,TetrahedronGeometry:bw,TorusGeometry:Wu,TorusKnotGeometry:Mw,TubeGeometry:Tw,WireframeGeometry:N8});class HQ extends cr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class QQ extends Fn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class pd extends cr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qs extends pd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $i(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class oA extends cr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gi,this.combine=Iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VQ extends cr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class G8 extends cr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Gv extends cr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gi,this.combine=Iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WQ extends cr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jQ extends Ji{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ph(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function XQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function YQ(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function OT(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function H8(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function Noe(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*r;if(!(p<n||p>=i)){f.push(c.times[d]);for(let g=0;g<u;++g)h.push(c.values[d*u+g])}}f.length!==0&&(c.times=Ph(f,c.times.constructor),c.values=Ph(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Goe(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let g;if(s<=a.times[0]){const m=u,v=f-u;g=a.values.slice(m,v)}else if(s>=a.times[p]){const m=p*f+u,v=m+f-u;g=a.values.slice(m,v)}else{const m=a.createInterpolant(),v=u,y=f-u;m.evaluate(s),g=m.resultBuffer.slice(v,y)}l==="quaternion"&&new Tt().fromArray(g).normalize().conjugate().toArray(g);const A=c.times.length;for(let m=0;m<A;++m){const v=m*d+h;if(l==="quaternion")Tt.multiplyQuaternionsFlat(c.values,v,g,0,c.values,v);else{const y=d-h*2;for(let w=0;w<y;++w)c.values[v+w]-=g[w]}}}return t.blendMode=x8,t}const Hoe={convertArray:Ph,isTypedArray:XQ,getKeyframeOrder:YQ,sortedArray:OT,flattenJSON:H8,subclip:Noe,makeClipAdditive:Goe};class C0{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class qQ extends C0{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ih,endingEnd:Ih}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Bh:s=e,a=2*n-i;break;case YA:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Bh:o=e,l=2*i-n;break;case YA:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-n)/(r-n),g=p*p,A=g*p,m=-h*A+2*h*g-h*p,v=(1+h)*A+(-1.5-2*h)*g+(-.5+h)*p+1,y=(-1-d)*A+(1.5+d)*g+.5*p,w=d*A-d*g;for(let S=0;S!==a;++S)s[S]=m*o[u+S]+v*o[c+S]+y*o[l+S]+w*o[f+S];return s}}class Q8 extends C0{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-n)/(r-n),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class $Q extends C0{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class _l{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ph(n,this.TimeBufferType),this.values=Ph(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Ph(e.times,Array),values:Ph(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new $Q(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Q8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new qQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Zm:n=this.InterpolantFactoryMethodDiscrete;break;case e0:n=this.InterpolantFactoryMethodLinear;break;case U_:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zm;case this.InterpolantFactoryMethodLinear:return e0;case this.InterpolantFactoryMethodSmooth:return U_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&XQ(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===U_,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,h=f-i,d=f+i;for(let p=0;p!==i;++p){const g=n[f+p];if(g!==n[h+p]||g!==n[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let d=0;d!==i;++d)n[h+d]=n[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}_l.prototype.TimeBufferType=Float32Array;_l.prototype.ValueBufferType=Float32Array;_l.prototype.DefaultInterpolation=e0;class md extends _l{constructor(e,n,i){super(e,n,i)}}md.prototype.ValueTypeName="bool";md.prototype.ValueBufferType=Array;md.prototype.DefaultInterpolation=Zm;md.prototype.InterpolantFactoryMethodLinear=void 0;md.prototype.InterpolantFactoryMethodSmooth=void 0;class V8 extends _l{}V8.prototype.ValueTypeName="color";class _f extends _l{}_f.prototype.ValueTypeName="number";class KQ extends C0{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Tt.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Kc extends _l{InterpolantFactoryMethodLinear(e){return new KQ(this.times,this.values,this.getValueSize(),e)}}Kc.prototype.ValueTypeName="quaternion";Kc.prototype.InterpolantFactoryMethodSmooth=void 0;class gd extends _l{constructor(e,n,i){super(e,n,i)}}gd.prototype.ValueTypeName="string";gd.prototype.ValueBufferType=Array;gd.prototype.DefaultInterpolation=Zm;gd.prototype.InterpolantFactoryMethodLinear=void 0;gd.prototype.InterpolantFactoryMethodSmooth=void 0;class Jc extends _l{}Jc.prototype.ValueTypeName="vector";class Ef{constructor(e="",n=-1,i=[],r=ow){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Uo(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(Voe(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(_l.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=YQ(l);l=OT(l,1,u),c=OT(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new _f(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,p,g){if(d.length!==0){const A=[],m=[];H8(d,A,m,p),A.length!==0&&g.push(new f(h,A,m))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)d[h[p].morphTargets[g]]=-1;for(const g in d){const A=[],m=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];A.push(y.time),m.push(y.morphTarget===g?1:0)}r.push(new _f(".morphTargetInfluence["+g+"]",A,m))}l=d.length*o}else{const d=".bones["+n[f].name+"]";i(Jc,d+".position",h,"pos",r),i(Kc,d+".quaternion",h,"rot",r),i(Jc,d+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Qoe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _f;case"vector":case"vector2":case"vector3":case"vector4":return Jc;case"color":return V8;case"quaternion":return Kc;case"bool":case"boolean":return md;case"string":return gd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Voe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Qoe(t.type);if(t.times===void 0){const n=[],i=[];H8(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Hc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Iw{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],p=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const ju=new Iw;let Zi=class{constructor(e){this.manager=e!==void 0?e:ju,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Zi.DEFAULT_MATERIAL_NAME="__DEFAULT";const _c={};class Woe extends Error{constructor(e,n){super(e),this.response=n}}class Gi extends Zi{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Hc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(_c[e]!==void 0){_c[e].push({onLoad:n,onProgress:i,onError:r});return}_c[e]=[],_c[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=_c[e],f=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),d=h?parseInt(h):0,p=d!==0;let g=0;const A=new ReadableStream({start(m){v();function v(){f.read().then(({done:y,value:w})=>{if(y)m.close();else{g+=w.byteLength;const S=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:d});for(let C=0,b=u.length;C<b;C++){const M=u[C];M.onProgress&&M.onProgress(S)}m.enqueue(w),v()}},y=>{m.error(y)})}}});return new Response(A)}else throw new Woe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(p=>d.decode(p))}}}).then(c=>{Hc.add(e,c);const u=_c[e];delete _c[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=_c[e];if(u===void 0)throw this.manager.itemError(e),c;delete _c[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class joe extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Gi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Ef.parse(e[i]);n.push(r)}return n}}class Xoe extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new Pf,l=new Gi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const d=s.parse(h,!0);o[f]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=Vt),a.image=o,a.format=d.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+g]),o[p].format=h.format,o[p].width=h.width,o[p].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Vt),a.format=h.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class rv extends Zi{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Hc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=ev("img");function l(){u(),Hc.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Bw extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=new Pv;s.colorSpace=oo;const o=new rv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Rw extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Yr,a=new Gi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:wi,o.wrapT=c.wrapT!==void 0?c.wrapT:wi,o.magFilter=c.magFilter!==void 0?c.magFilter:Vt,o.minFilter=c.minFilter!==void 0?c.minFilter:Vt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Qs),c.mipmapCount===1&&(o.minFilter=Vt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},i,r),o}}class rc extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=new Bn,o=new rv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Lf extends Ht{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class JQ extends Lf{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Je(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const pb=new Ge,GD=new L,HD=new L;class W8{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Ge,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fd,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new Jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;GD.setFromMatrixPosition(e.matrixWorld),n.position.copy(GD),HD.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(HD),n.updateMatrixWorld(),pb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pb),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(pb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let Yoe=class extends W8{constructor(){super(new an(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=t0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Pw=class extends Lf{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Yoe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const QD=new Ge,R1=new L,mb=new L;class qoe extends W8{constructor(){super(new an(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new Jt(2,1,1,1),new Jt(0,1,1,1),new Jt(3,1,1,1),new Jt(1,1,1,1),new Jt(3,0,1,1),new Jt(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),R1.setFromMatrixPosition(e.matrixWorld),i.position.copy(R1),mb.copy(i.position),mb.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(mb),i.updateMatrixWorld(),r.makeTranslation(-R1.x,-R1.y,-R1.z),QD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QD)}}class sv extends Lf{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new qoe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class $oe extends W8{constructor(){super(new Hn(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dw extends Lf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.shadow=new $oe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class j8 extends Lf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZQ extends Lf{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class eV{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new L)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class tV extends Lf{constructor(e=new eV,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Lw extends Zi{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new Gi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=Lw.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Je().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ie().fromArray(o.value);break;case"v3":r.uniforms[s].value=new L().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Jt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new jt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Ge().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:HQ,SpriteMaterial:I8,RawShaderMaterial:QQ,ShaderMaterial:Fn,PointsMaterial:zv,MeshPhysicalMaterial:qs,MeshStandardMaterial:pd,MeshPhongMaterial:oA,MeshToonMaterial:VQ,MeshNormalMaterial:G8,MeshLambertMaterial:Gv,MeshDepthMaterial:Dv,MeshDistanceMaterial:dw,MeshBasicMaterial:Br,MeshMatcapMaterial:WQ,LineDashedMaterial:jQ,LineBasicMaterial:Ji,Material:cr};return new n[e]}}class Wc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Hv extends Dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class nV extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Gi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(d,p){if(n[p]!==void 0)return n[p];const A=d.interleavedBuffers[p],m=s(d,A.buffer),v=gm(A.type,m),y=new Lv(v,A.stride);return y.uuid=A.uuid,n[p]=y,y}function s(d,p){if(i[p]!==void 0)return i[p];const A=d.arrayBuffers[p],m=new Uint32Array(A).buffer;return i[p]=m,m}const o=e.isInstancedBufferGeometry?new Hv:new Dt,a=e.data.index;if(a!==void 0){const d=gm(a.type,a.array);o.setIndex(new Gt(d,1))}const l=e.data.attributes;for(const d in l){const p=l[d];let g;if(p.isInterleavedBufferAttribute){const A=r(e.data,p.data);g=new fo(A,p.itemSize,p.offset,p.normalized)}else{const A=gm(p.type,p.array),m=p.isInstancedBufferAttribute?ml:Gt;g=new m(A,p.itemSize,p.normalized)}p.name!==void 0&&(g.name=p.name),p.usage!==void 0&&g.setUsage(p.usage),o.setAttribute(d,g)}const c=e.data.morphAttributes;if(c)for(const d in c){const p=c[d],g=[];for(let A=0,m=p.length;A<m;A++){const v=p[A];let y;if(v.isInterleavedBufferAttribute){const w=r(e.data,v.data);y=new fo(w,v.itemSize,v.offset,v.normalized)}else{const w=gm(v.type,v.array);y=new Gt(w,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),g.push(y)}o.morphAttributes[d]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let d=0,p=f.length;d!==p;++d){const g=f[d];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new L;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new $n(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Koe extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?Wc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Gi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Wc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Gi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Vc().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new S0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new nV;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in ND?a=ND[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new Lw;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Ef.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:gm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Iw(n);s=new rv(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const d=[];for(let p=0,g=h.length;p<g;p++){const A=h[p],m=a(A);m!==null&&(m instanceof HTMLImageElement?d.push(m):d.push(new Yr(m.data,m.width,m.height)))}r[f.uuid]=new Rh(d)}else{const d=a(f.url);r[f.uuid]=new Rh(d)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:gm(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new rv(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f],p=await s(d);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Yr(p.data,p.width,p.height)))}i[l.uuid]=new Rh(u)}else{const u=await s(l.url);i[l.uuid]=new Rh(u)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Pv,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Yr:u=new Bn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Joe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],VD),u.wrapT=i(a.wrap[1],VD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,WD)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,WD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,n,i,r,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let p=0,g=h.length;p<g;p++){const A=h[p];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),d.push(i[A])}return d}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":o=new Go,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Je(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new mw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new pw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new an(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Hn(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new j8(e.color,e.intensity);break;case"DirectionalLight":o=new Dw(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new sv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZQ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Pw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new JQ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tV().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new Fv(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new ut(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,d=e.instanceMatrix,p=e.instanceColor;o=new Ov(u,f,h),o.instanceMatrix=new ml(new Float32Array(d.array),16),p!==void 0&&(o.instanceColor=new ml(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new FQ(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(g=>{const A=new xn;A.min.fromArray(g.boxMin),A.max.fromArray(g.boxMax);const m=new $n;return m.radius=g.sphereRadius,m.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:A,sphereInitialized:g.sphereInitialized,sphere:m}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new LQ;break;case"Line":o=new un(a(e.geometry),l(e.material));break;case"LineLoop":o=new B8(a(e.geometry),l(e.material));break;case"LineSegments":o=new xl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new R8(a(e.geometry),l(e.material));break;case"Sprite":o=new DQ(l(e.material));break;case"Group":o=new uo;break;case"Bone":o=new i0;break;default:o=new Ht}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)o.add(this.parseObject(h[d],n,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const p=h[d];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const p=h[d],g=o.getObjectByProperty("uuid",p.object);g!==void 0&&o.addLevel(g,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new Ht}})}}const Joe={UVMapping:Af,CubeReflectionMapping:pl,CubeRefractionMapping:vf,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:GA,CubeUVReflectionMapping:y0},VD={RepeatWrapping:qr,ClampToEdgeWrapping:wi,MirroredRepeatWrapping:$m},WD={NearestFilter:fn,NearestMipmapNearestFilter:iw,NearestMipmapLinearFilter:Th,LinearFilter:Vt,LinearMipmapNearestFilter:Mm,LinearMipmapLinearFilter:Qs};class iV extends Zi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Hc.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Hc.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Hc.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Hc.add(e,l),s.manager.itemStart(e)}}let rx;class X8{static getContext(){return rx===void 0&&(rx=new(window.AudioContext||window.webkitAudioContext)),rx}static setContext(e){rx=e}}class rV extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Gi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);X8.getContext().decodeAudioData(c,function(f){n(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const jD=new Ge,XD=new Ge,sh=new Ge;class Zoe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new an,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new an,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,sh.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(kh*n.fov*.5)/n.zoom;let a,l;XD.elements[12]=-r,jD.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,sh.elements[0]=2*n.near/(l-a),sh.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(sh),a=-o*n.aspect-s,l=o*n.aspect-s,sh.elements[0]=2*n.near/(l-a),sh.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(XD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jD)}}class b0{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=YD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=YD();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function YD(){return(typeof performance>"u"?Date:performance).now()}const oh=new L,qD=new Tt,eae=new L,ah=new L;class sV extends Ht{constructor(){super(),this.type="AudioListener",this.context=X8.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new b0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(oh,qD,eae),ah.set(0,0,-1).applyQuaternion(qD),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(oh.x,r),n.positionY.linearRampToValueAtTime(oh.y,r),n.positionZ.linearRampToValueAtTime(oh.z,r),n.forwardX.linearRampToValueAtTime(ah.x,r),n.forwardY.linearRampToValueAtTime(ah.y,r),n.forwardZ.linearRampToValueAtTime(ah.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(oh.x,oh.y,oh.z),n.setOrientation(ah.x,ah.y,ah.z,i.x,i.y,i.z)}}class oV extends Ht{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const lh=new L,$D=new Tt,tae=new L,ch=new L;let nae=class extends oV{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(lh,$D,tae),ch.set(0,0,1).applyQuaternion($D);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(lh.x,i),n.positionY.linearRampToValueAtTime(lh.y,i),n.positionZ.linearRampToValueAtTime(lh.z,i),n.orientationX.linearRampToValueAtTime(ch.x,i),n.orientationY.linearRampToValueAtTime(ch.y,i),n.orientationZ.linearRampToValueAtTime(ch.z,i)}else n.setPosition(lh.x,lh.y,lh.z),n.setOrientation(ch.x,ch.y,ch.z)}};class iae{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class aV{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Tt.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Tt.multiplyQuaternionsFlat(e,o,e,n,e,i),Tt.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const Y8="\\[\\]\\.:\\/",rae=new RegExp("["+Y8+"]","g"),q8="[^"+Y8+"]",sae="[^"+Y8.replace("\\.","")+"]",oae=/((?:WC+[\/:])*)/.source.replace("WC",q8),aae=/(WCOD+)?/.source.replace("WCOD",sae),lae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",q8),cae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",q8),uae=new RegExp("^"+oae+aae+lae+cae+"$"),fae=["material","materials","bones","map"];class hae{constructor(e,n,i){const r=i||Cn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Cn{constructor(e,n,i){this.path=n,this.parsedPath=i||Cn.parseTrackName(n),this.node=Cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Cn.Composite(e,n,i):new Cn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rae,"")}static parseTrackName(e){const n=uae.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);fae.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=Cn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cn.Composite=hae;Cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Cn.prototype.GetterByBindingType=[Cn.prototype._getValue_direct,Cn.prototype._getValue_array,Cn.prototype._getValue_arrayElement,Cn.prototype._getValue_toArray];Cn.prototype.SetterByBindingTypeAndVersioning=[[Cn.prototype._setValue_direct,Cn.prototype._setValue_direct_setNeedsUpdate,Cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_array,Cn.prototype._setValue_array_setNeedsUpdate,Cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_arrayElement,Cn.prototype._setValue_arrayElement_setNeedsUpdate,Cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_fromArray,Cn.prototype._setValue_fromArray_setNeedsUpdate,Cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dae{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Uo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],d=h.uuid;let p=n[d];if(p===void 0){p=l++,n[d]=p,e.push(h);for(let g=0,A=o;g!==A;++g)s[g].push(new Cn(h,i[g],r[g]))}else if(p<c){a=e[p];const g=--c,A=e[g];n[A.uuid]=p,e[p]=A,n[d]=g,e[g]=h;for(let m=0,v=o;m!==v;++m){const y=s[m],w=y[g];let S=y[p];y[p]=w,S===void 0&&(S=new Cn(h,i[m],r[m])),y[g]=S}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];n[h.uuid]=u,e[u]=h,n[c]=f,e[f]=l;for(let d=0,p=r;d!==p;++d){const g=i[d],A=g[f],m=g[u];g[u]=A,g[f]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<s){const h=--s,d=e[h],p=--o,g=e[p];n[d.uuid]=f,e[f]=d,n[g.uuid]=h,e[h]=g,e.pop();for(let A=0,m=r;A!==m;++A){const v=i[A],y=v[h],w=v[p];v[f]=y,v[h]=w,v.pop()}}else{const h=--o,d=e[h];h>0&&(n[d.uuid]=f),e[f]=d,e.pop();for(let p=0,g=r;p!==g;++p){const A=i[p];A[f]=A[h],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(f);for(let h=u,d=l.length;h!==d;++h){const p=l[h];f[h]=new Cn(p,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class lV{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Ih,endingEnd:Ih};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=sQ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case x8:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case ow:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===oQ;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===rQ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Bh,r.endingEnd=Bh):(e?r.endingStart=this.zeroSlopeAtStart?Bh:Ih:r.endingStart=YA,n?r.endingEnd=this.zeroSlopeAtEnd?Bh:Ih:r.endingEnd=YA)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const pae=new Float32Array(1);class $8 extends $r{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],d=h.name;let p=u[d];if(p!==void 0)++p.referenceCount,o[f]=p;else{if(p=o[f],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const g=n&&n._propertyBindings[f].binding.parsedPath;p=new aV(Cn.create(i,d,g),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new Q8(new Float32Array(2),new Float32Array(2),1,pae),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Ef.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=ow),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new lV(this,o,n,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Ef.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class ss{constructor(e){this.value=e}clone(){return new ss(this.value.clone===void 0?this.value:this.value.clone())}}let mae=0;class gae extends $r{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mae++}),this.name="",this.usage=JA,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const s=Array.isArray(n[i])?n[i]:[n[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class oE extends Lv{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Aae{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const KD=new Ge;class Ff{constructor(e,n,i=0,r=1/0){this.ray=new Da(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Nh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return KD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(KD),this}intersectObject(e,n=!0,i=[]){return zT(e,this,i,n),i.sort(JD),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)zT(e[r],this,i,n);return i.sort(JD),i}}function JD(t,e){return t.distance-e.distance}function zT(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)zT(s[o],e,n,!0)}}class ed{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($i(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class vae{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const ZD=new Ie;class cV{constructor(e=new Ie(1/0,1/0),n=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ZD.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ZD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eL=new L,sx=new L;class fl{constructor(e=new L,n=new L){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){eL.subVectors(e,this.start),sx.subVectors(this.end,this.start);const i=sx.dot(sx);let s=sx.dot(eL)/i;return n&&(s=$i(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const tL=new L;class yae extends Ht{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new Dt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new At(r,3));const s=new Ji({fog:!1,toneMapped:!1});this.cone=new xl(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),tL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bu=new L,ox=new Ge,gb=new Ge;class uV extends xl{constructor(e){const n=fV(e),i=new Dt,r=[],s=[],o=new Je(0,0,1),a=new Je(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new At(r,3)),i.setAttribute("color",new At(s,3));const l=new Ji({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");gb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(ox.multiplyMatrices(gb,a.matrixWorld),bu.setFromMatrixPosition(ox),r.setXYZ(o,bu.x,bu.y,bu.z),ox.multiplyMatrices(gb,a.parent.matrixWorld),bu.setFromMatrixPosition(ox),r.setXYZ(o+1,bu.x,bu.y,bu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function fV(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,fV(t.children[n]));return e}class xae extends ut{constructor(e,n,i){const r=new dd(n,4,2),s=new Br({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _ae=new L,nL=new Je,iL=new Je;class Eae extends Ht{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new la(n);r.rotateY(Math.PI*.5),this.material=new Br({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Gt(o,3)),this.add(new ut(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");nL.copy(this.light.color),iL.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?nL:iL;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_ae.setFromMatrixPosition(this.light.matrixWorld).negate())}}class hV extends xl{constructor(e=10,n=10,i=4473924,r=8947848){i=new Je(i),r=new Je(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=h===s?i:r;g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3}const u=new Dt;u.setAttribute("position",new At(l,3)),u.setAttribute("color",new At(c,3));const f=new Ji({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wae extends xl{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new Je(s),o=new Je(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const h=f/n*(Math.PI*2),d=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(d,0,p);const g=f&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<i;f++){const h=f&1?s:o,d=e-e/i*f;for(let p=0;p<r;p++){let g=p/r*(Math.PI*2),A=Math.sin(g)*d,m=Math.cos(g)*d;a.push(A,0,m),l.push(h.r,h.g,h.b),g=(p+1)/r*(Math.PI*2),A=Math.sin(g)*d,m=Math.cos(g)*d,a.push(A,0,m),l.push(h.r,h.g,h.b)}}const c=new Dt;c.setAttribute("position",new At(a,3)),c.setAttribute("color",new At(l,3));const u=new Ji({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rL=new L,ax=new L,sL=new L;class Sae extends Ht{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new Dt;r.setAttribute("position",new At([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ji({fog:!1,toneMapped:!1});this.lightPlane=new un(r,s),this.add(this.lightPlane),r=new Dt,r.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new un(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rL.setFromMatrixPosition(this.light.matrixWorld),ax.setFromMatrixPosition(this.light.target.matrixWorld),sL.subVectors(ax,rL),this.lightPlane.lookAt(ax),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ax),this.targetLine.scale.z=sL.length()}}const lx=new L,Vi=new Rf;class dV extends xl{constructor(e){const n=new Dt,i=new Ji({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,g){l(p),l(g)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new At(r,3)),n.setAttribute("color",new At(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Je(16755200),u=new Je(16711680),f=new Je(43775),h=new Je(16777215),d=new Je(3355443);this.setColors(c,u,f,h,d)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Vi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),or("c",n,e,Vi,0,0,-1),or("t",n,e,Vi,0,0,1),or("n1",n,e,Vi,-i,-r,-1),or("n2",n,e,Vi,i,-r,-1),or("n3",n,e,Vi,-i,r,-1),or("n4",n,e,Vi,i,r,-1),or("f1",n,e,Vi,-i,-r,1),or("f2",n,e,Vi,i,-r,1),or("f3",n,e,Vi,-i,r,1),or("f4",n,e,Vi,i,r,1),or("u1",n,e,Vi,i*.7,r*1.1,-1),or("u2",n,e,Vi,-i*.7,r*1.1,-1),or("u3",n,e,Vi,0,r*2,-1),or("cf1",n,e,Vi,-i,0,1),or("cf2",n,e,Vi,i,0,1),or("cf3",n,e,Vi,0,-r,1),or("cf4",n,e,Vi,0,r,1),or("cn1",n,e,Vi,-i,0,-1),or("cn2",n,e,Vi,i,0,-1),or("cn3",n,e,Vi,0,-r,-1),or("cn4",n,e,Vi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function or(t,e,n,i,r,s,o){lx.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],lx.x,lx.y,lx.z)}}const cx=new xn;class Cae extends xl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Dt;s.setIndex(new Gt(i,1)),s.setAttribute("position",new Gt(r,3)),super(s,new Ji({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&cx.setFromObject(this.object),cx.isEmpty())return;const n=cx.min,i=cx.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bae extends xl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Dt;s.setIndex(new Gt(i,1)),s.setAttribute("position",new At(r,3)),super(s,new Ji({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mae extends un{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Dt;o.setAttribute("position",new At(s,3)),o.computeBoundingSphere(),super(o,new Ji({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Dt;l.setAttribute("position",new At(a,3)),l.computeBoundingSphere(),this.add(new ut(l,new Br({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const oL=new L;let ux,Ab;class Tae extends Ht{constructor(e=new L(0,0,1),n=new L(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",ux===void 0&&(ux=new Dt,ux.setAttribute("position",new At([0,0,0,0,1,0],3)),Ab=new Qr(0,.5,1,5,1),Ab.translate(0,-.5,0)),this.position.copy(n),this.line=new un(ux,new Ji({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ut(Ab,new Br({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{oL.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(oL,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Iae extends xl{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Dt;r.setAttribute("position",new At(n,3)),r.setAttribute("color",new At(i,3));const s=new Ji({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new Je,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bc{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new uf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const v=[];for(let y=0,w=m.length;y<w;y++){const S=m[y],C=new Vc;C.curves=S.curves,v.push(C)}return v}function i(m,v){const y=v.length;let w=!1;for(let S=y-1,C=0;C<y;S=C++){let b=v[S],M=v[C],I=M.x-b.x,T=M.y-b.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(b=v[C],I=-I,M=v[S],T=-T),m.y<b.y||m.y>M.y)continue;if(m.y===b.y){if(m.x===b.x)return!0}else{const D=T*(m.x-b.x)-I*(m.y-b.y);if(D===0)return!0;if(D<0)continue;w=!w}}else{if(m.y!==b.y)continue;if(M.x<=m.x&&m.x<=b.x||b.x<=m.x&&m.x<=M.x)return!0}}return w}const r=ul.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Vc,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],h=[];let d=[],p=0,g;h[p]=void 0,d[p]=[];for(let m=0,v=s.length;m<v;m++)a=s[m],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new Vc,p:g},h[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:g[0]});if(!h[0])return n(s);if(h.length>1){let m=!1,v=0;for(let y=0,w=h.length;y<w;y++)f[y]=[];for(let y=0,w=h.length;y<w;y++){const S=d[y];for(let C=0;C<S.length;C++){const b=S[C];let M=!0;for(let I=0;I<h.length;I++)i(b.p,h[I].p)&&(y!==I&&v++,M?(M=!1,f[I].push(b)):m=!0);M&&f[y].push(b)}}v>0&&m===!1&&(d=f)}let A;for(let m=0,v=h.length;m<v;m++){l=h[m].s,c.push(l),A=d[m];for(let y=0,w=A.length;y<w;y++)l.holes.push(A[y].h)}return c}}class Bae extends Ln{constructor(e=1,n=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yl);const Fw=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:d8,AddEquation:Gu,AddOperation:$H,AdditiveAnimationBlendMode:x8,AdditiveBlending:L3,AgXToneMapping:tQ,AlphaFormat:m8,AlwaysCompare:vQ,AlwaysDepth:QH,AlwaysStencilFunc:nE,AmbientLight:j8,AnimationAction:lV,AnimationClip:Ef,AnimationLoader:joe,AnimationMixer:$8,AnimationObjectGroup:dae,AnimationUtils:Hoe,ArcCurve:zQ,ArrayCamera:RQ,ArrowHelper:Tae,AttachedBindMode:MT,Audio:oV,AudioAnalyser:iae,AudioContext:X8,AudioListener:sV,AudioLoader:rV,AxesHelper:Iae,BackSide:Ki,BasicDepthPacking:lQ,BasicShadowMap:CH,BatchedMesh:FQ,Bone:i0,BooleanKeyframeTrack:md,Box2:cV,Box3:xn,Box3Helper:bae,BoxGeometry:ks,BoxHelper:Cae,BufferAttribute:Gt,BufferGeometry:Dt,BufferGeometryLoader:nV,ByteType:Km,Cache:Hc,Camera:Rf,CameraHelper:dV,CanvasTexture:gw,CapsuleGeometry:yw,CatmullRomCurve3:Aw,CineonToneMapping:ZH,CircleGeometry:xw,ClampToEdgeWrapping:wi,Clock:b0,Color:Je,ColorKeyframeTrack:V8,ColorManagement:Xn,CompressedArrayTexture:foe,CompressedCubeTexture:hoe,CompressedTexture:Pf,CompressedTextureLoader:Xoe,ConeGeometry:_w,ConstantAlphaFactor:NH,ConstantColorFactor:UH,CubeCamera:fw,CubeReflectionMapping:pl,CubeRefractionMapping:vf,CubeTexture:Pv,CubeTextureLoader:Bw,CubeUVReflectionMapping:y0,CubicBezierCurve:D8,CubicBezierCurve3:L8,CubicInterpolant:qQ,CullFaceBack:ST,CullFaceFront:SH,CullFaceFrontBack:nee,CullFaceNone:wH,Curve:La,CurvePath:U8,CustomBlending:tw,CustomToneMapping:eQ,CylinderGeometry:Qr,Cylindrical:vae,Data3DTexture:C8,DataArrayTexture:cw,DataTexture:Yr,DataTextureLoader:Rw,DataUtils:rl,DecrementStencilOp:cee,DecrementWrapStencilOp:fee,DefaultLoadingManager:ju,DepthFormat:Zl,DepthStencilFormat:Jh,DepthTexture:hd,DetachedBindMode:iQ,DirectionalLight:Dw,DirectionalLightHelper:Sae,DiscreteInterpolant:$Q,DisplayP3ColorSpace:lw,DodecahedronGeometry:Ew,DoubleSide:Qn,DstAlphaFactor:DH,DstColorFactor:FH,DynamicCopyUsage:wee,DynamicDrawUsage:ws,DynamicReadUsage:xee,EdgesGeometry:k8,EllipseCurve:Gh,EqualCompare:pQ,EqualDepth:WH,EqualStencilFunc:uQ,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:GA,Euler:gi,EventDispatcher:$r,ExtrudeGeometry:kv,FileLoader:Gi,Float16BufferAttribute:cte,Float32BufferAttribute:At,FloatType:vn,Fog:mw,FogExp2:pw,FramebufferTexture:uoe,FrontSide:js,Frustum:fd,GLBufferAttribute:Aae,GLSL1:Cee,GLSL3:IT,GreaterCompare:mQ,GreaterDepth:XH,GreaterEqualCompare:AQ,GreaterEqualDepth:jH,GreaterEqualStencilFunc:Aee,GreaterStencilFunc:gee,GridHelper:hV,Group:uo,HalfFloatType:On,HemisphereLight:JQ,HemisphereLightHelper:Eae,IcosahedronGeometry:Nv,ImageBitmapLoader:iV,ImageLoader:rv,ImageUtils:_Q,IncrementStencilOp:lee,IncrementWrapStencilOp:uee,InstancedBufferAttribute:ml,InstancedBufferGeometry:Hv,InstancedInterleavedBuffer:oE,InstancedMesh:Ov,Int16BufferAttribute:ate,Int32BufferAttribute:lte,Int8BufferAttribute:rte,IntType:cf,InterleavedBuffer:Lv,InterleavedBufferAttribute:fo,Interpolant:C0,InterpolateDiscrete:Zm,InterpolateLinear:e0,InterpolateSmooth:U_,InvertStencilOp:hee,KeepStencilOp:Hl,KeyframeTrack:_l,LOD:LQ,LatheGeometry:Uv,Layers:Nh,LessCompare:dQ,LessDepth:VH,LessEqualCompare:E8,LessEqualDepth:NA,LessEqualStencilFunc:mee,LessStencilFunc:pee,Light:Lf,LightProbe:tV,Line:un,Line3:fl,LineBasicMaterial:Ji,LineCurve:F8,LineCurve3:UQ,LineDashedMaterial:jQ,LineLoop:B8,LineSegments:xl,LinearDisplayP3ColorSpace:Rv,LinearFilter:Vt,LinearInterpolant:Q8,LinearMipMapLinearFilter:TT,LinearMipMapNearestFilter:see,LinearMipmapLinearFilter:Qs,LinearMipmapNearestFilter:Mm,LinearSRGBColorSpace:Ba,LinearToneMapping:KH,LinearTransfer:qA,Loader:Zi,LoaderUtils:Wc,LoadingManager:Iw,LoopOnce:rQ,LoopPingPong:oQ,LoopRepeat:sQ,LuminanceAlphaFormat:v8,LuminanceFormat:A8,MOUSE:pa,Material:cr,MaterialLoader:Lw,MathUtils:zt,Matrix3:jt,Matrix4:Ge,MaxEquation:IH,Mesh:ut,MeshBasicMaterial:Br,MeshDepthMaterial:Dv,MeshDistanceMaterial:dw,MeshLambertMaterial:Gv,MeshMatcapMaterial:WQ,MeshNormalMaterial:G8,MeshPhongMaterial:oA,MeshPhysicalMaterial:qs,MeshStandardMaterial:pd,MeshToonMaterial:VQ,MinEquation:TH,MirroredRepeatWrapping:$m,MixOperation:qH,MultiplyBlending:bT,MultiplyOperation:Iv,NearestFilter:fn,NearestMipMapLinearFilter:ree,NearestMipMapNearestFilter:iee,NearestMipmapLinearFilter:Th,NearestMipmapNearestFilter:iw,NeutralToneMapping:nQ,NeverCompare:hQ,NeverDepth:HH,NeverStencilFunc:dee,NoBlending:ba,NoColorSpace:Oc,NoToneMapping:cl,NormalAnimationBlendMode:ow,NormalBlending:lf,NotEqualCompare:gQ,NotEqualDepth:YH,NotEqualStencilFunc:fQ,NumberKeyframeTrack:_f,Object3D:Ht,ObjectLoader:Koe,ObjectSpaceNormalMap:cQ,OctahedronGeometry:la,OneFactor:nw,OneMinusConstantAlphaFactor:GH,OneMinusConstantColorFactor:kH,OneMinusDstAlphaFactor:LH,OneMinusDstColorFactor:OH,OneMinusSrcAlphaFactor:F3,OneMinusSrcColorFactor:PH,OrthographicCamera:Hn,P3Primaries:KA,PCFShadowMap:ew,PCFSoftShadowMap:eA,PMREMGenerator:BT,Path:uf,PerspectiveCamera:an,Plane:Wr,PlaneGeometry:vr,PlaneHelper:Mae,PointLight:sv,PointLightHelper:xae,Points:R8,PointsMaterial:zv,PolarGridHelper:wae,PolyhedronGeometry:Df,PositionalAudio:nae,PropertyBinding:Cn,PropertyMixer:aV,QuadraticBezierCurve:O8,QuadraticBezierCurve3:vw,Quaternion:Tt,QuaternionKeyframeTrack:Kc,QuaternionLinearInterpolant:KQ,RED_GREEN_RGTC2_Format:Z3,RED_RGTC1_Format:y8,REVISION:yl,RGBADepthPacking:aw,RGBAFormat:In,RGBAIntegerFormat:xf,RGBA_ASTC_10x10_Format:X3,RGBA_ASTC_10x5_Format:V3,RGBA_ASTC_10x6_Format:W3,RGBA_ASTC_10x8_Format:j3,RGBA_ASTC_12x10_Format:Y3,RGBA_ASTC_12x12_Format:q3,RGBA_ASTC_4x4_Format:XA,RGBA_ASTC_5x4_Format:U3,RGBA_ASTC_5x5_Format:k3,RGBA_ASTC_6x5_Format:N3,RGBA_ASTC_6x6_Format:Jm,RGBA_ASTC_8x5_Format:G3,RGBA_ASTC_8x6_Format:H3,RGBA_ASTC_8x8_Format:Q3,RGBA_BPTC_Format:Bm,RGBA_ETC2_EAC_Format:jA,RGBA_PVRTC_2BPPV1_Format:z3,RGBA_PVRTC_4BPPV1_Format:QA,RGBA_S3TC_DXT1_Format:tA,RGBA_S3TC_DXT3_Format:nA,RGBA_S3TC_DXT5_Format:Im,RGBFormat:g8,RGBIntegerFormat:oee,RGB_BPTC_SIGNED_Format:$3,RGB_BPTC_UNSIGNED_Format:K3,RGB_ETC1_Format:VA,RGB_ETC2_Format:WA,RGB_PVRTC_2BPPV1_Format:O3,RGB_PVRTC_4BPPV1_Format:HA,RGB_S3TC_DXT1_Format:Tm,RGFormat:Gc,RGIntegerFormat:_0,RawShaderMaterial:QQ,Ray:Da,Raycaster:Ff,Rec709Primaries:$A,RectAreaLight:ZQ,RedFormat:co,RedIntegerFormat:x0,ReinhardToneMapping:JH,RenderTarget:EQ,RepeatWrapping:qr,ReplaceStencilOp:k_,ReverseSubtractEquation:MH,RingGeometry:Sw,SIGNED_RED_GREEN_RGTC2_Format:eE,SIGNED_RED_RGTC1_Format:J3,SRGBColorSpace:oo,SRGBTransfer:di,Scene:Go,ShaderChunk:Zt,ShaderLib:tl,ShaderMaterial:Fn,ShadowMaterial:HQ,Shape:Vc,ShapeGeometry:Cw,ShapePath:Bc,ShapeUtils:ul,ShortType:Bv,Skeleton:S0,SkeletonHelper:uV,SkinnedMesh:Fv,Source:Rh,Sphere:$n,SphereGeometry:dd,Spherical:ed,SphericalHarmonics3:eV,SplineCurve:z8,SpotLight:Pw,SpotLightHelper:yae,Sprite:DQ,SpriteMaterial:I8,SrcAlphaFactor:kA,SrcAlphaSaturateFactor:zH,SrcColorFactor:RH,StaticCopyUsage:Eee,StaticDrawUsage:JA,StaticReadUsage:yee,StereoCamera:Zoe,StreamCopyUsage:See,StreamDrawUsage:vee,StreamReadUsage:_ee,StringKeyframeTrack:gd,SubtractEquation:bH,SubtractiveBlending:CT,TOUCH:Fc,TangentSpaceNormalMap:Bf,TetrahedronGeometry:bw,Texture:Bn,TextureLoader:rc,TextureUtils:Vse,TorusGeometry:Wu,TorusKnotGeometry:Mw,Triangle:Tr,TriangleFanDrawMode:tE,TriangleStripDrawMode:_8,TrianglesDrawMode:aQ,TubeGeometry:Tw,UVMapping:Af,Uint16BufferAttribute:uw,Uint32BufferAttribute:b8,Uint8BufferAttribute:ste,Uint8ClampedBufferAttribute:ote,Uniform:ss,UniformsGroup:gae,UniformsLib:wt,UniformsUtils:Ra,UnsignedByteType:Jn,UnsignedInt248Type:Kh,UnsignedInt5999Type:p8,UnsignedIntType:Ss,UnsignedShort4444Type:rw,UnsignedShort5551Type:sw,UnsignedShortType:ic,VSMShadowMap:Ja,Vector2:Ie,Vector3:L,Vector4:Jt,VectorKeyframeTrack:Jc,VideoTexture:OQ,WebGL3DRenderTarget:Yee,WebGLArrayRenderTarget:Xee,WebGLCoordinateSystem:$l,WebGLCubeRenderTarget:E0,WebGLMultipleRenderTargets:Bae,WebGLRenderTarget:Ln,WebGLRenderer:T8,WebGLUtils:BQ,WebGPUCoordinateSystem:ZA,WireframeGeometry:N8,WrapAroundEnding:YA,ZeroCurvatureEnding:Ih,ZeroFactor:BH,ZeroSlopeEnding:Bh,ZeroStencilOp:aee,createCanvasElement:xQ},Symbol.toStringTag,{value:"Module"}));var pV={exports:{}},Ad={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ad.ConcurrentRoot=1;Ad.ContinuousEventPriority=4;Ad.DefaultEventPriority=16;Ad.DiscreteEventPriority=1;Ad.IdleEventPriority=536870912;Ad.LegacyRoot=0;pV.exports=Ad;var ym=pV.exports;function Rae(t){let e;const n=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const p=u(e);if(!f(h,p)){const g=h;c(h=p,g)}}return n.add(d),()=>n.delete(d)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const Pae=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),aL=Pae?E.useEffect:E.useLayoutEffect;function Ow(t){const e=typeof t=="function"?Rae(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=E.useReducer(A=>A+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(i),c=E.useRef(r),u=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=i(o));let h,d=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(h=i(o),d=!r(f.current,h)),aL(()=>{d&&(f.current=h),a.current=o,l.current=i,c.current=r,u.current=!1});const p=E.useRef(o);aL(()=>{const A=()=>{try{const v=e.getState(),y=l.current(v);c.current(f.current,y)||(a.current=v,f.current=y,s())}catch{u.current=!0,s()}},m=e.subscribe(A);return e.getState()!==p.current&&A(),m},[]);const g=d?h:f.current;return E.useDebugValue(g),g};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var mV={exports:{}},gV={exports:{}},AV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var X=U.length;U.push($);e:for(;0<X;){var Q=X-1>>>1,J=U[Q];if(0<r(J,$))U[Q]=$,U[X]=J,X=Q;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var $=U[0],X=U.pop();if(X!==$){U[0]=X;e:for(var Q=0,J=U.length,ne=J>>>1;Q<ne;){var O=2*(Q+1)-1,N=U[O],G=O+1,H=U[G];if(0>r(N,X))G<J&&0>r(H,N)?(U[Q]=H,U[G]=X,Q=G):(U[Q]=N,U[O]=X,Q=O);else if(G<J&&0>r(H,X))U[Q]=H,U[G]=X,Q=G;else break e}}return $}function r(U,$){var X=U.sortIndex-$.sortIndex;return X!==0?X:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,g=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=U)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function w(U){if(g=!1,y(U),!p)if(n(l)!==null)p=!0,j(S);else{var $=n(c);$!==null&&Z(w,$.startTime-U)}}function S(U,$){p=!1,g&&(g=!1,m(M),M=-1),d=!0;var X=h;try{for(y($),f=n(l);f!==null&&(!(f.expirationTime>$)||U&&!D());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var J=Q(f.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(l)&&i(l),y($)}else i(l);f=n(l)}if(f!==null)var ne=!0;else{var O=n(c);O!==null&&Z(w,O.startTime-$),ne=!1}return ne}finally{f=null,h=X,d=!1}}var C=!1,b=null,M=-1,I=5,T=-1;function D(){return!(t.unstable_now()-T<I)}function R(){if(b!==null){var U=t.unstable_now();T=U;var $=!0;try{$=b(!0,U)}finally{$?z():(C=!1,b=null)}}else C=!1}var z;if(typeof v=="function")z=function(){v(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=R,z=function(){V.postMessage(null)}}else z=function(){A(R,0)};function j(U){b=U,C||(C=!0,z())}function Z(U,$){M=A(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,j(S))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var X=h;h=$;try{return U()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=h;h=U;try{return $()}finally{h=X}},t.unstable_scheduleCallback=function(U,$,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,U={id:u++,callback:$,priorityLevel:U,startTime:X,expirationTime:J,sortIndex:-1},X>Q?(U.sortIndex=X,e(c,U),n(l)===null&&U===n(c)&&(g?(m(M),M=-1):g=!0,Z(w,X-Q))):(U.sortIndex=J,e(l,U),p||d||(p=!0,j(S))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var $=h;return function(){var X=h;h=$;try{return U.apply(this,arguments)}finally{h=X}}}})(AV);gV.exports=AV;var UT=gV.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dae=function(e){var n={},i=E,r=UT,s=Object.assign;function o(x){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+x,B=1;B<arguments.length;B++)_+="&args[]="+encodeURIComponent(arguments[B]);return"Minified React error #"+x+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}function b(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case m:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case p:return(x.displayName||"Context")+".Consumer";case d:return(x._context.displayName||"Context")+".Provider";case g:var _=x.render;return x=x.displayName,x||(x=_.displayName||_.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case v:return _=x.displayName||null,_!==null?_:b(x.type)||"Memo";case y:_=x._payload,x=x._init;try{return b(x(_))}catch{}}return null}function M(x){var _=x.type;switch(x.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=_.render,x=x.displayName||x.name||"",_.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(_);case 8:return _===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function I(x){var _=x,B=x;if(x.alternate)for(;_.return;)_=_.return;else{x=_;do _=x,_.flags&4098&&(B=_.return),x=_.return;while(x)}return _.tag===3?B:null}function T(x){if(I(x)!==x)throw Error(o(188))}function D(x){var _=x.alternate;if(!_){if(_=I(x),_===null)throw Error(o(188));return _!==x?null:x}for(var B=x,P=_;;){var k=B.return;if(k===null)break;var Y=k.alternate;if(Y===null){if(P=k.return,P!==null){B=P;continue}break}if(k.child===Y.child){for(Y=k.child;Y;){if(Y===B)return T(k),x;if(Y===P)return T(k),_;Y=Y.sibling}throw Error(o(188))}if(B.return!==P.return)B=k,P=Y;else{for(var ve=!1,ze=k.child;ze;){if(ze===B){ve=!0,B=k,P=Y;break}if(ze===P){ve=!0,P=k,B=Y;break}ze=ze.sibling}if(!ve){for(ze=Y.child;ze;){if(ze===B){ve=!0,B=Y,P=k;break}if(ze===P){ve=!0,P=Y,B=k;break}ze=ze.sibling}if(!ve)throw Error(o(189))}}if(B.alternate!==P)throw Error(o(190))}if(B.tag!==3)throw Error(o(188));return B.stateNode.current===B?x:_}function R(x){return x=D(x),x!==null?z(x):null}function z(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var _=z(x);if(_!==null)return _;x=x.sibling}return null}function F(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var _=F(x);if(_!==null)return _}x=x.sibling}return null}var V=Array.isArray,j=e.getPublicInstance,Z=e.getRootHostContext,U=e.getChildHostContext,$=e.prepareForCommit,X=e.resetAfterCommit,Q=e.createInstance,J=e.appendInitialChild,ne=e.finalizeInitialChildren,O=e.prepareUpdate,N=e.shouldSetTextContent,G=e.createTextInstance,H=e.scheduleTimeout,oe=e.cancelTimeout,de=e.noTimeout,ce=e.isPrimaryRenderer,ge=e.supportsMutation,q=e.supportsPersistence,xe=e.supportsHydration,ue=e.getInstanceFromNode,me=e.preparePortalMount,pe=e.getCurrentEventPriority,Le=e.detachDeletedInstance,re=e.supportsMicrotasks,ie=e.scheduleMicrotask,te=e.supportsTestSelectors,W=e.findFiberRoot,Me=e.getBoundingRect,De=e.getTextContent,Ee=e.isHiddenSubtree,_e=e.matchAccessibilityRole,Ze=e.setFocusIfFocusable,Oe=e.setupIntersectionObserver,we=e.appendChild,be=e.appendChildToContainer,Be=e.commitTextUpdate,Ve=e.commitMount,ot=e.commitUpdate,$e=e.insertBefore,qe=e.insertInContainerBefore,fe=e.removeChild,Ue=e.removeChildFromContainer,it=e.resetTextContent,Ae=e.hideInstance,Ye=e.hideTextInstance,ye=e.unhideInstance,He=e.unhideTextInstance,lt=e.clearContainer,mt=e.cloneInstance,dt=e.createContainerChildSet,Ot=e.appendChildToContainerChildSet,Xt=e.finalizeContainerChildren,gt=e.replaceContainerChildren,en=e.cloneHiddenInstance,_n=e.cloneHiddenTextInstance,vi=e.canHydrateInstance,zn=e.canHydrateTextInstance,er=e.canHydrateSuspenseInstance,tr=e.isSuspenseInstancePending,hr=e.isSuspenseInstanceFallback,Di=e.registerSuspenseInstanceRetry,fi=e.getNextHydratableSibling,Yt=e.getFirstHydratableChild,si=e.getFirstHydratableChildWithinContainer,Or=e.getFirstHydratableChildWithinSuspenseInstance,ee=e.hydrateInstance,se=e.hydrateTextInstance,Ce=e.hydrateSuspenseInstance,K=e.getNextHydratableInstanceAfterSuspenseInstance,ae=e.commitHydratedContainer,le=e.commitHydratedSuspenseInstance,Se=e.clearSuspenseBoundary,he=e.clearSuspenseBoundaryFromContainer,Ne=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,Xe=e.didNotMatchHydratedTextInstance,Pe;function vt(x){if(Pe===void 0)try{throw Error()}catch(B){var _=B.stack.trim().match(/\n( *(at )?)/);Pe=_&&_[1]||""}return`
`+Pe+x}var at=!1;function st(x,_){if(!x||at)return"";at=!0;var B=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(pt){var P=pt}Reflect.construct(x,[],_)}else{try{_.call()}catch(pt){P=pt}x.call(_.prototype)}else{try{throw Error()}catch(pt){P=pt}x()}}catch(pt){if(pt&&P&&typeof pt.stack=="string"){for(var k=pt.stack.split(`
`),Y=P.stack.split(`
`),ve=k.length-1,ze=Y.length-1;1<=ve&&0<=ze&&k[ve]!==Y[ze];)ze--;for(;1<=ve&&0<=ze;ve--,ze--)if(k[ve]!==Y[ze]){if(ve!==1||ze!==1)do if(ve--,ze--,0>ze||k[ve]!==Y[ze]){var tt=`
`+k[ve].replace(" at new "," at ");return x.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",x.displayName)),tt}while(1<=ve&&0<=ze);break}}}finally{at=!1,Error.prepareStackTrace=B}return(x=x?x.displayName||x.name:"")?vt(x):""}var _t=Object.prototype.hasOwnProperty,It=[],Lt=-1;function qt(x){return{current:x}}function yt(x){0>Lt||(x.current=It[Lt],It[Lt]=null,Lt--)}function ct(x,_){Lt++,It[Lt]=x.current,x.current=_}var Ut={},Ft=qt(Ut),Qt=qt(!1),Pn=Ut;function Dn(x,_){var B=x.type.contextTypes;if(!B)return Ut;var P=x.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var k={},Y;for(Y in B)k[Y]=_[Y];return P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=_,x.__reactInternalMemoizedMaskedChildContext=k),k}function ni(x){return x=x.childContextTypes,x!=null}function ln(){yt(Qt),yt(Ft)}function hn(x,_,B){if(Ft.current!==Ut)throw Error(o(168));ct(Ft,_),ct(Qt,B)}function oi(x,_,B){var P=x.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return B;P=P.getChildContext();for(var k in P)if(!(k in _))throw Error(o(108,M(x)||"Unknown",k));return s({},B,P)}function on(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Ut,Pn=Ft.current,ct(Ft,x),ct(Qt,Qt.current),!0}function nn(x,_,B){var P=x.stateNode;if(!P)throw Error(o(169));B?(x=oi(x,_,Pn),P.__reactInternalMemoizedMergedChildContext=x,yt(Qt),yt(Ft),ct(Ft,x)):yt(Qt),ct(Qt,B)}var ii=Math.clz32?Math.clz32:_o,Jr=Math.log,nr=Math.LN2;function _o(x){return x>>>=0,x===0?32:31-(Jr(x)/nr|0)|0}var oc=64,ac=4194304;function lc(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function zf(x,_){var B=x.pendingLanes;if(B===0)return 0;var P=0,k=x.suspendedLanes,Y=x.pingedLanes,ve=B&268435455;if(ve!==0){var ze=ve&~k;ze!==0?P=lc(ze):(Y&=ve,Y!==0&&(P=lc(Y)))}else ve=B&~k,ve!==0?P=lc(ve):Y!==0&&(P=lc(Y));if(P===0)return 0;if(_!==0&&_!==P&&!(_&k)&&(k=P&-P,Y=_&-_,k>=Y||k===16&&(Y&4194240)!==0))return _;if(P&4&&(P|=B&16),_=x.entangledLanes,_!==0)for(x=x.entanglements,_&=P;0<_;)B=31-ii(_),k=1<<B,P|=x[B],_&=~k;return P}function dy(x,_){switch(x){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H0(x,_){for(var B=x.suspendedLanes,P=x.pingedLanes,k=x.expirationTimes,Y=x.pendingLanes;0<Y;){var ve=31-ii(Y),ze=1<<ve,tt=k[ve];tt===-1?(!(ze&B)||ze&P)&&(k[ve]=dy(ze,_)):tt<=_&&(x.expiredLanes|=ze),Y&=~ze}}function cc(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function _d(x){for(var _=[],B=0;31>B;B++)_.push(x);return _}function wl(x,_,B){x.pendingLanes|=_,_!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,_=31-ii(_),x[_]=B}function lu(x,_){var B=x.pendingLanes&~_;x.pendingLanes=_,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=_,x.mutableReadLanes&=_,x.entangledLanes&=_,_=x.entanglements;var P=x.eventTimes;for(x=x.expirationTimes;0<B;){var k=31-ii(B),Y=1<<k;_[k]=0,P[k]=-1,x[k]=-1,B&=~Y}}function Sl(x,_){var B=x.entangledLanes|=_;for(x=x.entanglements;B;){var P=31-ii(B),k=1<<P;k&_|x[P]&_&&(x[P]|=_),B&=~k}}var Sn=0;function Q0(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var uc=r.unstable_scheduleCallback,Ed=r.unstable_cancelCallback,V0=r.unstable_shouldYield,py=r.unstable_requestPaint,Li=r.unstable_now,Uf=r.unstable_ImmediatePriority,my=r.unstable_UserBlockingPriority,Ts=r.unstable_NormalPriority,W0=r.unstable_IdlePriority,kf=null,Eo=null;function j0(x){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(kf,x,void 0,(x.current.flags&128)===128)}catch{}}function gy(x,_){return x===_&&(x!==0||1/x===1/_)||x!==x&&_!==_}var wo=typeof Object.is=="function"?Object.is:gy,Is=null,Cl=!1,jo=!1;function X0(x){Is===null?Is=[x]:Is.push(x)}function Y0(x){Cl=!0,X0(x)}function Js(){if(!jo&&Is!==null){jo=!0;var x=0,_=Sn;try{var B=Is;for(Sn=1;x<B.length;x++){var P=B[x];do P=P(!0);while(P!==null)}Is=null,Cl=!1}catch(k){throw Is!==null&&(Is=Is.slice(x+1)),uc(Uf,Js),k}finally{Sn=_,jo=!1}}return null}var Nf=a.ReactCurrentBatchConfig;function Gf(x,_){if(wo(x,_))return!0;if(typeof x!="object"||x===null||typeof _!="object"||_===null)return!1;var B=Object.keys(x),P=Object.keys(_);if(B.length!==P.length)return!1;for(P=0;P<B.length;P++){var k=B[P];if(!_t.call(_,k)||!wo(x[k],_[k]))return!1}return!0}function Hf(x){switch(x.tag){case 5:return vt(x.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return x=st(x.type,!1),x;case 11:return x=st(x.type.render,!1),x;case 1:return x=st(x.type,!0),x;default:return""}}function Bs(x,_){if(x&&x.defaultProps){_=s({},_),x=x.defaultProps;for(var B in x)_[B]===void 0&&(_[B]=x[B]);return _}return _}var zr=qt(null),wd=null,za=null,cu=null;function Sd(){cu=za=wd=null}function Ay(x,_,B){ce?(ct(zr,_._currentValue),_._currentValue=B):(ct(zr,_._currentValue2),_._currentValue2=B)}function Ur(x){var _=zr.current;yt(zr),ce?x._currentValue=_:x._currentValue2=_}function Rs(x,_,B){for(;x!==null;){var P=x.alternate;if((x.childLanes&_)!==_?(x.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),x===B)break;x=x.return}}function ir(x,_){wd=x,cu=za=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&_&&(Mo=!0),x.firstContext=null)}function rr(x){var _=ce?x._currentValue:x._currentValue2;if(cu!==x)if(x={context:x,memoizedValue:_,next:null},za===null){if(wd===null)throw Error(o(308));za=x,wd.dependencies={lanes:0,firstContext:x}}else za=za.next=x;return _}var So=null,uu=!1;function dC(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jR(x,_){x=x.updateQueue,_.updateQueue===x&&(_.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function fc(x,_){return{eventTime:x,lane:_,tag:0,payload:null,callback:null,next:null}}function fu(x,_){var B=x.updateQueue;B!==null&&(B=B.shared,dr!==null&&x.mode&1&&!(wn&2)?(x=B.interleaved,x===null?(_.next=_,So===null?So=[B]:So.push(B)):(_.next=x.next,x.next=_),B.interleaved=_):(x=B.pending,x===null?_.next=_:(_.next=x.next,x.next=_),B.pending=_))}function vy(x,_,B){if(_=_.updateQueue,_!==null&&(_=_.shared,(B&4194240)!==0)){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,Sl(x,B)}}function XR(x,_){var B=x.updateQueue,P=x.alternate;if(P!==null&&(P=P.updateQueue,B===P)){var k=null,Y=null;if(B=B.firstBaseUpdate,B!==null){do{var ve={eventTime:B.eventTime,lane:B.lane,tag:B.tag,payload:B.payload,callback:B.callback,next:null};Y===null?k=Y=ve:Y=Y.next=ve,B=B.next}while(B!==null);Y===null?k=Y=_:Y=Y.next=_}else k=Y=_;B={baseState:P.baseState,firstBaseUpdate:k,lastBaseUpdate:Y,shared:P.shared,effects:P.effects},x.updateQueue=B;return}x=B.lastBaseUpdate,x===null?B.firstBaseUpdate=_:x.next=_,B.lastBaseUpdate=_}function yy(x,_,B,P){var k=x.updateQueue;uu=!1;var Y=k.firstBaseUpdate,ve=k.lastBaseUpdate,ze=k.shared.pending;if(ze!==null){k.shared.pending=null;var tt=ze,pt=tt.next;tt.next=null,ve===null?Y=pt:ve.next=pt,ve=tt;var Pt=x.alternate;Pt!==null&&(Pt=Pt.updateQueue,ze=Pt.lastBaseUpdate,ze!==ve&&(ze===null?Pt.firstBaseUpdate=pt:ze.next=pt,Pt.lastBaseUpdate=tt))}if(Y!==null){var dn=k.baseState;ve=0,Pt=pt=tt=null,ze=Y;do{var Kt=ze.lane,ai=ze.eventTime;if((P&Kt)===Kt){Pt!==null&&(Pt=Pt.next={eventTime:ai,lane:0,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null});e:{var Nt=x,ds=ze;switch(Kt=_,ai=B,ds.tag){case 1:if(Nt=ds.payload,typeof Nt=="function"){dn=Nt.call(ai,dn,Kt);break e}dn=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=ds.payload,Kt=typeof Nt=="function"?Nt.call(ai,dn,Kt):Nt,Kt==null)break e;dn=s({},dn,Kt);break e;case 2:uu=!0}}ze.callback!==null&&ze.lane!==0&&(x.flags|=64,Kt=k.effects,Kt===null?k.effects=[ze]:Kt.push(ze))}else ai={eventTime:ai,lane:Kt,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null},Pt===null?(pt=Pt=ai,tt=dn):Pt=Pt.next=ai,ve|=Kt;if(ze=ze.next,ze===null){if(ze=k.shared.pending,ze===null)break;Kt=ze,ze=Kt.next,Kt.next=null,k.lastBaseUpdate=Kt,k.shared.pending=null}}while(!0);if(Pt===null&&(tt=dn),k.baseState=tt,k.firstBaseUpdate=pt,k.lastBaseUpdate=Pt,_=k.shared.interleaved,_!==null){k=_;do ve|=k.lane,k=k.next;while(k!==_)}else Y===null&&(k.shared.lanes=0);Dd|=ve,x.lanes=ve,x.memoizedState=dn}}function YR(x,_,B){if(x=_.effects,_.effects=null,x!==null)for(_=0;_<x.length;_++){var P=x[_],k=P.callback;if(k!==null){if(P.callback=null,P=B,typeof k!="function")throw Error(o(191,k));k.call(P)}}}var qR=new i.Component().refs;function pC(x,_,B,P){_=x.memoizedState,B=B(P,_),B=B==null?_:s({},_,B),x.memoizedState=B,x.lanes===0&&(x.updateQueue.baseState=B)}var xy={isMounted:function(x){return(x=x._reactInternals)?I(x)===x:!1},enqueueSetState:function(x,_,B){x=x._reactInternals;var P=Ds(),k=pu(x),Y=fc(P,k);Y.payload=_,B!=null&&(Y.callback=B),fu(x,Y),_=Ko(x,k,P),_!==null&&vy(_,x,k)},enqueueReplaceState:function(x,_,B){x=x._reactInternals;var P=Ds(),k=pu(x),Y=fc(P,k);Y.tag=1,Y.payload=_,B!=null&&(Y.callback=B),fu(x,Y),_=Ko(x,k,P),_!==null&&vy(_,x,k)},enqueueForceUpdate:function(x,_){x=x._reactInternals;var B=Ds(),P=pu(x),k=fc(B,P);k.tag=2,_!=null&&(k.callback=_),fu(x,k),_=Ko(x,P,B),_!==null&&vy(_,x,P)}};function $R(x,_,B,P,k,Y,ve){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(P,Y,ve):_.prototype&&_.prototype.isPureReactComponent?!Gf(B,P)||!Gf(k,Y):!0}function KR(x,_,B){var P=!1,k=Ut,Y=_.contextType;return typeof Y=="object"&&Y!==null?Y=rr(Y):(k=ni(_)?Pn:Ft.current,P=_.contextTypes,Y=(P=P!=null)?Dn(x,k):Ut),_=new _(B,Y),x.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=xy,x.stateNode=_,_._reactInternals=x,P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=k,x.__reactInternalMemoizedMaskedChildContext=Y),_}function JR(x,_,B,P){x=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(B,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(B,P),_.state!==x&&xy.enqueueReplaceState(_,_.state,null)}function mC(x,_,B,P){var k=x.stateNode;k.props=B,k.state=x.memoizedState,k.refs=qR,dC(x);var Y=_.contextType;typeof Y=="object"&&Y!==null?k.context=rr(Y):(Y=ni(_)?Pn:Ft.current,k.context=Dn(x,Y)),k.state=x.memoizedState,Y=_.getDerivedStateFromProps,typeof Y=="function"&&(pC(x,_,Y,B),k.state=x.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(_=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),_!==k.state&&xy.enqueueReplaceState(k,k.state,null),yy(x,B,k,P),k.state=x.memoizedState),typeof k.componentDidMount=="function"&&(x.flags|=4194308)}var Cd=[],bd=0,_y=null,Ey=0,Xo=[],Yo=0,Qf=null,hc=1,dc="";function Vf(x,_){Cd[bd++]=Ey,Cd[bd++]=_y,_y=x,Ey=_}function ZR(x,_,B){Xo[Yo++]=hc,Xo[Yo++]=dc,Xo[Yo++]=Qf,Qf=x;var P=hc;x=dc;var k=32-ii(P)-1;P&=~(1<<k),B+=1;var Y=32-ii(_)+k;if(30<Y){var ve=k-k%5;Y=(P&(1<<ve)-1).toString(32),P>>=ve,k-=ve,hc=1<<32-ii(_)+k|B<<k|P,dc=Y+x}else hc=1<<Y|B<<k|P,dc=x}function gC(x){x.return!==null&&(Vf(x,1),ZR(x,1,0))}function AC(x){for(;x===_y;)_y=Cd[--bd],Cd[bd]=null,Ey=Cd[--bd],Cd[bd]=null;for(;x===Qf;)Qf=Xo[--Yo],Xo[Yo]=null,dc=Xo[--Yo],Xo[Yo]=null,hc=Xo[--Yo],Xo[Yo]=null}var Co=null,bo=null,Mi=!1,q0=!1,Ua=null;function e9(x,_){var B=Jo(5,null,null,0);B.elementType="DELETED",B.stateNode=_,B.return=x,_=x.deletions,_===null?(x.deletions=[B],x.flags|=16):_.push(B)}function t9(x,_){switch(x.tag){case 5:return _=vi(_,x.type,x.pendingProps),_!==null?(x.stateNode=_,Co=x,bo=Yt(_),!0):!1;case 6:return _=zn(_,x.pendingProps),_!==null?(x.stateNode=_,Co=x,bo=null,!0):!1;case 13:if(_=er(_),_!==null){var B=Qf!==null?{id:hc,overflow:dc}:null;return x.memoizedState={dehydrated:_,treeContext:B,retryLane:1073741824},B=Jo(18,null,null,0),B.stateNode=_,B.return=x,x.child=B,Co=x,bo=null,!0}return!1;default:return!1}}function vC(x){return(x.mode&1)!==0&&(x.flags&128)===0}function yC(x){if(Mi){var _=bo;if(_){var B=_;if(!t9(x,_)){if(vC(x))throw Error(o(418));_=fi(B);var P=Co;_&&t9(x,_)?e9(P,B):(x.flags=x.flags&-4097|2,Mi=!1,Co=x)}}else{if(vC(x))throw Error(o(418));x.flags=x.flags&-4097|2,Mi=!1,Co=x}}}function n9(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Co=x}function $0(x){if(!xe||x!==Co)return!1;if(!Mi)return n9(x),Mi=!0,!1;if(x.tag!==3&&(x.tag!==5||Ne(x.type)&&!N(x.type,x.memoizedProps))){var _=bo;if(_){if(vC(x)){for(x=bo;x;)x=fi(x);throw Error(o(418))}for(;_;)e9(x,_),_=fi(_)}}if(n9(x),x.tag===13){if(!xe)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));bo=K(x)}else bo=Co?fi(x.stateNode):null;return!0}function Md(){xe&&(bo=Co=null,q0=Mi=!1)}function xC(x){Ua===null?Ua=[x]:Ua.push(x)}function K0(x,_,B){if(x=B.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(B._owner){if(B=B._owner,B){if(B.tag!==1)throw Error(o(309));var P=B.stateNode}if(!P)throw Error(o(147,x));var k=P,Y=""+x;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===Y?_.ref:(_=function(ve){var ze=k.refs;ze===qR&&(ze=k.refs={}),ve===null?delete ze[Y]:ze[Y]=ve},_._stringRef=Y,_)}if(typeof x!="string")throw Error(o(284));if(!B._owner)throw Error(o(290,x))}return x}function wy(x,_){throw x=Object.prototype.toString.call(_),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":x))}function i9(x){var _=x._init;return _(x._payload)}function r9(x){function _(je,ke){if(x){var Ke=je.deletions;Ke===null?(je.deletions=[ke],je.flags|=16):Ke.push(ke)}}function B(je,ke){if(!x)return null;for(;ke!==null;)_(je,ke),ke=ke.sibling;return null}function P(je,ke){for(je=new Map;ke!==null;)ke.key!==null?je.set(ke.key,ke):je.set(ke.index,ke),ke=ke.sibling;return je}function k(je,ke){return je=gu(je,ke),je.index=0,je.sibling=null,je}function Y(je,ke,Ke){return je.index=Ke,x?(Ke=je.alternate,Ke!==null?(Ke=Ke.index,Ke<ke?(je.flags|=2,ke):Ke):(je.flags|=2,ke)):(je.flags|=1048576,ke)}function ve(je){return x&&je.alternate===null&&(je.flags|=2),je}function ze(je,ke,Ke,Mt){return ke===null||ke.tag!==6?(ke=i4(Ke,je.mode,Mt),ke.return=je,ke):(ke=k(ke,Ke),ke.return=je,ke)}function tt(je,ke,Ke,Mt){var kt=Ke.type;return kt===u?Pt(je,ke,Ke.props.children,Mt,Ke.key):ke!==null&&(ke.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===y&&i9(kt)===ke.type)?(Mt=k(ke,Ke.props),Mt.ref=K0(je,ke,Ke),Mt.return=je,Mt):(Mt=e2(Ke.type,Ke.key,Ke.props,null,je.mode,Mt),Mt.ref=K0(je,ke,Ke),Mt.return=je,Mt)}function pt(je,ke,Ke,Mt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Ke.containerInfo||ke.stateNode.implementation!==Ke.implementation?(ke=r4(Ke,je.mode,Mt),ke.return=je,ke):(ke=k(ke,Ke.children||[]),ke.return=je,ke)}function Pt(je,ke,Ke,Mt,kt){return ke===null||ke.tag!==7?(ke=Kf(Ke,je.mode,Mt,kt),ke.return=je,ke):(ke=k(ke,Ke),ke.return=je,ke)}function dn(je,ke,Ke){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=i4(""+ke,je.mode,Ke),ke.return=je,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return Ke=e2(ke.type,ke.key,ke.props,null,je.mode,Ke),Ke.ref=K0(je,null,ke),Ke.return=je,Ke;case c:return ke=r4(ke,je.mode,Ke),ke.return=je,ke;case y:var Mt=ke._init;return dn(je,Mt(ke._payload),Ke)}if(V(ke)||C(ke))return ke=Kf(ke,je.mode,Ke,null),ke.return=je,ke;wy(je,ke)}return null}function Kt(je,ke,Ke,Mt){var kt=ke!==null?ke.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return kt!==null?null:ze(je,ke,""+Ke,Mt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===kt?tt(je,ke,Ke,Mt):null;case c:return Ke.key===kt?pt(je,ke,Ke,Mt):null;case y:return kt=Ke._init,Kt(je,ke,kt(Ke._payload),Mt)}if(V(Ke)||C(Ke))return kt!==null?null:Pt(je,ke,Ke,Mt,null);wy(je,Ke)}return null}function ai(je,ke,Ke,Mt,kt){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return je=je.get(Ke)||null,ze(ke,je,""+Mt,kt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case l:return je=je.get(Mt.key===null?Ke:Mt.key)||null,tt(ke,je,Mt,kt);case c:return je=je.get(Mt.key===null?Ke:Mt.key)||null,pt(ke,je,Mt,kt);case y:var En=Mt._init;return ai(je,ke,Ke,En(Mt._payload),kt)}if(V(Mt)||C(Mt))return je=je.get(Ke)||null,Pt(ke,je,Mt,kt,null);wy(ke,Mt)}return null}function Nt(je,ke,Ke,Mt){for(var kt=null,En=null,pn=ke,kn=ke=0,Nr=null;pn!==null&&kn<Ke.length;kn++){pn.index>kn?(Nr=pn,pn=null):Nr=pn.sibling;var Nn=Kt(je,pn,Ke[kn],Mt);if(Nn===null){pn===null&&(pn=Nr);break}x&&pn&&Nn.alternate===null&&_(je,pn),ke=Y(Nn,ke,kn),En===null?kt=Nn:En.sibling=Nn,En=Nn,pn=Nr}if(kn===Ke.length)return B(je,pn),Mi&&Vf(je,kn),kt;if(pn===null){for(;kn<Ke.length;kn++)pn=dn(je,Ke[kn],Mt),pn!==null&&(ke=Y(pn,ke,kn),En===null?kt=pn:En.sibling=pn,En=pn);return Mi&&Vf(je,kn),kt}for(pn=P(je,pn);kn<Ke.length;kn++)Nr=ai(pn,je,kn,Ke[kn],Mt),Nr!==null&&(x&&Nr.alternate!==null&&pn.delete(Nr.key===null?kn:Nr.key),ke=Y(Nr,ke,kn),En===null?kt=Nr:En.sibling=Nr,En=Nr);return x&&pn.forEach(function(Au){return _(je,Au)}),Mi&&Vf(je,kn),kt}function ds(je,ke,Ke,Mt){var kt=C(Ke);if(typeof kt!="function")throw Error(o(150));if(Ke=kt.call(Ke),Ke==null)throw Error(o(151));for(var En=kt=null,pn=ke,kn=ke=0,Nr=null,Nn=Ke.next();pn!==null&&!Nn.done;kn++,Nn=Ke.next()){pn.index>kn?(Nr=pn,pn=null):Nr=pn.sibling;var Au=Kt(je,pn,Nn.value,Mt);if(Au===null){pn===null&&(pn=Nr);break}x&&pn&&Au.alternate===null&&_(je,pn),ke=Y(Au,ke,kn),En===null?kt=Au:En.sibling=Au,En=Au,pn=Nr}if(Nn.done)return B(je,pn),Mi&&Vf(je,kn),kt;if(pn===null){for(;!Nn.done;kn++,Nn=Ke.next())Nn=dn(je,Nn.value,Mt),Nn!==null&&(ke=Y(Nn,ke,kn),En===null?kt=Nn:En.sibling=Nn,En=Nn);return Mi&&Vf(je,kn),kt}for(pn=P(je,pn);!Nn.done;kn++,Nn=Ke.next())Nn=ai(pn,je,kn,Nn.value,Mt),Nn!==null&&(x&&Nn.alternate!==null&&pn.delete(Nn.key===null?kn:Nn.key),ke=Y(Nn,ke,kn),En===null?kt=Nn:En.sibling=Nn,En=Nn);return x&&pn.forEach(function(MK){return _(je,MK)}),Mi&&Vf(je,kn),kt}function Zo(je,ke,Ke,Mt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===u&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var kt=Ke.key,En=ke;En!==null;){if(En.key===kt){if(kt=Ke.type,kt===u){if(En.tag===7){B(je,En.sibling),ke=k(En,Ke.props.children),ke.return=je,je=ke;break e}}else if(En.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===y&&i9(kt)===En.type){B(je,En.sibling),ke=k(En,Ke.props),ke.ref=K0(je,En,Ke),ke.return=je,je=ke;break e}B(je,En);break}else _(je,En);En=En.sibling}Ke.type===u?(ke=Kf(Ke.props.children,je.mode,Mt,Ke.key),ke.return=je,je=ke):(Mt=e2(Ke.type,Ke.key,Ke.props,null,je.mode,Mt),Mt.ref=K0(je,ke,Ke),Mt.return=je,je=Mt)}return ve(je);case c:e:{for(En=Ke.key;ke!==null;){if(ke.key===En)if(ke.tag===4&&ke.stateNode.containerInfo===Ke.containerInfo&&ke.stateNode.implementation===Ke.implementation){B(je,ke.sibling),ke=k(ke,Ke.children||[]),ke.return=je,je=ke;break e}else{B(je,ke);break}else _(je,ke);ke=ke.sibling}ke=r4(Ke,je.mode,Mt),ke.return=je,je=ke}return ve(je);case y:return En=Ke._init,Zo(je,ke,En(Ke._payload),Mt)}if(V(Ke))return Nt(je,ke,Ke,Mt);if(C(Ke))return ds(je,ke,Ke,Mt);wy(je,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,ke!==null&&ke.tag===6?(B(je,ke.sibling),ke=k(ke,Ke),ke.return=je,je=ke):(B(je,ke),ke=i4(Ke,je.mode,Mt),ke.return=je,je=ke),ve(je)):B(je,ke)}return Zo}var Td=r9(!0),s9=r9(!1),J0={},qo=qt(J0),Z0=qt(J0),Id=qt(J0);function bl(x){if(x===J0)throw Error(o(174));return x}function _C(x,_){ct(Id,_),ct(Z0,x),ct(qo,J0),x=Z(_),yt(qo),ct(qo,x)}function Bd(){yt(qo),yt(Z0),yt(Id)}function o9(x){var _=bl(Id.current),B=bl(qo.current);_=U(B,x.type,_),B!==_&&(ct(Z0,x),ct(qo,_))}function EC(x){Z0.current===x&&(yt(qo),yt(Z0))}var Fi=qt(0);function Sy(x){for(var _=x;_!==null;){if(_.tag===13){var B=_.memoizedState;if(B!==null&&(B=B.dehydrated,B===null||tr(B)||hr(B)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var wC=[];function SC(){for(var x=0;x<wC.length;x++){var _=wC[x];ce?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}wC.length=0}var Cy=a.ReactCurrentDispatcher,$o=a.ReactCurrentBatchConfig,Rd=0,Qi=null,us=null,kr=null,by=!1,e1=!1,t1=0,J$=0;function fs(){throw Error(o(321))}function CC(x,_){if(_===null)return!1;for(var B=0;B<_.length&&B<x.length;B++)if(!wo(x[B],_[B]))return!1;return!0}function bC(x,_,B,P,k,Y){if(Rd=Y,Qi=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Cy.current=x===null||x.memoizedState===null?nK:iK,x=B(P,k),e1){Y=0;do{if(e1=!1,t1=0,25<=Y)throw Error(o(301));Y+=1,kr=us=null,_.updateQueue=null,Cy.current=rK,x=B(P,k)}while(e1)}if(Cy.current=Ry,_=us!==null&&us.next!==null,Rd=0,kr=us=Qi=null,by=!1,_)throw Error(o(300));return x}function MC(){var x=t1!==0;return t1=0,x}function pc(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Qi.memoizedState=kr=x:kr=kr.next=x,kr}function Ml(){if(us===null){var x=Qi.alternate;x=x!==null?x.memoizedState:null}else x=us.next;var _=kr===null?Qi.memoizedState:kr.next;if(_!==null)kr=_,us=x;else{if(x===null)throw Error(o(310));us=x,x={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},kr===null?Qi.memoizedState=kr=x:kr=kr.next=x}return kr}function Wf(x,_){return typeof _=="function"?_(x):_}function My(x){var _=Ml(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=us,k=P.baseQueue,Y=B.pending;if(Y!==null){if(k!==null){var ve=k.next;k.next=Y.next,Y.next=ve}P.baseQueue=k=Y,B.pending=null}if(k!==null){Y=k.next,P=P.baseState;var ze=ve=null,tt=null,pt=Y;do{var Pt=pt.lane;if((Rd&Pt)===Pt)tt!==null&&(tt=tt.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),P=pt.hasEagerState?pt.eagerState:x(P,pt.action);else{var dn={lane:Pt,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};tt===null?(ze=tt=dn,ve=P):tt=tt.next=dn,Qi.lanes|=Pt,Dd|=Pt}pt=pt.next}while(pt!==null&&pt!==Y);tt===null?ve=P:tt.next=ze,wo(P,_.memoizedState)||(Mo=!0),_.memoizedState=P,_.baseState=ve,_.baseQueue=tt,B.lastRenderedState=P}if(x=B.interleaved,x!==null){k=x;do Y=k.lane,Qi.lanes|=Y,Dd|=Y,k=k.next;while(k!==x)}else k===null&&(B.lanes=0);return[_.memoizedState,B.dispatch]}function Ty(x){var _=Ml(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=B.dispatch,k=B.pending,Y=_.memoizedState;if(k!==null){B.pending=null;var ve=k=k.next;do Y=x(Y,ve.action),ve=ve.next;while(ve!==k);wo(Y,_.memoizedState)||(Mo=!0),_.memoizedState=Y,_.baseQueue===null&&(_.baseState=Y),B.lastRenderedState=Y}return[Y,P]}function a9(){}function l9(x,_){var B=Qi,P=Ml(),k=_(),Y=!wo(P.memoizedState,k);if(Y&&(P.memoizedState=k,Mo=!0),P=P.queue,i1(f9.bind(null,B,P,x),[x]),P.getSnapshot!==_||Y||kr!==null&&kr.memoizedState.tag&1){if(B.flags|=2048,n1(9,u9.bind(null,B,P,k,_),void 0,null),dr===null)throw Error(o(349));Rd&30||c9(B,_,k)}return k}function c9(x,_,B){x.flags|=16384,x={getSnapshot:_,value:B},_=Qi.updateQueue,_===null?(_={lastEffect:null,stores:null},Qi.updateQueue=_,_.stores=[x]):(B=_.stores,B===null?_.stores=[x]:B.push(x))}function u9(x,_,B,P){_.value=B,_.getSnapshot=P,h9(_)&&Ko(x,1,-1)}function f9(x,_,B){return B(function(){h9(_)&&Ko(x,1,-1)})}function h9(x){var _=x.getSnapshot;x=x.value;try{var B=_();return!wo(x,B)}catch{return!0}}function TC(x){var _=pc();return typeof x=="function"&&(x=x()),_.memoizedState=_.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:x},_.queue=x,x=x.dispatch=tK.bind(null,Qi,x),[_.memoizedState,x]}function n1(x,_,B,P){return x={tag:x,create:_,destroy:B,deps:P,next:null},_=Qi.updateQueue,_===null?(_={lastEffect:null,stores:null},Qi.updateQueue=_,_.lastEffect=x.next=x):(B=_.lastEffect,B===null?_.lastEffect=x.next=x:(P=B.next,B.next=x,x.next=P,_.lastEffect=x)),x}function d9(){return Ml().memoizedState}function Iy(x,_,B,P){var k=pc();Qi.flags|=x,k.memoizedState=n1(1|_,B,void 0,P===void 0?null:P)}function By(x,_,B,P){var k=Ml();P=P===void 0?null:P;var Y=void 0;if(us!==null){var ve=us.memoizedState;if(Y=ve.destroy,P!==null&&CC(P,ve.deps)){k.memoizedState=n1(_,B,Y,P);return}}Qi.flags|=x,k.memoizedState=n1(1|_,B,Y,P)}function IC(x,_){return Iy(8390656,8,x,_)}function i1(x,_){return By(2048,8,x,_)}function p9(x,_){return By(4,2,x,_)}function m9(x,_){return By(4,4,x,_)}function g9(x,_){if(typeof _=="function")return x=x(),_(x),function(){_(null)};if(_!=null)return x=x(),_.current=x,function(){_.current=null}}function A9(x,_,B){return B=B!=null?B.concat([x]):null,By(4,4,g9.bind(null,_,x),B)}function BC(){}function v9(x,_){var B=Ml();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&CC(_,P[1])?P[0]:(B.memoizedState=[x,_],x)}function y9(x,_){var B=Ml();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&CC(_,P[1])?P[0]:(x=x(),B.memoizedState=[x,_],x)}function Z$(x,_){var B=Sn;Sn=B!==0&&4>B?B:4,x(!0);var P=$o.transition;$o.transition={};try{x(!1),_()}finally{Sn=B,$o.transition=P}}function x9(){return Ml().memoizedState}function eK(x,_,B){var P=pu(x);B={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null},_9(x)?E9(_,B):(w9(x,_,B),B=Ds(),x=Ko(x,P,B),x!==null&&S9(x,_,P))}function tK(x,_,B){var P=pu(x),k={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null};if(_9(x))E9(_,k);else{w9(x,_,k);var Y=x.alternate;if(x.lanes===0&&(Y===null||Y.lanes===0)&&(Y=_.lastRenderedReducer,Y!==null))try{var ve=_.lastRenderedState,ze=Y(ve,B);if(k.hasEagerState=!0,k.eagerState=ze,wo(ze,ve))return}catch{}finally{}B=Ds(),x=Ko(x,P,B),x!==null&&S9(x,_,P)}}function _9(x){var _=x.alternate;return x===Qi||_!==null&&_===Qi}function E9(x,_){e1=by=!0;var B=x.pending;B===null?_.next=_:(_.next=B.next,B.next=_),x.pending=_}function w9(x,_,B){dr!==null&&x.mode&1&&!(wn&2)?(x=_.interleaved,x===null?(B.next=B,So===null?So=[_]:So.push(_)):(B.next=x.next,x.next=B),_.interleaved=B):(x=_.pending,x===null?B.next=B:(B.next=x.next,x.next=B),_.pending=B)}function S9(x,_,B){if(B&4194240){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,Sl(x,B)}}var Ry={readContext:rr,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},nK={readContext:rr,useCallback:function(x,_){return pc().memoizedState=[x,_===void 0?null:_],x},useContext:rr,useEffect:IC,useImperativeHandle:function(x,_,B){return B=B!=null?B.concat([x]):null,Iy(4194308,4,g9.bind(null,_,x),B)},useLayoutEffect:function(x,_){return Iy(4194308,4,x,_)},useInsertionEffect:function(x,_){return Iy(4,2,x,_)},useMemo:function(x,_){var B=pc();return _=_===void 0?null:_,x=x(),B.memoizedState=[x,_],x},useReducer:function(x,_,B){var P=pc();return _=B!==void 0?B(_):_,P.memoizedState=P.baseState=_,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:_},P.queue=x,x=x.dispatch=eK.bind(null,Qi,x),[P.memoizedState,x]},useRef:function(x){var _=pc();return x={current:x},_.memoizedState=x},useState:TC,useDebugValue:BC,useDeferredValue:function(x){var _=TC(x),B=_[0],P=_[1];return IC(function(){var k=$o.transition;$o.transition={};try{P(x)}finally{$o.transition=k}},[x]),B},useTransition:function(){var x=TC(!1),_=x[0];return x=Z$.bind(null,x[1]),pc().memoizedState=x,[_,x]},useMutableSource:function(){},useSyncExternalStore:function(x,_,B){var P=Qi,k=pc();if(Mi){if(B===void 0)throw Error(o(407));B=B()}else{if(B=_(),dr===null)throw Error(o(349));Rd&30||c9(P,_,B)}k.memoizedState=B;var Y={value:B,getSnapshot:_};return k.queue=Y,IC(f9.bind(null,P,Y,x),[x]),P.flags|=2048,n1(9,u9.bind(null,P,Y,B,_),void 0,null),B},useId:function(){var x=pc(),_=dr.identifierPrefix;if(Mi){var B=dc,P=hc;B=(P&~(1<<32-ii(P)-1)).toString(32)+B,_=":"+_+"R"+B,B=t1++,0<B&&(_+="H"+B.toString(32)),_+=":"}else B=J$++,_=":"+_+"r"+B.toString(32)+":";return x.memoizedState=_},unstable_isNewReconciler:!1},iK={readContext:rr,useCallback:v9,useContext:rr,useEffect:i1,useImperativeHandle:A9,useInsertionEffect:p9,useLayoutEffect:m9,useMemo:y9,useReducer:My,useRef:d9,useState:function(){return My(Wf)},useDebugValue:BC,useDeferredValue:function(x){var _=My(Wf),B=_[0],P=_[1];return i1(function(){var k=$o.transition;$o.transition={};try{P(x)}finally{$o.transition=k}},[x]),B},useTransition:function(){var x=My(Wf)[0],_=Ml().memoizedState;return[x,_]},useMutableSource:a9,useSyncExternalStore:l9,useId:x9,unstable_isNewReconciler:!1},rK={readContext:rr,useCallback:v9,useContext:rr,useEffect:i1,useImperativeHandle:A9,useInsertionEffect:p9,useLayoutEffect:m9,useMemo:y9,useReducer:Ty,useRef:d9,useState:function(){return Ty(Wf)},useDebugValue:BC,useDeferredValue:function(x){var _=Ty(Wf),B=_[0],P=_[1];return i1(function(){var k=$o.transition;$o.transition={};try{P(x)}finally{$o.transition=k}},[x]),B},useTransition:function(){var x=Ty(Wf)[0],_=Ml().memoizedState;return[x,_]},useMutableSource:a9,useSyncExternalStore:l9,useId:x9,unstable_isNewReconciler:!1};function RC(x,_){try{var B="",P=_;do B+=Hf(P),P=P.return;while(P);var k=B}catch(Y){k=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:x,source:_,stack:k}}function PC(x,_){try{console.error(_.value)}catch(B){setTimeout(function(){throw B})}}var sK=typeof WeakMap=="function"?WeakMap:Map;function C9(x,_,B){B=fc(-1,B),B.tag=3,B.payload={element:null};var P=_.value;return B.callback=function(){Xy||(Xy=!0,$C=P),PC(x,_)},B}function b9(x,_,B){B=fc(-1,B),B.tag=3;var P=x.type.getDerivedStateFromError;if(typeof P=="function"){var k=_.value;B.payload=function(){return P(k)},B.callback=function(){PC(x,_)}}var Y=x.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(B.callback=function(){PC(x,_),typeof P!="function"&&(hu===null?hu=new Set([this]):hu.add(this));var ve=_.stack;this.componentDidCatch(_.value,{componentStack:ve!==null?ve:""})}),B}function M9(x,_,B){var P=x.pingCache;if(P===null){P=x.pingCache=new sK;var k=new Set;P.set(_,k)}else k=P.get(_),k===void 0&&(k=new Set,P.set(_,k));k.has(B)||(k.add(B),x=yK.bind(null,x,_,B),_.then(x,x))}function T9(x){do{var _;if((_=x.tag===13)&&(_=x.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return x;x=x.return}while(x!==null);return null}function I9(x,_,B,P,k){return x.mode&1?(x.flags|=65536,x.lanes=k,x):(x===_?x.flags|=65536:(x.flags|=128,B.flags|=131072,B.flags&=-52805,B.tag===1&&(B.alternate===null?B.tag=17:(_=fc(-1,1),_.tag=2,fu(B,_))),B.lanes|=1),x)}function Tl(x){x.flags|=4}function B9(x,_){if(x!==null&&x.child===_.child)return!0;if(_.flags&16)return!1;for(x=_.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var r1,s1,Py,Dy;if(ge)r1=function(x,_){for(var B=_.child;B!==null;){if(B.tag===5||B.tag===6)J(x,B.stateNode);else if(B.tag!==4&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===_)break;for(;B.sibling===null;){if(B.return===null||B.return===_)return;B=B.return}B.sibling.return=B.return,B=B.sibling}},s1=function(){},Py=function(x,_,B,P,k){if(x=x.memoizedProps,x!==P){var Y=_.stateNode,ve=bl(qo.current);B=O(Y,B,x,P,k,ve),(_.updateQueue=B)&&Tl(_)}},Dy=function(x,_,B,P){B!==P&&Tl(_)};else if(q){r1=function(x,_,B,P){for(var k=_.child;k!==null;){if(k.tag===5){var Y=k.stateNode;B&&P&&(Y=en(Y,k.type,k.memoizedProps,k)),J(x,Y)}else if(k.tag===6)Y=k.stateNode,B&&P&&(Y=_n(Y,k.memoizedProps,k)),J(x,Y);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)Y=k.child,Y!==null&&(Y.return=k),r1(x,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};var R9=function(x,_,B,P){for(var k=_.child;k!==null;){if(k.tag===5){var Y=k.stateNode;B&&P&&(Y=en(Y,k.type,k.memoizedProps,k)),Ot(x,Y)}else if(k.tag===6)Y=k.stateNode,B&&P&&(Y=_n(Y,k.memoizedProps,k)),Ot(x,Y);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)Y=k.child,Y!==null&&(Y.return=k),R9(x,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};s1=function(x,_){var B=_.stateNode;if(!B9(x,_)){x=B.containerInfo;var P=dt(x);R9(P,_,!1,!1),B.pendingChildren=P,Tl(_),Xt(x,P)}},Py=function(x,_,B,P,k){var Y=x.stateNode,ve=x.memoizedProps;if((x=B9(x,_))&&ve===P)_.stateNode=Y;else{var ze=_.stateNode,tt=bl(qo.current),pt=null;ve!==P&&(pt=O(ze,B,ve,P,k,tt)),x&&pt===null?_.stateNode=Y:(Y=mt(Y,pt,B,ve,P,_,x,ze),ne(Y,B,P,k,tt)&&Tl(_),_.stateNode=Y,x?Tl(_):r1(Y,_,!1,!1))}},Dy=function(x,_,B,P){B!==P?(x=bl(Id.current),B=bl(qo.current),_.stateNode=G(P,x,B,_),Tl(_)):_.stateNode=x.stateNode}}else s1=function(){},Py=function(){},Dy=function(){};function o1(x,_){if(!Mi)switch(x.tailMode){case"hidden":_=x.tail;for(var B=null;_!==null;)_.alternate!==null&&(B=_),_=_.sibling;B===null?x.tail=null:B.sibling=null;break;case"collapsed":B=x.tail;for(var P=null;B!==null;)B.alternate!==null&&(P=B),B=B.sibling;P===null?_||x.tail===null?x.tail=null:x.tail.sibling=null:P.sibling=null}}function hs(x){var _=x.alternate!==null&&x.alternate.child===x.child,B=0,P=0;if(_)for(var k=x.child;k!==null;)B|=k.lanes|k.childLanes,P|=k.subtreeFlags&14680064,P|=k.flags&14680064,k.return=x,k=k.sibling;else for(k=x.child;k!==null;)B|=k.lanes|k.childLanes,P|=k.subtreeFlags,P|=k.flags,k.return=x,k=k.sibling;return x.subtreeFlags|=P,x.childLanes=B,_}function oK(x,_,B){var P=_.pendingProps;switch(AC(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(_),null;case 1:return ni(_.type)&&ln(),hs(_),null;case 3:return P=_.stateNode,Bd(),yt(Qt),yt(Ft),SC(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(x===null||x.child===null)&&($0(_)?Tl(_):x===null||x.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Ua!==null&&(ZC(Ua),Ua=null))),s1(x,_),hs(_),null;case 5:EC(_),B=bl(Id.current);var k=_.type;if(x!==null&&_.stateNode!=null)Py(x,_,k,P,B),x.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(o(166));return hs(_),null}if(x=bl(qo.current),$0(_)){if(!xe)throw Error(o(175));x=ee(_.stateNode,_.type,_.memoizedProps,B,x,_,!q0),_.updateQueue=x,x!==null&&Tl(_)}else{var Y=Q(k,P,B,x,_);r1(Y,_,!1,!1),_.stateNode=Y,ne(Y,k,P,B,x)&&Tl(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return hs(_),null;case 6:if(x&&_.stateNode!=null)Dy(x,_,x.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(o(166));if(x=bl(Id.current),B=bl(qo.current),$0(_)){if(!xe)throw Error(o(176));if(x=_.stateNode,P=_.memoizedProps,(B=se(x,P,_,!q0))&&(k=Co,k!==null))switch(Y=(k.mode&1)!==0,k.tag){case 3:Qe(k.stateNode.containerInfo,x,P,Y);break;case 5:Xe(k.type,k.memoizedProps,k.stateNode,x,P,Y)}B&&Tl(_)}else _.stateNode=G(P,x,B,_)}return hs(_),null;case 13:if(yt(Fi),P=_.memoizedState,Mi&&bo!==null&&_.mode&1&&!(_.flags&128)){for(x=bo;x;)x=fi(x);return Md(),_.flags|=98560,_}if(P!==null&&P.dehydrated!==null){if(P=$0(_),x===null){if(!P)throw Error(o(318));if(!xe)throw Error(o(344));if(x=_.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));Ce(x,_)}else Md(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return hs(_),null}return Ua!==null&&(ZC(Ua),Ua=null),_.flags&128?(_.lanes=B,_):(P=P!==null,B=!1,x===null?$0(_):B=x.memoizedState!==null,P&&!B&&(_.child.flags|=8192,_.mode&1&&(x===null||Fi.current&1?Sr===0&&(Sr=3):t4())),_.updateQueue!==null&&(_.flags|=4),hs(_),null);case 4:return Bd(),s1(x,_),x===null&&me(_.stateNode.containerInfo),hs(_),null;case 10:return Ur(_.type._context),hs(_),null;case 17:return ni(_.type)&&ln(),hs(_),null;case 19:if(yt(Fi),k=_.memoizedState,k===null)return hs(_),null;if(P=(_.flags&128)!==0,Y=k.rendering,Y===null)if(P)o1(k,!1);else{if(Sr!==0||x!==null&&x.flags&128)for(x=_.child;x!==null;){if(Y=Sy(x),Y!==null){for(_.flags|=128,o1(k,!1),x=Y.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),_.subtreeFlags=0,x=B,P=_.child;P!==null;)B=P,k=x,B.flags&=14680066,Y=B.alternate,Y===null?(B.childLanes=0,B.lanes=k,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=Y.childLanes,B.lanes=Y.lanes,B.child=Y.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=Y.memoizedProps,B.memoizedState=Y.memoizedState,B.updateQueue=Y.updateQueue,B.type=Y.type,k=Y.dependencies,B.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext}),P=P.sibling;return ct(Fi,Fi.current&1|2),_.child}x=x.sibling}k.tail!==null&&Li()>qC&&(_.flags|=128,P=!0,o1(k,!1),_.lanes=4194304)}else{if(!P)if(x=Sy(Y),x!==null){if(_.flags|=128,P=!0,x=x.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),o1(k,!0),k.tail===null&&k.tailMode==="hidden"&&!Y.alternate&&!Mi)return hs(_),null}else 2*Li()-k.renderingStartTime>qC&&B!==1073741824&&(_.flags|=128,P=!0,o1(k,!1),_.lanes=4194304);k.isBackwards?(Y.sibling=_.child,_.child=Y):(x=k.last,x!==null?x.sibling=Y:_.child=Y,k.last=Y)}return k.tail!==null?(_=k.tail,k.rendering=_,k.tail=_.sibling,k.renderingStartTime=Li(),_.sibling=null,x=Fi.current,ct(Fi,P?x&1|2:x&1),_):(hs(_),null);case 22:case 23:return e4(),P=_.memoizedState!==null,x!==null&&x.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?To&1073741824&&(hs(_),ge&&_.subtreeFlags&6&&(_.flags|=8192)):hs(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var aK=a.ReactCurrentOwner,Mo=!1;function Ps(x,_,B,P){_.child=x===null?s9(_,null,B,P):Td(_,x.child,B,P)}function P9(x,_,B,P,k){B=B.render;var Y=_.ref;return ir(_,k),P=bC(x,_,B,P,Y,k),B=MC(),x!==null&&!Mo?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~k,mc(x,_,k)):(Mi&&B&&gC(_),_.flags|=1,Ps(x,_,P,k),_.child)}function D9(x,_,B,P,k){if(x===null){var Y=B.type;return typeof Y=="function"&&!n4(Y)&&Y.defaultProps===void 0&&B.compare===null&&B.defaultProps===void 0?(_.tag=15,_.type=Y,L9(x,_,Y,P,k)):(x=e2(B.type,null,P,_,_.mode,k),x.ref=_.ref,x.return=_,_.child=x)}if(Y=x.child,!(x.lanes&k)){var ve=Y.memoizedProps;if(B=B.compare,B=B!==null?B:Gf,B(ve,P)&&x.ref===_.ref)return mc(x,_,k)}return _.flags|=1,x=gu(Y,P),x.ref=_.ref,x.return=_,_.child=x}function L9(x,_,B,P,k){if(x!==null&&Gf(x.memoizedProps,P)&&x.ref===_.ref)if(Mo=!1,(x.lanes&k)!==0)x.flags&131072&&(Mo=!0);else return _.lanes=x.lanes,mc(x,_,k);return DC(x,_,B,P,k)}function F9(x,_,B){var P=_.pendingProps,k=P.children,Y=x!==null?x.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},ct(Pd,To),To|=B;else if(B&1073741824)_.memoizedState={baseLanes:0,cachePool:null},P=Y!==null?Y.baseLanes:B,ct(Pd,To),To|=P;else return x=Y!==null?Y.baseLanes|B:B,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:x,cachePool:null},_.updateQueue=null,ct(Pd,To),To|=x,null;else Y!==null?(P=Y.baseLanes|B,_.memoizedState=null):P=B,ct(Pd,To),To|=P;return Ps(x,_,k,B),_.child}function O9(x,_){var B=_.ref;(x===null&&B!==null||x!==null&&x.ref!==B)&&(_.flags|=512,_.flags|=2097152)}function DC(x,_,B,P,k){var Y=ni(B)?Pn:Ft.current;return Y=Dn(_,Y),ir(_,k),B=bC(x,_,B,P,Y,k),P=MC(),x!==null&&!Mo?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~k,mc(x,_,k)):(Mi&&P&&gC(_),_.flags|=1,Ps(x,_,B,k),_.child)}function z9(x,_,B,P,k){if(ni(B)){var Y=!0;on(_)}else Y=!1;if(ir(_,k),_.stateNode===null)x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),KR(_,B,P),mC(_,B,P,k),P=!0;else if(x===null){var ve=_.stateNode,ze=_.memoizedProps;ve.props=ze;var tt=ve.context,pt=B.contextType;typeof pt=="object"&&pt!==null?pt=rr(pt):(pt=ni(B)?Pn:Ft.current,pt=Dn(_,pt));var Pt=B.getDerivedStateFromProps,dn=typeof Pt=="function"||typeof ve.getSnapshotBeforeUpdate=="function";dn||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(ze!==P||tt!==pt)&&JR(_,ve,P,pt),uu=!1;var Kt=_.memoizedState;ve.state=Kt,yy(_,P,ve,k),tt=_.memoizedState,ze!==P||Kt!==tt||Qt.current||uu?(typeof Pt=="function"&&(pC(_,B,Pt,P),tt=_.memoizedState),(ze=uu||$R(_,B,ze,P,Kt,tt,pt))?(dn||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount()),typeof ve.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ve.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=tt),ve.props=P,ve.state=tt,ve.context=pt,P=ze):(typeof ve.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{ve=_.stateNode,jR(x,_),ze=_.memoizedProps,pt=_.type===_.elementType?ze:Bs(_.type,ze),ve.props=pt,dn=_.pendingProps,Kt=ve.context,tt=B.contextType,typeof tt=="object"&&tt!==null?tt=rr(tt):(tt=ni(B)?Pn:Ft.current,tt=Dn(_,tt));var ai=B.getDerivedStateFromProps;(Pt=typeof ai=="function"||typeof ve.getSnapshotBeforeUpdate=="function")||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(ze!==dn||Kt!==tt)&&JR(_,ve,P,tt),uu=!1,Kt=_.memoizedState,ve.state=Kt,yy(_,P,ve,k);var Nt=_.memoizedState;ze!==dn||Kt!==Nt||Qt.current||uu?(typeof ai=="function"&&(pC(_,B,ai,P),Nt=_.memoizedState),(pt=uu||$R(_,B,pt,P,Kt,Nt,tt)||!1)?(Pt||typeof ve.UNSAFE_componentWillUpdate!="function"&&typeof ve.componentWillUpdate!="function"||(typeof ve.componentWillUpdate=="function"&&ve.componentWillUpdate(P,Nt,tt),typeof ve.UNSAFE_componentWillUpdate=="function"&&ve.UNSAFE_componentWillUpdate(P,Nt,tt)),typeof ve.componentDidUpdate=="function"&&(_.flags|=4),typeof ve.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ve.componentDidUpdate!="function"||ze===x.memoizedProps&&Kt===x.memoizedState||(_.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||ze===x.memoizedProps&&Kt===x.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Nt),ve.props=P,ve.state=Nt,ve.context=tt,P=pt):(typeof ve.componentDidUpdate!="function"||ze===x.memoizedProps&&Kt===x.memoizedState||(_.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||ze===x.memoizedProps&&Kt===x.memoizedState||(_.flags|=1024),P=!1)}return LC(x,_,B,P,Y,k)}function LC(x,_,B,P,k,Y){O9(x,_);var ve=(_.flags&128)!==0;if(!P&&!ve)return k&&nn(_,B,!1),mc(x,_,Y);P=_.stateNode,aK.current=_;var ze=ve&&typeof B.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,x!==null&&ve?(_.child=Td(_,x.child,null,Y),_.child=Td(_,null,ze,Y)):Ps(x,_,ze,Y),_.memoizedState=P.state,k&&nn(_,B,!0),_.child}function U9(x){var _=x.stateNode;_.pendingContext?hn(x,_.pendingContext,_.pendingContext!==_.context):_.context&&hn(x,_.context,!1),_C(x,_.containerInfo)}function k9(x,_,B,P,k){return Md(),xC(k),_.flags|=256,Ps(x,_,B,P),_.child}var Ly={dehydrated:null,treeContext:null,retryLane:0};function Fy(x){return{baseLanes:x,cachePool:null}}function N9(x,_,B){var P=_.pendingProps,k=Fi.current,Y=!1,ve=(_.flags&128)!==0,ze;if((ze=ve)||(ze=x!==null&&x.memoizedState===null?!1:(k&2)!==0),ze?(Y=!0,_.flags&=-129):(x===null||x.memoizedState!==null)&&(k|=1),ct(Fi,k&1),x===null)return yC(_),x=_.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(_.mode&1?hr(x)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(k=P.children,x=P.fallback,Y?(P=_.mode,Y=_.child,k={mode:"hidden",children:k},!(P&1)&&Y!==null?(Y.childLanes=0,Y.pendingProps=k):Y=t2(k,P,0,null),x=Kf(x,P,B,null),Y.return=_,x.return=_,Y.sibling=x,_.child=Y,_.child.memoizedState=Fy(B),_.memoizedState=Ly,x):FC(_,k));if(k=x.memoizedState,k!==null){if(ze=k.dehydrated,ze!==null){if(ve)return _.flags&256?(_.flags&=-257,Oy(x,_,B,Error(o(422)))):_.memoizedState!==null?(_.child=x.child,_.flags|=128,null):(Y=P.fallback,k=_.mode,P=t2({mode:"visible",children:P.children},k,0,null),Y=Kf(Y,k,B,null),Y.flags|=2,P.return=_,Y.return=_,P.sibling=Y,_.child=P,_.mode&1&&Td(_,x.child,null,B),_.child.memoizedState=Fy(B),_.memoizedState=Ly,Y);if(!(_.mode&1))_=Oy(x,_,B,null);else if(hr(ze))_=Oy(x,_,B,Error(o(419)));else if(P=(B&x.childLanes)!==0,Mo||P){if(P=dr,P!==null){switch(B&-B){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}P=Y&(P.suspendedLanes|B)?0:Y,P!==0&&P!==k.retryLane&&(k.retryLane=P,Ko(x,P,-1))}t4(),_=Oy(x,_,B,Error(o(421)))}else tr(ze)?(_.flags|=128,_.child=x.child,_=xK.bind(null,x),Di(ze,_),_=null):(B=k.treeContext,xe&&(bo=Or(ze),Co=_,Mi=!0,Ua=null,q0=!1,B!==null&&(Xo[Yo++]=hc,Xo[Yo++]=dc,Xo[Yo++]=Qf,hc=B.id,dc=B.overflow,Qf=_)),_=FC(_,_.pendingProps.children),_.flags|=4096);return _}return Y?(P=H9(x,_,P.children,P.fallback,B),Y=_.child,k=x.child.memoizedState,Y.memoizedState=k===null?Fy(B):{baseLanes:k.baseLanes|B,cachePool:null},Y.childLanes=x.childLanes&~B,_.memoizedState=Ly,P):(B=G9(x,_,P.children,B),_.memoizedState=null,B)}return Y?(P=H9(x,_,P.children,P.fallback,B),Y=_.child,k=x.child.memoizedState,Y.memoizedState=k===null?Fy(B):{baseLanes:k.baseLanes|B,cachePool:null},Y.childLanes=x.childLanes&~B,_.memoizedState=Ly,P):(B=G9(x,_,P.children,B),_.memoizedState=null,B)}function FC(x,_){return _=t2({mode:"visible",children:_},x.mode,0,null),_.return=x,x.child=_}function G9(x,_,B,P){var k=x.child;return x=k.sibling,B=gu(k,{mode:"visible",children:B}),!(_.mode&1)&&(B.lanes=P),B.return=_,B.sibling=null,x!==null&&(P=_.deletions,P===null?(_.deletions=[x],_.flags|=16):P.push(x)),_.child=B}function H9(x,_,B,P,k){var Y=_.mode;x=x.child;var ve=x.sibling,ze={mode:"hidden",children:B};return!(Y&1)&&_.child!==x?(B=_.child,B.childLanes=0,B.pendingProps=ze,_.deletions=null):(B=gu(x,ze),B.subtreeFlags=x.subtreeFlags&14680064),ve!==null?P=gu(ve,P):(P=Kf(P,Y,k,null),P.flags|=2),P.return=_,B.return=_,B.sibling=P,_.child=B,P}function Oy(x,_,B,P){return P!==null&&xC(P),Td(_,x.child,null,B),x=FC(_,_.pendingProps.children),x.flags|=2,_.memoizedState=null,x}function Q9(x,_,B){x.lanes|=_;var P=x.alternate;P!==null&&(P.lanes|=_),Rs(x.return,_,B)}function OC(x,_,B,P,k){var Y=x.memoizedState;Y===null?x.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:B,tailMode:k}:(Y.isBackwards=_,Y.rendering=null,Y.renderingStartTime=0,Y.last=P,Y.tail=B,Y.tailMode=k)}function V9(x,_,B){var P=_.pendingProps,k=P.revealOrder,Y=P.tail;if(Ps(x,_,P.children,B),P=Fi.current,P&2)P=P&1|2,_.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=_.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&Q9(x,B,_);else if(x.tag===19)Q9(x,B,_);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===_)break e;for(;x.sibling===null;){if(x.return===null||x.return===_)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}P&=1}if(ct(Fi,P),!(_.mode&1))_.memoizedState=null;else switch(k){case"forwards":for(B=_.child,k=null;B!==null;)x=B.alternate,x!==null&&Sy(x)===null&&(k=B),B=B.sibling;B=k,B===null?(k=_.child,_.child=null):(k=B.sibling,B.sibling=null),OC(_,!1,k,B,Y);break;case"backwards":for(B=null,k=_.child,_.child=null;k!==null;){if(x=k.alternate,x!==null&&Sy(x)===null){_.child=k;break}x=k.sibling,k.sibling=B,B=k,k=x}OC(_,!0,B,null,Y);break;case"together":OC(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function mc(x,_,B){if(x!==null&&(_.dependencies=x.dependencies),Dd|=_.lanes,!(B&_.childLanes))return null;if(x!==null&&_.child!==x.child)throw Error(o(153));if(_.child!==null){for(x=_.child,B=gu(x,x.pendingProps),_.child=B,B.return=_;x.sibling!==null;)x=x.sibling,B=B.sibling=gu(x,x.pendingProps),B.return=_;B.sibling=null}return _.child}function lK(x,_,B){switch(_.tag){case 3:U9(_),Md();break;case 5:o9(_);break;case 1:ni(_.type)&&on(_);break;case 4:_C(_,_.stateNode.containerInfo);break;case 10:Ay(_,_.type._context,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(ct(Fi,Fi.current&1),_.flags|=128,null):B&_.child.childLanes?N9(x,_,B):(ct(Fi,Fi.current&1),x=mc(x,_,B),x!==null?x.sibling:null);ct(Fi,Fi.current&1);break;case 19:if(P=(B&_.childLanes)!==0,x.flags&128){if(P)return V9(x,_,B);_.flags|=128}var k=_.memoizedState;if(k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),ct(Fi,Fi.current),P)break;return null;case 22:case 23:return _.lanes=0,F9(x,_,B)}return mc(x,_,B)}function cK(x,_){switch(AC(_),_.tag){case 1:return ni(_.type)&&ln(),x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 3:return Bd(),yt(Qt),yt(Ft),SC(),x=_.flags,x&65536&&!(x&128)?(_.flags=x&-65537|128,_):null;case 5:return EC(_),null;case 13:if(yt(Fi),x=_.memoizedState,x!==null&&x.dehydrated!==null){if(_.alternate===null)throw Error(o(340));Md()}return x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 19:return yt(Fi),null;case 4:return Bd(),null;case 10:return Ur(_.type._context),null;case 22:case 23:return e4(),null;case 24:return null;default:return null}}var zy=!1,jf=!1,uK=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Uy(x,_){var B=x.ref;if(B!==null)if(typeof B=="function")try{B(null)}catch(P){to(x,_,P)}else B.current=null}function zC(x,_,B){try{B()}catch(P){to(x,_,P)}}var W9=!1;function fK(x,_){for($(x.containerInfo),bt=_;bt!==null;)if(x=bt,_=x.child,(x.subtreeFlags&1028)!==0&&_!==null)_.return=x,bt=_;else for(;bt!==null;){x=bt;try{var B=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var P=B.memoizedProps,k=B.memoizedState,Y=x.stateNode,ve=Y.getSnapshotBeforeUpdate(x.elementType===x.type?P:Bs(x.type,P),k);Y.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:ge&&lt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ze){to(x,x.return,ze)}if(_=x.sibling,_!==null){_.return=x.return,bt=_;break}bt=x.return}return B=W9,W9=!1,B}function Xf(x,_,B){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var k=P=P.next;do{if((k.tag&x)===x){var Y=k.destroy;k.destroy=void 0,Y!==void 0&&zC(_,B,Y)}k=k.next}while(k!==P)}}function a1(x,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var B=_=_.next;do{if((B.tag&x)===x){var P=B.create;B.destroy=P()}B=B.next}while(B!==_)}}function UC(x){var _=x.ref;if(_!==null){var B=x.stateNode;switch(x.tag){case 5:x=j(B);break;default:x=B}typeof _=="function"?_(x):_.current=x}}function j9(x,_,B){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(kf,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(x=_.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var P=x=x.next;do{var k=P,Y=k.destroy;k=k.tag,Y!==void 0&&(k&2||k&4)&&zC(_,B,Y),P=P.next}while(P!==x)}break;case 1:if(Uy(_,B),x=_.stateNode,typeof x.componentWillUnmount=="function")try{x.props=_.memoizedProps,x.state=_.memoizedState,x.componentWillUnmount()}catch(ve){to(_,B,ve)}break;case 5:Uy(_,B);break;case 4:ge?J9(x,_,B):q&&q&&(_=_.stateNode.containerInfo,B=dt(_),gt(_,B))}}function X9(x,_,B){for(var P=_;;)if(j9(x,P,B),P.child===null||ge&&P.tag===4){if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function Y9(x){var _=x.alternate;_!==null&&(x.alternate=null,Y9(_)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(_=x.stateNode,_!==null&&Le(_)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function q9(x){return x.tag===5||x.tag===3||x.tag===4}function $9(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||q9(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function K9(x){if(ge){e:{for(var _=x.return;_!==null;){if(q9(_))break e;_=_.return}throw Error(o(160))}var B=_;switch(B.tag){case 5:_=B.stateNode,B.flags&32&&(it(_),B.flags&=-33),B=$9(x),NC(x,B,_);break;case 3:case 4:_=B.stateNode.containerInfo,B=$9(x),kC(x,B,_);break;default:throw Error(o(161))}}}function kC(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?qe(B,x,_):be(B,x);else if(P!==4&&(x=x.child,x!==null))for(kC(x,_,B),x=x.sibling;x!==null;)kC(x,_,B),x=x.sibling}function NC(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?$e(B,x,_):we(B,x);else if(P!==4&&(x=x.child,x!==null))for(NC(x,_,B),x=x.sibling;x!==null;)NC(x,_,B),x=x.sibling}function J9(x,_,B){for(var P=_,k=!1,Y,ve;;){if(!k){k=P.return;e:for(;;){if(k===null)throw Error(o(160));switch(Y=k.stateNode,k.tag){case 5:ve=!1;break e;case 3:Y=Y.containerInfo,ve=!0;break e;case 4:Y=Y.containerInfo,ve=!0;break e}k=k.return}k=!0}if(P.tag===5||P.tag===6)X9(x,P,B),ve?Ue(Y,P.stateNode):fe(Y,P.stateNode);else if(P.tag===18)ve?he(Y,P.stateNode):Se(Y,P.stateNode);else if(P.tag===4){if(P.child!==null){Y=P.stateNode.containerInfo,ve=!0,P.child.return=P,P=P.child;continue}}else if(j9(x,P,B),P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return,P.tag===4&&(k=!1)}P.sibling.return=P.return,P=P.sibling}}function GC(x,_){if(ge){switch(_.tag){case 0:case 11:case 14:case 15:Xf(3,_,_.return),a1(3,_),Xf(5,_,_.return);return;case 1:return;case 5:var B=_.stateNode;if(B!=null){var P=_.memoizedProps;x=x!==null?x.memoizedProps:P;var k=_.type,Y=_.updateQueue;_.updateQueue=null,Y!==null&&ot(B,Y,k,x,P,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));B=_.memoizedProps,Be(_.stateNode,x!==null?x.memoizedProps:B,B);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&ae(_.stateNode.containerInfo);return;case 12:return;case 13:ky(_);return;case 19:ky(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:Xf(3,_,_.return),a1(3,_),Xf(5,_,_.return);return;case 12:return;case 13:ky(_);return;case 19:ky(_);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&ae(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(q){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,gt(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function ky(x){var _=x.updateQueue;if(_!==null){x.updateQueue=null;var B=x.stateNode;B===null&&(B=x.stateNode=new uK),_.forEach(function(P){var k=_K.bind(null,x,P);B.has(P)||(B.add(P),P.then(k,k))})}}function hK(x,_){for(bt=_;bt!==null;){_=bt;var B=_.deletions;if(B!==null)for(var P=0;P<B.length;P++){var k=B[P];try{var Y=x;ge?J9(Y,k,_):X9(Y,k,_);var ve=k.alternate;ve!==null&&(ve.return=null),k.return=null}catch(kt){to(k,_,kt)}}if(B=_.child,_.subtreeFlags&12854&&B!==null)B.return=_,bt=B;else for(;bt!==null;){_=bt;try{var ze=_.flags;if(ze&32&&ge&&it(_.stateNode),ze&512){var tt=_.alternate;if(tt!==null){var pt=tt.ref;pt!==null&&(typeof pt=="function"?pt(null):pt.current=null)}}if(ze&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Pt=_.alternate;(Pt===null||Pt.memoizedState===null)&&(YC=Li())}break;case 22:var dn=_.memoizedState!==null,Kt=_.alternate,ai=Kt!==null&&Kt.memoizedState!==null;if(B=_,ge){e:if(P=B,k=dn,Y=null,ge)for(var Nt=P;;){if(Nt.tag===5){if(Y===null){Y=Nt;var ds=Nt.stateNode;k?Ae(ds):ye(Nt.stateNode,Nt.memoizedProps)}}else if(Nt.tag===6){if(Y===null){var Zo=Nt.stateNode;k?Ye(Zo):He(Zo,Nt.memoizedProps)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===P)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===P)break;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===P)break e;Y===Nt&&(Y=null),Nt=Nt.return}Y===Nt&&(Y=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}if(dn&&!ai&&B.mode&1){bt=B;for(var je=B.child;je!==null;){for(B=bt=je;bt!==null;){P=bt;var ke=P.child;switch(P.tag){case 0:case 11:case 14:case 15:Xf(4,P,P.return);break;case 1:Uy(P,P.return);var Ke=P.stateNode;if(typeof Ke.componentWillUnmount=="function"){var Mt=P.return;try{Ke.props=P.memoizedProps,Ke.state=P.memoizedState,Ke.componentWillUnmount()}catch(kt){to(P,Mt,kt)}}break;case 5:Uy(P,P.return);break;case 22:if(P.memoizedState!==null){tP(B);continue}}ke!==null?(ke.return=P,bt=ke):tP(B)}je=je.sibling}}}switch(ze&4102){case 2:K9(_),_.flags&=-3;break;case 6:K9(_),_.flags&=-3,GC(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,GC(_.alternate,_);break;case 4:GC(_.alternate,_)}}catch(kt){to(_,_.return,kt)}if(B=_.sibling,B!==null){B.return=_.return,bt=B;break}bt=_.return}}}function dK(x,_,B){bt=x,Z9(x)}function Z9(x,_,B){for(var P=(x.mode&1)!==0;bt!==null;){var k=bt,Y=k.child;if(k.tag===22&&P){var ve=k.memoizedState!==null||zy;if(!ve){var ze=k.alternate,tt=ze!==null&&ze.memoizedState!==null||jf;ze=zy;var pt=jf;if(zy=ve,(jf=tt)&&!pt)for(bt=k;bt!==null;)ve=bt,tt=ve.child,ve.tag===22&&ve.memoizedState!==null?nP(k):tt!==null?(tt.return=ve,bt=tt):nP(k);for(;Y!==null;)bt=Y,Z9(Y),Y=Y.sibling;bt=k,zy=ze,jf=pt}eP(x)}else k.subtreeFlags&8772&&Y!==null?(Y.return=k,bt=Y):eP(x)}}function eP(x){for(;bt!==null;){var _=bt;if(_.flags&8772){var B=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:jf||a1(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!jf)if(B===null)P.componentDidMount();else{var k=_.elementType===_.type?B.memoizedProps:Bs(_.type,B.memoizedProps);P.componentDidUpdate(k,B.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var Y=_.updateQueue;Y!==null&&YR(_,Y,P);break;case 3:var ve=_.updateQueue;if(ve!==null){if(B=null,_.child!==null)switch(_.child.tag){case 5:B=j(_.child.stateNode);break;case 1:B=_.child.stateNode}YR(_,ve,B)}break;case 5:var ze=_.stateNode;B===null&&_.flags&4&&Ve(ze,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&_.memoizedState===null){var tt=_.alternate;if(tt!==null){var pt=tt.memoizedState;if(pt!==null){var Pt=pt.dehydrated;Pt!==null&&le(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}jf||_.flags&512&&UC(_)}catch(dn){to(_,_.return,dn)}}if(_===x){bt=null;break}if(B=_.sibling,B!==null){B.return=_.return,bt=B;break}bt=_.return}}function tP(x){for(;bt!==null;){var _=bt;if(_===x){bt=null;break}var B=_.sibling;if(B!==null){B.return=_.return,bt=B;break}bt=_.return}}function nP(x){for(;bt!==null;){var _=bt;try{switch(_.tag){case 0:case 11:case 15:var B=_.return;try{a1(4,_)}catch(tt){to(_,B,tt)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var k=_.return;try{P.componentDidMount()}catch(tt){to(_,k,tt)}}var Y=_.return;try{UC(_)}catch(tt){to(_,Y,tt)}break;case 5:var ve=_.return;try{UC(_)}catch(tt){to(_,ve,tt)}}}catch(tt){to(_,_.return,tt)}if(_===x){bt=null;break}var ze=_.sibling;if(ze!==null){ze.return=_.return,bt=ze;break}bt=_.return}}var Ny=0,Gy=1,Hy=2,Qy=3,Vy=4;if(typeof Symbol=="function"&&Symbol.for){var l1=Symbol.for;Ny=l1("selector.component"),Gy=l1("selector.has_pseudo_class"),Hy=l1("selector.role"),Qy=l1("selector.test_id"),Vy=l1("selector.text")}function HC(x){var _=ue(x);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(x=W(x),x===null)throw Error(o(362));return x.stateNode.current}function QC(x,_){switch(_.$$typeof){case Ny:if(x.type===_.value)return!0;break;case Gy:e:{_=_.value,x=[x,0];for(var B=0;B<x.length;){var P=x[B++],k=x[B++],Y=_[k];if(P.tag!==5||!Ee(P)){for(;Y!=null&&QC(P,Y);)k++,Y=_[k];if(k===_.length){_=!0;break e}else for(P=P.child;P!==null;)x.push(P,k),P=P.sibling}}_=!1}return _;case Hy:if(x.tag===5&&_e(x.stateNode,_.value))return!0;break;case Vy:if((x.tag===5||x.tag===6)&&(x=De(x),x!==null&&0<=x.indexOf(_.value)))return!0;break;case Qy:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function VC(x){switch(x.$$typeof){case Ny:return"<"+(b(x.value)||"Unknown")+">";case Gy:return":has("+(VC(x)||"")+")";case Hy:return'[role="'+x.value+'"]';case Vy:return'"'+x.value+'"';case Qy:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function iP(x,_){var B=[];x=[x,0];for(var P=0;P<x.length;){var k=x[P++],Y=x[P++],ve=_[Y];if(k.tag!==5||!Ee(k)){for(;ve!=null&&QC(k,ve);)Y++,ve=_[Y];if(Y===_.length)B.push(k);else for(k=k.child;k!==null;)x.push(k,Y),k=k.sibling}}return B}function WC(x,_){if(!te)throw Error(o(363));x=HC(x),x=iP(x,_),_=[],x=Array.from(x);for(var B=0;B<x.length;){var P=x[B++];if(P.tag===5)Ee(P)||_.push(P.stateNode);else for(P=P.child;P!==null;)x.push(P),P=P.sibling}return _}var pK=Math.ceil,Wy=a.ReactCurrentDispatcher,jC=a.ReactCurrentOwner,sr=a.ReactCurrentBatchConfig,wn=0,dr=null,pr=null,Zr=0,To=0,Pd=qt(0),Sr=0,c1=null,Dd=0,jy=0,XC=0,u1=null,Zs=null,YC=0,qC=1/0;function Ld(){qC=Li()+500}var Xy=!1,$C=null,hu=null,Yy=!1,du=null,qy=0,f1=0,KC=null,$y=-1,Ky=0;function Ds(){return wn&6?Li():$y!==-1?$y:$y=Li()}function pu(x){return x.mode&1?wn&2&&Zr!==0?Zr&-Zr:Nf.transition!==null?(Ky===0&&(x=oc,oc<<=1,!(oc&4194240)&&(oc=64),Ky=x),Ky):(x=Sn,x!==0?x:pe()):1}function Ko(x,_,B){if(50<f1)throw f1=0,KC=null,Error(o(185));var P=Jy(x,_);return P===null?null:(wl(P,_,B),(!(wn&2)||P!==dr)&&(P===dr&&(!(wn&2)&&(jy|=_),Sr===4&&mu(P,Zr)),eo(P,B),_===1&&wn===0&&!(x.mode&1)&&(Ld(),Cl&&Js())),P)}function Jy(x,_){x.lanes|=_;var B=x.alternate;for(B!==null&&(B.lanes|=_),B=x,x=x.return;x!==null;)x.childLanes|=_,B=x.alternate,B!==null&&(B.childLanes|=_),B=x,x=x.return;return B.tag===3?B.stateNode:null}function eo(x,_){var B=x.callbackNode;H0(x,_);var P=zf(x,x===dr?Zr:0);if(P===0)B!==null&&Ed(B),x.callbackNode=null,x.callbackPriority=0;else if(_=P&-P,x.callbackPriority!==_){if(B!=null&&Ed(B),_===1)x.tag===0?Y0(sP.bind(null,x)):X0(sP.bind(null,x)),re?ie(function(){wn===0&&Js()}):uc(Uf,Js),B=null;else{switch(Q0(P)){case 1:B=Uf;break;case 4:B=my;break;case 16:B=Ts;break;case 536870912:B=W0;break;default:B=Ts}B=pP(B,rP.bind(null,x))}x.callbackPriority=_,x.callbackNode=B}}function rP(x,_){if($y=-1,Ky=0,wn&6)throw Error(o(327));var B=x.callbackNode;if($f()&&x.callbackNode!==B)return null;var P=zf(x,x===dr?Zr:0);if(P===0)return null;if(P&30||P&x.expiredLanes||_)_=Zy(x,P);else{_=P;var k=wn;wn|=2;var Y=lP();(dr!==x||Zr!==_)&&(Ld(),Yf(x,_));do try{AK();break}catch(ze){aP(x,ze)}while(!0);Sd(),Wy.current=Y,wn=k,pr!==null?_=0:(dr=null,Zr=0,_=Sr)}if(_!==0){if(_===2&&(k=cc(x),k!==0&&(P=k,_=JC(x,k))),_===1)throw B=c1,Yf(x,0),mu(x,P),eo(x,Li()),B;if(_===6)mu(x,P);else{if(k=x.current.alternate,!(P&30)&&!mK(k)&&(_=Zy(x,P),_===2&&(Y=cc(x),Y!==0&&(P=Y,_=JC(x,Y))),_===1))throw B=c1,Yf(x,0),mu(x,P),eo(x,Li()),B;switch(x.finishedWork=k,x.finishedLanes=P,_){case 0:case 1:throw Error(o(345));case 2:qf(x,Zs);break;case 3:if(mu(x,P),(P&130023424)===P&&(_=YC+500-Li(),10<_)){if(zf(x,0)!==0)break;if(k=x.suspendedLanes,(k&P)!==P){Ds(),x.pingedLanes|=x.suspendedLanes&k;break}x.timeoutHandle=H(qf.bind(null,x,Zs),_);break}qf(x,Zs);break;case 4:if(mu(x,P),(P&4194240)===P)break;for(_=x.eventTimes,k=-1;0<P;){var ve=31-ii(P);Y=1<<ve,ve=_[ve],ve>k&&(k=ve),P&=~Y}if(P=k,P=Li()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*pK(P/1960))-P,10<P){x.timeoutHandle=H(qf.bind(null,x,Zs),P);break}qf(x,Zs);break;case 5:qf(x,Zs);break;default:throw Error(o(329))}}}return eo(x,Li()),x.callbackNode===B?rP.bind(null,x):null}function JC(x,_){var B=u1;return x.current.memoizedState.isDehydrated&&(Yf(x,_).flags|=256),x=Zy(x,_),x!==2&&(_=Zs,Zs=B,_!==null&&ZC(_)),x}function ZC(x){Zs===null?Zs=x:Zs.push.apply(Zs,x)}function mK(x){for(var _=x;;){if(_.flags&16384){var B=_.updateQueue;if(B!==null&&(B=B.stores,B!==null))for(var P=0;P<B.length;P++){var k=B[P],Y=k.getSnapshot;k=k.value;try{if(!wo(Y(),k))return!1}catch{return!1}}}if(B=_.child,_.subtreeFlags&16384&&B!==null)B.return=_,_=B;else{if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function mu(x,_){for(_&=~XC,_&=~jy,x.suspendedLanes|=_,x.pingedLanes&=~_,x=x.expirationTimes;0<_;){var B=31-ii(_),P=1<<B;x[B]=-1,_&=~P}}function sP(x){if(wn&6)throw Error(o(327));$f();var _=zf(x,0);if(!(_&1))return eo(x,Li()),null;var B=Zy(x,_);if(x.tag!==0&&B===2){var P=cc(x);P!==0&&(_=P,B=JC(x,P))}if(B===1)throw B=c1,Yf(x,0),mu(x,_),eo(x,Li()),B;if(B===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=_,qf(x,Zs),eo(x,Li()),null}function oP(x){du!==null&&du.tag===0&&!(wn&6)&&$f();var _=wn;wn|=1;var B=sr.transition,P=Sn;try{if(sr.transition=null,Sn=1,x)return x()}finally{Sn=P,sr.transition=B,wn=_,!(wn&6)&&Js()}}function e4(){To=Pd.current,yt(Pd)}function Yf(x,_){x.finishedWork=null,x.finishedLanes=0;var B=x.timeoutHandle;if(B!==de&&(x.timeoutHandle=de,oe(B)),pr!==null)for(B=pr.return;B!==null;){var P=B;switch(AC(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&ln();break;case 3:Bd(),yt(Qt),yt(Ft),SC();break;case 5:EC(P);break;case 4:Bd();break;case 13:yt(Fi);break;case 19:yt(Fi);break;case 10:Ur(P.type._context);break;case 22:case 23:e4()}B=B.return}if(dr=x,pr=x=gu(x.current,null),Zr=To=_,Sr=0,c1=null,XC=jy=Dd=0,Zs=u1=null,So!==null){for(_=0;_<So.length;_++)if(B=So[_],P=B.interleaved,P!==null){B.interleaved=null;var k=P.next,Y=B.pending;if(Y!==null){var ve=Y.next;Y.next=k,P.next=ve}B.pending=P}So=null}return x}function aP(x,_){do{var B=pr;try{if(Sd(),Cy.current=Ry,by){for(var P=Qi.memoizedState;P!==null;){var k=P.queue;k!==null&&(k.pending=null),P=P.next}by=!1}if(Rd=0,kr=us=Qi=null,e1=!1,t1=0,jC.current=null,B===null||B.return===null){Sr=1,c1=_,pr=null;break}e:{var Y=x,ve=B.return,ze=B,tt=_;if(_=Zr,ze.flags|=32768,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var pt=tt,Pt=ze,dn=Pt.tag;if(!(Pt.mode&1)&&(dn===0||dn===11||dn===15)){var Kt=Pt.alternate;Kt?(Pt.updateQueue=Kt.updateQueue,Pt.memoizedState=Kt.memoizedState,Pt.lanes=Kt.lanes):(Pt.updateQueue=null,Pt.memoizedState=null)}var ai=T9(ve);if(ai!==null){ai.flags&=-257,I9(ai,ve,ze,Y,_),ai.mode&1&&M9(Y,pt,_),_=ai,tt=pt;var Nt=_.updateQueue;if(Nt===null){var ds=new Set;ds.add(tt),_.updateQueue=ds}else Nt.add(tt);break e}else{if(!(_&1)){M9(Y,pt,_),t4();break e}tt=Error(o(426))}}else if(Mi&&ze.mode&1){var Zo=T9(ve);if(Zo!==null){!(Zo.flags&65536)&&(Zo.flags|=256),I9(Zo,ve,ze,Y,_),xC(tt);break e}}Y=tt,Sr!==4&&(Sr=2),u1===null?u1=[Y]:u1.push(Y),tt=RC(tt,ze),ze=ve;do{switch(ze.tag){case 3:ze.flags|=65536,_&=-_,ze.lanes|=_;var je=C9(ze,tt,_);XR(ze,je);break e;case 1:Y=tt;var ke=ze.type,Ke=ze.stateNode;if(!(ze.flags&128)&&(typeof ke.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(hu===null||!hu.has(Ke)))){ze.flags|=65536,_&=-_,ze.lanes|=_;var Mt=b9(ze,Y,_);XR(ze,Mt);break e}}ze=ze.return}while(ze!==null)}uP(B)}catch(kt){_=kt,pr===B&&B!==null&&(pr=B=B.return);continue}break}while(!0)}function lP(){var x=Wy.current;return Wy.current=Ry,x===null?Ry:x}function t4(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),dr===null||!(Dd&268435455)&&!(jy&268435455)||mu(dr,Zr)}function Zy(x,_){var B=wn;wn|=2;var P=lP();dr===x&&Zr===_||Yf(x,_);do try{gK();break}catch(k){aP(x,k)}while(!0);if(Sd(),wn=B,Wy.current=P,pr!==null)throw Error(o(261));return dr=null,Zr=0,Sr}function gK(){for(;pr!==null;)cP(pr)}function AK(){for(;pr!==null&&!V0();)cP(pr)}function cP(x){var _=dP(x.alternate,x,To);x.memoizedProps=x.pendingProps,_===null?uP(x):pr=_,jC.current=null}function uP(x){var _=x;do{var B=_.alternate;if(x=_.return,_.flags&32768){if(B=cK(B,_),B!==null){B.flags&=32767,pr=B;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Sr=6,pr=null;return}}else if(B=oK(B,_,To),B!==null){pr=B;return}if(_=_.sibling,_!==null){pr=_;return}pr=_=x}while(_!==null);Sr===0&&(Sr=5)}function qf(x,_){var B=Sn,P=sr.transition;try{sr.transition=null,Sn=1,vK(x,_,B)}finally{sr.transition=P,Sn=B}return null}function vK(x,_,B){do $f();while(du!==null);if(wn&6)throw Error(o(327));var P=x.finishedWork,k=x.finishedLanes;if(P===null)return null;if(x.finishedWork=null,x.finishedLanes=0,P===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var Y=P.lanes|P.childLanes;if(lu(x,Y),x===dr&&(pr=dr=null,Zr=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||Yy||(Yy=!0,pP(Ts,function(){return $f(),null})),Y=(P.flags&15990)!==0,P.subtreeFlags&15990||Y){Y=sr.transition,sr.transition=null;var ve=Sn;Sn=1;var ze=wn;wn|=4,jC.current=null,fK(x,P),hK(x,P),X(x.containerInfo),x.current=P,dK(P),py(),wn=ze,Sn=ve,sr.transition=Y}else x.current=P;if(Yy&&(Yy=!1,du=x,qy=k),Y=x.pendingLanes,Y===0&&(hu=null),j0(P.stateNode),eo(x,Li()),_!==null)for(B=x.onRecoverableError,P=0;P<_.length;P++)B(_[P]);if(Xy)throw Xy=!1,x=$C,$C=null,x;return qy&1&&x.tag!==0&&$f(),Y=x.pendingLanes,Y&1?x===KC?f1++:(f1=0,KC=x):f1=0,Js(),null}function $f(){if(du!==null){var x=Q0(qy),_=sr.transition,B=Sn;try{if(sr.transition=null,Sn=16>x?16:x,du===null)var P=!1;else{if(x=du,du=null,qy=0,wn&6)throw Error(o(331));var k=wn;for(wn|=4,bt=x.current;bt!==null;){var Y=bt,ve=Y.child;if(bt.flags&16){var ze=Y.deletions;if(ze!==null){for(var tt=0;tt<ze.length;tt++){var pt=ze[tt];for(bt=pt;bt!==null;){var Pt=bt;switch(Pt.tag){case 0:case 11:case 15:Xf(8,Pt,Y)}var dn=Pt.child;if(dn!==null)dn.return=Pt,bt=dn;else for(;bt!==null;){Pt=bt;var Kt=Pt.sibling,ai=Pt.return;if(Y9(Pt),Pt===pt){bt=null;break}if(Kt!==null){Kt.return=ai,bt=Kt;break}bt=ai}}}var Nt=Y.alternate;if(Nt!==null){var ds=Nt.child;if(ds!==null){Nt.child=null;do{var Zo=ds.sibling;ds.sibling=null,ds=Zo}while(ds!==null)}}bt=Y}}if(Y.subtreeFlags&2064&&ve!==null)ve.return=Y,bt=ve;else e:for(;bt!==null;){if(Y=bt,Y.flags&2048)switch(Y.tag){case 0:case 11:case 15:Xf(9,Y,Y.return)}var je=Y.sibling;if(je!==null){je.return=Y.return,bt=je;break e}bt=Y.return}}var ke=x.current;for(bt=ke;bt!==null;){ve=bt;var Ke=ve.child;if(ve.subtreeFlags&2064&&Ke!==null)Ke.return=ve,bt=Ke;else e:for(ve=ke;bt!==null;){if(ze=bt,ze.flags&2048)try{switch(ze.tag){case 0:case 11:case 15:a1(9,ze)}}catch(kt){to(ze,ze.return,kt)}if(ze===ve){bt=null;break e}var Mt=ze.sibling;if(Mt!==null){Mt.return=ze.return,bt=Mt;break e}bt=ze.return}}if(wn=k,Js(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(kf,x)}catch{}P=!0}return P}finally{Sn=B,sr.transition=_}}return!1}function fP(x,_,B){_=RC(B,_),_=C9(x,_,1),fu(x,_),_=Ds(),x=Jy(x,1),x!==null&&(wl(x,1,_),eo(x,_))}function to(x,_,B){if(x.tag===3)fP(x,x,B);else for(;_!==null;){if(_.tag===3){fP(_,x,B);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(hu===null||!hu.has(P))){x=RC(B,x),x=b9(_,x,1),fu(_,x),x=Ds(),_=Jy(_,1),_!==null&&(wl(_,1,x),eo(_,x));break}}_=_.return}}function yK(x,_,B){var P=x.pingCache;P!==null&&P.delete(_),_=Ds(),x.pingedLanes|=x.suspendedLanes&B,dr===x&&(Zr&B)===B&&(Sr===4||Sr===3&&(Zr&130023424)===Zr&&500>Li()-YC?Yf(x,0):XC|=B),eo(x,_)}function hP(x,_){_===0&&(x.mode&1?(_=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):_=1);var B=Ds();x=Jy(x,_),x!==null&&(wl(x,_,B),eo(x,B))}function xK(x){var _=x.memoizedState,B=0;_!==null&&(B=_.retryLane),hP(x,B)}function _K(x,_){var B=0;switch(x.tag){case 13:var P=x.stateNode,k=x.memoizedState;k!==null&&(B=k.retryLane);break;case 19:P=x.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(_),hP(x,B)}var dP;dP=function(x,_,B){if(x!==null)if(x.memoizedProps!==_.pendingProps||Qt.current)Mo=!0;else{if(!(x.lanes&B)&&!(_.flags&128))return Mo=!1,lK(x,_,B);Mo=!!(x.flags&131072)}else Mo=!1,Mi&&_.flags&1048576&&ZR(_,Ey,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps;var k=Dn(_,Ft.current);ir(_,B),k=bC(null,_,P,x,k,B);var Y=MC();return _.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,ni(P)?(Y=!0,on(_)):Y=!1,_.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,dC(_),k.updater=xy,_.stateNode=k,k._reactInternals=_,mC(_,P,x,B),_=LC(null,_,P,!0,Y,B)):(_.tag=0,Mi&&Y&&gC(_),Ps(null,_,k,B),_=_.child),_;case 16:P=_.elementType;e:{switch(x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps,k=P._init,P=k(P._payload),_.type=P,k=_.tag=wK(P),x=Bs(P,x),k){case 0:_=DC(null,_,P,x,B);break e;case 1:_=z9(null,_,P,x,B);break e;case 11:_=P9(null,_,P,x,B);break e;case 14:_=D9(null,_,P,Bs(P.type,x),B);break e}throw Error(o(306,P,""))}return _;case 0:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:Bs(P,k),DC(x,_,P,k,B);case 1:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:Bs(P,k),z9(x,_,P,k,B);case 3:e:{if(U9(_),x===null)throw Error(o(387));P=_.pendingProps,Y=_.memoizedState,k=Y.element,jR(x,_),yy(_,P,null,B);var ve=_.memoizedState;if(P=ve.element,xe&&Y.isDehydrated)if(Y={element:P,isDehydrated:!1,cache:ve.cache,transitions:ve.transitions},_.updateQueue.baseState=Y,_.memoizedState=Y,_.flags&256){k=Error(o(423)),_=k9(x,_,P,B,k);break e}else if(P!==k){k=Error(o(424)),_=k9(x,_,P,B,k);break e}else for(xe&&(bo=si(_.stateNode.containerInfo),Co=_,Mi=!0,Ua=null,q0=!1),B=s9(_,null,P,B),_.child=B;B;)B.flags=B.flags&-3|4096,B=B.sibling;else{if(Md(),P===k){_=mc(x,_,B);break e}Ps(x,_,P,B)}_=_.child}return _;case 5:return o9(_),x===null&&yC(_),P=_.type,k=_.pendingProps,Y=x!==null?x.memoizedProps:null,ve=k.children,N(P,k)?ve=null:Y!==null&&N(P,Y)&&(_.flags|=32),O9(x,_),Ps(x,_,ve,B),_.child;case 6:return x===null&&yC(_),null;case 13:return N9(x,_,B);case 4:return _C(_,_.stateNode.containerInfo),P=_.pendingProps,x===null?_.child=Td(_,null,P,B):Ps(x,_,P,B),_.child;case 11:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:Bs(P,k),P9(x,_,P,k,B);case 7:return Ps(x,_,_.pendingProps,B),_.child;case 8:return Ps(x,_,_.pendingProps.children,B),_.child;case 12:return Ps(x,_,_.pendingProps.children,B),_.child;case 10:e:{if(P=_.type._context,k=_.pendingProps,Y=_.memoizedProps,ve=k.value,Ay(_,P,ve),Y!==null)if(wo(Y.value,ve)){if(Y.children===k.children&&!Qt.current){_=mc(x,_,B);break e}}else for(Y=_.child,Y!==null&&(Y.return=_);Y!==null;){var ze=Y.dependencies;if(ze!==null){ve=Y.child;for(var tt=ze.firstContext;tt!==null;){if(tt.context===P){if(Y.tag===1){tt=fc(-1,B&-B),tt.tag=2;var pt=Y.updateQueue;if(pt!==null){pt=pt.shared;var Pt=pt.pending;Pt===null?tt.next=tt:(tt.next=Pt.next,Pt.next=tt),pt.pending=tt}}Y.lanes|=B,tt=Y.alternate,tt!==null&&(tt.lanes|=B),Rs(Y.return,B,_),ze.lanes|=B;break}tt=tt.next}}else if(Y.tag===10)ve=Y.type===_.type?null:Y.child;else if(Y.tag===18){if(ve=Y.return,ve===null)throw Error(o(341));ve.lanes|=B,ze=ve.alternate,ze!==null&&(ze.lanes|=B),Rs(ve,B,_),ve=Y.sibling}else ve=Y.child;if(ve!==null)ve.return=Y;else for(ve=Y;ve!==null;){if(ve===_){ve=null;break}if(Y=ve.sibling,Y!==null){Y.return=ve.return,ve=Y;break}ve=ve.return}Y=ve}Ps(x,_,k.children,B),_=_.child}return _;case 9:return k=_.type,P=_.pendingProps.children,ir(_,B),k=rr(k),P=P(k),_.flags|=1,Ps(x,_,P,B),_.child;case 14:return P=_.type,k=Bs(P,_.pendingProps),k=Bs(P.type,k),D9(x,_,P,k,B);case 15:return L9(x,_,_.type,_.pendingProps,B);case 17:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:Bs(P,k),x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,ni(P)?(x=!0,on(_)):x=!1,ir(_,B),KR(_,P,k),mC(_,P,k,B),LC(null,_,P,!0,x,B);case 19:return V9(x,_,B);case 22:return F9(x,_,B)}throw Error(o(156,_.tag))};function pP(x,_){return uc(x,_)}function EK(x,_,B,P){this.tag=x,this.key=B,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jo(x,_,B,P){return new EK(x,_,B,P)}function n4(x){return x=x.prototype,!(!x||!x.isReactComponent)}function wK(x){if(typeof x=="function")return n4(x)?1:0;if(x!=null){if(x=x.$$typeof,x===g)return 11;if(x===v)return 14}return 2}function gu(x,_){var B=x.alternate;return B===null?(B=Jo(x.tag,_,x.key,x.mode),B.elementType=x.elementType,B.type=x.type,B.stateNode=x.stateNode,B.alternate=x,x.alternate=B):(B.pendingProps=_,B.type=x.type,B.flags=0,B.subtreeFlags=0,B.deletions=null),B.flags=x.flags&14680064,B.childLanes=x.childLanes,B.lanes=x.lanes,B.child=x.child,B.memoizedProps=x.memoizedProps,B.memoizedState=x.memoizedState,B.updateQueue=x.updateQueue,_=x.dependencies,B.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},B.sibling=x.sibling,B.index=x.index,B.ref=x.ref,B}function e2(x,_,B,P,k,Y){var ve=2;if(P=x,typeof x=="function")n4(x)&&(ve=1);else if(typeof x=="string")ve=5;else e:switch(x){case u:return Kf(B.children,k,Y,_);case f:ve=8,k|=8;break;case h:return x=Jo(12,B,_,k|2),x.elementType=h,x.lanes=Y,x;case A:return x=Jo(13,B,_,k),x.elementType=A,x.lanes=Y,x;case m:return x=Jo(19,B,_,k),x.elementType=m,x.lanes=Y,x;case w:return t2(B,k,Y,_);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case d:ve=10;break e;case p:ve=9;break e;case g:ve=11;break e;case v:ve=14;break e;case y:ve=16,P=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return _=Jo(ve,B,_,k),_.elementType=x,_.type=P,_.lanes=Y,_}function Kf(x,_,B,P){return x=Jo(7,x,P,_),x.lanes=B,x}function t2(x,_,B,P){return x=Jo(22,x,P,_),x.elementType=w,x.lanes=B,x.stateNode={},x}function i4(x,_,B){return x=Jo(6,x,null,_),x.lanes=B,x}function r4(x,_,B){return _=Jo(4,x.children!==null?x.children:[],x.key,_),_.lanes=B,_.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},_}function SK(x,_,B,P,k){this.tag=_,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=de,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_d(0),this.expirationTimes=_d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_d(0),this.identifierPrefix=P,this.onRecoverableError=k,xe&&(this.mutableSourceEagerHydrationData=null)}function mP(x,_,B,P,k,Y,ve,ze,tt){return x=new SK(x,_,B,ze,tt),_===1?(_=1,Y===!0&&(_|=8)):_=0,Y=Jo(3,null,null,_),x.current=Y,Y.stateNode=x,Y.memoizedState={element:P,isDehydrated:B,cache:null,transitions:null},dC(Y),x}function gP(x){if(!x)return Ut;x=x._reactInternals;e:{if(I(x)!==x||x.tag!==1)throw Error(o(170));var _=x;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(ni(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(x.tag===1){var B=x.type;if(ni(B))return oi(x,B,_)}return _}function AP(x){var _=x._reactInternals;if(_===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=R(_),x===null?null:x.stateNode}function vP(x,_){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var B=x.retryLane;x.retryLane=B!==0&&B<_?B:_}}function s4(x,_){vP(x,_),(x=x.alternate)&&vP(x,_)}function CK(x){return x=R(x),x===null?null:x.stateNode}function bK(){return null}return n.attemptContinuousHydration=function(x){if(x.tag===13){var _=Ds();Ko(x,134217728,_),s4(x,134217728)}},n.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var _=Ds(),B=pu(x);Ko(x,B,_),s4(x,B)}},n.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var _=x.stateNode;if(_.current.memoizedState.isDehydrated){var B=lc(_.pendingLanes);B!==0&&(Sl(_,B|1),eo(_,Li()),!(wn&6)&&(Ld(),Js()))}break;case 13:var P=Ds();oP(function(){return Ko(x,1,P)}),s4(x,1)}},n.batchedUpdates=function(x,_){var B=wn;wn|=1;try{return x(_)}finally{wn=B,wn===0&&(Ld(),Cl&&Js())}},n.createComponentSelector=function(x){return{$$typeof:Ny,value:x}},n.createContainer=function(x,_,B,P,k,Y,ve){return mP(x,_,!1,null,B,P,k,Y,ve)},n.createHasPseudoClassSelector=function(x){return{$$typeof:Gy,value:x}},n.createHydrationContainer=function(x,_,B,P,k,Y,ve,ze,tt){return x=mP(B,P,!0,x,k,Y,ve,ze,tt),x.context=gP(null),B=x.current,P=Ds(),k=pu(B),Y=fc(P,k),Y.callback=_??null,fu(B,Y),x.current.lanes=k,wl(x,k,P),eo(x,P),x},n.createPortal=function(x,_,B){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:P==null?null:""+P,children:x,containerInfo:_,implementation:B}},n.createRoleSelector=function(x){return{$$typeof:Hy,value:x}},n.createTestNameSelector=function(x){return{$$typeof:Qy,value:x}},n.createTextSelector=function(x){return{$$typeof:Vy,value:x}},n.deferredUpdates=function(x){var _=Sn,B=sr.transition;try{return sr.transition=null,Sn=16,x()}finally{Sn=_,sr.transition=B}},n.discreteUpdates=function(x,_,B,P,k){var Y=Sn,ve=sr.transition;try{return sr.transition=null,Sn=1,x(_,B,P,k)}finally{Sn=Y,sr.transition=ve,wn===0&&Ld()}},n.findAllNodes=WC,n.findBoundingRects=function(x,_){if(!te)throw Error(o(363));_=WC(x,_),x=[];for(var B=0;B<_.length;B++)x.push(Me(_[B]));for(_=x.length-1;0<_;_--){B=x[_];for(var P=B.x,k=P+B.width,Y=B.y,ve=Y+B.height,ze=_-1;0<=ze;ze--)if(_!==ze){var tt=x[ze],pt=tt.x,Pt=pt+tt.width,dn=tt.y,Kt=dn+tt.height;if(P>=pt&&Y>=dn&&k<=Pt&&ve<=Kt){x.splice(_,1);break}else if(P!==pt||B.width!==tt.width||Kt<Y||dn>ve){if(!(Y!==dn||B.height!==tt.height||Pt<P||pt>k)){pt>P&&(tt.width+=pt-P,tt.x=P),Pt<k&&(tt.width=k-pt),x.splice(_,1);break}}else{dn>Y&&(tt.height+=dn-Y,tt.y=Y),Kt<ve&&(tt.height=ve-dn),x.splice(_,1);break}}}return x},n.findHostInstance=AP,n.findHostInstanceWithNoPortals=function(x){return x=D(x),x=x!==null?F(x):null,x===null?null:x.stateNode},n.findHostInstanceWithWarning=function(x){return AP(x)},n.flushControlled=function(x){var _=wn;wn|=1;var B=sr.transition,P=Sn;try{sr.transition=null,Sn=1,x()}finally{Sn=P,sr.transition=B,wn=_,wn===0&&(Ld(),Js())}},n.flushPassiveEffects=$f,n.flushSync=oP,n.focusWithin=function(x,_){if(!te)throw Error(o(363));for(x=HC(x),_=iP(x,_),_=Array.from(_),x=0;x<_.length;){var B=_[x++];if(!Ee(B)){if(B.tag===5&&Ze(B.stateNode))return!0;for(B=B.child;B!==null;)_.push(B),B=B.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Sn},n.getFindAllNodesFailureDescription=function(x,_){if(!te)throw Error(o(363));var B=0,P=[];x=[HC(x),0];for(var k=0;k<x.length;){var Y=x[k++],ve=x[k++],ze=_[ve];if((Y.tag!==5||!Ee(Y))&&(QC(Y,ze)&&(P.push(VC(ze)),ve++,ve>B&&(B=ve)),ve<_.length))for(Y=Y.child;Y!==null;)x.push(Y,ve),Y=Y.sibling}if(B<_.length){for(x=[];B<_.length;B++)x.push(VC(_[B]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},n.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return j(x.child.stateNode);default:return x.child.stateNode}},n.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:CK,findFiberByHostInstance:x.findFiberByHostInstance||bK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)x=!0;else{try{kf=_.inject(x),Eo=_}catch{}x=!!_.checkDCE}}return x},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(x,_,B,P){if(!te)throw Error(o(363));x=WC(x,_);var k=Oe(x,B,P).disconnect;return{disconnect:function(){k()}}},n.registerMutableSourceForHydration=function(x,_){var B=_._getVersion;B=B(_._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[_,B]:x.mutableSourceEagerHydrationData.push(_,B)},n.runWithPriority=function(x,_){var B=Sn;try{return Sn=x,_()}finally{Sn=B}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(x,_,B,P){var k=_.current,Y=Ds(),ve=pu(k);return B=gP(B),_.context===null?_.context=B:_.pendingContext=B,_=fc(Y,ve),_.payload={element:x},P=P===void 0?null:P,P!==null&&(_.callback=P),fu(k,_),x=Ko(k,ve,Y),x!==null&&vy(x,k,ve),ve},n};mV.exports=Dae;var Lae=mV.exports;const Fae=m0(Lae),Oae=t=>typeof t=="object"&&typeof t.then=="function",Dh=[];function vV(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function yV(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const s of Dh)if(vV(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Dh.indexOf(r);s!==-1&&Dh.splice(s,1)},promise:(Oae(t)?t:t(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Dh.push(r),!n)throw r.promise}const su=(t,e,n)=>yV(t,e,!1,n),xV=(t,e,n)=>void yV(t,e,!0,n),zw=t=>{if(t===void 0||t.length===0)Dh.splice(0,Dh.length);else{const e=Dh.find(n=>vV(t,n.keys,n.equal));e&&e.remove()}};var zae=Object.freeze({__proto__:null});const K8={},ui=t=>void Object.assign(K8,t);function Uae(t,e){function n(u,{args:f=[],attach:h,...d},p){let g=`${u[0].toUpperCase()}${u.slice(1)}`,A;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=d.object;A=$p(m,{type:u,root:p,attach:h,primitive:!0})}else{const m=K8[g];if(!m)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");A=$p(new m(...f),{type:u,root:p,attach:h,memoizedProps:{args:f}})}return A.__r3f.attach===void 0&&(A instanceof Dt?A.__r3f.attach="geometry":A instanceof cr&&(A.__r3f.attach="material")),g!=="inject"&&xb(A,d),A}function i(u,f){let h=!1;if(f){var d,p;(d=f.__r3f)!=null&&d.attach?yb(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(p=u.__r3f)==null||p.objects.push(f),f.__r3f||$p(f,{}),f.__r3f.parent=u,NT(f),Kp(f)}}function r(u,f,h){let d=!1;if(f){var p,g;if((p=f.__r3f)!=null&&p.attach)yb(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const A=u.children.filter(v=>v!==f),m=A.indexOf(h);u.children=[...A.slice(0,m),f,...A.slice(m)],d=!0}d||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||$p(f,{}),f.__r3f.parent=u,NT(f),Kp(f)}}function s(u,f,h=!1){u&&[...u].forEach(d=>o(f,d,h))}function o(u,f,h){if(f){var d,p,g;if(f.__r3f&&(f.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==f)),(p=f.__r3f)!=null&&p.attach)hL(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var A;u.remove(f),(A=f.__r3f)!=null&&A.root&&Vae(H_(f),f)}const v=(g=f.__r3f)==null?void 0:g.primitive,y=!v&&(h===void 0?f.dispose!==null:h);if(!v){var m;s((m=f.__r3f)==null?void 0:m.objects,f,y),s(f.children,f,y)}if(delete f.__r3f,y&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?UT.unstable_scheduleCallback(UT.unstable_IdlePriority,w):w()}Kp(u)}}function a(u,f,h,d){var p;const g=(p=u.__r3f)==null?void 0:p.parent;if(!g)return;const A=n(f,h,u.__r3f.root);if(u.children){for(const m of u.children)m.__r3f&&i(A,m);u.children=u.children.filter(m=>!m.__r3f)}u.__r3f.objects.forEach(m=>i(A,m)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(g,u),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),i(g,A),A.raycast&&A.__r3f.eventCount&&H_(A).getState().internal.interaction.push(A),[d,d.alternate].forEach(m=>{m!==null&&(m.stateNode=A,m.ref&&(typeof m.ref=="function"?m.ref(A):m.ref.current=A))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Fae({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,i(h,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{if(!f||!h)return;const d=u.getState().scene;d.__r3f&&r(d,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,h,d){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:A=[],children:m,...v}=d,{args:y=[],children:w,...S}=h;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((b,M)=>b!==y[M]))return[!0];const C=TV(u,v,S,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[f,h],d,p,g,A){f?a(u,d,g,A):xb(u,h)},commitMount(u,f,h,d){var p;const g=(p=u.__r3f)!=null?p:{};u.raycast&&g.handlers&&g.eventCount&&H_(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>$p(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:d}=(f=u.__r3f)!=null?f:{};h&&d&&hL(d,u,h),u.isObject3D&&(u.visible=!1),Kp(u)},unhideInstance(u,f){var h;const{attach:d,parent:p}=(h=u.__r3f)!=null?h:{};d&&p&&yb(p,u,d),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Kp(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ym.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&pi.fun(performance.now)?performance.now:pi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:pi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:pi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:xb}}var lL,cL;const vb=t=>"colorSpace"in t||"outputColorSpace"in t,_V=()=>{var t;return(t=K8.ColorManagement)!=null?t:null},EV=t=>t&&t.isOrthographicCamera,kae=t=>t&&t.hasOwnProperty("current"),M0=typeof window<"u"&&((lL=window.document)!=null&&lL.createElement||((cL=window.navigator)==null?void 0:cL.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function wV(t){const e=E.useRef(t);return M0(()=>void(e.current=t),[t]),e}function Nae({set:t}){return M0(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class SV extends E.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}SV.getDerivedStateFromError=()=>({error:!0});const CV="__default",uL=new Map,Gae=t=>t&&!!t.memoized&&!!t.changes;function bV(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const qp=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function H_(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const pi={obj:t=>t===Object(t)&&!pi.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(pi.str(t)||pi.num(t)||pi.boo(t))return t===e;const s=pi.obj(t);if(s&&i==="reference")return t===e;const o=pi.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!pi.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(pi.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function J8(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function MV(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function $p(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function kT(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const fL=/-\d+$/;function yb(t,e,n){if(pi.str(n)){if(fL.test(n)){const s=n.replace(fL,""),{target:o,key:a}=kT(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=kT(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function hL(t,e,n){var i,r;if(pi.str(n)){const{target:s,key:o}=kT(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function TV(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=t.__r3f,f=Object.entries(r),h=[];if(c){const p=Object.keys(l);for(let g=0;g<p.length;g++)r.hasOwnProperty(p[g])||f.unshift([p[g],CV+"remove"])}f.forEach(([p,g])=>{var A;if((A=t.__r3f)!=null&&A.primitive&&p==="object"||pi.equ(g,l[p]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(p))return h.push([p,g,!0,[]]);let m=[];p.includes("-")&&(m=p.split("-")),h.push([p,g,!1,m]);for(const v in r){const y=r[v];v.startsWith(`${p}-`)&&h.push([v,y,!1,v.split("-")])}});const d={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(d.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(d.attach=u.memoizedProps.attach),{memoized:d,changes:h}}const Hae=typeof process<"u"&&!1;function xb(t,e){var n;const i=t.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=Gae(e)?e:TV(t,e),l=i==null?void 0:i.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[f,h,d,p]=a[u];if(vb(t)){const v="srgb",y="srgb-linear";f==="encoding"?(f="colorSpace",h=h===3001?v:y):f==="outputEncoding"&&(f="outputColorSpace",h=h===3001?v:y)}let g=t,A=g[f];if(p.length&&(A=p.reduce((m,v)=>m[v],t),!(A&&A.set))){const[m,...v]=p.reverse();g=v.reverse().reduce((y,w)=>y[w],t),f=m}if(h===CV+"remove")if(g.constructor){let m=uL.get(g.constructor);m||(m=new g.constructor,uL.set(g.constructor,m)),h=m[f]}else h=0;if(d&&i)h?i.handlers[f]=h:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Nh)){if(Array.isArray(h))A.fromArray?A.fromArray(h):A.set(...h);else if(A.copy&&h&&h.constructor&&(Hae?A.constructor.name===h.constructor.name:A.constructor===h.constructor))A.copy(h);else if(h!==void 0){const m=A instanceof Je;!m&&A.setScalar?A.setScalar(h):A instanceof Nh&&h instanceof Nh?A.mask=h.mask:A.set(h),!_V()&&s&&!s.linear&&m&&A.convertSRGBToLinear()}}else if(g[f]=h,g[f]instanceof Bn&&g[f].format===In&&g[f].type===Jn&&s){const m=g[f];vb(m)&&vb(s.gl)?m.colorSpace=s.gl.outputColorSpace:m.encoding=s.gl.outputEncoding}Kp(t)}if(i&&i.parent&&t.raycast&&l!==i.eventCount){const u=H_(t).getState().internal,f=u.interaction.indexOf(t);f>-1&&u.interaction.splice(f,1),i.eventCount&&u.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&NT(t),t}function Kp(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function NT(t){t.onUpdate==null||t.onUpdate(t)}function IV(t,e){t.manual||(EV(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function fx(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Qae(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ym.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ym.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ym.ContinuousEventPriority;default:return ym.DefaultEventPriority}}function BV(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function Vae(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{BV(n.capturedMap,e,i,r)})}function RV(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),f=new Set,h=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let m=0;m<d.length;m++){const v=qp(d[m]);v&&(v.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(m){const v=qp(m);if(!v||!v.events.enabled||v.raycaster.camera===null)return[];if(v.raycaster.camera===void 0){var y;v.events.compute==null||v.events.compute(l,v,(y=v.previousRoot)==null?void 0:y.getState()),v.raycaster.camera===void 0&&(v.raycaster.camera=null)}return v.raycaster.camera?v.raycaster.intersectObject(m,!0):[]}let g=d.flatMap(p).sort((m,v)=>{const y=qp(m.object),w=qp(v.object);return!y||!w?m.distance-v.distance:w.events.priority-y.events.priority||m.distance-v.distance}).filter(m=>{const v=fx(m);return f.has(v)?!1:(f.add(v),!0)});u.events.filter&&(g=u.events.filter(g,u));for(const m of g){let v=m.object;for(;v;){var A;(A=v.__r3f)!=null&&A.eventCount&&h.push({...m,eventObject:v}),v=v.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let m of u.internal.capturedMap.get(l.pointerId).values())f.has(fx(m.intersection))||h.push(m.intersection);return h}function r(l,c,u,f){const h=t.getState();if(l.length){const d={stopped:!1};for(const p of l){const g=qp(p.object)||h,{raycaster:A,pointer:m,camera:v,internal:y}=g,w=new L(m.x,m.y,0).unproject(v),S=T=>{var D,R;return(D=(R=y.capturedMap.get(T))==null?void 0:R.has(p.eventObject))!=null?D:!1},C=T=>{const D={intersection:p,target:c.target};y.capturedMap.has(T)?y.capturedMap.get(T).set(p.eventObject,D):y.capturedMap.set(T,new Map([[p.eventObject,D]])),c.target.setPointerCapture(T)},b=T=>{const D=y.capturedMap.get(T);D&&BV(y.capturedMap,p.eventObject,D,T)};let M={};for(let T in c){let D=c[T];typeof D!="function"&&(M[T]=D)}let I={...p,...M,pointer:m,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:w,ray:A.ray,camera:v,stopPropagation(){const T="pointerId"in c&&y.capturedMap.get(c.pointerId);if((!T||T.has(p.eventObject))&&(I.stopped=d.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(D=>D.eventObject===p.eventObject))){const D=l.slice(0,l.indexOf(p));s([...D,p])}},target:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:b},currentTarget:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:b},nativeEvent:c};if(f(I),d.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f,d=h==null?void 0:h.handlers;if(c.hovered.delete(fx(u)),h!=null&&h.eventCount){const p={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=u;const d=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",A=i(u,d?n:void 0),m=p?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=A.map(y=>y.eventObject)),p&&!A.length&&m<=2&&(o(u,h.interaction),f&&f(u)),d&&s(A);function v(y){const w=y.eventObject,S=w.__r3f,C=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(d){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const b=fx(y),M=h.hovered.get(b);M?M.stopped&&y.stopPropagation():(h.hovered.set(b,y),C.onPointerOver==null||C.onPointerOver(y),C.onPointerEnter==null||C.onPointerEnter(y))}C.onPointerMove==null||C.onPointerMove(y)}else{const b=C[l];b?(!p||h.initialHits.includes(w))&&(o(u,h.interaction.filter(M=>!h.initialHits.includes(M))),b(y)):p&&h.initialHits.includes(w)&&o(u,h.interaction.filter(M=>!h.initialHits.includes(M)))}}r(A,u,m,v)}}return{handlePointer:a}}const Wae=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],PV=t=>!!(t!=null&&t.render),td=E.createContext(null),jae=(t,e)=>{const n=Ow((a,l)=>{const c=new L,u=new L,f=new L;function h(m=l().camera,v=u,y=l().size){const{width:w,height:S,top:C,left:b}=y,M=w/S;v instanceof L?f.copy(v):f.set(...v);const I=m.getWorldPosition(c).distanceTo(f);if(EV(m))return{width:w/m.zoom,height:S/m.zoom,top:C,left:b,factor:1,distance:I,aspect:M};{const T=m.fov*Math.PI/180,D=2*Math.tan(T/2)*I,R=D*(w/S);return{width:R,height:D,top:C,left:b,factor:w/R,distance:I,aspect:M}}}let d;const p=m=>a(v=>({performance:{...v.performance,current:m}})),g=new Ie;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>t(l(),m),advance:(m,v)=>e(m,v,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new b0,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();d&&clearTimeout(d),m.performance.current!==m.performance.min&&p(m.performance.min),d=setTimeout(()=>p(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:m=>a(v=>({...v,events:{...v.events,...m}})),setSize:(m,v,y,w,S)=>{const C=l().camera,b={width:m,height:v,top:w||0,left:S||0,updateStyle:y};a(M=>({size:b,viewport:{...M.viewport,...h(C,u,b)}}))},setDpr:m=>a(v=>{const y=bV(m);return{viewport:{...v.viewport,dpr:y,initialDpr:v.viewport.initialDpr||y}}}),setFrameloop:(m="always")=>{const v=l().clock;v.stop(),v.elapsedTime=0,m!=="never"&&(v.start(),v.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:E.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,v,y)=>{const w=l().internal;return w.priority=w.priority+(v>0?1:0),w.subscribers.push({ref:m,priority:v,store:y}),w.subscribers=w.subscribers.sort((S,C)=>S.priority-C.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(v>0?1:0),S.subscribers=S.subscribers.filter(C=>C.ref!==m))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var h;r=l,s=c.dpr,IV(a,l),u.setPixelRatio(c.dpr);const d=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,d)}a!==o&&(o=a,f(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function Z8(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let hx,DV=new Set,LV=new Set,FV=new Set;const Qv=t=>Z8(t,DV),Uw=t=>Z8(t,LV),Xae=t=>Z8(t,FV);function _b(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Jp(t,e){switch(t){case"before":return _b(DV,e);case"after":return _b(LV,e);case"tail":return _b(FV,e)}}let Eb,wb;function Sb(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Eb=e.internal.subscribers,hx=0;hx<Eb.length;hx++)wb=Eb[hx],wb.ref.current(wb.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Yae(t){let e=!1,n=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Jp("before",c),n=!0;for(const f of t.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=Sb(c,s))}if(n=!1,Jp("after",c),i===0)return Jp("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var f;if(!c)return t.forEach(h=>a(h.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,h){if(u&&Jp("before",c),f)Sb(c,f,h);else for(const d of t.values())Sb(c,d.store.getState());u&&Jp("after",c)}return{loop:o,invalidate:a,advance:l}}function qae(t){const e=E.useRef(null);return M0(()=>void(e.current=t.current.__r3f),[t]),e}function kw(){const t=E.useContext(td);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Fe(t=n=>n,e){return kw()(t,e)}function Ct(t,e=0){const n=kw(),i=n.getState().internal.subscribe,r=wV(t);return M0(()=>i(r,e,n),[e,i,n]),null}function $ae(t){return E.useMemo(()=>J8(t),[t])}const dL=new WeakMap;function OV(t,e){return function(n,...i){let r=dL.get(n);return r||(r=new n,dL.set(n,r)),t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,J8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function bi(t,e,n,i){const r=Array.isArray(e)?e:[e],s=su(OV(n,i),[t,...r],{equal:pi.equ});return Array.isArray(e)?s:s[0]}bi.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return xV(OV(n),[t,...i])};bi.clear=function(t,e){const n=Array.isArray(e)?e:[e];return zw([t,...n])};const nd=new Map,{invalidate:GT,advance:HT}=Yae(nd),{reconciler:r0,applyProps:yr}=Uae(nd,Qae),ip={objects:"shallow",strict:!1},Kae=(t,e)=>{const n=typeof t=="function"?t(e):t;return PV(n)?n:new T8({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Jae(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=n}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:i,height:r,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function eB(t){const e=nd.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||jae(GT,HT),o=n||r0.createContainer(s,ym.ConcurrentRoot,null,!1,null,"",r,null);e||nd.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:h,scene:d,events:p,onCreated:g,shadows:A=!1,linear:m=!1,flat:v=!1,legacy:y=!1,orthographic:w=!1,frameloop:S="always",dpr:C=[1,2],performance:b,raycaster:M,camera:I,onPointerMissed:T}=u,D=s.getState(),R=D.gl;D.gl||D.set({gl:R=Kae(f,t)});let z=D.raycaster;z||D.set({raycaster:z=new Ff});const{params:F,...V}=M||{};if(pi.equ(V,z,ip)||yr(z,{...V}),pi.equ(F,z.params,ip)||yr(z,{params:{...z.params,...F}}),!D.camera||D.camera===c&&!pi.equ(c,I,ip)){c=I;const X=I instanceof Rf,Q=X?I:w?new Hn(0,0,0,0,.1,1e3):new an(75,0,.1,1e3);X||(Q.position.z=5,I&&(yr(Q,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(Q.manual=!0,Q.updateProjectionMatrix())),!D.camera&&!(I!=null&&I.rotation)&&Q.lookAt(0,0,0)),D.set({camera:Q}),z.camera=Q}if(!D.scene){let X;d instanceof Go?X=d:(X=new Go,d&&yr(X,d)),D.set({scene:$p(X)})}if(!D.xr){var j;const X=(ne,O)=>{const N=s.getState();N.frameloop!=="never"&&HT(ne,!0,N,O)},Q=()=>{const ne=s.getState();ne.gl.xr.enabled=ne.gl.xr.isPresenting,ne.gl.xr.setAnimationLoop(ne.gl.xr.isPresenting?X:null),ne.gl.xr.isPresenting||GT(ne)},J={connect(){const ne=s.getState().gl;ne.xr.addEventListener("sessionstart",Q),ne.xr.addEventListener("sessionend",Q)},disconnect(){const ne=s.getState().gl;ne.xr.removeEventListener("sessionstart",Q),ne.xr.removeEventListener("sessionend",Q)}};typeof((j=R.xr)==null?void 0:j.addEventListener)=="function"&&J.connect(),D.set({xr:J})}if(R.shadowMap){const X=R.shadowMap.enabled,Q=R.shadowMap.type;if(R.shadowMap.enabled=!!A,pi.boo(A))R.shadowMap.type=eA;else if(pi.str(A)){var Z;const J={basic:CH,percentage:ew,soft:eA,variance:Ja};R.shadowMap.type=(Z=J[A])!=null?Z:eA}else pi.obj(A)&&Object.assign(R.shadowMap,A);(X!==R.shadowMap.enabled||Q!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const U=_V();U&&("enabled"in U?U.enabled=!y:"legacyMode"in U&&(U.legacyMode=y)),l||yr(R,{outputEncoding:m?3e3:3001,toneMapping:v?cl:d8}),D.legacy!==y&&D.set(()=>({legacy:y})),D.linear!==m&&D.set(()=>({linear:m})),D.flat!==v&&D.set(()=>({flat:v})),f&&!pi.fun(f)&&!PV(f)&&!pi.equ(f,R,ip)&&yr(R,f),p&&!D.events.handlers&&D.set({events:p(s)});const $=Jae(t,h);return pi.equ($,D.size,ip)||D.setSize($.width,$.height,$.updateStyle,$.top,$.left),C&&D.viewport.dpr!==bV(C)&&D.setDpr(C),D.frameloop!==S&&D.setFrameloop(S),D.onPointerMissed||D.set({onPointerMissed:T}),b&&!pi.equ(b,D.performance,ip)&&D.set(X=>({performance:{...X.performance,...b}})),a=g,l=!0,this},render(u){return l||this.configure(),r0.updateContainer(Re.jsx(ele,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){tB(t)}}}function Zae(t,e,n){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=eB(e);return i.configure(n),i.render(t)}function ele({store:t,children:e,onCreated:n,rootElement:i}){return M0(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Re.jsx(td.Provider,{value:t,children:e})}function tB(t,e){const n=nd.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),r0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),MV(r),nd.delete(t),e&&e(t)}catch{}},500)})}}function ou(t,e,n){return Re.jsx(tle,{children:t,container:e,state:n},e.uuid)}function tle({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=kw(),[a]=E.useState(()=>new Ff),[l]=E.useState(()=>new Ie),c=E.useCallback((f,h)=>{const d={...f};Object.keys(f).forEach(g=>{(Wae.includes(g)||f[g]!==h[g]&&h[g])&&delete d[g]});let p;if(h&&r){const g=h.camera;p=f.viewport.getCurrentViewport(g,new L,r),g!==f.camera&&IV(g,r)}return{...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...p},...s}},[t]),[u]=E.useState(()=>{const f=o.getState();return Ow((d,p)=>({...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:d,get:p,setEvents:g=>d(A=>({...A,events:{...A.events,...g}}))}))});return E.useEffect(()=>{const f=o.subscribe(h=>u.setState(d=>c(h,d)));return()=>{f()}},[c]),E.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),E.useEffect(()=>()=>{u.destroy()},[]),Re.jsx(Re.Fragment,{children:r0.createPortal(Re.jsx(td.Provider,{value:u,children:e}),u,null)})}r0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:E.version});const nle=E.unstable_act;function QT(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}QT.debounce=QT;var ile=QT;const pL=m0(ile);function rle(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=E.useRef(!1);E.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,d,p]=E.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:y,top:w,width:S,height:C,bottom:b,right:M,x:I,y:T}=l.current.element.getBoundingClientRect(),D={left:y,top:w,width:S,height:C,bottom:b,right:M,x:I,y:T};l.current.element instanceof HTMLElement&&r&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),f.current&&!lle(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[v,u?pL(v,u):v,c?pL(v,c):v]},[a,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function A(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=zV(v),A())};return ole(p,!!n),sle(d),E.useEffect(()=>{g(),A()},[n,p,d]),E.useEffect(()=>g,[]),[m,o,h]}function sle(t){E.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function ole(t,e){E.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function zV(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...zV(t.parentElement)]}const ale=["x","y","top","bottom","left","right","width","height"],lle=(t,e)=>ale.every(n=>t[n]===e[n]);var cle=Object.defineProperty,ule=Object.defineProperties,fle=Object.getOwnPropertyDescriptors,mL=Object.getOwnPropertySymbols,hle=Object.prototype.hasOwnProperty,dle=Object.prototype.propertyIsEnumerable,gL=(t,e,n)=>e in t?cle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AL=(t,e)=>{for(var n in e||(e={}))hle.call(e,n)&&gL(t,n,e[n]);if(mL)for(var n of mL(e))dle.call(e,n)&&gL(t,n,e[n]);return t},ple=(t,e)=>ule(t,fle(e)),vL,yL;typeof window<"u"&&((vL=window.document)!=null&&vL.createElement||((yL=window.navigator)==null?void 0:yL.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function UV(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=t.child;for(;i;){const r=UV(i,e,n);if(r)return r;i=i.sibling}}function kV(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const xL=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=xL;return}return xL.apply(this,arguments)};const nB=kV(E.createContext(null));class NV extends E.Component{render(){return E.createElement(nB.Provider,{value:this._reactInternals},this.props.children)}}function mle(){const t=E.useContext(nB);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const i of[t,t==null?void 0:t.alternate]){if(!i)continue;const r=UV(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function gle(){const t=mle(),[e]=E.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const r=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;r&&r!==nB&&!e.has(r)&&e.set(r,E.useContext(kV(r)))}n=n.return}return e}function Ale(){const t=gle();return E.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>E.createElement(e,null,E.createElement(n.Provider,ple(AL({},i),{value:t.get(n)}))),e=>E.createElement(NV,AL({},e))),[t])}const Cb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function GV(t){const{handlePointer:e}=RV(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Cb).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=Cb[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Cb[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const vle=E.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=GV,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:g,performance:A,raycaster:m,camera:v,scene:y,onPointerMissed:w,onCreated:S,...C},b){E.useMemo(()=>ui(Fw),[]);const M=Ale(),[I,T]=rle({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=E.useRef(null),R=E.useRef(null);E.useImperativeHandle(b,()=>D.current);const z=wV(w),[F,V]=E.useState(!1),[j,Z]=E.useState(!1);if(F)throw F;if(j)throw j;const U=E.useRef(null);M0(()=>{const X=D.current;T.width>0&&T.height>0&&X&&(U.current||(U.current=eB(X)),U.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:g,performance:A,raycaster:m,camera:v,scene:y,size:T,onPointerMissed:(...Q)=>z.current==null?void 0:z.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?kae(a)?a.current:a:R.current),l&&Q.setEvents({compute:(J,ne)=>{const O=J[l+"X"],N=J[l+"Y"];ne.pointer.set(O/ne.size.width*2-1,-(N/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),S==null||S(Q)}}),U.current.render(Re.jsx(M,{children:Re.jsx(SV,{set:Z,children:Re.jsx(E.Suspense,{fallback:Re.jsx(Nae,{set:V}),children:e})})})))}),E.useEffect(()=>{const X=D.current;if(X)return()=>tB(X)},[]);const $=a?"none":"auto";return Re.jsx("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...r},...C,children:Re.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:Re.jsx("canvas",{ref:D,style:{display:"block"},children:n})})})}),HV=E.forwardRef(function(e,n){return Re.jsx(NV,{children:Re.jsx(vle,{...e,ref:n})})}),yle=Object.freeze(Object.defineProperty({__proto__:null,Canvas:HV,ReactThreeFiber:zae,_roots:nd,act:nle,addAfterEffect:Uw,addEffect:Qv,addTail:Xae,advance:HT,applyProps:yr,buildGraph:J8,context:td,createEvents:RV,createPortal:ou,createRoot:eB,dispose:MV,events:GV,extend:ui,flushGlobalEffects:Jp,getRootState:qp,invalidate:GT,reconciler:r0,render:Zae,unmountComponentAtNode:tB,useFrame:Ct,useGraph:$ae,useInstanceHandle:qae,useLoader:bi,useStore:kw,useThree:Fe},Symbol.toStringTag,{value:"Module"}));let iB=Wv();const Bt=t=>Vv(t,iB);let rB=Wv();Bt.write=t=>Vv(t,rB);let Nw=Wv();Bt.onStart=t=>Vv(t,Nw);let sB=Wv();Bt.onFrame=t=>Vv(t,sB);let oB=Wv();Bt.onFinish=t=>Vv(t,oB);let Pm=[];Bt.setTimeout=(t,e)=>{let n=Bt.now()+e,i=()=>{let s=Pm.findIndex(o=>o.cancel==i);~s&&Pm.splice(s,1),Yu-=~s?1:0},r={time:n,handler:t,cancel:i};return Pm.splice(QV(n),0,r),Yu+=1,VV(),r};let QV=t=>~(~Pm.findIndex(e=>e.time>t)||~Pm.length);Bt.cancel=t=>{Nw.delete(t),sB.delete(t),oB.delete(t),iB.delete(t),rB.delete(t)};Bt.sync=t=>{VT=!0,Bt.batchedUpdates(t),VT=!1};Bt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Bt.onStart(n)}return i.handler=t,i.cancel=()=>{Nw.delete(n),e=null},i};let aB=typeof window<"u"?window.requestAnimationFrame:()=>{};Bt.use=t=>aB=t;Bt.now=typeof performance<"u"?()=>performance.now():Date.now;Bt.batchedUpdates=t=>t();Bt.catch=console.error;Bt.frameLoop="always";Bt.advance=()=>{Bt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):jV()};let Xu=-1,Yu=0,VT=!1;function Vv(t,e){VT?(e.delete(t),t(0)):(e.add(t),VV())}function VV(){Xu<0&&(Xu=0,Bt.frameLoop!=="demand"&&aB(WV))}function xle(){Xu=-1}function WV(){~Xu&&(aB(WV),Bt.batchedUpdates(jV))}function jV(){let t=Xu;Xu=Bt.now();let e=QV(Xu);if(e&&(XV(Pm.splice(0,e),n=>n.handler()),Yu-=e),!Yu){xle();return}Nw.flush(),iB.flush(t?Math.min(64,Xu-t):16.667),sB.flush(),rB.flush(),oB.flush()}function Wv(){let t=new Set,e=t;return{add(n){Yu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Yu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Yu-=e.size,XV(e,i=>i(n)&&t.add(i)),Yu+=t.size,e=t)}}}function XV(t,e){t.forEach(n=>{try{e(n)}catch(i){Bt.catch(i)}})}function WT(){}const _le=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ft={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Rc(t,e){if(ft.arr(t)){if(!ft.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const tn=(t,e)=>t.forEach(e);function Zc(t,e,n){if(ft.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}const ho=t=>ft.und(t)?[]:ft.arr(t)?t:[t];function aA(t,e){if(t.size){const n=Array.from(t);t.clear(),tn(n,e)}}const Ug=(t,...e)=>aA(t,n=>n(...e)),lB=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let cB,YV,ff=null,qV=!1,uB=WT;const $V=t=>{t.to&&(YV=t.to),t.now&&(Bt.now=t.now),t.colors!==void 0&&(ff=t.colors),t.skipAnimation!=null&&(qV=t.skipAnimation),t.createStringInterpolator&&(cB=t.createStringInterpolator),t.requestAnimationFrame&&Bt.use(t.requestAnimationFrame),t.batchedUpdates&&(Bt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(uB=t.willAdvance),t.frameLoop&&(Bt.frameLoop=t.frameLoop)};var gl=Object.freeze({__proto__:null,get createStringInterpolator(){return cB},get to(){return YV},get colors(){return ff},get skipAnimation(){return qV},get willAdvance(){return uB},assign:$V});const lA=new Set;let Aa=[],bb=[],aE=0;const jv={get idle(){return!lA.size&&!Aa.length},start(t){aE>t.priority?(lA.add(t),Bt.onStart(Ele)):(KV(t),Bt(jT))},advance:jT,sort(t){if(aE)Bt.onFrame(()=>jv.sort(t));else{const e=Aa.indexOf(t);~e&&(Aa.splice(e,1),JV(t))}},clear(){Aa=[],lA.clear()}};function Ele(){lA.forEach(KV),lA.clear(),Bt(jT)}function KV(t){Aa.includes(t)||JV(t)}function JV(t){Aa.splice(wle(Aa,e=>e.priority>t.priority),0,t)}function jT(t){const e=bb;for(let n=0;n<Aa.length;n++){const i=Aa[n];aE=i.priority,i.idle||(uB(i),i.advance(t),i.idle||e.push(i))}return aE=0,bb=Aa,bb.length=0,Aa=e,Aa.length>0}function wle(t,e){const n=t.findIndex(e);return n<0?t.length:n}const Sle=(t,e,n)=>Math.min(Math.max(n,t),e),Cle={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},sl="[-+]?\\d*\\.?\\d+",lE=sl+"%";function Gw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const ble=new RegExp("rgb"+Gw(sl,sl,sl)),Mle=new RegExp("rgba"+Gw(sl,sl,sl,sl)),Tle=new RegExp("hsl"+Gw(sl,lE,lE)),Ile=new RegExp("hsla"+Gw(sl,lE,lE,sl)),Ble=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Rle=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ple=/^#([0-9a-fA-F]{6})$/,Dle=/^#([0-9a-fA-F]{8})$/;function Lle(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ple.exec(t))?parseInt(e[1]+"ff",16)>>>0:ff&&ff[t]!==void 0?ff[t]:(e=ble.exec(t))?(rp(e[1])<<24|rp(e[2])<<16|rp(e[3])<<8|255)>>>0:(e=Mle.exec(t))?(rp(e[1])<<24|rp(e[2])<<16|rp(e[3])<<8|wL(e[4]))>>>0:(e=Ble.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Dle.exec(t))?parseInt(e[1],16)>>>0:(e=Rle.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Tle.exec(t))?(_L(EL(e[1]),dx(e[2]),dx(e[3]))|255)>>>0:(e=Ile.exec(t))?(_L(EL(e[1]),dx(e[2]),dx(e[3]))|wL(e[4]))>>>0:null}function Mb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _L(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Mb(r,i,t+1/3),o=Mb(r,i,t),a=Mb(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function rp(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function EL(t){return(parseFloat(t)%360+360)%360/360}function wL(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function dx(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function SL(t){let e=Lle(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}const s0=(t,e,n)=>{if(ft.fun(t))return t;if(ft.arr(t))return s0({range:t,output:e,extrapolate:n});if(ft.str(t.output[0]))return cB(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Ole(c,s);return Fle(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Fle(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Ole(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}const zle=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return Sle(0,1,r/t)},cE=1.70158,px=cE*1.525,CL=cE+1,bL=2*Math.PI/3,ML=2*Math.PI/4.5,mx=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,ZV={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>CL*t*t*t-cE*t*t,easeOutBack:t=>1+CL*Math.pow(t-1,3)+cE*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((px+1)*2*t-px)/2:(Math.pow(2*t-2,2)*((px+1)*(t*2-2)+px)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*bL),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*bL)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*ML))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*ML)/2+1,easeInBounce:t=>1-mx(1-t),easeOutBounce:mx,easeInOutBounce:t=>t<.5?(1-mx(1-2*t))/2:(1+mx(2*t-1))/2,steps:zle};function XT(){return XT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},XT.apply(this,arguments)}const o0=Symbol.for("FluidValue.get"),id=Symbol.for("FluidValue.observers"),Ql=t=>!!(t&&t[o0]),ca=t=>t&&t[o0]?t[o0]():t,TL=t=>t[id]||null;function Ule(t,e){t.eventObserved?t.eventObserved(e):t(e)}function uE(t,e){let n=t[id];n&&n.forEach(i=>{Ule(i,e)})}let kle=class{constructor(e){if(this[o0]=void 0,this[id]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Nle(this,e)}};const Nle=(t,e)=>eW(t,o0,e);function Xv(t,e){if(t[o0]){let n=t[id];n||eW(t,id,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function fE(t,e){let n=t[id];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[id]=null,t.observerRemoved&&t.observerRemoved(i,e)}}const eW=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Q_=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Gle=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,IL=new RegExp(`(${Q_.source})(%|[a-z]+)`,"i"),Hle=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Hw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,tW=t=>{const[e,n]=Qle(t);if(!e||lB())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Hw.test(n))return tW(n);if(n)return n}return t},Qle=t=>{const e=Hw.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]};let Tb;const Vle=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,nW=t=>{Tb||(Tb=ff?new RegExp(`(${Object.keys(ff).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ca(s).replace(Hw,tW).replace(Gle,SL).replace(Tb,SL)),n=e.map(s=>s.match(Q_).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>s0(XT({},t,{output:s})));return s=>{var o;const a=!IL.test(e[0])&&((o=e.find(c=>IL.test(c)))==null?void 0:o.replace(Q_,""));let l=0;return e[0].replace(Q_,()=>`${r[l++](s)}${a||""}`).replace(Hle,Vle)}},fB="react-spring: ",iW=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${fB}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Wle=iW(console.warn);function rW(){Wle(`${fB}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const jle=iW(console.warn);function Xle(){jle(`${fB}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Qw(t){return ft.str(t)&&(t[0]=="#"||/\d/.test(t)||!lB()&&Hw.test(t)||t in(ff||{}))}let sp;const V_=new WeakMap,Yle=t=>t.forEach(({target:e,contentRect:n})=>{var i;return(i=V_.get(e))==null?void 0:i.forEach(r=>r(n))});function qle(t,e){sp||typeof ResizeObserver<"u"&&(sp=new ResizeObserver(Yle));let n=V_.get(e);return n||(n=new Set,V_.set(e,n)),n.add(t),sp&&sp.observe(e),()=>{const i=V_.get(e);i&&(i.delete(t),!i.size&&sp&&sp.unobserve(e))}}const W_=new Set;let P1;const $le=()=>{const t=()=>{W_.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},Kle=t=>(W_.add(t),P1||(P1=$le()),()=>{W_.delete(t),!W_.size&&P1&&(P1(),P1=void 0)}),sW=(t,{container:e=document.documentElement}={})=>e===document.documentElement?Kle(t):qle(t,e),Jle=(t,e,n)=>e-t===0?1:(n-t)/(e-t),Zle={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class ece{constructor(e,n){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=i=>{const r=this.info[i],{length:s,position:o}=Zle[i];r.current=this.container[`scroll${o}`],r.scrollLength=this.container["scroll"+s]-this.container["client"+s],r.progress=Jle(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=n,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const D1=new WeakMap,BL=new WeakMap,Ib=new WeakMap,RL=t=>t===document.documentElement?window:t,tce=(t,{container:e=document.documentElement}={})=>{let n=Ib.get(e);n||(n=new Set,Ib.set(e,n));const i=new ece(t,e);if(n.add(i),!D1.has(e)){const s=()=>{var a;return(a=n)==null||a.forEach(l=>l.advance()),!0};D1.set(e,s);const o=RL(e);window.addEventListener("resize",s,{passive:!0}),e!==document.documentElement&&BL.set(e,sW(s,{container:e})),o.addEventListener("scroll",s,{passive:!0})}const r=D1.get(e);return Bt(r),()=>{Bt.cancel(r);const s=Ib.get(e);if(!s||(s.delete(i),s.size))return;const o=D1.get(e);if(D1.delete(e),o){var a;RL(e).removeEventListener("scroll",o),window.removeEventListener("resize",o),(a=BL.get(e))==null||a()}}};function nce(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const po=lB()?E.useEffect:E.useLayoutEffect,ice=()=>{const t=E.useRef(!1);return po(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function hB(){const t=E.useState()[1],e=ice();return()=>{e.current&&t(Math.random())}}function rce(t,e){const[n]=E.useState(()=>({inputs:e,result:t()})),i=E.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&sce(e,s.inputs)||(s={inputs:e,result:t()}):s=n,E.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function sce(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const Vw=t=>E.useEffect(t,oce),oce=[];function YT(t){const e=E.useRef();return E.useEffect(()=>{e.current=t}),e.current}const ace=()=>{const[t,e]=E.useState(null);return po(()=>{const n=window.matchMedia("(prefers-reduced-motion)"),i=r=>{e(r.matches),$V({skipAnimation:r.matches})};return i(n),n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},[]),t},ov=Symbol.for("Animated:node"),lce=t=>!!t&&t[ov]===t,Nl=t=>t&&t[ov],dB=(t,e)=>_le(t,ov,e),Ww=t=>t&&t[ov]&&t[ov].getPayload();let oW=class{constructor(){this.payload=void 0,dB(this,this)}getPayload(){return this.payload||[]}},jw=class aW extends oW{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,ft.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new aW(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return ft.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,ft.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},hE=class lW extends jw{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=s0({output:[e,e]})}static create(e){return new lW(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(ft.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=s0({output:[this.getValue(),e]})),this._value=0,super.reset()}};const dE={dependencies:null};let pB=class extends oW{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return Zc(this.source,(i,r)=>{lce(i)?n[r]=i.getValue(e):Ql(i)?n[r]=ca(i):e||(n[r]=i)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&tn(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return Zc(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){dE.dependencies&&Ql(e)&&dE.dependencies.add(e);const n=Ww(e);n&&tn(n,i=>this.add(i))}},cce=class cW extends pB{constructor(e){super(e)}static create(e){return new cW(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(uce)),!0)}};function uce(t){return(Qw(t)?hE:jw).create(t)}function qT(t){const e=Nl(t);return e?e.constructor:ft.arr(t)?cce:Qw(t)?hE:jw}function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pE.apply(this,arguments)}const PL=(t,e)=>{const n=!ft.fun(t)||t.prototype&&t.prototype.isReactComponent;return E.forwardRef((i,r)=>{const s=E.useRef(null),o=n&&E.useCallback(p=>{s.current=dce(r,p)},[r]),[a,l]=hce(i,e),c=hB(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},f=new fce(u,l),h=E.useRef();po(()=>(h.current=f,tn(l,p=>Xv(p,f)),()=>{h.current&&(tn(h.current.deps,p=>fE(p,h.current)),Bt.cancel(h.current.update))})),E.useEffect(u,[]),Vw(()=>()=>{const p=h.current;tn(p.deps,g=>fE(g,p))});const d=e.getComponentProps(a.getValue());return E.createElement(t,pE({},d,{ref:o}))})};let fce=class{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&Bt.write(this.update)}};function hce(t,e){const n=new Set;return dE.dependencies=n,t.style&&(t=pE({},t,{style:e.createAnimatedStyle(t.style)})),t=new pB(t),dE.dependencies=null,[t,n]}function dce(t,e){return t&&(ft.fun(t)?t(e):t.current=e),e}const DL=Symbol.for("AnimatedComponent"),pce=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new pB(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=LL(o)||"Anonymous";return ft.str(o)?o=s[o]||(s[o]=PL(o,r)):o=o[DL]||(o[DL]=PL(o,r)),o.displayName=`Animated(${a})`,o};return Zc(t,(o,a)=>{ft.arr(t)&&(a=LL(o)),s[a]=s(o)}),{animated:s}},LL=t=>ft.str(t)?t:t&&ft.str(t.displayName)?t.displayName:ft.fun(t)&&t.name||null;function Ai(){return Ai=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ai.apply(this,arguments)}function Ns(t,...e){return ft.fun(t)?t(...e):t}const cA=(t,e)=>t===!0||!!(e&&t&&(ft.fun(t)?t(e):ho(t).includes(e))),uW=(t,e)=>ft.obj(t)?e&&t[e]:t,fW=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,mce=t=>t,Xw=(t,e=mce)=>{let n=gce;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);ft.und(s)||(i[r]=s)}return i},gce=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Ace={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function vce(t){const e={};let n=0;if(Zc(t,(i,r)=>{Ace[r]||(e[r]=i,n++)}),n)return e}function Yw(t){const e=vce(t);if(e){const n={to:e};return Zc(t,(i,r)=>r in e||(n[r]=i)),n}return Ai({},t)}function av(t){return t=ca(t),ft.arr(t)?t.map(av):Qw(t)?gl.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function hW(t){for(const e in t)return!0;return!1}function $T(t){return ft.fun(t)||ft.arr(t)&&ft.obj(t[0])}function KT(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function mB(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}function yce(t,e,n=1e3){po(()=>{if(e){let i=0;tn(t,(r,s)=>{const o=r.current;if(o.length){let a=n*e[s];isNaN(a)?a=i:i=a,tn(o,l=>{tn(l.queue,c=>{const u=c.delay;c.delay=f=>a+Ns(u||0,f)})}),r.start()}})}else{let i=Promise.resolve();tn(t,r=>{const s=r.current;if(s.length){const o=s.map(a=>{const l=a.queue;return a.queue=[],l});i=i.then(()=>(tn(s,(a,l)=>tn(o[l]||[],c=>a.queue.push(c))),Promise.all(r.start())))}})}})}const dW={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},JT=Ai({},dW.default,{mass:1,damping:1,easing:ZV.linear,clamp:!1});let xce=class{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,JT)}};function _ce(t,e,n){n&&(n=Ai({},n),FL(n,e),e=Ai({},n,e)),FL(t,e),Object.assign(t,e);for(const o in JT)t[o]==null&&(t[o]=JT[o]);let{mass:i,frequency:r,damping:s}=t;return ft.und(r)||(r<.01&&(r=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/r,2)*i,t.friction=4*Math.PI*s*i/r),t}function FL(t,e){if(!ft.und(e.decay))t.duration=void 0;else{const n=!ft.und(e.tension)||!ft.und(e.friction);(n||!ft.und(e.frequency)||!ft.und(e.damping)||!ft.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const OL=[];let Ece=class{constructor(){this.changed=!1,this.values=OL,this.toValues=null,this.fromValues=OL,this.to=void 0,this.from=void 0,this.config=new xce,this.immediate=!1}};function pW(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=cA((l=n.cancel)!=null?l:i==null?void 0:i.cancel,e);if(f)p();else{ft.und(n.pause)||(r.paused=cA(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||cA(g,e)),c=Ns(n.delay||0,e),g?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function h(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-Bt.now()}function d(){c>0&&!gl.skipAnimation?(r.delayed=!0,u=Bt.setTimeout(p,c),r.pauseQueue.add(h),r.timeouts.add(u)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(u),t<=(r.cancelId||0)&&(f=!0);try{s.start(Ai({},n,{callId:t,cancel:f}),o)}catch(g){a(g)}}})}const gB=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Dm(t.get()):e.every(n=>n.noop)?mW(t.get()):nl(t.get(),e.every(n=>n.finished)),mW=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),nl=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Dm=t=>({value:t,cancelled:!0,finished:!1});function gW(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=Xw(e,(A,m)=>m==="onRest"?void 0:A);let u,f;const h=new Promise((A,m)=>(u=A,f=m)),d=A=>{const m=r<=(n.cancelId||0)&&Dm(i)||r!==n.asyncId&&nl(i,!1);if(m)throw A.result=m,f(A),A},p=(A,m)=>{const v=new ZT,y=new zL;return(async()=>{if(gl.skipAnimation)throw lv(n),y.result=nl(i,!1),f(y),y;d(v);const w=ft.obj(A)?Ai({},A):Ai({},m,{to:A});w.parentId=r,Zc(c,(C,b)=>{ft.und(w[b])&&(w[b]=C)});const S=await i.start(w);return d(v),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),S})()};let g;if(gl.skipAnimation)return lv(n),nl(i,!1);try{let A;ft.arr(t)?A=(async m=>{for(const v of m)await p(v)})(t):A=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([A.then(u),h]),g=nl(i.get(),!0,!1)}catch(A){if(A instanceof ZT)g=A.result;else if(A instanceof zL)g=A.result;else throw A}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return ft.fun(o)&&Bt.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function lv(t,e){aA(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}let ZT=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}},zL=class extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}};const eI=t=>t instanceof qw;let wce=1,qw=class extends kle{constructor(...e){super(...e),this.id=wce++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Nl(this);return e&&e.getValue()}to(...e){return gl.to(this,e)}interpolate(...e){return rW(),gl.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){uE(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||jv.sort(this),uE(this,{type:"priority",parent:this,priority:e})}};const rd=Symbol.for("SpringPhase"),AW=1,tI=2,nI=4,Bb=t=>(t[rd]&AW)>0,Mu=t=>(t[rd]&tI)>0,L1=t=>(t[rd]&nI)>0,UL=(t,e)=>e?t[rd]|=tI|AW:t[rd]&=~tI,kL=(t,e)=>e?t[rd]|=nI:t[rd]&=~nI;let AB=class extends qw{constructor(e,n){if(super(),this.key=void 0,this.animation=new Ece,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ft.und(e)||!ft.und(n)){const i=ft.obj(e)?Ai({},e):Ai({},n,{from:e});ft.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Mu(this)||this._state.asyncTo)||L1(this)}get goal(){return ca(this.animation.to)}get velocity(){const e=Nl(this);return e instanceof jw?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return Bb(this)}get isAnimating(){return Mu(this)}get isPaused(){return L1(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=Ww(r.to);!a&&Ql(r.to)&&(o=ho(ca(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const h=u.constructor==hE?1:a?a[f].lastPosition:o[f];let d=r.immediate,p=h;if(!d){if(p=u.lastPosition,s.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const A=r.fromValues[f],m=u.v0!=null?u.v0:u.v0=ft.arr(s.velocity)?s.velocity[f]:s.velocity;let v;const y=s.precision||(A==h?.005:Math.min(1,Math.abs(h-A)*.001));if(ft.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);p=A+m/(1-w)*(1-S),d=Math.abs(u.lastPosition-p)<=y,v=m*S}else{v=u.lastVelocity==null?m:u.lastVelocity;const w=s.restVelocity||y/10,S=s.clamp?0:s.bounce,C=!ft.und(S),b=A==h?u.v0>0:A<h;let M,I=!1;const T=1,D=Math.ceil(e/T);for(let R=0;R<D&&(M=Math.abs(v)>w,!(!M&&(d=Math.abs(h-p)<=y,d)));++R){C&&(I=p==h||p>h==b,I&&(v=-v*S,p=h));const z=-s.tension*1e-6*(p-h),F=-s.friction*.001*v,V=(z+F)/s.mass;v=v+V*T,p=p+v*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,g=u.elapsedTime+=e)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),p=A+s.easing(w)*(h-A),v=(p-u.lastPosition)/e,d=w==1}u.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[f].done&&(d=!1),d?u.done=!0:n=!1,u.setValue(p,s.round)&&(i=!0)});const l=Nl(this),c=l.getValue();if(n){const u=ca(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return Bt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Mu(this)){const{to:e,config:n}=this.animation;Bt.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let i;return ft.und(e)?(i=this.queue||[],this.queue=[]):i=[ft.obj(e)?e:Ai({},n,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>gB(this,r))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),lv(this._state,e&&this._lastCallId),Bt.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:i,from:r}=e;i=ft.obj(i)?i[n]:i,(i==null||$T(i))&&(i=void 0),r=ft.obj(r)?r[n]:r,r==null&&(r=void 0);const s={to:i,from:r};return Bb(this)||(e.reverse&&([i,r]=[r,i]),r=ca(r),ft.und(r)?Nl(this)||this._set(i):this._set(r)),s}_update(e,n){let i=Ai({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,Xw(i,(l,c)=>/^on/.test(c)?uW(l,r):l)),GL(this,i,"onProps"),O1(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return pW(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{L1(this)||(kL(this,!0),Ug(a.pauseQueue),O1(this,"onPause",nl(this,F1(this,this.animation.to)),this))},resume:()=>{L1(this)&&(kL(this,!1),Mu(this)&&this._resume(),Ug(a.resumeQueue),O1(this,"onResume",nl(this,F1(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(n&&l.noop)){const c=vW(i);if(c)return this._update(c,!0)}return l})}_merge(e,n,i){if(n.cancel)return this.stop(!0),i(Dm(this));const r=!ft.und(e.to),s=!ft.und(e.from);if(r||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return i(Dm(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:h=u}=e;s&&!r&&(!n.default||ft.und(f))&&(f=h),n.reverse&&([f,h]=[h,f]);const d=!Rc(h,u);d&&(l.from=h),h=ca(h);const p=!Rc(f,c);p&&this._focus(f);const g=$T(n.to),{config:A}=l,{decay:m,velocity:v}=A;(r||s)&&(A.velocity=0),n.config&&!g&&_ce(A,Ns(n.config,o),n.config!==a.config?Ns(a.config,o):void 0);let y=Nl(this);if(!y||ft.und(f))return i(nl(this,!0));const w=ft.und(n.reset)?s&&!n.default:!ft.und(h)&&cA(n.reset,o),S=w?h:this.get(),C=av(f),b=ft.num(C)||ft.arr(C)||Qw(C),M=!g&&(!b||cA(a.immediate||n.immediate,o));if(p){const R=qT(f);if(R!==y.constructor)if(M)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const I=y.constructor;let T=Ql(f),D=!1;if(!T){const R=w||!Bb(this)&&d;(p||R)&&(D=Rc(av(S),C),T=!D),(!Rc(l.immediate,M)&&!M||!Rc(A.decay,m)||!Rc(A.velocity,v))&&(T=!0)}if(D&&Mu(this)&&(l.changed&&!w?T=!0:T||this._stop(c)),!g&&((T||Ql(c))&&(l.values=y.getPayload(),l.toValues=Ql(f)?null:I==hE?[1]:ho(C)),l.immediate!=M&&(l.immediate=M,!M&&!w&&this._set(c)),T)){const{onRest:R}=l;tn(Cce,F=>GL(this,n,F));const z=nl(this,F1(this,c));Ug(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&Bt.batchedUpdates(()=>{l.changed=!w,R==null||R(z,this),w?Ns(a.onRest,z):l.onStart==null||l.onStart(z,this)})}w&&this._set(S),g?i(gW(n.to,n,this._state,this)):T?this._start():Mu(this)&&!p?this._pendingCalls.add(i):i(mW(S))}_focus(e){const n=this.animation;e!==n.to&&(TL(this)&&this._detach(),n.to=e,TL(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;Ql(n)&&(Xv(n,this),eI(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ql(e)&&fE(e,this)}_set(e,n=!0){const i=ca(e);if(!ft.und(i)){const r=Nl(this);if(!r||!Rc(i,r.getValue())){const s=qT(i);!r||r.constructor!=s?dB(this,s.create(i)):r.setValue(i),r&&Bt.batchedUpdates(()=>{this._onChange(i,n)})}}return Nl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,O1(this,"onStart",nl(this,F1(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),Ns(this.animation.onChange,e,this)),Ns(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;Nl(this).reset(ca(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),Mu(this)||(UL(this,!0),L1(this)||this._resume())}_resume(){gl.skipAnimation?this.finish():jv.start(this)}_stop(e,n){if(Mu(this)){UL(this,!1);const i=this.animation;tn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),uE(this,{type:"idle",parent:this});const r=n?Dm(this.get()):nl(this.get(),F1(this,e??i.to));Ug(this._pendingCalls,r),i.changed&&(i.changed=!1,O1(this,"onRest",r,this))}}};function F1(t,e){const n=av(e),i=av(t.get());return Rc(i,n)}function vW(t,e=t.loop,n=t.to){let i=Ns(e);if(i){const r=i!==!0&&Yw(i),s=(r||t).reverse,o=!r||r.reset;return cv(Ai({},t,{loop:e,default:!1,pause:void 0,to:!s||$T(n)?n:void 0,from:o?t.from:void 0,reset:o},r))}}function cv(t){const{to:e,from:n}=t=Yw(t),i=new Set;return ft.obj(e)&&NL(e,i),ft.obj(n)&&NL(n,i),t.keys=i.size?Array.from(i):null,t}function Sce(t){const e=cv(t);return ft.und(e.default)&&(e.default=Xw(e)),e}function NL(t,e){Zc(t,(n,i)=>n!=null&&e.add(i))}const Cce=["onStart","onRest","onChange","onPause","onResume"];function GL(t,e,n){t.animation[n]=e[n]!==fW(e,n)?uW(e[n],t.key):void 0}function O1(t,e,...n){var i,r,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(s=(o=t.defaultProps)[e])==null||s.call(o,...n)}const bce=["onStart","onChange","onRest"];let Mce=1,vB=class{constructor(e,n){this.id=Mce++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(Ai({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,i)=>e[i]=n.get()),e}set(e){for(const n in e){const i=e[n];ft.und(i)||this.springs[n].set(i)}}update(e){return e&&this.queue.push(cv(e)),this}start(e){let{queue:n}=this;return e?n=ho(e).map(cv):this.queue=[],this._flush?this._flush(this,n):(wW(this,n),iI(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const i=this.springs;tn(ho(n),r=>i[r].stop(!!e))}else lv(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(ft.und(e))this.start({pause:!0});else{const n=this.springs;tn(ho(e),i=>n[i].pause())}return this}resume(e){if(ft.und(e))this.start({pause:!1});else{const n=this.springs;tn(ho(e),i=>n[i].resume())}return this}each(e){Zc(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,aA(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&n.size&&aA(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,aA(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Bt.onFrame(this._onFrame)}};function iI(t,e){return Promise.all(e.map(n=>yW(t,n))).then(n=>gB(t,n))}async function yW(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=ft.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=ft.arr(r)||ft.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):tn(bce,g=>{const A=e[g];if(ft.fun(A)){const m=t._events[g];e[g]=({finished:v,cancelled:y})=>{const w=m.get(A);w?(v||(w.finished=!1),y&&(w.cancelled=!0)):m.set(A,{value:null,finished:v||!1,cancelled:y||!1})},c&&(c[g]=e[g])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,Ug(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),d=e.cancel===!0||fW(e,"cancel")===!0;(u||d&&f.asyncId)&&h.push(pW(++t._lastAsyncId,{props:e,state:f,actions:{pause:WT,resume:WT,start(g,A){d?(lv(f,t._lastAsyncId),A(Dm(t))):(g.onRest=a,A(gW(u,g,f,t)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const p=gB(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const g=vW(e,o,r);if(g)return wW(t,[g]),yW(t,g,!0)}return l&&Bt.batchedUpdates(()=>l(p,t,t.item)),p}function rI(t,e){const n=Ai({},t.springs);return e&&tn(ho(e),i=>{ft.und(i.keys)&&(i=cv(i)),ft.obj(i.to)||(i=Ai({},i,{to:void 0})),EW(n,i,r=>_W(r))}),xW(t,n),n}function xW(t,e){Zc(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Xv(n,t))})}function _W(t,e){const n=new AB;return n.key=t,e&&Xv(n,e),n}function EW(t,e,n){e.keys&&tn(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function wW(t,e){tn(e,n=>{EW(t.springs,n,i=>_W(i,t))})}function wf(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const Tce=["children"],T0=t=>{let{children:e}=t,n=wf(t,Tce);const i=E.useContext(mE),r=n.pause||!!i.pause,s=n.immediate||!!i.immediate;n=rce(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=mE;return E.createElement(o,{value:n},e)},mE=Ice(T0,{});T0.Provider=mE.Provider;T0.Consumer=mE.Consumer;function Ice(t,e){return Object.assign(t,E.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const $w=()=>{const t=[],e=function(r){Xle();const s=[];return tn(t,(o,a)=>{if(ft.und(r))s.push(o.start());else{const l=n(r,o,a);l&&s.push(o.start(l))}}),s};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return tn(t,i=>i.pause(...arguments)),this},e.resume=function(){return tn(t,i=>i.resume(...arguments)),this},e.set=function(i){tn(t,r=>r.set(i))},e.start=function(i){const r=[];return tn(t,(s,o)=>{if(ft.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return tn(t,i=>i.stop(...arguments)),this},e.update=function(i){return tn(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(r,s,o){return ft.fun(r)?r(o,s):r};return e._getProps=n,e};function yB(t,e,n){const i=ft.fun(e)&&e;i&&!n&&(n=[]);const r=E.useMemo(()=>i||arguments.length==3?$w():void 0,[]),s=E.useRef(0),o=hB(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(m,v){const y=rI(m,v);return s.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!m.springs[S])?iI(m,v):new Promise(S=>{xW(m,y),a.queue.push(()=>{S(iI(m,v))}),o()})}}),[]),l=E.useRef([...a.ctrls]),c=[],u=YT(t)||0;E.useMemo(()=>{tn(l.current.slice(t,u),m=>{KT(m,r),m.stop(!0)}),l.current.length=t,f(u,t)},[t]),E.useMemo(()=>{f(0,Math.min(u,t))},n);function f(m,v){for(let y=m;y<v;y++){const w=l.current[y]||(l.current[y]=new vB(null,a.flush)),S=i?i(y,w):e[y];S&&(c[y]=Sce(S))}}const h=l.current.map((m,v)=>rI(m,c[v])),d=E.useContext(T0),p=YT(d),g=d!==p&&hW(d);po(()=>{s.current++,a.ctrls=l.current;const{queue:m}=a;m.length&&(a.queue=[],tn(m,v=>v())),tn(l.current,(v,y)=>{r==null||r.add(v),g&&v.start({default:d});const w=c[y];w&&(mB(v,w.ref),v.ref?v.queue.push(w):v.start(w))})}),Vw(()=>()=>{tn(a.ctrls,m=>m.stop(!0))});const A=h.map(m=>Ai({},m));return r?[A,r]:A}function sd(t,e){const n=ft.fun(t),[[i],r]=yB(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}const Bce=()=>$w(),Rce=()=>E.useState(Bce)[0],Pce=(t,e)=>{const n=nce(()=>new AB(t,e));return Vw(()=>()=>{n.stop()}),n};function SW(t,e,n){const i=ft.fun(e)&&e;i&&!n&&(n=[]);let r=!0,s;const o=yB(t,(l,c)=>{const u=i?i(l,c):e;return s=u.ref,r=r&&u.reverse,u},n||[{}]);if(po(()=>{tn(o[1].current,(l,c)=>{const u=o[1].current[c+(r?1:-1)];if(mB(l,s),l.ref){u&&l.update({to:u.springs});return}u?l.start({to:u.springs}):l.start()})},n),i||arguments.length==3){var a;const l=(a=s)!=null?a:o[1];return l._getProps=(c,u,f)=>{const h=ft.fun(c)?c(f,u):c;if(h){const d=l.current[f+(h.reverse?1:-1)];return d&&(h.to=d.springs),h}},o}return o[0]}let zs;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(zs||(zs={}));function CW(t,e,n){const i=ft.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:f}=i?i():e,h=E.useMemo(()=>i||arguments.length==3?$w():void 0,[]),d=ho(t),p=[],g=E.useRef(null),A=r?null:g.current;po(()=>{g.current=p}),Vw(()=>(tn(p,F=>{h==null||h.add(F.ctrl),F.ctrl.ref=h}),()=>{tn(g.current,F=>{F.expired&&clearTimeout(F.expirationId),KT(F.ctrl,h),F.ctrl.stop(!0)})}));const m=Lce(d,i?i():e,A),v=r&&g.current||[];po(()=>tn(v,({ctrl:F,item:V,key:j})=>{KT(F,h),Ns(c,V,j)}));const y=[];if(A&&tn(A,(F,V)=>{F.expired?(clearTimeout(F.expirationId),v.push(F)):(V=y[V]=m.indexOf(F.key),~V&&(p[V]=F))}),tn(d,(F,V)=>{p[V]||(p[V]={key:m[V],item:F,phase:zs.MOUNT,ctrl:new vB},p[V].ctrl.item=F)}),y.length){let F=-1;const{leave:V}=i?i():e;tn(y,(j,Z)=>{const U=A[Z];~j?(F=p.indexOf(U),p[F]=Ai({},U,{item:d[j]})):V&&p.splice(++F,0,U)})}ft.fun(s)&&p.sort((F,V)=>s(F.item,V.item));let w=-o;const S=hB(),C=Xw(e),b=new Map,M=E.useRef(new Map),I=E.useRef(!1);tn(p,(F,V)=>{const j=F.key,Z=F.phase,U=i?i():e;let $,X,Q=Ns(U.delay||0,j);if(Z==zs.MOUNT)$=U.enter,X=zs.ENTER;else{const N=m.indexOf(j)<0;if(Z!=zs.LEAVE)if(N)$=U.leave,X=zs.LEAVE;else if($=U.update)X=zs.UPDATE;else return;else if(!N)$=U.enter,X=zs.ENTER;else return}if($=Ns($,F.item,V),$=ft.obj($)?Yw($):{to:$},!$.config){const N=f||C.config;$.config=Ns(N,F.item,V,X)}w+=o;const J=Ai({},C,{delay:Q+w,ref:u,immediate:U.immediate,reset:!1},$);if(X==zs.ENTER&&ft.und(J.from)){const N=i?i():e,G=ft.und(N.initial)||A?N.from:N.initial;J.from=Ns(G,F.item,V)}const{onResolve:ne}=J;J.onResolve=N=>{Ns(ne,N);const G=g.current,H=G.find(oe=>oe.key===j);if(H&&!(N.cancelled&&H.phase!=zs.UPDATE)&&H.ctrl.idle){const oe=G.every(de=>de.ctrl.idle);if(H.phase==zs.LEAVE){const de=Ns(a,H.item);if(de!==!1){const ce=de===!0?0:de;if(H.expired=!0,!oe&&ce>0){ce<=2147483647&&(H.expirationId=setTimeout(S,ce));return}}}oe&&G.some(de=>de.expired)&&(M.current.delete(H),l&&(I.current=!0),S())}};const O=rI(F.ctrl,J);X===zs.LEAVE&&l?M.current.set(F,{phase:X,springs:O,payload:J}):b.set(F,{phase:X,springs:O,payload:J})});const T=E.useContext(T0),D=YT(T),R=T!==D&&hW(T);po(()=>{R&&tn(p,F=>{F.ctrl.start({default:T})})},[T]),tn(b,(F,V)=>{if(M.current.size){const j=p.findIndex(Z=>Z.key===V.key);p.splice(j,1)}}),po(()=>{tn(M.current.size?M.current:b,({phase:F,payload:V},j)=>{const{ctrl:Z}=j;j.phase=F,h==null||h.add(Z),R&&F==zs.ENTER&&Z.start({default:T}),V&&(mB(Z,V.ref),(Z.ref||h)&&!I.current?Z.update(V):(Z.start(V),I.current&&(I.current=!1)))})},r?void 0:n);const z=F=>E.createElement(E.Fragment,null,p.map((V,j)=>{const{springs:Z}=b.get(V)||V.ctrl,U=F(Ai({},Z),V.item,V,j);return U&&U.type?E.createElement(U.type,Ai({},U.props,{key:ft.str(V.key)||ft.num(V.key)?V.key:V.ctrl.id,ref:U.ref})):U}));return h?[z,h]:z}let Dce=1;function Lce(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!==zs.LEAVE&&!r.has(a));return o?(r.add(o),o.key):Dce++})}return ft.und(n)?t:ft.fun(n)?t.map(n):ho(n)}const Fce=["container"],Oce=(t={})=>{let{container:e}=t,n=wf(t,Fce);const[i,r]=sd(()=>Ai({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},n),[]);return po(()=>{const s=tce(({x:o,y:a})=>{r.start({scrollX:o.current,scrollXProgress:o.progress,scrollY:a.current,scrollYProgress:a.progress})},{container:(e==null?void 0:e.current)||void 0});return()=>{tn(Object.values(i),o=>o.stop()),s()}},[]),i},zce=["container"],Uce=t=>{let{container:e}=t,n=wf(t,zce);const[i,r]=sd(()=>Ai({width:0,height:0},n),[]);return po(()=>{const s=sW(({width:o,height:a})=>{r.start({width:o,height:a,immediate:i.width.get()===0||i.height.get()===0})},{container:(e==null?void 0:e.current)||void 0});return()=>{tn(Object.values(i),o=>o.stop()),s()}},[]),i},kce=["to","from"],Nce=["root","once","amount"],Gce={any:0,all:1};function Hce(t,e){const[n,i]=E.useState(!1),r=E.useRef(),s=ft.fun(t)&&t,o=s?s():{},{to:a={},from:l={}}=o,c=wf(o,kce),u=s?e:t,[f,h]=sd(()=>Ai({from:l},c),[]);return po(()=>{const d=r.current,p=u??{},{root:g,once:A,amount:m="any"}=p,v=wf(p,Nce);if(!d||A&&n||typeof IntersectionObserver>"u")return;const y=new WeakMap,w=()=>(a&&h.start(a),i(!0),A?void 0:()=>{l&&h.start(l),i(!1)}),S=b=>{b.forEach(M=>{const I=y.get(M.target);if(M.isIntersecting!==!!I)if(M.isIntersecting){const T=w();ft.fun(T)?y.set(M.target,T):C.unobserve(M.target)}else I&&(I(),y.delete(M.target))})},C=new IntersectionObserver(S,Ai({root:g&&g.current||void 0,threshold:typeof m=="number"||Array.isArray(m)?m:Gce[m]},v));return C.observe(d),()=>C.unobserve(d)},[u]),s?[r,f]:[r,n]}const Qce=["children"];function Vce(t){let{children:e}=t,n=wf(t,Qce);return e(sd(n))}const Wce=["items","children"];function jce(t){let{items:e,children:n}=t,i=wf(t,Wce);const r=SW(e.length,i);return e.map((s,o)=>{const a=n(s,o);return ft.fun(a)?a(r[o]):a})}const Xce=["items","children"];function Yce(t){let{items:e,children:n}=t,i=wf(t,Xce);return CW(e,i)(n)}let Kw=class extends qw{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=s0(...n);const i=this._get(),r=qT(i);dB(this,r.create(i))}advance(e){const n=this._get(),i=this.get();Rc(n,i)||(Nl(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&HL(this._active)&&Rb(this)}_get(){const e=ft.arr(this.source)?this.source.map(ca):ho(ca(this.source));return this.calc(...e)}_start(){this.idle&&!HL(this._active)&&(this.idle=!1,tn(Ww(this),e=>{e.done=!1}),gl.skipAnimation?(Bt.batchedUpdates(()=>this.advance()),Rb(this)):jv.start(this))}_attach(){let e=1;tn(ho(this.source),n=>{Ql(n)&&Xv(n,this),eI(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){tn(ho(this.source),e=>{Ql(e)&&fE(e,this)}),this._active.clear(),Rb(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ho(this.source).reduce((n,i)=>Math.max(n,(eI(i)?i.priority:0)+1),0))}};function qce(t){return t.idle!==!1}function HL(t){return!t.size||Array.from(t).every(qce)}function Rb(t){t.idle||(t.idle=!0,tn(Ww(t),e=>{e.done=!0}),uE(t,{type:"idle",parent:t}))}const $ce=(t,...e)=>new Kw(t,e),Kce=(t,...e)=>(rW(),new Kw(t,e));gl.assign({createStringInterpolator:nW,to:(t,e)=>new Kw(t,e)});const Jce=jv.advance,Zce=["primitive"].concat(Object.keys(Fw).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));gl.assign({createStringInterpolator:nW,colors:Cle,frameLoop:"demand"});Qv(()=>{Bt.advance()});const eue=pce(Zce,{applyAnimatedValues:yr}),sI=eue.animated,tue=Object.freeze(Object.defineProperty({__proto__:null,BailSignal:ZT,Controller:vB,FrameValue:qw,Globals:gl,Interpolation:Kw,Spring:Vce,SpringContext:T0,SpringRef:$w,SpringValue:AB,Trail:jce,Transition:Yce,a:sI,animated:sI,config:dW,createInterpolator:s0,easings:ZV,inferTo:Yw,interpolate:Kce,to:$ce,update:Jce,useChain:yce,useInView:Hce,useIsomorphicLayoutEffect:po,useReducedMotion:ace,useResize:Uce,useScroll:Oce,useSpring:sd,useSpringRef:Rce,useSpringValue:Pce,useSprings:yB,useTrail:SW,useTransition:CW},Symbol.toStringTag,{value:"Module"}));var nue=Object.create,Jw=Object.defineProperty,iue=Object.defineProperties,rue=Object.getOwnPropertyDescriptor,sue=Object.getOwnPropertyDescriptors,oue=Object.getOwnPropertyNames,gE=Object.getOwnPropertySymbols,aue=Object.getPrototypeOf,xB=Object.prototype.hasOwnProperty,bW=Object.prototype.propertyIsEnumerable,QL=(t,e,n)=>e in t?Jw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ci=(t,e)=>{for(var n in e||(e={}))xB.call(e,n)&&QL(t,n,e[n]);if(gE)for(var n of gE(e))bW.call(e,n)&&QL(t,n,e[n]);return t},Sf=(t,e)=>iue(t,sue(e)),Cf=(t,e)=>{var n={};for(var i in t)xB.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&gE)for(var i of gE(t))e.indexOf(i)<0&&bW.call(t,i)&&(n[i]=t[i]);return n},Yv=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),au=(t,e)=>{for(var n in e)Jw(t,n,{get:e[n],enumerable:!0})},lue=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of oue(e))!xB.call(t,r)&&r!==n&&Jw(t,r,{get:()=>e[r],enumerable:!(i=rue(e,r))||i.enumerable});return t},cue=(t,e,n)=>(n=t!=null?nue(aue(t)):{},lue(!t||!t.__esModule?Jw(n,"default",{value:t,enumerable:!0}):n,t)),VL=(t,e,n)=>new Promise((i,r)=>{var s=l=>{try{a(n.next(l))}catch(c){r(c)}},o=l=>{try{a(n.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),uue=Yv((t,e)=>{e.exports=n=>encodeURIComponent(n).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`)}),fue=Yv((t,e)=>{var n="%[a-f0-9]{2}",i=new RegExp("("+n+")|([^%]+?)","gi"),r=new RegExp("("+n+")+","gi");function s(l,c){try{return[decodeURIComponent(l.join(""))]}catch{}if(l.length===1)return l;c=c||1;var u=l.slice(0,c),f=l.slice(c);return Array.prototype.concat.call([],s(u),s(f))}function o(l){try{return decodeURIComponent(l)}catch{for(var c=l.match(i)||[],u=1;u<c.length;u++)l=s(c,u).join(""),c=l.match(i)||[];return l}}function a(l){for(var c={"%FE%FF":"��","%FF%FE":"��"},u=r.exec(l);u;){try{c[u[0]]=decodeURIComponent(u[0])}catch{var f=o(u[0]);f!==u[0]&&(c[u[0]]=f)}u=r.exec(l)}c["%C2"]="�";for(var h=Object.keys(c),d=0;d<h.length;d++){var p=h[d];l=l.replace(new RegExp(p,"g"),c[p])}return l}e.exports=function(l){if(typeof l!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof l+"`");try{return l=l.replace(/\+/g," "),decodeURIComponent(l)}catch{return a(l)}}}),hue=Yv((t,e)=>{e.exports=(n,i)=>{if(!(typeof n=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[n];let r=n.indexOf(i);return r===-1?[n]:[n.slice(0,r),n.slice(r+i.length)]}}),due=Yv((t,e)=>{e.exports=function(n,i){for(var r={},s=Object.keys(n),o=Array.isArray(i),a=0;a<s.length;a++){var l=s[a],c=n[l];(o?i.indexOf(l)!==-1:i(l,c,n))&&(r[l]=c)}return r}}),pue=Yv(t=>{var e=uue(),n=fue(),i=hue(),r=due(),s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return y=>(w,S)=>{let C=w.length;return S===void 0||v.skipNull&&S===null||v.skipEmptyString&&S===""?w:S===null?[...w,[u(y,v),"[",C,"]"].join("")]:[...w,[u(y,v),"[",u(C,v),"]=",u(S,v)].join("")]};case"bracket":return y=>(w,S)=>S===void 0||v.skipNull&&S===null||v.skipEmptyString&&S===""?w:S===null?[...w,[u(y,v),"[]"].join("")]:[...w,[u(y,v),"[]=",u(S,v)].join("")];case"colon-list-separator":return y=>(w,S)=>S===void 0||v.skipNull&&S===null||v.skipEmptyString&&S===""?w:S===null?[...w,[u(y,v),":list="].join("")]:[...w,[u(y,v),":list=",u(S,v)].join("")];case"comma":case"separator":case"bracket-separator":{let y=v.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(S,C)=>C===void 0||v.skipNull&&C===null||v.skipEmptyString&&C===""?S:(C=C===null?"":C,S.length===0?[[u(w,v),y,u(C,v)].join("")]:[[S,u(C,v)].join(v.arrayFormatSeparator)])}default:return y=>(w,S)=>S===void 0||v.skipNull&&S===null||v.skipEmptyString&&S===""?w:S===null?[...w,u(y,v)]:[...w,[u(y,v),"=",u(S,v)].join("")]}}function l(v){let y;switch(v.arrayFormat){case"index":return(w,S,C)=>{if(y=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!y){C[w]=S;return}C[w]===void 0&&(C[w]={}),C[w][y[1]]=S};case"bracket":return(w,S,C)=>{if(y=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!y){C[w]=S;return}if(C[w]===void 0){C[w]=[S];return}C[w]=[].concat(C[w],S)};case"colon-list-separator":return(w,S,C)=>{if(y=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!y){C[w]=S;return}if(C[w]===void 0){C[w]=[S];return}C[w]=[].concat(C[w],S)};case"comma":case"separator":return(w,S,C)=>{let b=typeof S=="string"&&S.includes(v.arrayFormatSeparator),M=typeof S=="string"&&!b&&f(S,v).includes(v.arrayFormatSeparator);S=M?f(S,v):S;let I=b||M?S.split(v.arrayFormatSeparator).map(T=>f(T,v)):S===null?S:f(S,v);C[w]=I};case"bracket-separator":return(w,S,C)=>{let b=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!b){C[w]=S&&f(S,v);return}let M=S===null?[]:S.split(v.arrayFormatSeparator).map(I=>f(I,v));if(C[w]===void 0){C[w]=M;return}C[w]=[].concat(C[w],M)};default:return(w,S,C)=>{if(C[w]===void 0){C[w]=S;return}C[w]=[].concat(C[w],S)}}}function c(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(v,y){return y.encode?y.strict?e(v):encodeURIComponent(v):v}function f(v,y){return y.decode?n(v):v}function h(v){return Array.isArray(v)?v.sort():typeof v=="object"?h(Object.keys(v)).sort((y,w)=>Number(y)-Number(w)).map(y=>v[y]):v}function d(v){let y=v.indexOf("#");return y!==-1&&(v=v.slice(0,y)),v}function p(v){let y="",w=v.indexOf("#");return w!==-1&&(y=v.slice(w)),y}function g(v){v=d(v);let y=v.indexOf("?");return y===-1?"":v.slice(y+1)}function A(v,y){return y.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):y.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function m(v,y){y=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},y),c(y.arrayFormatSeparator);let w=l(y),S=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return S;for(let C of v.split("&")){if(C==="")continue;let[b,M]=i(y.decode?C.replace(/\+/g," "):C,"=");M=M===void 0?null:["comma","separator","bracket-separator"].includes(y.arrayFormat)?M:f(M,y),w(f(b,y),M,S)}for(let C of Object.keys(S)){let b=S[C];if(typeof b=="object"&&b!==null)for(let M of Object.keys(b))b[M]=A(b[M],y);else S[C]=A(b,y)}return y.sort===!1?S:(y.sort===!0?Object.keys(S).sort():Object.keys(S).sort(y.sort)).reduce((C,b)=>{let M=S[b];return M&&typeof M=="object"&&!Array.isArray(M)?C[b]=h(M):C[b]=M,C},Object.create(null))}t.extract=g,t.parse=m,t.stringify=(v,y)=>{if(!v)return"";y=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},y),c(y.arrayFormatSeparator);let w=M=>y.skipNull&&s(v[M])||y.skipEmptyString&&v[M]==="",S=a(y),C={};for(let M of Object.keys(v))w(M)||(C[M]=v[M]);let b=Object.keys(C);return y.sort!==!1&&b.sort(y.sort),b.map(M=>{let I=v[M];return I===void 0?"":I===null?u(M,y):Array.isArray(I)?I.length===0&&y.arrayFormat==="bracket-separator"?u(M,y)+"[]":I.reduce(S(M),[]).join("&"):u(M,y)+"="+u(I,y)}).filter(M=>M.length>0).join("&")},t.parseUrl=(v,y)=>{y=Object.assign({decode:!0},y);let[w,S]=i(v,"#");return Object.assign({url:w.split("?")[0]||"",query:m(g(v),y)},y&&y.parseFragmentIdentifier&&S?{fragmentIdentifier:f(S,y)}:{})},t.stringifyUrl=(v,y)=>{y=Object.assign({encode:!0,strict:!0,[o]:!0},y);let w=d(v.url).split("?")[0]||"",S=t.extract(v.url),C=t.parse(S,{sort:!1}),b=Object.assign(C,v.query),M=t.stringify(b,y);M&&(M=`?${M}`);let I=p(v.url);return v.fragmentIdentifier&&(I=`#${y[o]?u(v.fragmentIdentifier,y):v.fragmentIdentifier}`),`${w}${M}${I}`},t.pick=(v,y,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);let{url:S,query:C,fragmentIdentifier:b}=t.parseUrl(v,w);return t.stringifyUrl({url:S,query:r(C,y),fragmentIdentifier:b},w)},t.exclude=(v,y,w)=>{let S=Array.isArray(y)?C=>!y.includes(C):(C,b)=>!y(C,b);return t.pick(v,S,w)}}),mue=(t,e)=>({dpr:t,camera:{fov:e},linear:!0,flat:!0,gl:{preserveDrawingBuffer:!0}}),gue=1,Aue=14,WL={zoom:1,distance:14},jL={zoom:5,distance:14},vue={meshDelay:0,meshDur:0,rotDelay:1.7,rotDur:1,posDelay:1.3,posDur:2.2,logoTransition:3.1,text:2.5,to:1},Pb="https://ruucm.github.io/shadergradient/shadergradient@1.0.0/hdr/",yue=[{title:"Halo",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=3.6&cPolarAngle=90&cameraZoom=1&color1=%23ff5005&color2=%23dbba95&color3=%23d0bce1&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=-1.4&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=10&rotationZ=50&shader=defaults&type=plane&uDensity=1.3&uSpeed=0.4&uStrength=4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Pensive",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.5&cAzimuthAngle=250&cDistance=1.5&cPolarAngle=140&cameraZoom=12.5&color1=%23809bd6&color2=%23910aff&color3=%23af38ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.5&rotationX=0&rotationY=0&rotationZ=140&shader=defaults&type=sphere&uAmplitude=7&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.4&uTime=0&wireframe=false"},{title:"Mint",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=170&cDistance=4.4&cPolarAngle=70&cameraZoom=1&color1=%2394ffd1&color2=%236bf5ff&color3=%23ffffff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0.9&positionZ=-0.3&reflection=0.1&rotationX=45&rotationY=0&rotationZ=0&type=waterPlane&uAmplitude=0&uDensity=1.2&uFrequency=0&uSpeed=0.2&uStrength=3.4&uTime=0&wireframe=false&shader=defaults"},{title:"Interstella",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=0.8&cAzimuthAngle=270&cDistance=0.5&cPolarAngle=180&cameraZoom=15.1&color1=%2373bfc4&color2=%23ff810a&color3=%238da0ce&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=env&pixelDensity=1&fov=45&positionX=-0.1&positionY=0&positionZ=0&reflection=0.4&rotationX=0&rotationY=130&rotationZ=70&shader=defaults&type=sphere&uAmplitude=3.2&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.3&uTime=0&wireframe=false"},{title:"Nighty night",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1&cAzimuthAngle=180&cDistance=2.8&cPolarAngle=80&cameraZoom=9.1&color1=%23606080&color2=%238d7dca&color3=%23212121&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=50&rotationY=0&rotationZ=-60&shader=defaults&type=waterPlane&uAmplitude=0&uDensity=1.5&uFrequency=0&uSpeed=0.3&uStrength=1.5&uTime=8&wireframe=false"},{title:"Viola orientalis",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=0&cDistance=7.1&cPolarAngle=140&cameraZoom=17.3&color1=%23ffffff&color2=%23ffbb00&color3=%230700ff&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=1&uTime=0&wireframe=false&uFrequency=5.5&shader=defaults"},{title:"Universe",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=180&cDistance=3.9&cPolarAngle=115&cameraZoom=1&color1=%235606FF&color2=%23FE8989&color3=%23000000&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=-0.5&positionY=0.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=235&type=waterPlane&uAmplitude=0&uDensity=1.1&uSpeed=0.1&uStrength=2.4&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"},{title:"Sunset",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.5&cAzimuthAngle=60&cDistance=7.1&cPolarAngle=90&cameraZoom=15.3&color1=%23ff7a33&color2=%2333a0ff&color3=%23ffc53d&embedMode=off&envPreset=dawn&grain=off&http%3A%2F%2Flocalhost%3A3002%2Fcustomize%3Fanimate=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-0.15&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&shader=defaults&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=0.4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Mandarin",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.2&cAzimuthAngle=180&cDistance=2.4&cPolarAngle=95&cameraZoom=1&color1=%23ff6a1a&color2=%23c73c00&color3=%23FD4912&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-2.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=225&shader=defaults&type=waterPlane&uAmplitude=0&uFrequency=5.5&uDensity=1.8&uSpeed=0.2&uStrength=3&uTime=0.2&wireframe=false"},{title:"Cotton Candy",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=2.9&cPolarAngle=120&cameraZoom=1&color1=%23ebedff&color2=%23f3f2f8&color3=%23dbf8ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=1.8&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=-90&type=waterPlane&uDensity=1&uSpeed=0.3&uStrength=3&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"}];function xue(){let[t,e]=E.useState(-1);return[t,n=>{let i=n.gl.domElement,r=a=>{a.preventDefault(),e(1),console.log("[Context Lost]")},s=a=>{e(0),console.log("[Context Restored]")},o=a=>{e(2),console.log("[Context Error]")};return i.addEventListener("webglcontextlost",r),i.addEventListener("webglcontextrestored",s),i.addEventListener("webglcontextcreationerror",o),()=>{i.removeEventListener("webglcontextlost",r),i.removeEventListener("webglcontextrestored",s),i.removeEventListener("webglcontextcreationerror",o)}}]}function _ue({title:t="",color1:e="#ff7e5f",color2:n="#feb47b"}){return Re.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:`linear-gradient(to right, ${e}, ${n})`,color:"white",fontSize:"20px",textAlign:"center",padding:"20px",fontFamily:"Inter",fontWeight:"500"},children:Re.jsx("p",{children:t})})}function Eue(t){var e=t,{children:n,pointerEvents:i="none",pixelDensity:r=1,fov:s=45}=e,o=Cf(e,["children","pointerEvents","pixelDensity","fov"]);let[a,l]=xue();return a===1?Re.jsx(_ue,{title:"The graphics context has been lost. Please wait while we try to restore it..."}):Re.jsx(Re.Fragment,{children:Re.jsx(HV,Sf(ci(Sf(ci({id:"gradientCanvas",resize:{offsetSize:!0}},mue(r,s)),{style:{pointerEvents:i},onCreated:l}),o),{children:n}),r+s)})}var Zw=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},wue=new Hn(-1,1,1,-1,0,1),_B=new Dt;_B.setAttribute("position",new At([-1,3,0,-1,-1,0,3,-1,0],3));_B.setAttribute("uv",new At([0,2,0,0,2,0],2));var Sue=class{constructor(t){this._mesh=new ut(_B,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,wue)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}},XL=class extends Zw{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){let i=t.getContext(),r=t.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let s,o;this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}},Cue=class extends Zw{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}},YL=class extends Zw{constructor(t,e){super(),this.textureID=e!==void 0?e:"tDiffuse",t instanceof Fn?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Ra.clone(t.uniforms),this.material=new Fn({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Sue(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}},qL={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;

		}`},bue=class{constructor(t,e){if(this.renderer=t,e===void 0){let n={minFilter:Vt,magFilter:Vt,format:In},i=t.getSize(new Ie);this._pixelRatio=t.getPixelRatio(),this._width=i.width,this._height=i.height,e=new Ln(this._width*this._pixelRatio,this._height*this._pixelRatio,n),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],qL===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),YL===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new YL(qL),this.clock=new b0}swapBuffers(){let t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){let e=this.passes.indexOf(t);e!==-1&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());let e=this.renderer.getRenderTarget(),n=!1;for(let i=0,r=this.passes.length;i<r;i++){let s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),s.needsSwap){if(n){let o=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),a.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}XL!==void 0&&(s instanceof XL?n=!0:s instanceof Cue&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(t===void 0){let e=this.renderer.getSize(new Ie);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;let n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}};new Hn(-1,1,1,-1,0,1);var MW=new Dt;MW.setAttribute("position",new At([-1,3,0,-1,-1,0,3,-1,0],3));MW.setAttribute("uv",new At([0,2,0,0,2,0],2));var Mue=class extends Zw{constructor(t,e,n,i,r){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=r!==void 0?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Je}render(t,e,n){let i=t.autoClear;t.autoClear=!1;let r,s;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,r),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),t.autoClear=i}},gr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Tue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Iue="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Bue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Rue="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Pue="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Due="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Lue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Fue="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Oue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",zue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Uue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",kue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Nue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Gue="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Hue="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Que="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Vue="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Wue="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",jue=new Map([[gr.SKIP,null],[gr.ADD,Tue],[gr.ALPHA,Iue],[gr.AVERAGE,Bue],[gr.COLOR_BURN,Rue],[gr.COLOR_DODGE,Pue],[gr.DARKEN,Due],[gr.DIFFERENCE,Lue],[gr.EXCLUSION,Oue],[gr.LIGHTEN,zue],[gr.MULTIPLY,Uue],[gr.DIVIDE,Fue],[gr.NEGATION,kue],[gr.NORMAL,Nue],[gr.OVERLAY,Gue],[gr.REFLECT,Hue],[gr.SCREEN,Que],[gr.SOFT_LIGHT,Vue],[gr.SUBTRACT,Wue]]),Xue=class extends $r{constructor(t,e=1){super(),this.blendFunction=t,this.opacity=new ss(e)}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t,this.dispatchEvent({type:"change"})}getShaderCode(){return jue.get(this.blendFunction)}},op={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:2},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:1},width:{value:20},height:{value:20},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:`

		varying vec2 vUV;
		varying vec3 vPosition;

		void main() {

			vUV = uv;
			vPosition = position;

			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

		}`,fragmentShader:`

		#define SQRT2_MINUS_ONE 0.41421356
		#define SQRT2_HALF_MINUS_ONE 0.20710678
		#define PI2 6.28318531
		#define SHAPE_DOT 1
		#define SHAPE_ELLIPSE 2
		#define SHAPE_LINE 3
		#define SHAPE_SQUARE 4
		#define BLENDING_LINEAR 1
		#define BLENDING_MULTIPLY 2
		#define BLENDING_ADD 3
		#define BLENDING_LIGHTER 4
		#define BLENDING_DARKER 5
		uniform sampler2D tDiffuse;
		uniform float radius;
		uniform float rotateR;
		uniform float rotateG;
		uniform float rotateB;
		uniform float scatter;
		uniform float width;
		uniform float height;
		uniform int shape;
		uniform bool disable;
		uniform float blending;
		uniform int blendingMode;
		varying vec2 vUV;
		varying vec3 vPosition;
		uniform bool greyscale;
		const int samples = 8;

		float blend( float a, float b, float t ) {

		// linear blend
			return a * ( 1.0 - t ) + b * t;

		}

		float hypot( float x, float y ) {

		// vector magnitude
			return sqrt( x * x + y * y );

		}

		float rand( vec2 seed ){

		// get pseudo-random number
			return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );

		}

		float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {

		// apply shape-specific transforms
			float dist = hypot( coord.x - p.x, coord.y - p.y );
			float rad = channel;

			if ( shape == SHAPE_DOT ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

			} else if ( shape == SHAPE_ELLIPSE ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

				if ( dist != 0.0 ) {
					float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );
					dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;
				}

			} else if ( shape == SHAPE_LINE ) {

				rad = pow( abs( rad ), 1.5) * rad_max;
				float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;
				dist = hypot( normal.x * dot_p, normal.y * dot_p );

			} else if ( shape == SHAPE_SQUARE ) {

				float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;
				float sin_t = abs( sin( theta ) );
				float cos_t = abs( cos( theta ) );
				rad = pow( abs( rad ), 1.4 );
				rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );

			}

			return rad - dist;

		}

		struct Cell {

		// grid sample positions
			vec2 normal;
			vec2 p1;
			vec2 p2;
			vec2 p3;
			vec2 p4;
			float samp2;
			float samp1;
			float samp3;
			float samp4;

		};

		vec4 getSample( vec2 point ) {

		// multi-sampled point
			vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );
			float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;
			float step = PI2 / float( samples );
			// float dist = radius * 0.66;
			float dist = radius * 0.0;

			for ( int i = 0; i < samples; ++i ) {

				float r = base + step * float( i );
				vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );
				tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );

			}

			tex /= float( samples ) + 1.0;
			return tex;

		}

		float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {

		// get colour for given point
			float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;

			if ( channel == 0 ) {

				c.samp1 = getSample( c.p1 ).r;
				c.samp2 = getSample( c.p2 ).r;
				c.samp3 = getSample( c.p3 ).r;
				c.samp4 = getSample( c.p4 ).r;

			} else if (channel == 1) {

				c.samp1 = getSample( c.p1 ).g;
				c.samp2 = getSample( c.p2 ).g;
				c.samp3 = getSample( c.p3 ).g;
				c.samp4 = getSample( c.p4 ).g;

			} else {

				c.samp1 = getSample( c.p1 ).b;
				c.samp3 = getSample( c.p3 ).b;
				c.samp2 = getSample( c.p2 ).b;
				c.samp4 = getSample( c.p4 ).b;

			}

			dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );
			dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );
			dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );
			dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );
			res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;
			// res = 0.0;
			res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;
			res = clamp( res, 0.0, 1.0 );

			return res;
			// return 2

		}

		Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {

		// get containing cell
			Cell c;

		// calc grid
			vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );
			float threshold = step * 0.5;
			float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );
			float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );
			vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );
			float offset_normal = mod( hypot( offset.x, offset.y ), step );
			float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;
			float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;
			float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );
			float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;
			float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;

		// get closest corner
			c.normal = n;
			c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;
			c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;

		// scatter
			if ( scatter != 0.0 ) {

				float off_mag = scatter * threshold * 0.5;
				float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;
				c.p1.x += cos( off_angle ) * off_mag;
				c.p1.y += sin( off_angle ) * off_mag;

			}

		// find corners
			float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );
			float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );
			c.p2.x = c.p1.x - n.x * normal_step;
			c.p2.y = c.p1.y - n.y * normal_step;
			c.p3.x = c.p1.x + n.y * line_step;
			c.p3.y = c.p1.y - n.x * line_step;
			c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;
			c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;

			return c;

		}

		float blendColour( float a, float b, float t ) {

		// blend colours
			if ( blendingMode == BLENDING_LINEAR ) {
				return blend( a, b, 1.0 - t );
			} else if ( blendingMode == BLENDING_ADD ) {
				return blend( a, min( 1.0, a + b ), t );
			} else if ( blendingMode == BLENDING_MULTIPLY ) {
				return blend( a, max( 0.0, a * b ), t );
			} else if ( blendingMode == BLENDING_LIGHTER ) {
				return blend( a, max( a, b ), t );
			} else if ( blendingMode == BLENDING_DARKER ) {
				return blend( a, min( a, b ), t );
			} else {
				return blend( a, b, 1.0 - t );
			}

		}

		void main() {

			if ( ! disable ) {

		// setup
				vec2 p = vec2( vUV.x * width, vUV.y * height ) - vec2(vPosition.x, vPosition.y) * 3.0; // - position values to remove black borders.
				vec2 origin = vec2( 0, 0 );
				float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;
				// float aa = 0.0;

		// get channel samples
				Cell cell_r = getReferenceCell( p, origin, rotateR, radius );
				Cell cell_g = getReferenceCell( p, origin, rotateG, radius );
				Cell cell_b = getReferenceCell( p, origin, rotateB, radius );
				float r = getDotColour( cell_r, p, 0, rotateR, aa );
				float g = getDotColour( cell_g, p, 1, rotateG, aa );
				float b = getDotColour( cell_b, p, 2, rotateB, aa );

		// blend with original
				vec4 colour = texture2D( tDiffuse, vUV );
				
				// add masking before blendColour
				if (colour.r == 0.0) {
					r = 0.0;
				} else {
					r = blendColour( r, colour.r, blending );
				}

				if (colour.g == 0.0) {
					g = 0.0;
				} else {
					g = blendColour( g, colour.g, blending );
				}

				if (colour.b == 0.0) {
					b = 0.0;
				} else {
					b = blendColour( b, colour.b, blending );
				}
				
				
				

				if ( greyscale ) {
					r = g = b = (r + b + g) / 3.0;
				}

				// add alpha channel to each r, g, b colors
				vec4 vR;
				vec4 vG;
				vec4 vB;
	
				// apply transparent to outside of mesh
				if (r == 0.0 && colour.r == 0.0) {
					vR = vec4( 0, 0, 0, 0 );
				} else {
					vR = vec4( r, 0, 0, 1 );
				}
	
				if (g == 0.0 && colour.g == 0.0) {
					vG = vec4( 0, 0, 0, 0 );
				} else {
					vG = vec4( 0, g, 0, 1 );
				}
	
				if (b == 0.0 && colour.b == 0.0) {
					vB = vec4( 0, 0, 0, 0 );
				} else {
					vB = vec4( 0, 0, b, 1 );
				}

				// gl_FragColor = vec4( r, g, b, 1.0 );
				gl_FragColor = vR + vG + vB;

			} else {

				gl_FragColor = texture2D( tDiffuse, vUV );

			}

		}`},Yue=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},que=new Hn(-1,1,1,-1,0,1),EB=new Dt;EB.setAttribute("position",new At([-1,3,0,-1,-1,0,3,-1,0],3));EB.setAttribute("uv",new At([0,2,0,0,2,0],2));var $ue=class{constructor(t){this._mesh=new ut(EB,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,que)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}},Kue=class extends Yue{constructor(t,e,n){super(),op===void 0&&console.error("THREE.HalftonePass requires HalftoneShader"),this.uniforms=Ra.clone(op.uniforms),this.material=new Fn({uniforms:this.uniforms,fragmentShader:op.fragmentShader,vertexShader:op.vertexShader}),this.uniforms.width.value=t,this.uniforms.height.value=e,this.uniforms.disable.value=n.disable,this.uniforms.blending.value=n.blending,this.fsQuad=new $ue(this.material),this.blendMode=new Xue(gr.SCREEN),this.extensions=null}render(t,e,n){this.material.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}setSize(t,e){this.uniforms.width.value=t,this.uniforms.height.value=e}initialize(t,e,n){}addEventListener(){}getAttributes(){return this.attributes}getFragmentShader(){return op.fragmentShader}getVertexShader(){return op.vertexShader}update(t,e,n){}};function Jue(t,e){let{gl:n,scene:i,camera:r,size:s}=Fe(),o=E.useMemo(()=>{let a=new bue(n);a.addPass(new Mue(i,r));let l={shape:1,radius:2,rotateR:Math.PI/12,rotateB:Math.PI/12*2,rotateG:Math.PI/12*3,scatter:1,blending:e,blendingMode:1,greyscale:!1,disable:t},c=new Kue(s.width,s.height,l);return a.addPass(c),a},[n,i,r,s,t,e]);E.useEffect(()=>o==null?void 0:o.setSize(s.width,s.height),[o,s]),Ct((a,l)=>(n.autoClear=!0,void o.render(l)),1)}function Zue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var efe=Zue;function tfe(t,e,n){let{gl:i,size:r,viewport:s}=Fe(),o=typeof t=="number"?t:r.width*s.dpr,a=r.height*s.dpr,l=(typeof t=="number"?n:t)||{},{samples:c}=l,u=Cf(l,["samples"]),f=E.useMemo(()=>{let h;return h=new Ln(o,a,ci({minFilter:Vt,magFilter:Vt,encoding:i.outputEncoding,type:On},u)),h.samples=c,h},[]);return E.useLayoutEffect(()=>{f.setSize(o,a),c&&(f.samples=c)},[c,f,o,a]),E.useEffect(()=>()=>f.dispose(),[]),f}var nfe=t=>typeof t=="function",ife=E.forwardRef((t,e)=>{var n=t,{envMap:i,resolution:r=256,frames:s=1/0,children:o,makeDefault:a}=n,l=Cf(n,["envMap","resolution","frames","children","makeDefault"]);let c=Fe(({set:v})=>v),u=Fe(({camera:v})=>v),f=Fe(({size:v})=>v),h=E.useRef(null),d=E.useRef(null),p=tfe(r);E.useLayoutEffect(()=>{l.manual||h.current.updateProjectionMatrix()},[f,l]),E.useLayoutEffect(()=>{h.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(a){let v=u;return c(()=>({camera:h.current})),()=>c(()=>({camera:v}))}},[h,a,c]);let g=0,A=null,m=nfe(o);return Ct(v=>{m&&(s===1/0||g<s)&&(d.current.visible=!1,v.gl.setRenderTarget(p),A=v.scene.background,i&&(v.scene.background=i),v.gl.render(v.scene,h.current),v.scene.background=A,v.gl.setRenderTarget(null),d.current.visible=!0,g++)}),Re.jsxs(Re.Fragment,{children:[Re.jsx("orthographicCamera",Sf(ci({left:f.width/-2,right:f.width/2,top:f.height/2,bottom:f.height/-2,ref:efe([h,e])},l),{children:!m&&o})),Re.jsx("group",{ref:d,children:m&&o(p.texture)})]})});function rfe(t,e){let n=Fe(r=>r.pointer),[i]=E.useState(()=>{let r=new Ff;return function(s,o){r.setFromCamera(n,t instanceof Rf?t:t.current);let a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}var TW=E.createContext({}),sfe=()=>E.useContext(TW),ofe=2*Math.PI,$L=new Ht,KL=new Ge,[ap,Db]=[new Tt,new Tt],JL=new L,ZL=new L,afe=t=>"minPolarAngle"in t,lfe=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:n=0,autoClear:i=!0,onUpdate:r,onTarget:s,children:o})=>{let a=Fe(({size:R})=>R),l=Fe(({camera:R})=>R),c=Fe(({controls:R})=>R),u=Fe(({gl:R})=>R),f=Fe(({scene:R})=>R),h=Fe(({invalidate:R})=>R),d=E.useRef(),p=E.useRef(),g=E.useRef(null),[A]=E.useState(()=>new Go),m=E.useRef(!1),v=E.useRef(0),y=E.useRef(new L(0,0,0)),w=E.useRef(new L(0,0,0));E.useEffect(()=>{w.current.copy(l.up)},[l]);let S=E.useCallback(R=>{m.current=!0,(c||s)&&(y.current=(c==null?void 0:c.target)||(s==null?void 0:s())),v.current=l.position.distanceTo(JL),ap.copy(l.quaternion),ZL.copy(R).multiplyScalar(v.current).add(JL),$L.lookAt(ZL),Db.copy($L.quaternion),h()},[c,l,s,h]);E.useEffect(()=>(f.background&&(d.current=f.background,f.background=null,A.background=d.current),()=>{d.current&&(f.background=d.current)}),[]),Ct((R,z)=>{var F;if(g.current&&p.current){if(m.current)if(ap.angleTo(Db)<.01)m.current=!1,afe(c)&&l.up.copy(w.current);else{let V=z*ofe;ap.rotateTowards(Db,V),l.position.set(0,0,1).applyQuaternion(ap).multiplyScalar(v.current).add(y.current),l.up.set(0,1,0).applyQuaternion(ap).normalize(),l.quaternion.copy(ap),r?r():c&&c.update(),h()}KL.copy(l.matrix).invert(),(F=p.current)==null||F.quaternion.setFromRotationMatrix(KL),i&&(u.autoClear=!1),u.clearDepth(),u.render(A,g.current)}},n);let C=rfe(g),b=E.useMemo(()=>({tweenCamera:S,raycast:C}),[S]),[M,I]=e,T=t.endsWith("-center")?0:t.endsWith("-left")?-a.width/2+M:a.width/2-M,D=t.startsWith("center-")?0:t.startsWith("top-")?a.height/2-I:-a.height/2+I;return ou(Re.jsxs(TW.Provider,{value:b,children:[Re.jsx(ife,{ref:g,position:[0,0,200]}),Re.jsx("group",{ref:p,position:[T,D,0],children:o})]}),A)};function Lb({scale:t=[.8,.05,.05],color:e,rotation:n}){return Re.jsx("group",{rotation:n,children:Re.jsxs("mesh",{position:[.4,0,0],children:[Re.jsx("boxGeometry",{args:t}),Re.jsx("meshBasicMaterial",{color:e,toneMapped:!1})]})})}function lp(t){var e=t,{onClick:n,font:i,disabled:r,arcStyle:s,label:o,labelColor:a,axisHeadScale:l=1}=e,c=Cf(e,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);let u=Fe(g=>g.gl),f=E.useMemo(()=>{let g=document.createElement("canvas");g.width=64,g.height=64;let A=g.getContext("2d");return A.beginPath(),A.arc(32,32,16,0,2*Math.PI),A.closePath(),A.fillStyle=s,A.fill(),o&&(A.font=i,A.textAlign="center",A.fillStyle=a,A.fillText(o,32,41)),new gw(g)},[s,o,a,i]),[h,d]=E.useState(!1),p=(o?1:.75)*(h?1.2:1)*l;return Re.jsx("sprite",Sf(ci({scale:p,onPointerOver:r?void 0:g=>{g.stopPropagation(),d(!0)},onPointerOut:r?void 0:n||(g=>{g.stopPropagation(),d(!1)})},c),{children:Re.jsx("spriteMaterial",{map:f,"map-encoding":u.outputEncoding,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:o?1:.75,toneMapped:!1})}))}var cfe=t=>{var e=t,{hideNegativeAxes:n,hideAxisHeads:i,disabled:r,font:s="18px Inter var, Arial, sans-serif",axisColors:o=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:l,labels:c=["X","Y","Z"],labelColor:u="#000",onClick:f}=e,h=Cf(e,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);let[d,p,g]=o,{tweenCamera:A,raycast:m}=sfe(),v={font:s,disabled:r,labelColor:u,raycast:m,onClick:f,axisHeadScale:a,onPointerDown:r?void 0:y=>{A(y.object.position),y.stopPropagation()}};return Re.jsxs("group",Sf(ci({scale:40},h),{children:[Re.jsx(Lb,{color:d,rotation:[0,0,0],scale:l}),Re.jsx(Lb,{color:p,rotation:[0,0,Math.PI/2],scale:l}),Re.jsx(Lb,{color:g,rotation:[0,-Math.PI/2,0],scale:l}),!i&&Re.jsxs(Re.Fragment,{children:[Re.jsx(lp,ci({arcStyle:d,position:[1,0,0],label:c[0]},v)),Re.jsx(lp,ci({arcStyle:p,position:[0,1,0],label:c[1]},v)),Re.jsx(lp,ci({arcStyle:g,position:[0,0,1],label:c[2]},v)),!n&&Re.jsxs(Re.Fragment,{children:[Re.jsx(lp,ci({arcStyle:d,position:[-1,0,0]},v)),Re.jsx(lp,ci({arcStyle:p,position:[0,-1,0]},v)),Re.jsx(lp,ci({arcStyle:g,position:[0,0,-1]},v))]})]}),Re.jsx("ambientLight",{intensity:.5}),Re.jsx("pointLight",{position:[10,10,10],intensity:.5})]}))};function ufe({isFigmaPlugin:t}){return Re.jsx(Re.Fragment,{children:Re.jsx(lfe,{alignment:"bottom-right",margin:t?[25,25]:[65,110],renderPriority:2,children:Re.jsx(cfe,{axisColors:["#FF430A","#FF430A","#FF430A"],labelColor:"white",hideNegativeAxes:!0,axisHeadScale:.8})})})}var Hr={LEFT:1,RIGHT:2,MIDDLE:4},St=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function uh(t){return t.isPerspectiveCamera}function Lu(t){return t.isOrthographicCamera}var cp=Math.PI*2,eF=Math.PI/2,IW=1e-5;function Bi(t,e=IW){return Math.abs(t)<e}function Ti(t,e,n=IW){return Bi(t-e,n)}function tF(t,e){return Math.round(t/e)*e}function z1(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function U1(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function Fb(t,e){e.set(0,0),t.forEach(n=>{e.x+=n.clientX,e.y+=n.clientY}),e.x/=t.length,e.y/=t.length}function Ob(t,e){return Lu(t)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}function nF(t){return t.invert?t.invert():t.inverse(),t}var ffe=class{constructor(){this._listeners={}}addEventListener(t,e){let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}removeEventListener(t,e){let n=this._listeners[t];if(n!==void 0){let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){let e=this._listeners[t.type];if(e!==void 0){t.target=this;let n=e.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,t)}}},BW=typeof window<"u",hfe=BW&&/Mac/.test(navigator.platform),iF=!(BW&&"PointerEvent"in window),gx=1/8,$t,rF,Ax,zb,no,bn,ri,up,Bl,Rl,fh,sF,oF,Qa,k1,Lm,aF,Ub,lF,kb,Nb,vx,cF=class extends ffe{constructor(t,e){if(super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=St.NONE,this._viewport=null,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(n,i,r)=>{if(uh(this._camera)){let s=bn.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*$t.MathUtils.DEG2RAD,a=s.length()*Math.tan(o*.5),l=this.truckSpeed*n*a/this._elementRect.height,c=this.truckSpeed*i*a/this._elementRect.height;this.verticalDragToForward?(r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(l,0,!0),this.forward(-c,!0)):r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y+c,this._focalOffsetEnd.z,!0):this.truck(l,c,!0)}else if(Lu(this._camera)){let s=this._camera,o=n*(s.right-s.left)/s.zoom/this._elementRect.width,a=i*(s.top-s.bottom)/s.zoom/this._elementRect.height;r?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)}},this._rotateInternal=(n,i)=>{let r=cp*this.azimuthRotateSpeed*n/this._elementRect.height,s=cp*this.polarRotateSpeed*i/this._elementRect.height;this.rotate(r,s,!0)},this._dollyInternal=(n,i,r)=>{let s=Math.pow(.95,-n*this.dollySpeed),o=this._sphericalEnd.radius*s,a=this._sphericalEnd.radius,l=a*(n>=0?-1:1);this.dollyTo(o),this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(bn),this._targetEnd.add(bn.normalize().multiplyScalar(l)),this._target.add(bn.normalize().multiplyScalar(l))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-a,this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=l),this._dollyControlCoord.set(i,r))},this._zoomInternal=(n,i,r)=>{let s=Math.pow(.95,n*this.dollySpeed),o=this._zoomEnd;this.zoomTo(this._zoom*s),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-o,this._dollyControlCoord.set(i,r))},typeof $t>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new $t.Quaternion().setFromUnitVectors(this._camera.up,Ax),this._yAxisUpSpaceInverse=nF(this._yAxisUpSpace.clone()),this._state=St.NONE,this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._target=new $t.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new $t.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new $t.Spherical().setFromVector3(bn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new $t.Vector3,new $t.Vector3,new $t.Vector3,new $t.Vector3],this._updateNearPlaneCorners(),this._boundary=new $t.Box3(new $t.Vector3(-1/0,-1/0,-1/0),new $t.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new $t.Vector2,this.mouseButtons={left:St.ROTATE,middle:St.DOLLY,right:St.TRUCK,wheel:uh(this._camera)?St.DOLLY:Lu(this._camera)?St.ZOOM:St.NONE},this.touches={one:St.TOUCH_ROTATE,two:uh(this._camera)?St.TOUCH_DOLLY_TRUCK:Lu(this._camera)?St.TOUCH_ZOOM_TRUCK:St.NONE,three:St.TOUCH_TRUCK},this._domElement){let n=new $t.Vector2,i=new $t.Vector2,r=new $t.Vector2,s=w=>{if(!this._enabled)return;let S={pointerId:w.pointerId,clientX:w.clientX,clientY:w.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),m(w)},o=w=>{if(!this._enabled)return;let S={pointerId:0,clientX:w.clientX,clientY:w.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),m(w)},a=w=>{this._enabled&&(w.preventDefault(),Array.prototype.forEach.call(w.changedTouches,S=>{let C={pointerId:S.identifier,clientX:S.clientX,clientY:S.clientY,deltaX:0,deltaY:0};this._activePointers.push(C)}),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this._domElement.ownerDocument.addEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",d),m(w))},l=w=>{w.cancelable&&w.preventDefault();let S=w.pointerId,C=this._findPointerById(S);if(C){if(C.clientX=w.clientX,C.clientY=w.clientY,C.deltaX=w.movementX,C.deltaY=w.movementY,w.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(w.buttons&Hr.LEFT)===Hr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&Hr.MIDDLE)===Hr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&Hr.RIGHT)===Hr.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},c=w=>{let S=this._findPointerById(0);S&&(S.clientX=w.clientX,S.clientY=w.clientY,S.deltaX=w.movementX,S.deltaY=w.movementY,this._state=0,(w.buttons&Hr.LEFT)===Hr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&Hr.MIDDLE)===Hr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&Hr.RIGHT)===Hr.RIGHT&&(this._state=this._state|this.mouseButtons.right),v())},u=w=>{w.cancelable&&w.preventDefault(),Array.prototype.forEach.call(w.changedTouches,S=>{let C=S.identifier,b=this._findPointerById(C);b&&(b.clientX=S.clientX,b.clientY=S.clientY)}),v()},f=w=>{let S=w.pointerId,C=this._findPointerById(S);if(C&&this._activePointers.splice(this._activePointers.indexOf(C),1),w.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=St.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=St.NONE;y()},h=()=>{let w=this._findPointerById(0);w&&this._activePointers.splice(this._activePointers.indexOf(w),1),this._state=St.NONE,y()},d=w=>{switch(Array.prototype.forEach.call(w.changedTouches,S=>{let C=S.identifier,b=this._findPointerById(C);b&&this._activePointers.splice(this._activePointers.indexOf(b),1)}),this._activePointers.length){case 0:this._state=St.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}y()},p=-1,g=w=>{if(!this._enabled||this.mouseButtons.wheel===St.NONE)return;if(w.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===St.ROTATE||this.mouseButtons.wheel===St.TRUCK){let I=performance.now();p-I<1e3&&this._getClientRect(this._elementRect),p=I}let S=hfe?-1:-3,C=w.deltaMode===1?w.deltaY/S:w.deltaY/(S*10),b=this.dollyToCursor?(w.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(w.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case St.ROTATE:{this._rotateInternal(w.deltaX,w.deltaY);break}case St.TRUCK:{this._truckInternal(w.deltaX,w.deltaY,!1);break}case St.OFFSET:{this._truckInternal(w.deltaX,w.deltaY,!0);break}case St.DOLLY:{this._dollyInternal(-C,b,M);break}case St.ZOOM:{this._zoomInternal(-C,b,M);break}}this.dispatchEvent({type:"control"})},A=w=>{this._enabled&&w.preventDefault()},m=w=>{if(this._enabled){if(Fb(this._activePointers,no),this._getClientRect(this._elementRect),n.copy(no),i.copy(no),this._activePointers.length>=2){let S=no.x-this._activePointers[1].clientX,C=no.y-this._activePointers[1].clientY,b=Math.sqrt(S*S+C*C);r.set(0,b);let M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,I=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(M,I)}if("touches"in w||"pointerType"in w&&w.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(w.buttons&Hr.LEFT)===Hr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&Hr.MIDDLE)===Hr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&Hr.RIGHT)===Hr.RIGHT&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})}},v=()=>{if(!this._enabled)return;Fb(this._activePointers,no);let w=this._domElement&&document.pointerLockElement===this._domElement,S=w?-this._activePointers[0].deltaX:i.x-no.x,C=w?-this._activePointers[0].deltaY:i.y-no.y;if(i.copy(no),((this._state&St.ROTATE)===St.ROTATE||(this._state&St.TOUCH_ROTATE)===St.TOUCH_ROTATE||(this._state&St.TOUCH_DOLLY_ROTATE)===St.TOUCH_DOLLY_ROTATE||(this._state&St.TOUCH_ZOOM_ROTATE)===St.TOUCH_ZOOM_ROTATE)&&this._rotateInternal(S,C),(this._state&St.DOLLY)===St.DOLLY||(this._state&St.ZOOM)===St.ZOOM){let b=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===St.DOLLY?this._dollyInternal(C*gx,b,M):this._zoomInternal(C*gx,b,M)}if((this._state&St.TOUCH_DOLLY)===St.TOUCH_DOLLY||(this._state&St.TOUCH_ZOOM)===St.TOUCH_ZOOM||(this._state&St.TOUCH_DOLLY_TRUCK)===St.TOUCH_DOLLY_TRUCK||(this._state&St.TOUCH_ZOOM_TRUCK)===St.TOUCH_ZOOM_TRUCK||(this._state&St.TOUCH_DOLLY_OFFSET)===St.TOUCH_DOLLY_OFFSET||(this._state&St.TOUCH_ZOOM_OFFSET)===St.TOUCH_ZOOM_OFFSET||(this._state&St.TOUCH_DOLLY_ROTATE)===St.TOUCH_DOLLY_ROTATE||(this._state&St.TOUCH_ZOOM_ROTATE)===St.TOUCH_ZOOM_ROTATE){let b=no.x-this._activePointers[1].clientX,M=no.y-this._activePointers[1].clientY,I=Math.sqrt(b*b+M*M),T=r.y-I;r.set(0,I);let D=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===St.TOUCH_DOLLY||this._state===St.TOUCH_DOLLY_ROTATE||this._state===St.TOUCH_DOLLY_TRUCK||this._state===St.TOUCH_DOLLY_OFFSET?this._dollyInternal(T*gx,D,R):this._zoomInternal(T*gx,D,R)}((this._state&St.TRUCK)===St.TRUCK||(this._state&St.TOUCH_TRUCK)===St.TOUCH_TRUCK||(this._state&St.TOUCH_DOLLY_TRUCK)===St.TOUCH_DOLLY_TRUCK||(this._state&St.TOUCH_ZOOM_TRUCK)===St.TOUCH_ZOOM_TRUCK)&&this._truckInternal(S,C,!1),((this._state&St.OFFSET)===St.OFFSET||(this._state&St.TOUCH_OFFSET)===St.TOUCH_OFFSET||(this._state&St.TOUCH_DOLLY_OFFSET)===St.TOUCH_DOLLY_OFFSET||(this._state&St.TOUCH_ZOOM_OFFSET)===St.TOUCH_ZOOM_OFFSET)&&this._truckInternal(S,C,!0),this.dispatchEvent({type:"control"})},y=()=>{Fb(this._activePointers,no),i.copy(no),this._activePointers.length===0&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this.dispatchEvent({type:"controlend"}))};this._domElement.addEventListener("pointerdown",s),iF&&this._domElement.addEventListener("mousedown",o),iF&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",f),this._domElement.addEventListener("wheel",g,{passive:!1}),this._domElement.addEventListener("contextmenu",A),this._removeAllEventListeners=()=>{this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",f),this._domElement.removeEventListener("wheel",g,{passive:!1}),this._domElement.removeEventListener("contextmenu",A),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("touchend",d)},this.cancel=()=>{this._state!==St.NONE&&(this._state=St.NONE,this._activePointers.length=0,y())}}this.update(0)}static install(t){$t=t.THREE,rF=Object.freeze(new $t.Vector3(0,0,0)),Ax=Object.freeze(new $t.Vector3(0,1,0)),zb=Object.freeze(new $t.Vector3(0,0,1)),no=new $t.Vector2,bn=new $t.Vector3,ri=new $t.Vector3,up=new $t.Vector3,Bl=new $t.Vector3,Rl=new $t.Vector3,fh=new $t.Vector3,sF=new $t.Vector3,oF=new $t.Vector3,Qa=new $t.Spherical,k1=new $t.Spherical,Lm=new $t.Box3,aF=new $t.Box3,Ub=new $t.Sphere,lF=new $t.Quaternion,kb=new $t.Quaternion,Nb=new $t.Matrix4,vx=new $t.Raycaster}static get ACTION(){return St}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="")}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e,n=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,n)}rotateAzimuthTo(t,e=!1){return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t,e=!1){return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e,n=!1){let i=$t.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),r=$t.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let s=!n||Ti(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ti(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(t,e=!1){return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t,e=!1){let n=this._sphericalEnd.radius,i=$t.MathUtils.clamp(t,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){let s=this._collisionTest(),o=Ti(s,this._spherical.radius);if(!(n>i)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(i,s)}else this._sphericalEnd.radius=i;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);let r=!e||Ti(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}zoom(t,e=!1){return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t,e=!1){this._zoomEnd=$t.MathUtils.clamp(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);let n=!e||Ti(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}pan(t,e,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,n)}truck(t,e,n=!1){this._camera.updateMatrix(),Bl.setFromMatrixColumn(this._camera.matrix,0),Rl.setFromMatrixColumn(this._camera.matrix,1),Bl.multiplyScalar(t),Rl.multiplyScalar(-e);let i=bn.copy(Bl).add(Rl),r=ri.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,n)}forward(t,e=!1){bn.setFromMatrixColumn(this._camera.matrix,0),bn.crossVectors(this._camera.up,bn),bn.multiplyScalar(t);let n=ri.copy(this._targetEnd).add(bn);return this.moveTo(n.x,n.y,n.z,e)}moveTo(t,e,n,i=!1){let r=bn.set(t,e,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);let s=!i||Ti(this._target.x,this._targetEnd.x,this.restThreshold)&&Ti(this._target.y,this._targetEnd.y,this.restThreshold)&&Ti(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}fitToBox(t,e,{cover:n=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:s=0,paddingTop:o=0}={}){let a=[],l=t.isBox3?Lm.copy(t):Lm.setFromObject(t);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let c=tF(this._sphericalEnd.theta,eF),u=tF(this._sphericalEnd.phi,eF);a.push(this.rotateTo(c,u,e));let f=bn.setFromSpherical(this._sphericalEnd).normalize(),h=lF.setFromUnitVectors(f,zb),d=Ti(Math.abs(f.y),1);d&&h.multiply(kb.setFromAxisAngle(Ax,c)),h.multiply(this._yAxisUpSpaceInverse);let p=aF.makeEmpty();ri.copy(l.min).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.min).setX(l.max.x).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.min).setY(l.max.y).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.max).setZ(l.min.z).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.min).setZ(l.max.z).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.max).setY(l.min.y).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.max).setX(l.min.x).applyQuaternion(h),p.expandByPoint(ri),ri.copy(l.max).applyQuaternion(h),p.expandByPoint(ri),p.min.x-=i,p.min.y-=s,p.max.x+=r,p.max.y+=o,h.setFromUnitVectors(zb,f),d&&h.premultiply(kb.invert()),h.premultiply(this._yAxisUpSpace);let g=p.getSize(bn),A=p.getCenter(ri).applyQuaternion(h);if(uh(this._camera)){let m=this.getDistanceToFitBox(g.x,g.y,g.z,n);a.push(this.moveTo(A.x,A.y,A.z,e)),a.push(this.dollyTo(m,e)),a.push(this.setFocalOffset(0,0,0,e))}else if(Lu(this._camera)){let m=this._camera,v=m.right-m.left,y=m.top-m.bottom,w=n?Math.max(v/g.x,y/g.y):Math.min(v/g.x,y/g.y);a.push(this.moveTo(A.x,A.y,A.z,e)),a.push(this.zoomTo(w,e)),a.push(this.setFocalOffset(0,0,0,e))}return Promise.all(a)}fitToSphere(t,e){let n=[],i=t instanceof $t.Sphere?Ub.copy(t):dfe(t,Ub);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),uh(this._camera)){let r=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(r,e))}else if(Lu(this._camera)){let r=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,o=2*i.radius,a=Math.min(r/o,s/o);n.push(this.zoomTo(a,e))}return n.push(this.setFocalOffset(0,0,0,e)),Promise.all(n)}setLookAt(t,e,n,i,r,s,o=!1){let a=ri.set(i,r,s),l=bn.set(t,e,n);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(l.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let c=!o||Ti(this._target.x,this._targetEnd.x,this.restThreshold)&&Ti(this._target.y,this._targetEnd.y,this.restThreshold)&&Ti(this._target.z,this._targetEnd.z,this.restThreshold)&&Ti(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ti(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ti(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(t,e,n,i,r,s,o,a,l,c,u,f,h,d=!1){let p=bn.set(i,r,s),g=ri.set(t,e,n);Qa.setFromVector3(g.sub(p).applyQuaternion(this._yAxisUpSpace));let A=up.set(c,u,f),m=ri.set(o,a,l);k1.setFromVector3(m.sub(A).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(A,h));let v=k1.theta-Qa.theta,y=k1.phi-Qa.phi,w=k1.radius-Qa.radius;this._sphericalEnd.set(Qa.radius+w*h,Qa.phi+y*h,Qa.theta+v*h),this.normalizeRotations(),this._needsUpdate=!0,d||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let S=!d||Ti(this._target.x,this._targetEnd.x,this.restThreshold)&&Ti(this._target.y,this._targetEnd.y,this.restThreshold)&&Ti(this._target.z,this._targetEnd.z,this.restThreshold)&&Ti(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ti(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ti(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(S)}setPosition(t,e,n,i=!1){return this.setLookAt(t,e,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(t,e,n,i=!1){let r=this.getPosition(bn);return this.setLookAt(r.x,r.y,r.z,t,e,n,i)}setFocalOffset(t,e,n,i=!1){this._focalOffsetEnd.set(t,e,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);let r=!i||Ti(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ti(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ti(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(t,e,n){this._camera.updateMatrixWorld(),Bl.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Rl.setFromMatrixColumn(this._camera.matrixWorldInverse,1),fh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let i=bn.set(t,e,n),r=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);Bl.multiplyScalar(s.x),Rl.multiplyScalar(s.y),fh.multiplyScalar(s.z),bn.copy(Bl).add(Rl).add(fh),bn.z=bn.z+r,this.dollyTo(r,!1),this.setFocalOffset(-bn.x,bn.y,-bn.z,!1),this.moveTo(t,e,n,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,n,i){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new $t.Vector4,typeof t=="number"?this._viewport.set(t,e,n,i):this._viewport.copy(t)}getDistanceToFitBox(t,e,n,i=!1){if(Ob(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let r=t/e,s=this._camera.getEffectiveFOV()*$t.MathUtils.DEG2RAD,o=this._camera.aspect;return((i?r>o:r<o)?e:t/o)*.5/Math.tan(s*.5)+n*.5}getDistanceToFitSphere(t){if(Ob(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let e=this._camera.getEffectiveFOV()*$t.MathUtils.DEG2RAD,n=Math.atan(Math.tan(e*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?e:n;return t/Math.sin(i*.5)}getTarget(t){return(t&&t.isVector3?t:new $t.Vector3).copy(this._targetEnd)}getPosition(t){return(t&&t.isVector3?t:new $t.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(t){return(t&&t.isVector3?t:new $t.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%cp,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=cp),this._spherical.theta+=cp*Math.round((this._sphericalEnd.theta-this._spherical.theta)/cp)}reset(t=!1){let e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ax),nF(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(t){let e=this._state===St.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(e*t*60,1),i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=sF.subVectors(this._targetEnd,this._target),a=oF.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Bi(i)||!Bi(r)||!Bi(s)||!Bi(o.x)||!Bi(o.y)||!Bi(o.z)||!Bi(a.x)||!Bi(a.y)||!Bi(a.z)?(this._spherical.set(this._spherical.radius+s*n,this._spherical.phi+r*n,this._spherical.theta+i*n),this._target.add(o.multiplyScalar(n)),this._focalOffset.add(a.multiplyScalar(n)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(uh(this._camera)){let f=this._camera,h=bn.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),d=ri.copy(h).cross(f.up).normalize();d.lengthSq()===0&&(d.x=1);let p=up.crossVectors(d,h),g=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*$t.MathUtils.DEG2RAD*.5),A=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,m=bn.copy(this._targetEnd).add(d.multiplyScalar(this._dollyControlCoord.x*g*f.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*g));this._targetEnd.lerp(m,A)}else if(Lu(this._camera)){let f=this._camera,h=f.getWorldDirection(bn.clone()),d=this._targetEnd.x*h.x+this._targetEnd.y*h.y+this._targetEnd.z*h.z,p=bn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),g=ri.set(0,0,-1).applyQuaternion(f.quaternion),A=up.copy(p).add(g.multiplyScalar(-p.dot(f.up))),m=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom;this._targetEnd.lerp(A,m);let v=this._targetEnd.x*h.x+this._targetEnd.y*h.y+this._targetEnd.z*h.z,y=h.multiplyScalar(v-d);this._targetEnd.sub(y)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}let l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Bi(this._focalOffset.x)||!Bi(this._focalOffset.y)||!Bi(this._focalOffset.z))&&(this._camera.updateMatrix(),Bl.setFromMatrixColumn(this._camera.matrix,0),Rl.setFromMatrixColumn(this._camera.matrix,1),fh.setFromMatrixColumn(this._camera.matrix,2),Bl.multiplyScalar(this._focalOffset.x),Rl.multiplyScalar(-this._focalOffset.y),fh.multiplyScalar(this._focalOffset.z),bn.copy(Bl).add(Rl).add(fh),this._camera.position.add(bn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),bn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let c=this._zoomEnd-this._zoom;this._zoom+=c*n,this._camera.zoom!==this._zoom&&(Bi(c)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);let u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Bi(i,this.restThreshold)&&Bi(r,this.restThreshold)&&Bi(s,this.restThreshold)&&Bi(o.x,this.restThreshold)&&Bi(o.y,this.restThreshold)&&Bi(o.z,this.restThreshold)&&Bi(a.x,this.restThreshold)&&Bi(a.y,this.restThreshold)&&Bi(a.z,this.restThreshold)&&Bi(c,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:z1(this.maxDistance),minZoom:this.minZoom,maxZoom:z1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:z1(this.maxPolarAngle),minAzimuthAngle:z1(this.minAzimuthAngle),maxAzimuthAngle:z1(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:bn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,e=!1){let n=JSON.parse(t),i=bn.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=U1(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=U1(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=U1(n.maxPolarAngle),this.minAzimuthAngle=U1(n.minAzimuthAngle),this.maxAzimuthAngle=U1(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],e),Qa.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Qa.theta,Qa.phi,e),this.zoomTo(n.zoom,e),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],e),this._needsUpdate=!0}dispose(){this._removeAllEventListeners()}_findPointerById(t){let e=null;return this._activePointers.some(n=>n.pointerId===t?(e=n,!0):!1),e}_encloseToBoundary(t,e,n){let i=e.lengthSq();if(i===0)return t;let r=ri.copy(e).add(t),s=this._boundary.clampPoint(r,up).sub(r),o=s.lengthSq();if(o===0)return t.add(e);if(o===i)return t;if(n===0)return t.add(e).add(s);{let a=1+n*o/e.dot(s);return t.add(ri.copy(e).multiplyScalar(a)).add(s.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(uh(this._camera)){let t=this._camera,e=t.near,n=t.getEffectiveFOV()*$t.MathUtils.DEG2RAD,i=Math.tan(n*.5)*e,r=i*t.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(Lu(this._camera)){let t=this._camera,e=1/t.zoom,n=t.left*e,i=t.right*e,r=t.top*e,s=t.bottom*e;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(n,s,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||Ob(this._camera,"_collisionTest"))return t;let e=bn.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);Nb.lookAt(rF,e,this._camera.up);for(let n=0;n<4;n++){let i=ri.copy(this._nearPlaneCorners[n]);i.applyMatrix4(Nb);let r=up.addVectors(this._target,i);vx.set(r,e),vx.far=this._spherical.radius+1;let s=vx.intersectObjects(this.colliderMeshes);s.length!==0&&s[0].distance<t&&(t=s[0].distance)}return t}_getClientRect(t){let e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{let n=()=>{this.removeEventListener("rest",n),e()};this.addEventListener("rest",n)}))}_removeAllEventListeners(){}};function dfe(t,e){let n=e,i=n.center;Lm.makeEmpty(),t.traverseVisible(s=>{s.isMesh&&Lm.expandByObject(s)}),Lm.getCenter(i);let r=0;return t.traverseVisible(s=>{if(!s.isMesh)return;let o=s,a=o.geometry.clone();if(a.applyMatrix4(o.matrixWorld),a.isBufferGeometry){let l=a.attributes.position;for(let c=0,u=l.count;c<u;c++)bn.fromBufferAttribute(l,c),r=Math.max(r,i.distanceToSquared(bn))}else{let l=a.attributes.position,c=new $t.Vector3;for(let u=0,f=l.count;u<f;u++)c.fromBufferAttribute(l,u),r=Math.max(r,i.distanceToSquared(c))}}),n.radius=Math.sqrt(r),n}function oI(t){return t/180*Math.PI}function uF(t){return t.map(e=>oI(e))}function RW(t){return t.replace("http://localhost:3001/customize","").replace("https://shadergradient.co/customize","").replace("https://www.shadergradient.co/customize","")}function pfe({type:t,cAzimuthAngle:e,cPolarAngle:n,cDistance:i,cameraZoom:r,zoomOut:s,enableTransition:o}){let a=E.useRef(),l=a.current;return Ct((c,u)=>a.current.update(u)),E.useEffect(()=>{l==null||l.rotateTo(oI(e),oI(n),o)},[l,e,n]),E.useEffect(()=>{s?t==="sphere"?(l==null||l.dollyTo(jL.distance,o),l==null||l.zoomTo(jL.zoom,o)):(l==null||l.dollyTo(WL.distance,o),l==null||l.zoomTo(WL.zoom,o)):t==="sphere"?(l==null||l.zoomTo(r,o),l==null||l.dollyTo(Aue,o)):(l==null||l.dollyTo(i,o),l==null||l.zoomTo(gue,o))},[l,s,t,r,i]),a}function mfe(t){var e=t,{dampingFactor:n=.05}=e,i=Cf(e,["dampingFactor"]);cF.install({THREE:Fw}),ui({CameraControls:cF});let r=Fe(a=>a.camera),s=Fe(a=>a.gl),o=pfe(i);return Re.jsx("cameraControls",{ref:o,args:[r,s.domElement],enableDamping:!0,dampingFactor:n,zoomSpeed:10,dollySpeed:10,restThreshold:0})}var gfe=class extends Rw{constructor(t){super(t),this.type=On}parse(t){let e=function(A,m){switch(A){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(m||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(m||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(m||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(m||""))}},n=`
`,i=function(A,m,v){m=m||1024;let y=A.pos,w=-1,S=0,C="",b=String.fromCharCode.apply(null,new Uint16Array(A.subarray(y,y+128)));for(;0>(w=b.indexOf(n))&&S<m&&y<A.byteLength;)C+=b,S+=b.length,y+=128,b+=String.fromCharCode.apply(null,new Uint16Array(A.subarray(y,y+128)));return-1<w?(A.pos+=S+w+1,C+b.slice(0,w)):!1},r=function(A){let m=/^#\?(\S+)/,v=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},b,M;for((A.pos>=A.byteLength||!(b=i(A)))&&e(1,"no header found"),(M=b.match(m))||e(3,"bad initial token"),C.valid|=1,C.programtype=M[1],C.string+=b+`
`;b=i(A),b!==!1;){if(C.string+=b+`
`,b.charAt(0)==="#"){C.comments+=b+`
`;continue}if((M=b.match(v))&&(C.gamma=parseFloat(M[1])),(M=b.match(y))&&(C.exposure=parseFloat(M[1])),(M=b.match(w))&&(C.valid|=2,C.format=M[1]),(M=b.match(S))&&(C.valid|=4,C.height=parseInt(M[1],10),C.width=parseInt(M[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2||e(3,"missing format specifier"),C.valid&4||e(3,"missing image size specifier"),C},s=function(A,m,v){let y=m;if(y<8||y>32767||A[0]!==2||A[1]!==2||A[2]&128)return new Uint8Array(A);y!==(A[2]<<8|A[3])&&e(3,"wrong scanline width");let w=new Uint8Array(4*m*v);w.length||e(4,"unable to allocate buffer space");let S=0,C=0,b=4*y,M=new Uint8Array(4),I=new Uint8Array(b),T=v;for(;T>0&&C<A.byteLength;){C+4>A.byteLength&&e(1),M[0]=A[C++],M[1]=A[C++],M[2]=A[C++],M[3]=A[C++],(M[0]!=2||M[1]!=2||(M[2]<<8|M[3])!=y)&&e(3,"bad rgbe scanline format");let D=0,R;for(;D<b&&C<A.byteLength;){R=A[C++];let F=R>128;if(F&&(R-=128),(R===0||D+R>b)&&e(3,"bad scanline data"),F){let V=A[C++];for(let j=0;j<R;j++)I[D++]=V}else I.set(A.subarray(C,C+R),D),D+=R,C+=R}let z=y;for(let F=0;F<z;F++){let V=0;w[S]=I[F+V],V+=y,w[S+1]=I[F+V],V+=y,w[S+2]=I[F+V],V+=y,w[S+3]=I[F+V],S+=4}T--}return w},o=function(A,m,v,y){let w=A[m+3],S=Math.pow(2,w-128)/255;v[y+0]=A[m+0]*S,v[y+1]=A[m+1]*S,v[y+2]=A[m+2]*S,v[y+3]=1},a=function(A,m,v,y){let w=A[m+3],S=Math.pow(2,w-128)/255;v[y+0]=rl.toHalfFloat(Math.min(A[m+0]*S,65504)),v[y+1]=rl.toHalfFloat(Math.min(A[m+1]*S,65504)),v[y+2]=rl.toHalfFloat(Math.min(A[m+2]*S,65504)),v[y+3]=rl.toHalfFloat(1)},l=new Uint8Array(t);l.pos=0;let c=r(l),u=c.width,f=c.height,h=s(l.subarray(l.pos),u,f),d,p,g;switch(this.type){case vn:g=h.length/4;let A=new Float32Array(g*4);for(let v=0;v<g;v++)o(h,v*4,A,v*4);d=A,p=vn;break;case On:g=h.length/4;let m=new Uint16Array(g*4);for(let v=0;v<g;v++)a(h,v*4,m,v*4);d=m,p=On;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:f,data:d,header:c.string,gamma:c.gamma,exposure:c.exposure,type:p}}setDataType(t){return this.type=t,this}load(t,e,n,i){function r(s,o){switch(s.type){case vn:case On:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Vt,s.magFilter=Vt,s.generateMipmaps=!1,s.flipY=!0;break}e&&e(s,o)}return super.load(t,r,n,i)}};function Gb(t,{path:e}){return bi(gfe,t,n=>n.setPath(e))}var Afe=t=>t.current&&t.current.isScene,vfe=t=>Afe(t)?t.current:t;function yfe({background:t=!1,envPreset:e}){let n=Gb("city.hdr",{path:Pb}),i=Gb("dawn.hdr",{path:Pb}),r=Gb("lobby.hdr",{path:Pb}),s={city:n,dawn:i,lobby:r}[e],o=Fe(l=>l.scene);Es.useLayoutEffect(()=>{if(s){let l=vfe(o);l.background;let c=l.environment;return t!=="only"&&(l.environment=s),t&&(l.background=s),()=>{t!=="only"&&(l.environment=c),t&&(l.background="black")}}},[o,s,t]);let a=s;return a.mapping=yf,null}var Hb=0;function xfe(){let[t,e]=E.useState({});return ju.onLoad=()=>{e(n=>Sf(ci({},n),{active:!1}))},ju.onProgress=(n,i,r)=>{i===r&&(Hb=r);let s=(i-Hb)/(r-Hb)*100||100;e(o=>Sf(ci({},o),{active:!0,item:n,loaded:i,total:r,progress:s}))},t}function _fe({lightType:t,brightness:e,envPreset:n}){return Re.jsxs(Re.Fragment,{children:[t==="3d"&&Re.jsx("ambientLight",{intensity:e||1}),t==="env"&&Re.jsx(E.Suspense,{fallback:Re.jsx(Efe,{}),children:Re.jsx(yfe,{envPreset:n,background:!1,loadingCallback:()=>{}})})]})}function Efe(){let{progress:t}=xfe();return E.useEffect(()=>{let e=document.getElementById("LoaderRoot");e&&t&&(t===100?(e.innerHTML="Ligths are loaded",setTimeout(()=>{e.innerHTML=""},1e3)):e.innerHTML="Loading lights...")},[t]),Re.jsx("ambientLight",{intensity:.4})}function wfe(t,e,n){return class extends Ji{constructor(){let i=Object.entries(t),r=i.reduce((s,[o,a])=>{let l=Ra.clone({[o]:{value:a}});return ci(ci({},s),l)},{});super({color:"#ffffff",linewidth:5,userData:r,onBeforeCompile:s=>{s.uniforms=ci(ci({},s.uniforms),r),s.vertexShader=e}}),i.forEach(([s])=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:o=>this.uniforms[s].value=o}))}}}Zt.uv2_pars_vertex="";Zt.uv2_vertex="";Zt.uv2_pars_fragment="";Zt.encodings_fragment="";function Sfe(t,e,n,i){return class extends qs{constructor(){let r=Object.entries(t),s=t.colors,o=Qb(s[0]),a=Qb(s[1]),l=Qb(s[2]),c={uC1r:{value:Ec(o==null?void 0:o.r)},uC1g:{value:Ec(o==null?void 0:o.g)},uC1b:{value:Ec(o==null?void 0:o.b)},uC2r:{value:Ec(a==null?void 0:a.r)},uC2g:{value:Ec(a==null?void 0:a.g)},uC2b:{value:Ec(a==null?void 0:a.b)},uC3r:{value:Ec(l==null?void 0:l.r)},uC3g:{value:Ec(l==null?void 0:l.g)},uC3b:{value:Ec(l==null?void 0:l.b)}},u=r.reduce((f,[h,d])=>{let p=Ra.clone({[h]:{value:d}});return ci(ci({},f),p)},{});super({metalness:.2,userData:u,side:Qn,onBeforeCompile:f=>{f.uniforms=ci(ci(ci({},f.uniforms),u),c),f.vertexShader=e,f.fragmentShader=n}}),r.forEach(([f])=>Object.defineProperty(this,f,{get:()=>this.uniforms[f].value,set:h=>this.uniforms[f].value=h}))}}}function Qb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Ec(t=0){return t/255}var PW={};au(PW,{defaults:()=>wB,positionMix:()=>OW});var wB={};au(wB,{plane:()=>DW,sphere:()=>LW,waterPlane:()=>FW});var DW={};au(DW,{fragment:()=>Cfe,vertex:()=>bfe});var Cfe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,bfe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,LW={};au(LW,{fragment:()=>Mfe,vertex:()=>Tfe});var Mfe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,Tfe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,FW={};au(FW,{fragment:()=>Ife,vertex:()=>Bfe});var Ife=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,Bfe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,OW={};au(OW,{plane:()=>zW,sphere:()=>UW,waterPlane:()=>kW});var zW={};au(zW,{fragment:()=>Rfe,vertex:()=>Pfe});var Rfe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",Pfe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,UW={};au(UW,{fragment:()=>Dfe,vertex:()=>Lfe});var Dfe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,Lfe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,kW={};au(kW,{fragment:()=>Ffe,vertex:()=>Ofe});var Ffe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",Ofe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`;function zfe({type:t,shader:e,color1:n,color2:i,color3:r,uTime:s,uSpeed:o,uDensity:a,uStrength:l,uFrequency:c,uAmplitude:u}){let[f,h]=E.useState(!1),d=t??"plane",p=wB[d];e&&e!=="defaults"&&(p=PW[e][d]);let g=Sfe({colors:[n,i,r],uTime:s,uSpeed:o,uLoadingTime:0,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},p.vertex,p.fragment),A=wfe({uTime:s,uSpeed:o,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},p.vertex);return ui({ColorShiftMaterial:g}),ui({HoveredLineMaterial:A}),E.useEffect(()=>{h(!0)},[]),f}var{to:fF,rotDur:e6e,meshDur:Vb,rotDelay:t6e,meshDelay:Wb}=vue,jb=new b0,Ufe=20;function kfe({animate:t,range:e,rangeStart:n,rangeEnd:i}){let r=E.useRef(),s=E.useRef(),o=0;return Ct((a,l)=>{if(r.current){let c=jb.getElapsedTime();if(e==="enabled"&&(c=n,c=c+jb.getElapsedTime(),c>=i&&(c=n,jb.start())),c>Wb){let u=r.current.userData.uLoadingTime.value,f=c<Vb+Wb?Math.easeInOutCubic(o,u,fF-u,Vb*1e3):fF;r.current.userData.uLoadingTime.value=f,c<Vb+Wb&&(o+=Ufe)}t==="on"&&(r.current.userData.uTime.value=c,s.current!==void 0&&(s.current.userData.uTime.value=c))}}),{material:r,linemat:s}}Math.easeInOutCubic=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e)};var yx=192,xx=36,Nfe=({type:t,animate:e,range:n,rangeStart:i,rangeEnd:r,uTime:s,uSpeed:o,uStrength:a,uDensity:l,uFrequency:c,uAmplitude:u,positionX:f,positionY:h,positionZ:d,rotationX:p,rotationY:g,rotationZ:A,color1:m,color2:v,color3:y,reflection:w,wireframe:S,shader:C,rotSpringOption:b=({rotation:I})=>({to:(T,D)=>VL(void 0,null,function*(){yield T({animatedRotation:I})}),from:{rotation:uF([0,0,0])},config:{duration:300}}),posSpringOption:M=({position:I})=>({to:(T,D)=>VL(void 0,null,function*(){yield T({animatedPosition:I})}),from:{position:[0,0,0]},config:{duration:300}})})=>{let I=zfe({type:t,shader:C,color1:m,color2:v,color3:y,uTime:s,uSpeed:o,uDensity:l,uStrength:a,uFrequency:c,uAmplitude:u}),{material:T,linemat:D}=kfe({animate:e,range:n,rangeStart:i,rangeEnd:r}),R=[f,h,d],z=uF([p,g,A]),{animatedPosition:F}=sd(M({position:R})),{animatedRotation:V}=sd(b({rotation:z}));return Re.jsxs("group",{children:[Re.jsxs(sI.mesh,{position:F,rotation:V,name:"shadergradient-mesh",children:[t==="plane"&&Re.jsx("planeGeometry",{args:[10,10,1,yx]}),t==="sphere"&&Re.jsx("icosahedronGeometry",{args:[1,yx/3]}),t==="waterPlane"&&Re.jsx("planeGeometry",{args:[10,10,yx,yx]}),I&&Re.jsx("colorShiftMaterial",{ref:T,roughness:1-w})]}),Re.jsx("mesh",{children:Re.jsxs("lineSegments",{renderOrder:1,position:R,rotation:z,visible:!1,children:[t==="plane"&&Re.jsx("planeGeometry",{args:[10,10,1,xx]}),t==="sphere"&&Re.jsx("icosahedronGeometry",{args:[1,xx/3]}),t==="waterPlane"&&Re.jsx("planeGeometry",{args:[10,10,xx,xx]}),I&&Re.jsx("hoveredLineMaterial",{ref:D})]})})]})},NW=cue(pue()),Gfe=NW.parse(RW(yue[0].url),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"});function Hfe(t){var e=t,{control:n="props",dampingFactor:i,rotSpringOption:r,posSpringOption:s,isFigmaPlugin:o=!1,enableTransition:a=!0}=e,l=Cf(e,["control","dampingFactor","rotSpringOption","posSpringOption","isFigmaPlugin","enableTransition"]);let c=ci(ci({},Gfe),l);n==="query"&&(c=NW.parse(RW(l.urlString),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"}));let u=c,{lightType:f,envPreset:h,brightness:d,grain:p,grainBlending:g,toggleAxis:A}=u,m=Cf(u,["lightType","envPreset","brightness","grain","grainBlending","toggleAxis"]);return Jue(p==="off",g||1),Re.jsxs(Re.Fragment,{children:[Re.jsx(_fe,{lightType:f,brightness:d,envPreset:h}),Re.jsx(Nfe,Sf(ci({},m),{rotSpringOption:r,posSpringOption:s}),JSON.stringify(m)),A&&Re.jsx(ufe,{isFigmaPlugin:o}),Re.jsx(mfe,ci({dampingFactor:i,enableTransition:a},m))]})}/*! Bundled license information:

camera-controls/dist/camera-controls.module.js:
  (*!
   * camera-controls
   * https://github.com/yomotsu/camera-controls
   * (c) 2017 @yomotsu
   * Released under the MIT License.
   *)
*/function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Te.apply(null,arguments)}const qv=new L,SB=new L,Qfe=new L,hF=new Ie;function Vfe(t,e,n){const i=qv.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function Wfe(t,e){const n=qv.setFromMatrixPosition(t.matrixWorld),i=SB.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(Qfe);return r.angleTo(s)>Math.PI/2}function jfe(t,e,n,i){const r=qv.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),hF.set(s.x,s.y),n.setFromCamera(hF,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function Xfe(t,e){if(e instanceof Hn)return e.zoom;if(e instanceof an){const n=qv.setFromMatrixPosition(t.matrixWorld),i=SB.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function Yfe(t,e,n){if(e instanceof an||e instanceof Hn){const i=qv.setFromMatrixPosition(t.matrixWorld),r=SB.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const aI=t=>Math.abs(t)<1e-10?0:t;function GW(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=aI(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const qfe=(t=>e=>GW(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),$fe=(t=>(e,n)=>GW(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function Kfe(t){return t&&typeof t=="object"&&"current"in t}const $v=E.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:d,receiveShadow:p,material:g,geometry:A,zIndexRange:m=[16777271,0],calculatePosition:v=Vfe,as:y="div",wrapperClass:w,pointerEvents:S="auto",...C},b)=>{const{gl:M,camera:I,scene:T,size:D,raycaster:R,events:z,viewport:F}=Fe(),[V]=E.useState(()=>document.createElement(y)),j=E.useRef(),Z=E.useRef(null),U=E.useRef(0),$=E.useRef([0,0]),X=E.useRef(null),Q=E.useRef(null),J=(a==null?void 0:a.current)||z.connected||M.domElement.parentNode,ne=E.useRef(null),O=E.useRef(!1),N=E.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&Kfe(f[0]),[f]);E.useLayoutEffect(()=>{const ce=M.domElement;f&&f==="blending"?(ce.style.zIndex=`${Math.floor(m[0]/2)}`,ce.style.position="absolute",ce.style.pointerEvents="none"):(ce.style.zIndex=null,ce.style.position=null,ce.style.pointerEvents=null)},[f]),E.useLayoutEffect(()=>{if(Z.current){const ce=j.current=h8(V);if(T.updateMatrixWorld(),u)V.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ge=v(Z.current,I,D);V.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ge[0]}px,${ge[1]}px,0);transform-origin:0 0;`}return J&&(r?J.prepend(V):J.appendChild(V)),()=>{J&&J.removeChild(V),ce.unmount()}}},[J,u]),E.useLayoutEffect(()=>{w&&(V.className=w)},[w]);const G=E.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...n},[n,s,o,D,u]),H=E.useMemo(()=>({position:"absolute",pointerEvents:S}),[S]);E.useLayoutEffect(()=>{if(O.current=!1,u){var ce;(ce=j.current)==null||ce.render(E.createElement("div",{ref:X,style:G},E.createElement("div",{ref:Q,style:H},E.createElement("div",{ref:b,className:i,style:n,children:t}))))}else{var ge;(ge=j.current)==null||ge.render(E.createElement("div",{ref:b,style:G,className:i,children:t}))}});const oe=E.useRef(!0);Ct(ce=>{if(Z.current){I.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const ge=u?$.current:v(Z.current,I,D);if(u||Math.abs(U.current-I.zoom)>e||Math.abs($.current[0]-ge[0])>e||Math.abs($.current[1]-ge[1])>e){const q=Wfe(Z.current,I);let xe=!1;N&&(Array.isArray(f)?xe=f.map(Le=>Le.current):f!=="blending"&&(xe=[T]));const ue=oe.current;if(xe){const Le=jfe(Z.current,I,R,xe);oe.current=Le&&!q}else oe.current=!q;ue!==oe.current&&(h?h(!oe.current):V.style.display=oe.current?"block":"none");const me=Math.floor(m[0]/2),pe=f?N?[m[0],me]:[me-1,0]:m;if(V.style.zIndex=`${Yfe(Z.current,I,pe)}`,u){const[Le,re]=[D.width/2,D.height/2],ie=I.projectionMatrix.elements[5]*re,{isOrthographicCamera:te,top:W,left:Me,bottom:De,right:Ee}=I,_e=qfe(I.matrixWorldInverse),Ze=te?`scale(${ie})translate(${aI(-(Ee+Me)/2)}px,${aI((W+De)/2)}px)`:`translateZ(${ie}px)`;let Oe=Z.current.matrixWorld;c&&(Oe=I.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(Z.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),V.style.width=D.width+"px",V.style.height=D.height+"px",V.style.perspective=te?"":`${ie}px`,X.current&&Q.current&&(X.current.style.transform=`${Ze}${_e}translate(${Le}px,${re}px)`,Q.current.style.transform=$fe(Oe,1/((l||10)/400)))}else{const Le=l===void 0?1:Xfe(Z.current,I)*l;V.style.transform=`translate3d(${ge[0]}px,${ge[1]}px,0) scale(${Le})`}$.current=ge,U.current=I.zoom}}if(!N&&ne.current&&!O.current)if(u){if(X.current){const ge=X.current.children[0];if(ge!=null&&ge.clientWidth&&ge!=null&&ge.clientHeight){const{isOrthographicCamera:q}=I;if(q||A)C.scale&&(Array.isArray(C.scale)?C.scale instanceof L?ne.current.scale.copy(C.scale.clone().divideScalar(1)):ne.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):ne.current.scale.setScalar(1/C.scale));else{const xe=(l||10)/400,ue=ge.clientWidth*xe,me=ge.clientHeight*xe;ne.current.scale.set(ue,me,1)}O.current=!0}}}else{const ge=V.children[0];if(ge!=null&&ge.clientWidth&&ge!=null&&ge.clientHeight){const q=1/F.factor,xe=ge.clientWidth*q,ue=ge.clientHeight*q;ne.current.scale.set(xe,ue,1),O.current=!0}ne.current.lookAt(ce.camera.position)}});const de=E.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return E.createElement("group",Te({},C,{ref:Z}),f&&!N&&E.createElement("mesh",{castShadow:d,receiveShadow:p,ref:ne},A||E.createElement("planeGeometry",null),g||E.createElement("shaderMaterial",{side:Qn,vertexShader:de.vertexShader,fragmentShader:de.fragmentShader})))});function Jfe({onChanged:t,portal:e,preventDefault:n=!0,scroll:i=!0,keyCode:r=9}){const s=E.useRef(0),o=Fe(c=>c.setEvents),a=Fe(c=>c.get),l=Fe(c=>c.gl);return E.useEffect(()=>{var c;let u=[],f;const h=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,p=()=>d&&t&&t(u,Math.round(s.current)%u.length);o({filter:(y,w)=>{let S=[...y];(S.length!==u.length||!u.every(C=>S.map(b=>b.object.uuid).includes(C.object.uuid)))&&(s.current=0,u=S,p()),h&&(S=h(S,w));for(let C=0;C<Math.round(s.current)%S.length;C++){const b=S.shift();S=[...S,b]}return S}});const g=y=>{var w,S;s.current=y(s.current),(w=a().events.handlers)==null||w.onPointerCancel(void 0),(S=a().events.handlers)==null||S.onPointerMove(f),p()},A=y=>{(y.keyCode||y.which)===r&&(n&&y.preventDefault(),u.length>1&&g(w=>w+1))},m=y=>{n&&y.preventDefault();let w=0;y||(y=window.event),y.wheelDelta?w=y.wheelDelta/120:y.detail&&(w=-y.detail/3),u.length>1&&g(S=>Math.abs(S-w))},v=y=>f=y;return document.addEventListener("pointermove",v,{passive:!0}),i&&document.addEventListener("wheel",m),r!==void 0&&document.addEventListener("keydown",A),()=>{o({filter:h}),r!==void 0&&document.removeEventListener("keydown",A),i&&document.removeEventListener("wheel",m),document.removeEventListener("pointermove",v)}},[l,a,o,n,i,r]),null}function Zfe(t,e="pointer",n="auto",i=document.body){E.useEffect(()=>{if(t)return i.style.cursor=e,()=>void(i.style.cursor=n)},[t])}let N1=0;const CB=Ow(t=>(ju.onStart=(e,n,i)=>{t({active:!0,item:e,loaded:n,total:i,progress:(n-N1)/(i-N1)*100})},ju.onLoad=()=>{t({active:!1})},ju.onError=e=>t(n=>({errors:[...n.errors,e]})),ju.onProgress=(e,n,i)=>{n===i&&(N1=i),t({active:!0,item:e,loaded:n,total:i,progress:(n-N1)/(i-N1)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function ehe({children:t}){const e=CB();return E.createElement(E.Fragment,null,t==null?void 0:t(e))}const the=t=>`Loading ${t.toFixed(2)}%`;function nhe({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:i,dataInterpolation:r=the,initialState:s=o=>o}){const{active:o,progress:a}=CB(),l=E.useRef(0),c=E.useRef(0),u=E.useRef(null),[f,h]=E.useState(s(o));E.useEffect(()=>{let p;return o!==f&&(p=setTimeout(()=>h(o),300)),()=>clearTimeout(p)},[f,o]);const d=E.useCallback(()=>{u.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=r(l.current),l.current<a&&(c.current=requestAnimationFrame(d)))},[r,a]);return E.useEffect(()=>(d(),()=>cancelAnimationFrame(c.current)),[d]),f?E.createElement("div",{style:{..._x.container,opacity:o?1:0,...t}},E.createElement("div",null,E.createElement("div",{style:{..._x.inner,...e}},E.createElement("div",{style:{..._x.bar,transform:`scaleX(${a/100})`,...n}}),E.createElement("span",{ref:u,style:{..._x.data,...i}})))):null}const _x={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function ihe(t,e,n){return Math.max(e,Math.min(t,n))}const Si={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function dF(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function pF(t,e,n,i=.15){return i===0?ihe(t,e,n):t<e?-dF(e-t,n-e,i)+e:t>n?+dF(t-n,n-e,i)+n:t}function rhe(t,[e,n],[i,r]){const[[s,o],[a,l]]=t;return[pF(e,s,o,i),pF(n,a,l,r)]}function she(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ohe(t){var e=she(t,"string");return typeof e=="symbol"?e:String(e)}function Ar(t,e,n){return e=ohe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(i){Ar(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const HW={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function gF(t){return t?t[0].toUpperCase()+t.slice(1):""}const ahe=["enter","leave"];function lhe(t=!1,e){return t&&!ahe.includes(e)}function che(t,e="",n=!1){const i=HW[t],r=i&&i[e]||e;return"on"+gF(t)+gF(r)+(lhe(n,r)?"Capture":"")}const uhe=["gotpointercapture","lostpointercapture"];function fhe(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const i=uhe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:n}}function hhe(t,e=""){const n=HW[t],i=n&&n[e]||e;return t+i}function eS(t){return"touches"in t}function QW(t){return eS(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function dhe(t){return Array.from(t.touches).filter(e=>{var n,i;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(i=n.contains)===null||i===void 0?void 0:i.call(n,e.target))})}function phe(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function VW(t){return eS(t)?phe(t)[0]:t}function lI(t,e){try{const n=e.clientX-t.clientX,i=e.clientY-t.clientY,r=(e.clientX+t.clientX)/2,s=(e.clientY+t.clientY)/2,o=Math.hypot(n,i);return{angle:-(Math.atan2(n,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function mhe(t){return dhe(t).map(e=>e.identifier)}function AF(t,e){const[n,i]=Array.from(t.touches).filter(r=>e.includes(r.identifier));return lI(n,i)}function Xb(t){const e=VW(t);return eS(t)?e.identifier:e.pointerId}function a0(t){const e=VW(t);return[e.clientX,e.clientY]}const vF=40,yF=800;function WW(t){let{deltaX:e,deltaY:n,deltaMode:i}=t;return i===1?(e*=vF,n*=vF):i===2&&(e*=yF,n*=yF),[e,n]}function ghe(t){var e,n;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=t.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(n=r??o)!==null&&n!==void 0?n:0]}function Ahe(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s})}return e}function AE(t,...e){return typeof t=="function"?t(...e):t}function vhe(){}function yhe(...t){return t.length===0?vhe:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function xF(t,e){return Object.assign({},e,t||{})}const xhe=32;class jW{constructor(e,n,i){this.ctrl=e,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:i,args:r}=this;n[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,i=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=i.from?AE(i.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:i,shared:r}=this;n.args=this.args;let s=0;if(e&&(n.event=e,i.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Ahe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const C=n._delta.map(Math.abs);Si.addTo(n._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=i.threshold,{_step:u,values:f}=n;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[C,b]=f;h[0]=u[0]!==!1?C-u[0]:0,h[1]=u[1]!==!1?b-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const d=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=r[this.ingKey]=n._active,e&&(n.first&&("bounds"in i&&(n._bounds=AE(i.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[g,A]=n.offset,[[m,v],[y,w]]=n._bounds;n.overflow=[g<m?-1:g>v?1:0,A<y?-1:A>w?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const S=n._active?i.rubberband||[0,0]:[0,0];if(n.offset=rhe(n._bounds,n.offset,S),n.delta=Si.sub(n.offset,d),this.computeMovement(),p&&(!n.last||s>xhe)){n.delta=Si.sub(n.offset,d);const C=n.delta.map(Math.abs);Si.addTo(n.distance,C),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[C[0]/s,C[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(ki(ki(ki({},n),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function _he([t,e],n){const i=Math.abs(t),r=Math.abs(e);if(i>r&&i>n)return"x";if(r>i&&r>n)return"y"}class Kv extends jW{constructor(...e){super(...e),Ar(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Si.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Si.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,i=this.config;if(!n.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[QW(e)]:i.axisThreshold;n.axis=_he(n._movement,r)}n._blocked=(i.lockDirection||!!i.axis)&&!n.axis||!!i.axis&&i.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Ehe=t=>t,_F=.15,XW={enabled(t=!0){return t},eventOptions(t,e,n){return ki(ki({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[_F,_F];case!1:return[0,0];default:return Si.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Si.toVector(t)},transform(t,e,n){const i=t||n.shared.transform;return this.hasCustomTransform=!!i,i||Ehe},threshold(t){return Si.toVector(t,0)}},whe=0,vd=ki(ki({},XW),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=whe){return t},bounds(t={}){if(typeof t=="function")return s=>vd.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:i=-1/0,bottom:r=1/0}=t;return[[e,n],[i,r]]}}),EF={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class She extends Kv{constructor(...e){super(...e),Ar(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:n.left-i.left+e.offset[0],right:n.right-i.right+e.offset[0],top:n.top-i.top+e.offset[1],bottom:n.bottom-i.bottom+e.offset[1]};e._bounds=vd.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=Xb(e),i._pointerActive=!0,this.computeValues(a0(e)),this.computeInitial(),n.preventScrollAxis&&QW(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,i=this.config;if(!n._pointerActive)return;const r=Xb(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;const s=a0(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Si.sub(s,n._values),this.computeValues(s)),Si.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,i=this.config;if(!n._active||!n._pointerActive)return;const r=Xb(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,n.tap&&i.filterTaps)n._force=!0;else{const[a,l]=n._delta,[c,u]=n._movement,[f,h]=i.swipe.velocity,[d,p]=i.swipe.distance,g=i.swipe.duration;if(n.elapsedTime<g){const A=Math.abs(a/n.timeDelta),m=Math.abs(l/n.timeDelta);A>f&&Math.abs(c)>d&&(n.swipe[0]=Math.sign(a)),m>h&&Math.abs(u)>p&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,i=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Che(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=EF[e.key];if(n){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=n(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Si.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in EF&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Che(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Jv=typeof window<"u"&&window.document&&window.document.createElement;function YW(){return Jv&&"ontouchstart"in window}function bhe(){return YW()||Jv&&window.navigator.maxTouchPoints>1}function Mhe(){return Jv&&"onpointerdown"in window}function The(){return Jv&&"exitPointerLock"in window.document}function Ihe(){try{return"constructor"in GestureEvent}catch{return!1}}const ma={isBrowser:Jv,gesture:Ihe(),touch:YW(),touchscreen:bhe(),pointer:Mhe(),pointerLock:The()},Bhe=250,Rhe=180,Phe=.5,Dhe=50,Lhe=250,Fhe=10,wF={mouse:0,touch:0,pen:8},Ohe=ki(ki({},vd),{},{device(t,e,{pointer:{touch:n=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&ma.pointerLock,ma.touch&&n?"touch":this.pointerLock?"mouse":ma.pointer&&!r?"pointer":ma.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?Bhe:void 0,!(!ma.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Si.toVector(t,n?i:r?1:0);return this.filterTaps=n,this.tapsThreshold=i,s},swipe({velocity:t=Phe,distance:e=Dhe,duration:n=Lhe}={}){return{velocity:this.transform(Si.toVector(t)),distance:this.transform(Si.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return Rhe;case!1:return 0;default:return t}},axisThreshold(t){return t?ki(ki({},wF),t):wF},keyboardDisplacement(t=Fhe){return t}});function qW(t){const[e,n]=t.overflow,[i,r]=t._delta,[s,o]=t._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(t._movement[0]=t._movementBound[0]),(n<0&&r>0&&o<0||n>0&&r<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const zhe=30,Uhe=100;class khe extends jW{constructor(...e){super(...e),Ar(this,"ingKey","pinching"),Ar(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Si.add(n,i):this.state.offset=[(1+n[0])*i[0],n[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,i]=e._movement;if(!e.axis){const r=Math.abs(n)*zhe-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,i=this.ctrl.touchIds;if(n._active&&n._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),n._touchIds=Array.from(i).slice(0,2);const r=AF(e,n._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,i=n._pointerEvents,r=this.ctrl.pointerIds;if(n._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const s=lI(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,n){const i=this.state;i.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=AF(e,this.state._touchIds);n&&this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const i=lI(...Array.from(n.values()));i&&this.pinchMove(e,i)}pinchMove(e,n){const i=this.state,r=i._values[1],s=n.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*o]),i.origin=n.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const i=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=Si.sub(n._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(i=>e[i]):!e[n])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-WW(e)[1]/Uhe*i.offset[0],0],Si.addTo(i._movement,i._delta),qW(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this)),e("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Nhe=ki(ki({},XW),{},{device(t,e,{shared:n,pointer:{touch:i=!1}={}}){if(n.target&&!ma.touch&&ma.gesture)return"gesture";if(ma.touch&&i)return"touch";if(ma.touchscreen){if(ma.pointer)return"pointer";if(ma.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:i={}}){const r=o=>{const a=xF(AE(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=xF(AE(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Si.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class Ghe extends Kv{constructor(...e){super(...e),Ar(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(a0(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const n=a0(e),i=this.state;i._delta=Si.sub(n,i._values),Si.addTo(i._movement,i._delta),this.computeValues(n),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Hhe=ki(ki({},vd),{},{mouseOnly:(t=!0)=>t});class Qhe extends Kv{constructor(...e){super(...e),Ar(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const n=this.state,i=ghe(e);n._delta=Si.sub(i,n._values),Si.addTo(n._movement,n._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const Vhe=vd;class Whe extends Kv{constructor(...e){super(...e),Ar(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const n=this.state;n._delta=WW(e),Si.addTo(n._movement,n._delta),qW(n),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const jhe=vd;class Xhe extends Kv{constructor(...e){super(...e),Ar(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(a0(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const i=a0(e);n._movement=n._delta=Si.sub(i,n._values),this.computeValues(i),this.compute(e),n.delta=n.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Yhe=ki(ki({},vd),{},{mouseOnly:(t=!0)=>t}),bB=new Map,cI=new Map;function qhe(t){bB.set(t.key,t.engine),cI.set(t.key,t.resolver)}const $he={key:"drag",engine:She,resolver:Ohe},Khe={key:"hover",engine:Xhe,resolver:Yhe},Jhe={key:"move",engine:Ghe,resolver:Hhe},Zhe={key:"pinch",engine:khe,resolver:Nhe},ede={key:"scroll",engine:Qhe,resolver:Vhe},tde={key:"wheel",engine:Whe,resolver:jhe};function nde(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ide(t,e){if(t==null)return{};var n=nde(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}const rde={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ma.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},sde=["target","eventOptions","window","enabled","transform"];function j_(t={},e){const n={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":n[i]=r.call(n,t[i],i,t);break;case"object":n[i]=j_(t[i],r);break;case"boolean":r&&(n[i]=t[i]);break}return n}function ode(t,e,n={}){const i=t,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=ide(i,sde);if(n.shared=j_({target:r,eventOptions:s,window:o,enabled:a,transform:l},rde),e){const u=cI.get(e);n[e]=j_(ki({shared:n.shared},c),u)}else for(const u in c){const f=cI.get(u);f&&(n[u]=j_(ki({shared:n.shared},c[u]),f))}return n}class $W{constructor(e,n){Ar(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,i,r,s){const o=this._listeners,a=hhe(n,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=ki(ki({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class ade{constructor(){Ar(this,"_timeouts",new Map)}add(e,n,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(n,i,...r))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let lde=class{constructor(e){Ar(this,"gestures",new Set),Ar(this,"_targetEventStore",new $W(this)),Ar(this,"gestureEventStores",{}),Ar(this,"gestureTimeoutStores",{}),Ar(this,"handlers",{}),Ar(this,"config",{}),Ar(this,"pointerIds",new Set),Ar(this,"touchIds",new Set),Ar(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),cde(this,e)}setEventIds(e){if(eS(e))return this.touchIds=new Set(mhe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=ode(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,i={};let r;if(!(n.target&&(r=n.target(),!r))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=SF(i,a.eventOptions,!!r);if(a.enabled){const c=bB.get(o);new c(this,e,o).bind(l)}}const s=SF(i,n.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](ki(ki({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=yhe(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=fhe(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}};function fp(t,e){t.gestures.add(e),t.gestureEventStores[e]=new $W(t,e),t.gestureTimeoutStores[e]=new ade}function cde(t,e){e.drag&&fp(t,"drag"),e.wheel&&fp(t,"wheel"),e.scroll&&fp(t,"scroll"),e.move&&fp(t,"move"),e.pinch&&fp(t,"pinch"),e.hover&&fp(t,"hover")}const SF=(t,e,n)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?i:che(i,r,u);n&&f&&(h+="Passive"),t[h]=t[h]||[],t[h].push(s)},ude=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function fde(t){const e={},n={},i=new Set;for(let r in t)ude.test(r)?(i.add(RegExp.lastMatch),n[r]=t[r]):e[r]=t[r];return[n,e,i]}function hp(t,e,n,i,r,s){if(!t.has(n)||!bB.has(i))return;const o=n+"Start",a=n+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),n in e&&(u=e[n](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function hde(t,e){const[n,i,r]=fde(t),s={};return hp(r,n,"onDrag","drag",s,e),hp(r,n,"onWheel","wheel",s,e),hp(r,n,"onScroll","scroll",s,e),hp(r,n,"onPinch","pinch",s,e),hp(r,n,"onMove","move",s,e),hp(r,n,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function dde(t,e={},n,i){const r=Es.useMemo(()=>new lde(t),[]);if(r.applyHandlers(t,i),r.applyConfig(e,n),Es.useEffect(r.effect.bind(r)),Es.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function pde(t){return t.forEach(qhe),function(n,i){const{handlers:r,nativeHandlers:s,config:o}=hde(n,i||{});return dde(r,o,void 0,s)}}function KW(t,e){return pde([$he,Zhe,ede,tde,Jhe,Khe])(t,e||{})}const Yb=new L,CF=new Ie,hh=new L,Ex=new L,G1=new L,bF=new Wr,mde=E.forwardRef(({autoTransform:t=!0,matrix:e,axisLock:n,dragLimits:i,onHover:r,onDragStart:s,onDrag:o,onDragEnd:a,children:l,dragConfig:c,...u},f)=>{const h=Fe(y=>y.controls),{camera:d,size:p,raycaster:g,invalidate:A}=Fe(),m=E.useRef(null),v=KW({onHover:({hovering:y})=>r&&r(y??!1),onDragStart:({event:y})=>{h&&(h.enabled=!1);const{point:w}=y;m.current.matrix.decompose(Yb,new Tt,new L),hh.copy(w),Ex.copy(hh).sub(Yb),s&&s(Yb),A()},onDrag:({xy:[y,w],intentional:S})=>{if(!S)return;const C=(y-p.left)/p.width*2-1,b=-((w-p.top)/p.height)*2+1;if(CF.set(C,b),g.setFromCamera(CF,d),!n)d.getWorldDirection(G1).negate();else switch(n){case"x":G1.set(1,0,0);break;case"y":G1.set(0,1,0);break;case"z":G1.set(0,0,1);break}bF.setFromNormalAndCoplanarPoint(G1,hh),g.ray.intersectPlane(bF,hh);const M=m.current.matrix.clone(),I=m.current.matrixWorld.clone(),T=new L(hh.x-Ex.x,hh.y-Ex.y,hh.z-Ex.z);if(i&&(T.x=i[0]?Math.max(Math.min(T.x,i[0][1]),i[0][0]):T.x,T.y=i[1]?Math.max(Math.min(T.y,i[1][1]),i[1][0]):T.y,T.z=i[2]?Math.max(Math.min(T.z,i[2][1]),i[2][0]):T.z),t){m.current.matrix.setPosition(T);const D=m.current.matrix.clone().multiply(M.invert()),R=m.current.matrix.clone().multiply(I.invert());o&&o(m.current.matrix,D,m.current.matrixWorld,R)}else{const D=new Ge().copy(m.current.matrix);D.setPosition(T);const R=D.clone().multiply(M.invert()),z=D.clone().multiply(I.invert());o&&o(D,R,m.current.matrixWorld,z)}A()},onDragEnd:()=>{h&&(h.enabled=!0),a&&a(),A()}},{drag:{filterTaps:!0,threshold:1,...typeof c=="object"?c:{}}});return E.useImperativeHandle(f,()=>m.current,[]),E.useLayoutEffect(()=>{e&&(m.current.matrix=e)},[e]),E.createElement("group",Te({ref:m},v(),{matrix:e,matrixAutoUpdate:!1},u),l)});function uA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uI(t,e){return uI=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},uI(t,e)}function gde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ade(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8];return i*a*f+r*l*c+s*o*u-s*a*c-r*o*f-i*l*u}function MF(t,e){for(var n=[],i=t.toArray(),r=e.toArray(),s=0;s<i.length;s++)n[s]=i[s]+r[s];return new jt().fromArray(n)}function vde(t){if(Array.isArray(t))return t}function yde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,s=!1,o,a;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw a}}return i}}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function JW(t,e){if(t){if(typeof t=="string")return fI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fI(t,e)}}function xde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ec(t,e){return vde(t)||yde(t,e)||JW(t,e)||xde()}function _de(t){if(Array.isArray(t))return fI(t)}function Ede(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vE(t){return _de(t)||Ede(t)||JW(t)||wde()}function X_(t,e,n){return gde()?X_=Reflect.construct:X_=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&uI(c,o.prototype),c},X_.apply(null,arguments)}function Sde(t){var e=ec(t[0],2),n=e[0],i=e[1],r=ec(t[1],2),s=r[0],o=r[1],a=ec(t[2],2),l=a[0],c=a[1];return Ade(n,i,1,s,o,1,l,c,1)}function Cde(t){return Sde(t)===0}var bde=new Ie,Mde=new Ie;function TF(t){var e=t.map(function(c){return Array.isArray(c)?X_(Ie,vE(c)):c}),n=ec(e,3),i=n[0],r=n[1],s=n[2];if(Cde(t))return!1;var o=bde.subVectors(r,i),a=Mde.subVectors(s,i),l=a.cross(o);return l>0}function ZW(t,e,n){return Math.max(e,Math.min(n,t))}function ej(t,e){return ZW(t-Math.floor(t/e)*e,0,e)}function tj(t,e){var n=ej(e-t,Math.PI*2);return n>Math.PI&&(n-=Math.PI*2),n}function Tde(t){return t/180*Math.PI}function Ide(t){return t*180/Math.PI}function Bde(t,e){for(var n=e.radius,i=n===void 0?1:n,r=t.length/3,s=2/r,o=Math.PI*(3-2.2360679775),a=0;a<t.length;a+=3){var l=a*s-1+s/2,c=Math.sqrt(1-Math.pow(l,2)),u=a%r*o,f=Math.cos(u)*c,h=Math.sin(u)*c;t[a]=f*i,t[a+1]=l*i,t[a+2]=h*i}}function Rde(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.z-e.z)<n}function nj(t,e){return t.x===e.x?typeof t.z<"u"&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}function Pde(t){for(var e=t.sort(nj),n=[e[0],e[1]],i=2;i<e.length;i++)for(n.push(e[i]);n.length>2&&TF(vE(n.slice(-3)));)n.splice(n.length-2,1);for(var r=[e[e.length-1],e[e.length-2]],s=e.length-3;s>=0;s--)for(r.push(e[s]);r.length>2&&TF(vE(r.slice(-3)));)r.splice(r.length-2,1);r.splice(0,1),r.splice(r.length-1,1);var o=[].concat(n,r);return o}function Dde(t,e,n){var i=ec(e,2),r=i[0],s=i[1],o=ec(n,2),a=o[0],l=o[1];return a+(t-r)*(l-a)/(s-r)}function Lde(t){return t*t*t*(t*(t*6-15)+10)}function Fde(t,e,n){return t*(1-n)+e*n}function ij(t,e,n){return(n-t)/(e-t)}function Ode(t,e,n){var i=Math.sqrt(t*t+e*e+n*n);return[t/i,e/i,n/i]}function zde(t,e,n){var i=t*t,r=e*e,s=n*n,o=t*Math.sqrt(1-(r+s)/2+r*s/3),a=e*Math.sqrt(1-(s+i)/2+s*i/3),l=n*Math.sqrt(1-(i+r)/2+i*r/3);return[o,a,l]}function rj(t,e){var n=new L().crossVectors(t,e),i=t.dot(e),r=new jt().identity(),s=new jt().set(0,-n.z,n.y,n.z,0,-n.x,-n.y,n.x,0),o=new jt().multiplyMatrices(s,s).multiplyScalar(1/(1+i)),a=MF(MF(r,s),o);return a}function Ude(t,e,n){var i=Math.asin(e),r=Math.atan2(t,-n);return[i,r]}function kde(t,e){var n=Math.sin(t),i=Math.cos(t),r=Math.sin(e)*i,s=-Math.cos(e)*i;return[r,n,s]}function Nde(t,e){var n=ec(e,2),i=n[0],r=n[1],s=rj(t.normal,new L(0,1,0)),o=ij(i.clone().applyMatrix3(s).y,r.clone().applyMatrix3(s).y,0);return new L().lerpVectors(i,r,o)}function Gde(t,e){var n=e.normal.dot(t);return n}function Hde(t,e){var n=ec(t,3),i=n[0],r=n[1],s=n[2],o=ec(e,2),a=o[0],l=o[1];return s*a*l+r*a+i}function Qde(t,e){var n=ec(e,2),i=n[0],r=n[1],s=i*r,o=t/s,a=t-s*o,l=a/i,c=a%i;return[c,l,o]}function Vde(t,e){return t[0]+e[0]*t[1]}function Wde(t,e){var n=t%e,i=Math.floor(t/e);return[n,i]}var qb=Object.freeze({__proto__:null,clamp:ZW,repeat:ej,deltaAngle:tj,degToRad:Tde,radToDeg:Ide,fibonacciOnSphere:Bde,vectorEquals:Rde,lexicographic:nj,convexHull:Pde,remap:Dde,fade:Lde,lerp:Fde,inverseLerp:ij,normalize:Ode,pointOnCubeToPointOnSphere:zde,rotateVectorOnVector:rj,pointToCoordinate:Ude,coordinateToPoint:kde,planeSegmentIntersection:Nde,pointToPlaneDistance:Gde,getIndexFrom3D:Hde,get3DFromIndex:Qde,getIndexFrom2D:Vde,get2DFromIndex:Wde});function sj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ta=function t(e,n,i){var r=this;sj(this,t),uA(this,"dot2",function(s,o){return r.x*s+r.y*o}),uA(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=n,this.z=i},jde=[new ta(1,1,0),new ta(-1,1,0),new ta(1,-1,0),new ta(-1,-1,0),new ta(1,0,1),new ta(-1,0,1),new ta(1,0,-1),new ta(-1,0,-1),new ta(0,1,1),new ta(0,-1,1),new ta(0,1,-1),new ta(0,-1,-1)],IF=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],BF=new Array(512),RF=new Array(512),Xde=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=IF[n]^e&255:i=IF[n]^e>>8&255,BF[n]=BF[n+256]=i,RF[n]=RF[n+256]=jde[i%12]}};Xde(0);function Yde(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function PF(t){var e=Yde(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var qde=function t(e){var n=this;sj(this,t),uA(this,"seed",0),uA(this,"init",function(i){n.seed=i,n.value=PF(i)}),uA(this,"value",PF(this.seed)),this.init(e)};new qde(Math.random());var $de=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/n)*Math.atan(Math.sin(2*Math.PI*e*r)/n)},oj=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},Kde=function(e){return e},Jde={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},Zde={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},epe={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},tpe={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},npe={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},ipe={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Rr(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:oj,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-n)<=a)return t[e]=n,!1;i=Math.max(1e-4,i);var c=2/i,u=o(c*r),f=t[e]-n,h=n,d=s*i;f=Math.min(Math.max(f,-d),d),n=t[e]-f;var p=(t.__damp[l]+c*f)*r;t.__damp[l]=(t.__damp[l]-c*p)*u;var g=n+(f+p)*u;return h-t[e]>0==g>h&&(g=h,t.__damp[l]=(g-h)/r),t[e]=g,!0}var rpe=function(e){return e&&e.isCamera},spe=function(e){return e&&e.isLight},H1=new L,DF=new Tt,LF=new Tt,Q1=new Ge,$b=new L;function ope(t,e,n,i,r,s,o){typeof e=="number"?H1.setScalar(e):Array.isArray(e)?H1.set(e[0],e[1],e[2]):H1.copy(e);var a=t.parent;t.updateWorldMatrix(!0,!1),$b.setFromMatrixPosition(t.matrixWorld),rpe(t)||spe(t)?Q1.lookAt($b,H1,t.up):Q1.lookAt(H1,$b,t.up),yE(t.quaternion,LF.setFromRotationMatrix(Q1),n,i,r,s,o),a&&(Q1.extractRotation(a.matrixWorld),DF.setFromRotationMatrix(Q1),yE(t.quaternion,LF.copy(t.quaternion).premultiply(DF.invert()),n,i,r,s,o))}function Fm(t,e,n,i,r,s,o,a){return Rr(t,e,t[e]+tj(t[e],n),i,r,s,o,a)}var V1=new Ie,FF,OF;function ape(t,e,n,i,r,s,o){return typeof e=="number"?V1.setScalar(e):Array.isArray(e)?V1.set(e[0],e[1]):V1.copy(e),FF=Rr(t,"x",V1.x,n,i,r,s,o),OF=Rr(t,"y",V1.y,n,i,r,s,o),FF||OF}var dp=new L,zF,UF,kF;function hI(t,e,n,i,r,s,o){return typeof e=="number"?dp.setScalar(e):Array.isArray(e)?dp.set(e[0],e[1],e[2]):dp.copy(e),zF=Rr(t,"x",dp.x,n,i,r,s,o),UF=Rr(t,"y",dp.y,n,i,r,s,o),kF=Rr(t,"z",dp.z,n,i,r,s,o),zF||UF||kF}var dh=new Jt,NF,GF,HF,QF;function lpe(t,e,n,i,r,s,o){return typeof e=="number"?dh.setScalar(e):Array.isArray(e)?dh.set(e[0],e[1],e[2],e[3]):dh.copy(e),NF=Rr(t,"x",dh.x,n,i,r,s,o),GF=Rr(t,"y",dh.y,n,i,r,s,o),HF=Rr(t,"z",dh.z,n,i,r,s,o),QF=Rr(t,"w",dh.w,n,i,r,s,o),NF||GF||HF||QF}var W1=new gi,VF,WF,jF;function cpe(t,e,n,i,r,s,o){return Array.isArray(e)?W1.set(e[0],e[1],e[2],e[3]):W1.copy(e),VF=Fm(t,"x",W1.x,n,i,r,s,o),WF=Fm(t,"y",W1.y,n,i,r,s,o),jF=Fm(t,"z",W1.z,n,i,r,s,o),VF||WF||jF}var pp=new Je,XF,YF,qF;function upe(t,e,n,i,r,s,o){return e instanceof Je?pp.copy(e):Array.isArray(e)?pp.setRGB(e[0],e[1],e[2]):pp.set(e),XF=Rr(t,"r",pp.r,n,i,r,s,o),YF=Rr(t,"g",pp.g,n,i,r,s,o),qF=Rr(t,"b",pp.b,n,i,r,s,o),XF||YF||qF}var Va=new Tt,wc=new Jt,$F=new Jt,j1=new Jt,KF,JF,ZF,eO;function yE(t,e,n,i,r,s,o){var a=t;Array.isArray(e)?Va.set(e[0],e[1],e[2],e[3]):Va.copy(e);var l=t.dot(Va)>0?1:-1;return Va.x*=l,Va.y*=l,Va.z*=l,Va.w*=l,KF=Rr(t,"x",Va.x,n,i,r,s,o),JF=Rr(t,"y",Va.y,n,i,r,s,o),ZF=Rr(t,"z",Va.z,n,i,r,s,o),eO=Rr(t,"w",Va.w,n,i,r,s,o),wc.set(t.x,t.y,t.z,t.w).normalize(),$F.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),j1.copy(wc).multiplyScalar($F.dot(wc)/wc.dot(wc)),a.__damp.velocity_x-=j1.x,a.__damp.velocity_y-=j1.y,a.__damp.velocity_z-=j1.z,a.__damp.velocity_w-=j1.w,t.set(wc.x,wc.y,wc.z,wc.w),KF||JF||ZF||eO}var X1=new ed,tO,nO,iO;function fpe(t,e,n,i,r,s,o){return Array.isArray(e)?X1.set(e[0],e[1],e[2]):X1.copy(e),tO=Rr(t,"radius",X1.radius,n,i,r,s,o),nO=Fm(t,"phi",X1.phi,n,i,r,s,o),iO=Fm(t,"theta",X1.theta,n,i,r,s,o),tO||nO||iO}var wx=new Ge,rO=new L,sO=new Tt,oO=new L,aO,lO,cO;function hpe(t,e,n,i,r,s,o){var a=t;return a.__damp===void 0&&(a.__damp={position:new L,rotation:new Tt,scale:new L},t.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?wx.set.apply(wx,vE(e)):wx.copy(e),wx.decompose(rO,sO,oO),aO=hI(a.__damp.position,rO,n,i,r,s,o),lO=yE(a.__damp.rotation,sO,n,i,r,s,o),cO=hI(a.__damp.scale,oO,n,i,r,s,o),t.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),aO||lO||cO}var l0=Object.freeze({__proto__:null,rsqw:$de,exp:oj,linear:Kde,sine:Jde,cubic:Zde,quint:epe,circ:tpe,quart:npe,expo:ipe,damp:Rr,dampLookAt:ope,dampAngle:Fm,damp2:ape,damp3:hI,damp4:lpe,dampE:cpe,dampC:upe,dampQ:yE,dampS:fpe,dampM:hpe});const MB=E.createContext(null);function TB(){return E.useContext(MB)}function dpe({eps:t=1e-5,enabled:e=!0,infinite:n,horizontal:i,pages:r=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,prepend:l=!1,style:c={},children:u}){const{get:f,setEvents:h,gl:d,size:p,invalidate:g,events:A}=Fe(),[m]=E.useState(()=>document.createElement("div")),[v]=E.useState(()=>document.createElement("div")),[y]=E.useState(()=>document.createElement("div")),w=d.domElement.parentNode,S=E.useRef(0),C=E.useMemo(()=>({el:m,eps:t,fill:v,fixed:y,horizontal:i,damping:o,offset:0,delta:0,scroll:S,pages:r,range(I,T,D=0){const R=I-D,z=R+T+D*2;return this.offset<R?0:this.offset>z?1:(this.offset-R)/(z-R)},curve(I,T,D=0){return Math.sin(this.range(I,T,D)*Math.PI)},visible(I,T,D=0){const R=I-D,z=R+T+D*2;return this.offset>=R&&this.offset<=z}}),[t,o,i,r]);E.useEffect(()=>{m.style.position="absolute",m.style.width="100%",m.style.height="100%",m.style[i?"overflowX":"overflowY"]="auto",m.style[i?"overflowY":"overflowX"]="hidden",m.style.top="0px",m.style.left="0px";for(const T in c)m.style[T]=c[T];y.style.position="sticky",y.style.top="0px",y.style.left="0px",y.style.width="100%",y.style.height="100%",y.style.overflow="hidden",m.appendChild(y),v.style.height=i?"100%":`${r*s*100}%`,v.style.width=i?`${r*s*100}%`:"100%",v.style.pointerEvents="none",m.appendChild(v),l?w.prepend(m):w.appendChild(m),m[i?"scrollLeft":"scrollTop"]=1;const M=A.connected||d.domElement;requestAnimationFrame(()=>A.connect==null?void 0:A.connect(m));const I=f().events.compute;return h({compute(T,D){const{left:R,top:z}=w.getBoundingClientRect(),F=T.clientX-R,V=T.clientY-z;D.pointer.set(F/D.size.width*2-1,-(V/D.size.height)*2+1),D.raycaster.setFromCamera(D.pointer,D.camera)}}),()=>{w.removeChild(m),h({compute:I}),A.connect==null||A.connect(M)}},[r,s,i,m,v,y,w]),E.useEffect(()=>{if(A.connected===m){const M=p[i?"width":"height"],I=m[i?"scrollWidth":"scrollHeight"],T=I-M;let D=0,R=!0,z=!0;const F=()=>{if(!(!e||z)&&(g(),D=m[i?"scrollLeft":"scrollTop"],S.current=D/T,n)){if(!R){if(D>=T){const j=1-C.offset;m[i?"scrollLeft":"scrollTop"]=1,S.current=C.offset=-j,R=!0}else if(D<=0){const j=1+C.offset;m[i?"scrollLeft":"scrollTop"]=I,S.current=C.offset=j,R=!0}}R&&setTimeout(()=>R=!1,40)}};m.addEventListener("scroll",F,{passive:!0}),requestAnimationFrame(()=>z=!1);const V=j=>m.scrollLeft+=j.deltaY/2;return i&&m.addEventListener("wheel",V,{passive:!0}),()=>{m.removeEventListener("scroll",F),i&&m.removeEventListener("wheel",V)}}},[m,A,p,n,C,g,i,e]);let b=0;return Ct((M,I)=>{b=C.offset,l0.damp(C,"offset",S.current,o,I,a,void 0,t),l0.damp(C,"delta",Math.abs(b-C.offset),o,I,a,void 0,t),C.delta>t&&g()}),E.createElement(MB.Provider,{value:C},u)}const ppe=E.forwardRef(({children:t},e)=>{const n=E.useRef(null);E.useImperativeHandle(e,()=>n.current,[]);const i=TB(),{width:r,height:s}=Fe(o=>o.viewport);return Ct(()=>{n.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,n.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),E.createElement("group",{ref:n},t)}),mpe=E.forwardRef(({children:t,style:e,...n},i)=>{const r=TB(),s=E.useRef(null);E.useImperativeHandle(i,()=>s.current,[]);const{width:o,height:a}=Fe(u=>u.size),l=E.useContext(td),c=E.useMemo(()=>h8(r.fixed),[r.fixed]);return Ct(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(E.createElement("div",Te({ref:s,style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},n),E.createElement(MB.Provider,{value:r},E.createElement(td.Provider,{value:l},t)))),null}),gpe=E.forwardRef(({html:t,...e},n)=>{const i=t?mpe:ppe;return E.createElement(i,Te({ref:n},e))});function dI(){}const Ape=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Et={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Pc(t,e){if(Et.arr(t)){if(!Et.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const qn=(t,e)=>t.forEach(e);function eu(t,e,n){if(Et.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}const _a=t=>Et.und(t)?[]:Et.arr(t)?t:[t];function fA(t,e){if(t.size){const n=Array.from(t);t.clear(),qn(n,e)}}const kg=(t,...e)=>fA(t,n=>n(...e)),IB=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let BB,aj,hf=null,lj=!1,RB=dI;const vpe=t=>{t.to&&(aj=t.to),t.now&&(Bt.now=t.now),t.colors!==void 0&&(hf=t.colors),t.skipAnimation!=null&&(lj=t.skipAnimation),t.createStringInterpolator&&(BB=t.createStringInterpolator),t.requestAnimationFrame&&Bt.use(t.requestAnimationFrame),t.batchedUpdates&&(Bt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(RB=t.willAdvance),t.frameLoop&&(Bt.frameLoop=t.frameLoop)};var sc=Object.freeze({__proto__:null,get createStringInterpolator(){return BB},get to(){return aj},get colors(){return hf},get skipAnimation(){return lj},get willAdvance(){return RB},assign:vpe});const hA=new Set;let va=[],Kb=[],xE=0;const tS={get idle(){return!hA.size&&!va.length},start(t){xE>t.priority?(hA.add(t),Bt.onStart(ype)):(cj(t),Bt(pI))},advance:pI,sort(t){if(xE)Bt.onFrame(()=>tS.sort(t));else{const e=va.indexOf(t);~e&&(va.splice(e,1),uj(t))}},clear(){va=[],hA.clear()}};function ype(){hA.forEach(cj),hA.clear(),Bt(pI)}function cj(t){va.includes(t)||uj(t)}function uj(t){va.splice(xpe(va,e=>e.priority>t.priority),0,t)}function pI(t){const e=Kb;for(let n=0;n<va.length;n++){const i=va[n];xE=i.priority,i.idle||(RB(i),i.advance(t),i.idle||e.push(i))}return xE=0,Kb=va,Kb.length=0,va=e,va.length>0}function xpe(t,e){const n=t.findIndex(e);return n<0?t.length:n}const _pe=(t,e,n)=>Math.min(Math.max(n,t),e),Epe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ol="[-+]?\\d*\\.?\\d+",_E=ol+"%";function nS(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const wpe=new RegExp("rgb"+nS(ol,ol,ol)),Spe=new RegExp("rgba"+nS(ol,ol,ol,ol)),Cpe=new RegExp("hsl"+nS(ol,_E,_E)),bpe=new RegExp("hsla"+nS(ol,_E,_E,ol)),Mpe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Tpe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ipe=/^#([0-9a-fA-F]{6})$/,Bpe=/^#([0-9a-fA-F]{8})$/;function Rpe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ipe.exec(t))?parseInt(e[1]+"ff",16)>>>0:hf&&hf[t]!==void 0?hf[t]:(e=wpe.exec(t))?(mp(e[1])<<24|mp(e[2])<<16|mp(e[3])<<8|255)>>>0:(e=Spe.exec(t))?(mp(e[1])<<24|mp(e[2])<<16|mp(e[3])<<8|hO(e[4]))>>>0:(e=Mpe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Bpe.exec(t))?parseInt(e[1],16)>>>0:(e=Tpe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Cpe.exec(t))?(uO(fO(e[1]),Sx(e[2]),Sx(e[3]))|255)>>>0:(e=bpe.exec(t))?(uO(fO(e[1]),Sx(e[2]),Sx(e[3]))|hO(e[4]))>>>0:null}function Jb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uO(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Jb(r,i,t+1/3),o=Jb(r,i,t),a=Jb(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function mp(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function fO(t){return(parseFloat(t)%360+360)%360/360}function hO(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Sx(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function dO(t){let e=Rpe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}const uv=(t,e,n)=>{if(Et.fun(t))return t;if(Et.arr(t))return uv({range:t,output:e,extrapolate:n});if(Et.str(t.output[0]))return BB(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Dpe(c,s);return Ppe(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Ppe(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Dpe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}const Lpe=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return _pe(0,1,r/t)},EE=1.70158,Cx=EE*1.525,pO=EE+1,mO=2*Math.PI/3,gO=2*Math.PI/4.5,bx=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Fpe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>pO*t*t*t-EE*t*t,easeOutBack:t=>1+pO*Math.pow(t-1,3)+EE*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Cx+1)*2*t-Cx)/2:(Math.pow(2*t-2,2)*((Cx+1)*(t*2-2)+Cx)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*mO),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*mO)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*gO))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*gO)/2+1,easeInBounce:t=>1-bx(1-t),easeOutBounce:bx,easeInOutBounce:t=>t<.5?(1-bx(1-2*t))/2:(1+bx(2*t-1))/2,steps:Lpe};function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mI.apply(this,arguments)}const c0=Symbol.for("FluidValue.get"),od=Symbol.for("FluidValue.observers"),Vl=t=>!!(t&&t[c0]),ua=t=>t&&t[c0]?t[c0]():t,AO=t=>t[od]||null;function Ope(t,e){t.eventObserved?t.eventObserved(e):t(e)}function wE(t,e){let n=t[od];n&&n.forEach(i=>{Ope(i,e)})}class zpe{constructor(e){if(this[c0]=void 0,this[od]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Upe(this,e)}}const Upe=(t,e)=>fj(t,c0,e);function Zv(t,e){if(t[c0]){let n=t[od];n||fj(t,od,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function SE(t,e){let n=t[od];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[od]=null,t.observerRemoved&&t.observerRemoved(i,e)}}const fj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Y_=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,kpe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,vO=new RegExp(`(${Y_.source})(%|[a-z]+)`,"i"),Npe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,iS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,hj=t=>{const[e,n]=Gpe(t);if(!e||IB())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&iS.test(n))return hj(n);if(n)return n}return t},Gpe=t=>{const e=iS.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]};let Zb;const Hpe=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,dj=t=>{Zb||(Zb=hf?new RegExp(`(${Object.keys(hf).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ua(s).replace(iS,hj).replace(kpe,dO).replace(Zb,dO)),n=e.map(s=>s.match(Y_).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>uv(mI({},t,{output:s})));return s=>{var o;const a=!vO.test(e[0])&&((o=e.find(c=>vO.test(c)))==null?void 0:o.replace(Y_,""));let l=0;return e[0].replace(Y_,()=>`${r[l++](s)}${a||""}`).replace(Npe,Hpe)}},PB="react-spring: ",pj=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${PB}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Qpe=pj(console.warn);function Vpe(){Qpe(`${PB}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Wpe=pj(console.warn);function jpe(){Wpe(`${PB}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function rS(t){return Et.str(t)&&(t[0]=="#"||/\d/.test(t)||!IB()&&iS.test(t)||t in(hf||{}))}const DB=IB()?E.useEffect:E.useLayoutEffect,Xpe=()=>{const t=E.useRef(!1);return DB(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function mj(){const t=E.useState()[1],e=Xpe();return()=>{e.current&&t(Math.random())}}function Ype(t,e){const[n]=E.useState(()=>({inputs:e,result:t()})),i=E.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&qpe(e,s.inputs)||(s={inputs:e,result:t()}):s=n,E.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function qpe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const gj=t=>E.useEffect(t,$pe),$pe=[];function yO(t){const e=E.useRef();return E.useEffect(()=>{e.current=t}),e.current}const fv=Symbol.for("Animated:node"),Kpe=t=>!!t&&t[fv]===t,Gl=t=>t&&t[fv],LB=(t,e)=>Ape(t,fv,e),sS=t=>t&&t[fv]&&t[fv].getPayload();class Aj{constructor(){this.payload=void 0,LB(this,this)}getPayload(){return this.payload||[]}}class I0 extends Aj{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Et.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new I0(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return Et.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Et.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class u0 extends I0{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=uv({output:[e,e]})}static create(e){return new u0(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Et.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=uv({output:[this.getValue(),e]})),this._value=0,super.reset()}}const CE={dependencies:null};class FB extends Aj{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return eu(this.source,(i,r)=>{Kpe(i)?n[r]=i.getValue(e):Vl(i)?n[r]=ua(i):e||(n[r]=i)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&qn(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return eu(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){CE.dependencies&&Vl(e)&&CE.dependencies.add(e);const n=sS(e);n&&qn(n,i=>this.add(i))}}class OB extends FB{constructor(e){super(e)}static create(e){return new OB(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(Jpe)),!0)}}function Jpe(t){return(rS(t)?u0:I0).create(t)}function gI(t){const e=Gl(t);return e?e.constructor:Et.arr(t)?OB:rS(t)?u0:I0}function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bE.apply(this,arguments)}const xO=(t,e)=>{const n=!Et.fun(t)||t.prototype&&t.prototype.isReactComponent;return E.forwardRef((i,r)=>{const s=E.useRef(null),o=n&&E.useCallback(p=>{s.current=tme(r,p)},[r]),[a,l]=eme(i,e),c=mj(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},f=new Zpe(u,l),h=E.useRef();DB(()=>(h.current=f,qn(l,p=>Zv(p,f)),()=>{h.current&&(qn(h.current.deps,p=>SE(p,h.current)),Bt.cancel(h.current.update))})),E.useEffect(u,[]),gj(()=>()=>{const p=h.current;qn(p.deps,g=>SE(g,p))});const d=e.getComponentProps(a.getValue());return E.createElement(t,bE({},d,{ref:o}))})};class Zpe{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&Bt.write(this.update)}}function eme(t,e){const n=new Set;return CE.dependencies=n,t.style&&(t=bE({},t,{style:e.createAnimatedStyle(t.style)})),t=new FB(t),CE.dependencies=null,[t,n]}function tme(t,e){return t&&(Et.fun(t)?t(e):t.current=e),e}const _O=Symbol.for("AnimatedComponent"),nme=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new FB(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=EO(o)||"Anonymous";return Et.str(o)?o=s[o]||(s[o]=xO(o,r)):o=o[_O]||(o[_O]=xO(o,r)),o.displayName=`Animated(${a})`,o};return eu(t,(o,a)=>{Et.arr(t)&&(a=EO(o)),s[a]=s(o)}),{animated:s}},EO=t=>Et.str(t)?t:t&&Et.str(t.displayName)?t.displayName:Et.fun(t)&&t.name||null;function jr(){return jr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jr.apply(this,arguments)}function Sh(t,...e){return Et.fun(t)?t(...e):t}const dA=(t,e)=>t===!0||!!(e&&t&&(Et.fun(t)?t(e):_a(t).includes(e))),vj=(t,e)=>Et.obj(t)?e&&t[e]:t,yj=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,ime=t=>t,zB=(t,e=ime)=>{let n=rme;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Et.und(s)||(i[r]=s)}return i},rme=["config","onProps","onStart","onChange","onPause","onResume","onRest"],sme={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ome(t){const e={};let n=0;if(eu(t,(i,r)=>{sme[r]||(e[r]=i,n++)}),n)return e}function xj(t){const e=ome(t);if(e){const n={to:e};return eu(t,(i,r)=>r in e||(n[r]=i)),n}return jr({},t)}function hv(t){return t=ua(t),Et.arr(t)?t.map(hv):rS(t)?sc.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function ame(t){for(const e in t)return!0;return!1}function AI(t){return Et.fun(t)||Et.arr(t)&&Et.obj(t[0])}function lme(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function cme(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}const ume={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},vI=jr({},ume.default,{mass:1,damping:1,easing:Fpe.linear,clamp:!1});class fme{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,vI)}}function hme(t,e,n){n&&(n=jr({},n),wO(n,e),e=jr({},n,e)),wO(t,e),Object.assign(t,e);for(const o in vI)t[o]==null&&(t[o]=vI[o]);let{mass:i,frequency:r,damping:s}=t;return Et.und(r)||(r<.01&&(r=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/r,2)*i,t.friction=4*Math.PI*s*i/r),t}function wO(t,e){if(!Et.und(e.decay))t.duration=void 0;else{const n=!Et.und(e.tension)||!Et.und(e.friction);(n||!Et.und(e.frequency)||!Et.und(e.damping)||!Et.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const SO=[];class dme{constructor(){this.changed=!1,this.values=SO,this.toValues=null,this.fromValues=SO,this.to=void 0,this.from=void 0,this.config=new fme,this.immediate=!1}}function _j(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=dA((l=n.cancel)!=null?l:i==null?void 0:i.cancel,e);if(f)p();else{Et.und(n.pause)||(r.paused=dA(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||dA(g,e)),c=Sh(n.delay||0,e),g?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function h(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-Bt.now()}function d(){c>0&&!sc.skipAnimation?(r.delayed=!0,u=Bt.setTimeout(p,c),r.pauseQueue.add(h),r.timeouts.add(u)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(u),t<=(r.cancelId||0)&&(f=!0);try{s.start(jr({},n,{callId:t,cancel:f}),o)}catch(g){a(g)}}})}const UB=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Om(t.get()):e.every(n=>n.noop)?Ej(t.get()):il(t.get(),e.every(n=>n.finished)),Ej=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),il=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Om=t=>({value:t,cancelled:!0,finished:!1});function wj(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=zB(e,(A,m)=>m==="onRest"?void 0:A);let u,f;const h=new Promise((A,m)=>(u=A,f=m)),d=A=>{const m=r<=(n.cancelId||0)&&Om(i)||r!==n.asyncId&&il(i,!1);if(m)throw A.result=m,f(A),A},p=(A,m)=>{const v=new CO,y=new bO;return(async()=>{if(sc.skipAnimation)throw dv(n),y.result=il(i,!1),f(y),y;d(v);const w=Et.obj(A)?jr({},A):jr({},m,{to:A});w.parentId=r,eu(c,(C,b)=>{Et.und(w[b])&&(w[b]=C)});const S=await i.start(w);return d(v),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),S})()};let g;if(sc.skipAnimation)return dv(n),il(i,!1);try{let A;Et.arr(t)?A=(async m=>{for(const v of m)await p(v)})(t):A=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([A.then(u),h]),g=il(i.get(),!0,!1)}catch(A){if(A instanceof CO)g=A.result;else if(A instanceof bO)g=A.result;else throw A}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Et.fun(o)&&Bt.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function dv(t,e){fA(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class CO extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class bO extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const yI=t=>t instanceof kB;let pme=1;class kB extends zpe{constructor(...e){super(...e),this.id=pme++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Gl(this);return e&&e.getValue()}to(...e){return sc.to(this,e)}interpolate(...e){return Vpe(),sc.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){wE(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||tS.sort(this),wE(this,{type:"priority",parent:this,priority:e})}}const ad=Symbol.for("SpringPhase"),Sj=1,xI=2,_I=4,eM=t=>(t[ad]&Sj)>0,Tu=t=>(t[ad]&xI)>0,Y1=t=>(t[ad]&_I)>0,MO=(t,e)=>e?t[ad]|=xI|Sj:t[ad]&=~xI,TO=(t,e)=>e?t[ad]|=_I:t[ad]&=~_I;class mme extends kB{constructor(e,n){if(super(),this.key=void 0,this.animation=new dme,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Et.und(e)||!Et.und(n)){const i=Et.obj(e)?jr({},e):jr({},n,{from:e});Et.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Tu(this)||this._state.asyncTo)||Y1(this)}get goal(){return ua(this.animation.to)}get velocity(){const e=Gl(this);return e instanceof I0?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return eM(this)}get isAnimating(){return Tu(this)}get isPaused(){return Y1(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=sS(r.to);!a&&Vl(r.to)&&(o=_a(ua(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const h=u.constructor==u0?1:a?a[f].lastPosition:o[f];let d=r.immediate,p=h;if(!d){if(p=u.lastPosition,s.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const A=r.fromValues[f],m=u.v0!=null?u.v0:u.v0=Et.arr(s.velocity)?s.velocity[f]:s.velocity;let v;const y=s.precision||(A==h?.005:Math.min(1,Math.abs(h-A)*.001));if(Et.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);p=A+m/(1-w)*(1-S),d=Math.abs(u.lastPosition-p)<=y,v=m*S}else{v=u.lastVelocity==null?m:u.lastVelocity;const w=s.restVelocity||y/10,S=s.clamp?0:s.bounce,C=!Et.und(S),b=A==h?u.v0>0:A<h;let M,I=!1;const T=1,D=Math.ceil(e/T);for(let R=0;R<D&&(M=Math.abs(v)>w,!(!M&&(d=Math.abs(h-p)<=y,d)));++R){C&&(I=p==h||p>h==b,I&&(v=-v*S,p=h));const z=-s.tension*1e-6*(p-h),F=-s.friction*.001*v,V=(z+F)/s.mass;v=v+V*T,p=p+v*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,g=u.elapsedTime+=e)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),p=A+s.easing(w)*(h-A),v=(p-u.lastPosition)/e,d=w==1}u.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[f].done&&(d=!1),d?u.done=!0:n=!1,u.setValue(p,s.round)&&(i=!0)});const l=Gl(this),c=l.getValue();if(n){const u=ua(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return Bt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Tu(this)){const{to:e,config:n}=this.animation;Bt.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let i;return Et.und(e)?(i=this.queue||[],this.queue=[]):i=[Et.obj(e)?e:jr({},n,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>UB(this,r))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),dv(this._state,e&&this._lastCallId),Bt.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:i,from:r}=e;i=Et.obj(i)?i[n]:i,(i==null||AI(i))&&(i=void 0),r=Et.obj(r)?r[n]:r,r==null&&(r=void 0);const s={to:i,from:r};return eM(this)||(e.reverse&&([i,r]=[r,i]),r=ua(r),Et.und(r)?Gl(this)||this._set(i):this._set(r)),s}_update(e,n){let i=jr({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,zB(i,(l,c)=>/^on/.test(c)?vj(l,r):l)),BO(this,i,"onProps"),$1(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return _j(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{Y1(this)||(TO(this,!0),kg(a.pauseQueue),$1(this,"onPause",il(this,q1(this,this.animation.to)),this))},resume:()=>{Y1(this)&&(TO(this,!1),Tu(this)&&this._resume(),kg(a.resumeQueue),$1(this,"onResume",il(this,q1(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(n&&l.noop)){const c=Cj(i);if(c)return this._update(c,!0)}return l})}_merge(e,n,i){if(n.cancel)return this.stop(!0),i(Om(this));const r=!Et.und(e.to),s=!Et.und(e.from);if(r||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return i(Om(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:h=u}=e;s&&!r&&(!n.default||Et.und(f))&&(f=h),n.reverse&&([f,h]=[h,f]);const d=!Pc(h,u);d&&(l.from=h),h=ua(h);const p=!Pc(f,c);p&&this._focus(f);const g=AI(n.to),{config:A}=l,{decay:m,velocity:v}=A;(r||s)&&(A.velocity=0),n.config&&!g&&hme(A,Sh(n.config,o),n.config!==a.config?Sh(a.config,o):void 0);let y=Gl(this);if(!y||Et.und(f))return i(il(this,!0));const w=Et.und(n.reset)?s&&!n.default:!Et.und(h)&&dA(n.reset,o),S=w?h:this.get(),C=hv(f),b=Et.num(C)||Et.arr(C)||rS(C),M=!g&&(!b||dA(a.immediate||n.immediate,o));if(p){const R=gI(f);if(R!==y.constructor)if(M)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const I=y.constructor;let T=Vl(f),D=!1;if(!T){const R=w||!eM(this)&&d;(p||R)&&(D=Pc(hv(S),C),T=!D),(!Pc(l.immediate,M)&&!M||!Pc(A.decay,m)||!Pc(A.velocity,v))&&(T=!0)}if(D&&Tu(this)&&(l.changed&&!w?T=!0:T||this._stop(c)),!g&&((T||Vl(c))&&(l.values=y.getPayload(),l.toValues=Vl(f)?null:I==u0?[1]:_a(C)),l.immediate!=M&&(l.immediate=M,!M&&!w&&this._set(c)),T)){const{onRest:R}=l;qn(Ame,F=>BO(this,n,F));const z=il(this,q1(this,c));kg(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&Bt.batchedUpdates(()=>{l.changed=!w,R==null||R(z,this),w?Sh(a.onRest,z):l.onStart==null||l.onStart(z,this)})}w&&this._set(S),g?i(wj(n.to,n,this._state,this)):T?this._start():Tu(this)&&!p?this._pendingCalls.add(i):i(Ej(S))}_focus(e){const n=this.animation;e!==n.to&&(AO(this)&&this._detach(),n.to=e,AO(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;Vl(n)&&(Zv(n,this),yI(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Vl(e)&&SE(e,this)}_set(e,n=!0){const i=ua(e);if(!Et.und(i)){const r=Gl(this);if(!r||!Pc(i,r.getValue())){const s=gI(i);!r||r.constructor!=s?LB(this,s.create(i)):r.setValue(i),r&&Bt.batchedUpdates(()=>{this._onChange(i,n)})}}return Gl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,$1(this,"onStart",il(this,q1(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),Sh(this.animation.onChange,e,this)),Sh(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;Gl(this).reset(ua(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),Tu(this)||(MO(this,!0),Y1(this)||this._resume())}_resume(){sc.skipAnimation?this.finish():tS.start(this)}_stop(e,n){if(Tu(this)){MO(this,!1);const i=this.animation;qn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),wE(this,{type:"idle",parent:this});const r=n?Om(this.get()):il(this.get(),q1(this,e??i.to));kg(this._pendingCalls,r),i.changed&&(i.changed=!1,$1(this,"onRest",r,this))}}}function q1(t,e){const n=hv(e),i=hv(t.get());return Pc(i,n)}function Cj(t,e=t.loop,n=t.to){let i=Sh(e);if(i){const r=i!==!0&&xj(i),s=(r||t).reverse,o=!r||r.reset;return pv(jr({},t,{loop:e,default:!1,pause:void 0,to:!s||AI(n)?n:void 0,from:o?t.from:void 0,reset:o},r))}}function pv(t){const{to:e,from:n}=t=xj(t),i=new Set;return Et.obj(e)&&IO(e,i),Et.obj(n)&&IO(n,i),t.keys=i.size?Array.from(i):null,t}function gme(t){const e=pv(t);return Et.und(e.default)&&(e.default=zB(e)),e}function IO(t,e){eu(t,(n,i)=>n!=null&&e.add(i))}const Ame=["onStart","onRest","onChange","onPause","onResume"];function BO(t,e,n){t.animation[n]=e[n]!==yj(e,n)?vj(e[n],t.key):void 0}function $1(t,e,...n){var i,r,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(s=(o=t.defaultProps)[e])==null||s.call(o,...n)}const vme=["onStart","onChange","onRest"];let yme=1;class xme{constructor(e,n){this.id=yme++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(jr({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,i)=>e[i]=n.get()),e}set(e){for(const n in e){const i=e[n];Et.und(i)||this.springs[n].set(i)}}update(e){return e&&this.queue.push(pv(e)),this}start(e){let{queue:n}=this;return e?n=_a(e).map(pv):this.queue=[],this._flush?this._flush(this,n):(Bj(this,n),EI(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const i=this.springs;qn(_a(n),r=>i[r].stop(!!e))}else dv(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Et.und(e))this.start({pause:!0});else{const n=this.springs;qn(_a(e),i=>n[i].pause())}return this}resume(e){if(Et.und(e))this.start({pause:!1});else{const n=this.springs;qn(_a(e),i=>n[i].resume())}return this}each(e){eu(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,fA(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&n.size&&fA(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,fA(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Bt.onFrame(this._onFrame)}}function EI(t,e){return Promise.all(e.map(n=>bj(t,n))).then(n=>UB(t,n))}async function bj(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=Et.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=Et.arr(r)||Et.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):qn(vme,g=>{const A=e[g];if(Et.fun(A)){const m=t._events[g];e[g]=({finished:v,cancelled:y})=>{const w=m.get(A);w?(v||(w.finished=!1),y&&(w.cancelled=!0)):m.set(A,{value:null,finished:v||!1,cancelled:y||!1})},c&&(c[g]=e[g])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,kg(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),d=e.cancel===!0||yj(e,"cancel")===!0;(u||d&&f.asyncId)&&h.push(_j(++t._lastAsyncId,{props:e,state:f,actions:{pause:dI,resume:dI,start(g,A){d?(dv(f,t._lastAsyncId),A(Om(t))):(g.onRest=a,A(wj(u,g,f,t)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const p=UB(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const g=Cj(e,o,r);if(g)return Bj(t,[g]),bj(t,g,!0)}return l&&Bt.batchedUpdates(()=>l(p,t,t.item)),p}function RO(t,e){const n=jr({},t.springs);return e&&qn(_a(e),i=>{Et.und(i.keys)&&(i=pv(i)),Et.obj(i.to)||(i=jr({},i,{to:void 0})),Ij(n,i,r=>Tj(r))}),Mj(t,n),n}function Mj(t,e){eu(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Zv(n,t))})}function Tj(t,e){const n=new mme;return n.key=t,e&&Zv(n,e),n}function Ij(t,e,n){e.keys&&qn(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function Bj(t,e){qn(e,n=>{Ij(t.springs,n,i=>Tj(i,t))})}function _me(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const Eme=["children"],oS=t=>{let{children:e}=t,n=_me(t,Eme);const i=E.useContext(ME),r=n.pause||!!i.pause,s=n.immediate||!!i.immediate;n=Ype(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=ME;return E.createElement(o,{value:n},e)},ME=wme(oS,{});oS.Provider=ME.Provider;oS.Consumer=ME.Consumer;function wme(t,e){return Object.assign(t,E.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const Sme=()=>{const t=[],e=function(r){jpe();const s=[];return qn(t,(o,a)=>{if(Et.und(r))s.push(o.start());else{const l=n(r,o,a);l&&s.push(o.start(l))}}),s};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return qn(t,i=>i.pause(...arguments)),this},e.resume=function(){return qn(t,i=>i.resume(...arguments)),this},e.set=function(i){qn(t,r=>r.set(i))},e.start=function(i){const r=[];return qn(t,(s,o)=>{if(Et.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return qn(t,i=>i.stop(...arguments)),this},e.update=function(i){return qn(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(r,s,o){return Et.fun(r)?r(o,s):r};return e._getProps=n,e};function Cme(t,e,n){const i=Et.fun(e)&&e;i&&!n&&(n=[]);const r=E.useMemo(()=>i||arguments.length==3?Sme():void 0,[]),s=E.useRef(0),o=mj(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(m,v){const y=RO(m,v);return s.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!m.springs[S])?EI(m,v):new Promise(S=>{Mj(m,y),a.queue.push(()=>{S(EI(m,v))}),o()})}}),[]),l=E.useRef([...a.ctrls]),c=[],u=yO(t)||0;E.useMemo(()=>{qn(l.current.slice(t,u),m=>{lme(m,r),m.stop(!0)}),l.current.length=t,f(u,t)},[t]),E.useMemo(()=>{f(0,Math.min(u,t))},n);function f(m,v){for(let y=m;y<v;y++){const w=l.current[y]||(l.current[y]=new xme(null,a.flush)),S=i?i(y,w):e[y];S&&(c[y]=gme(S))}}const h=l.current.map((m,v)=>RO(m,c[v])),d=E.useContext(oS),p=yO(d),g=d!==p&&ame(d);DB(()=>{s.current++,a.ctrls=l.current;const{queue:m}=a;m.length&&(a.queue=[],qn(m,v=>v())),qn(l.current,(v,y)=>{r==null||r.add(v),g&&v.start({default:d});const w=c[y];w&&(cme(v,w.ref),v.ref?v.queue.push(w):v.start(w))})}),gj(()=>()=>{qn(a.ctrls,m=>m.stop(!0))});const A=h.map(m=>jr({},m));return r?[A,r]:A}function bme(t,e){const n=Et.fun(t),[[i],r]=Cme(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}let PO;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(PO||(PO={}));class Mme extends kB{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=uv(...n);const i=this._get(),r=gI(i);LB(this,r.create(i))}advance(e){const n=this._get(),i=this.get();Pc(n,i)||(Gl(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&DO(this._active)&&tM(this)}_get(){const e=Et.arr(this.source)?this.source.map(ua):_a(ua(this.source));return this.calc(...e)}_start(){this.idle&&!DO(this._active)&&(this.idle=!1,qn(sS(this),e=>{e.done=!1}),sc.skipAnimation?(Bt.batchedUpdates(()=>this.advance()),tM(this)):tS.start(this))}_attach(){let e=1;qn(_a(this.source),n=>{Vl(n)&&Zv(n,this),yI(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){qn(_a(this.source),e=>{Vl(e)&&SE(e,this)}),this._active.clear(),tM(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=_a(this.source).reduce((n,i)=>Math.max(n,(yI(i)?i.priority:0)+1),0))}}function Tme(t){return t.idle!==!1}function DO(t){return!t.size||Array.from(t).every(Tme)}function tM(t){t.idle||(t.idle=!0,qn(sS(t),e=>{e.done=!0}),wE(t,{type:"idle",parent:t}))}sc.assign({createStringInterpolator:dj,to:(t,e)=>new Mme(t,e)});const Ime=["primitive"].concat(Object.keys(Fw).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));sc.assign({createStringInterpolator:dj,colors:Epe,frameLoop:"demand"});Qv(()=>{Bt.advance()});const Bme=nme(Ime,{applyAnimatedValues:yr}),Rme=Bme.animated;function Pme({enabled:t=!0,snap:e,global:n,domElement:i,cursor:r=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const h=Fe(C=>C.events),d=Fe(C=>C.gl),p=i||h.connected||d.domElement,{size:g}=Fe(),A=E.useMemo(()=>[a[0]+c[0],a[0]+c[1]],[a[0],c[0],c[1]]),m=E.useMemo(()=>[a[1]+u[0],a[1]+u[1]],[a[1],u[0],u[1]]),v=E.useMemo(()=>[zt.clamp(a[0],...A),zt.clamp(a[1],...m),a[2]],[a[0],a[1],a[2],A,m]),[y,w]=bme(()=>({scale:1,rotation:v,config:f}));E.useEffect(()=>void w.start({scale:1,rotation:v,config:f}),[v]),E.useEffect(()=>{if(n&&r&&t)return p.style.cursor="grab",d.domElement.style.cursor="",()=>{p.style.cursor="default",d.domElement.style.cursor="default"}},[n,r,p,t]);const S=KW({onHover:({last:C})=>{r&&!n&&t&&(p.style.cursor=C?"auto":"grab")},onDrag:({down:C,delta:[b,M],memo:[I,T]=y.rotation.animation.to||v})=>{if(!t)return[M,b];r&&(p.style.cursor=C?"grabbing":"grab"),b=zt.clamp(T+b/g.width*Math.PI*o,...m),M=zt.clamp(I+M/g.height*Math.PI*o,...A);const D=e&&!C&&typeof e!="boolean"?e:f;return w.start({scale:C&&M>A[1]/2?l:1,rotation:e&&!C?v:[M,b,0],config:R=>R==="scale"?{...D,friction:D.friction*3}:D}),[M,b]}},{target:n?p:void 0});return E.createElement(Rme.group,Te({},S==null?void 0:S(),y),s)}const Dme=t=>(e,n,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=h=>{const d=o(h);if(!u(f,d)){const p=f;a(f=d,p)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},t(e,n,i)},Rj=E.createContext(null);function Lme({map:t,children:e,onChange:n,domElement:i}){const r=t.map(l=>l.name+l.keys).join("-"),s=E.useMemo(()=>Ow(Dme(()=>t.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=E.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return E.useEffect(()=>{const c=t.map(({name:d,keys:p,up:g})=>({keys:p,up:g,fn:A=>{a({[d]:A}),n&&n(d,A,o[1]())}})).reduce((d,{keys:p,fn:g,up:A=!0})=>(p.forEach(m=>d[m]={fn:g,pressed:!1,up:A}),d),{}),u=({key:d,code:p})=>{const g=c[d]||c[p];if(!g)return;const{fn:A,pressed:m,up:v}=g;g.pressed=!0,(v||!m)&&A(!0)},f=({key:d,code:p})=>{const g=c[d]||c[p];if(!g)return;const{fn:A,up:m}=g;g.pressed=!1,m&&A(!1)},h=i||window;return h.addEventListener("keydown",u,{passive:!0}),h.addEventListener("keyup",f,{passive:!0}),()=>{h.removeEventListener("keydown",u),h.removeEventListener("keyup",f)}},[i,r]),E.createElement(Rj.Provider,{value:o,children:e})}function Fme(t){const[e,n,i]=E.useContext(Rj);return t?i(t):[e,n]}var Ome=Object.defineProperty,zme=(t,e,n)=>e in t?Ome(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K1=(t,e,n)=>(zme(t,typeof e!="symbol"?e+"":e,n),n);const Zp=4,zm=1024,Yl=4,Ume=(t=1)=>{const e=new Float32Array(zm*Yl*t*Zp),n=new Yr(e,zm,Yl*t,In,vn);return n.wrapS=qr,n.wrapT=qr,n.magFilter=fn,n.needsUpdate=!0,n},kme=(t,e,n=0)=>{const i=Math.floor(zm*(Yl/4));e.arcLengthDivisions=i/2,e.updateArcLengths();const r=e.getSpacedPoints(i),s=e.computeFrenetFrames(i,!0);for(let o=0;o<i;o++){const a=Math.floor(o/zm),l=o%zm;let c=r[o];Mx(t,l,c.x,c.y,c.z,0+a+Yl*n),c=s.tangents[o],Mx(t,l,c.x,c.y,c.z,1+a+Yl*n),c=s.normals[o],Mx(t,l,c.x,c.y,c.z,2+a+Yl*n),c=s.binormals[o],Mx(t,l,c.x,c.y,c.z,3+a+Yl*n)}t.needsUpdate=!0},Mx=(t,e,n,i,r,s)=>{const o=t.image,{data:a}=o,l=Zp*zm*s;a[e*Zp+l+0]=n,a[e*Zp+l+1]=i,a[e*Zp+l+2]=r,a[e*Zp+l+3]=1},Nme=t=>({spineTexture:{value:t},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function Gme(t,e,n=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=i=>{if(i.__modified)return;i.__modified=!0,Object.assign(i.uniforms,e);const r=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Yl*n}.;
		float textureStacks = ${Yl/4}.;

		${i.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Yl}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);i.vertexShader=r})}class Hme{constructor(e,n=1){K1(this,"curveArray"),K1(this,"curveLengthArray"),K1(this,"object3D"),K1(this,"splineTexure"),K1(this,"uniforms");const i=e.clone(),r=Ume(n),s=Nme(r);i.traverse(o=>{(o instanceof ut||o instanceof Ov)&&(o.material=o.material.clone(),Gme(o.material,s,n))}),this.curveArray=new Array(n),this.curveLengthArray=new Array(n),this.object3D=i,this.splineTexure=r,this.uniforms=s}updateCurve(e,n){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const i=n.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[e]=i,this.curveArray[e]=n,kme(this.splineTexure,n,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new Ge;function Qme(t,e=1e-4){e=Math.max(e,Number.EPSILON);const n={},i=t.getIndex(),r=t.getAttribute("position"),s=i?i.count:r.count;let o=0;const a=Object.keys(t.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"];for(let g=0,A=a.length;g<A;g++){const m=a[g];l[m]=[];const v=t.morphAttributes[m];v&&(c[m]=new Array(v.length).fill(0).map(()=>[]))}const h=Math.log10(1/e),d=Math.pow(10,h);for(let g=0;g<s;g++){const A=i?i.getX(g):g;let m="";for(let v=0,y=a.length;v<y;v++){const w=a[v],S=t.getAttribute(w),C=S.itemSize;for(let b=0;b<C;b++)m+=`${~~(S[f[b]](A)*d)},`}if(m in n)u.push(n[m]);else{for(let v=0,y=a.length;v<y;v++){const w=a[v],S=t.getAttribute(w),C=t.morphAttributes[w],b=S.itemSize,M=l[w],I=c[w];for(let T=0;T<b;T++){const D=f[T];if(M.push(S[D](A)),C)for(let R=0,z=C.length;R<z;R++)I[R].push(C[R][D](A))}}n[m]=o,u.push(o),o++}}const p=t.clone();for(let g=0,A=a.length;g<A;g++){const m=a[g],v=t.getAttribute(m),y=new v.array.constructor(l[m]),w=new Gt(y,v.itemSize,v.normalized);if(p.setAttribute(m,w),m in c)for(let S=0;S<c[m].length;S++){const C=t.morphAttributes[m][S],b=new C.array.constructor(c[m][S]),M=new Gt(b,C.itemSize,C.normalized);p.morphAttributes[m][S]=M}}return p.setIndex(u),p}function LO(t,e){if(e===aQ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===tE||e===_8){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===tE)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function Pj(t,e=Math.PI/3){const n=Math.cos(e),i=(1+1e-10)*100,r=[new L,new L,new L],s=new L,o=new L,a=new L,l=new L;function c(g){const A=~~(g.x*i),m=~~(g.y*i),v=~~(g.z*i);return`${A},${m},${v}`}const u=t.index?t.toNonIndexed():t,f=u.attributes.position,h={};for(let g=0,A=f.count/3;g<A;g++){const m=3*g,v=r[0].fromBufferAttribute(f,m+0),y=r[1].fromBufferAttribute(f,m+1),w=r[2].fromBufferAttribute(f,m+2);s.subVectors(w,y),o.subVectors(v,y);const S=new L().crossVectors(s,o).normalize();for(let C=0;C<3;C++){const b=r[C],M=c(b);M in h||(h[M]=[]),h[M].push(S)}}const d=new Float32Array(f.count*3),p=new Gt(d,3,!1);for(let g=0,A=f.count/3;g<A;g++){const m=3*g,v=r[0].fromBufferAttribute(f,m+0),y=r[1].fromBufferAttribute(f,m+1),w=r[2].fromBufferAttribute(f,m+2);s.subVectors(w,y),o.subVectors(v,y),a.crossVectors(s,o).normalize();for(let S=0;S<3;S++){const C=r[S],b=c(C),M=h[b];l.set(0,0,0);for(let I=0,T=M.length;I<T;I++){const D=M[I];a.dot(D)>n&&l.add(D)}l.normalize(),p.setXYZ(m+S,l.x,l.y,l.z)}}return u.setAttribute("normal",p),u}const Dj=parseInt(yl.replace(/\D+/g,""));var ya=Uint8Array,qu=Uint16Array,wI=Uint32Array,Lj=new ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fj=new ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vme=new ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oj=function(t,e){for(var n=new qu(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new wI(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},zj=Oj(Lj,2),Uj=zj[0],Wme=zj[1];Uj[28]=258,Wme[258]=28;var jme=Oj(Fj,0),Xme=jme[0],SI=new qu(32768);for(var _i=0;_i<32768;++_i){var Iu=(_i&43690)>>>1|(_i&21845)<<1;Iu=(Iu&52428)>>>2|(Iu&13107)<<2,Iu=(Iu&61680)>>>4|(Iu&3855)<<4,SI[_i]=((Iu&65280)>>>8|(Iu&255)<<8)>>>1}var pA=function(t,e,n){for(var i=t.length,r=0,s=new qu(e);r<i;++r)++s[t[r]-1];var o=new qu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(n){a=new qu(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[SI[f]>>>l]=c}else for(a=new qu(i),r=0;r<i;++r)t[r]&&(a[r]=SI[o[t[r]-1]++]>>>15-t[r]);return a},ey=new ya(288);for(var _i=0;_i<144;++_i)ey[_i]=8;for(var _i=144;_i<256;++_i)ey[_i]=9;for(var _i=256;_i<280;++_i)ey[_i]=7;for(var _i=280;_i<288;++_i)ey[_i]=8;var kj=new ya(32);for(var _i=0;_i<32;++_i)kj[_i]=5;var Yme=pA(ey,9,1),qme=pA(kj,5,1),nM=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Wa=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},iM=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},$me=function(t){return(t/8|0)+(t&7&&1)},Kme=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof qu?qu:t instanceof wI?wI:ya)(n-e);return i.set(t.subarray(e,n)),i},Jme=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new ya(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new ya(i*3));var o=function(G){var H=e.length;if(G>H){var oe=new ya(Math.max(H*2,G));oe.set(e),e=oe}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,f=n.d,h=n.m,d=n.n,p=i*8;do{if(!u){n.f=a=Wa(t,l,1);var g=Wa(t,l+1,3);if(l+=3,g)if(g==1)u=Yme,f=qme,h=9,d=5;else if(g==2){var y=Wa(t,l,31)+257,w=Wa(t,l+10,15)+4,S=y+Wa(t,l+5,31)+1;l+=14;for(var C=new ya(S),b=new ya(19),M=0;M<w;++M)b[Vme[M]]=Wa(t,l+M*3,7);l+=w*3;for(var I=nM(b),T=(1<<I)-1,D=pA(b,I,1),M=0;M<S;){var R=D[Wa(t,l,T)];l+=R&15;var A=R>>>4;if(A<16)C[M++]=A;else{var z=0,F=0;for(A==16?(F=3+Wa(t,l,3),l+=2,z=C[M-1]):A==17?(F=3+Wa(t,l,7),l+=3):A==18&&(F=11+Wa(t,l,127),l+=7);F--;)C[M++]=z}}var V=C.subarray(0,y),j=C.subarray(y);h=nM(V),d=nM(j),u=pA(V,h,1),f=pA(j,d,1)}else throw"invalid block type";else{var A=$me(l)+4,m=t[A-4]|t[A-3]<<8,v=A+m;if(v>i){if(s)throw"unexpected EOF";break}r&&o(c+m),e.set(t.subarray(A,v),c),n.b=c+=m,n.p=l=v*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var Z=(1<<h)-1,U=(1<<d)-1,$=l;;$=l){var z=u[iM(t,l)&Z],X=z>>>4;if(l+=z&15,l>p){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(X<256)e[c++]=X;else if(X==256){$=l,u=null;break}else{var Q=X-254;if(X>264){var M=X-257,J=Lj[M];Q=Wa(t,l,(1<<J)-1)+Uj[M],l+=J}var ne=f[iM(t,l)&U],O=ne>>>4;if(!ne)throw"invalid distance";l+=ne&15;var j=Xme[O];if(O>3){var J=Fj[O];j+=iM(t,l)&(1<<J)-1,l+=J}if(l>p){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var N=c+Q;c<N;c+=4)e[c]=e[c-j],e[c+1]=e[c+1-j],e[c+2]=e[c+2-j],e[c+3]=e[c+3-j];c=N}}n.l=u,n.p=$,n.b=c,u&&(a=1,n.m=h,n.d=f,n.n=d)}while(!a);return c==e.length?e:Kme(e,0,c)},Zme=new ya(0),e0e=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ng(t,e){return Jme((e0e(t),t.subarray(2,-4)),e)}var t0e=typeof TextDecoder<"u"&&new TextDecoder,n0e=0;try{t0e.decode(Zme,{stream:!0}),n0e=1}catch{}let i0e=class extends ut{constructor(e,n,i=!1,r=!1,s=1e4){const o=new Dt;super(o,n),this.isMarchingCubes=!0;const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=i,this.enableColors=r,this.init=function(v){this.resolution=v,this.isolation=80,this.size=v,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const y=s*3;this.positionArray=new Float32Array(y*3);const w=new Gt(this.positionArray,3);w.setUsage(ws),o.setAttribute("position",w),this.normalArray=new Float32Array(y*3);const S=new Gt(this.normalArray,3);if(S.setUsage(ws),o.setAttribute("normal",S),this.enableUvs){this.uvArray=new Float32Array(y*2);const C=new Gt(this.uvArray,2);C.setUsage(ws),o.setAttribute("uv",C)}if(this.enableColors){this.colorArray=new Float32Array(y*3);const C=new Gt(this.colorArray,3);C.setUsage(ws),o.setAttribute("color",C)}o.boundingSphere=new $n(new L,1)};function f(v,y,w){return v+(y-v)*w}function h(v,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S+R*a.delta,l[y+1]=C,l[y+2]=b,c[y+0]=f(z[v+0],z[v+3],R),c[y+1]=f(z[v+1],z[v+4],R),c[y+2]=f(z[v+2],z[v+5],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function d(v,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S,l[y+1]=C+R*a.delta,l[y+2]=b;const F=v+a.yd*3;c[y+0]=f(z[v+0],z[F+0],R),c[y+1]=f(z[v+1],z[F+1],R),c[y+2]=f(z[v+2],z[F+2],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function p(v,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S,l[y+1]=C,l[y+2]=b+R*a.delta;const F=v+a.zd*3;c[y+0]=f(z[v+0],z[F+0],R),c[y+1]=f(z[v+1],z[F+1],R),c[y+2]=f(z[v+2],z[F+2],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function g(v){const y=v*3;a.normal_cache[y]===0&&(a.normal_cache[y+0]=a.field[v-1]-a.field[v+1],a.normal_cache[y+1]=a.field[v-a.yd]-a.field[v+a.yd],a.normal_cache[y+2]=a.field[v-a.zd]-a.field[v+a.zd])}function A(v,y,w,S,C){const b=S+1,M=S+a.yd,I=S+a.zd,T=b+a.yd,D=b+a.zd,R=S+a.yd+a.zd,z=b+a.yd+a.zd;let F=0;const V=a.field[S],j=a.field[b],Z=a.field[M],U=a.field[T],$=a.field[I],X=a.field[D],Q=a.field[R],J=a.field[z];V<C&&(F|=1),j<C&&(F|=2),Z<C&&(F|=8),U<C&&(F|=4),$<C&&(F|=16),X<C&&(F|=32),Q<C&&(F|=128),J<C&&(F|=64);const ne=r0e[F];if(ne===0)return 0;const O=a.delta,N=v+O,G=y+O,H=w+O;ne&1&&(g(S),g(b),h(S*3,0,C,v,y,w,V,j,S,b)),ne&2&&(g(b),g(T),d(b*3,3,C,N,y,w,j,U,b,T)),ne&4&&(g(M),g(T),h(M*3,6,C,v,G,w,Z,U,M,T)),ne&8&&(g(S),g(M),d(S*3,9,C,v,y,w,V,Z,S,M)),ne&16&&(g(I),g(D),h(I*3,12,C,v,y,H,$,X,I,D)),ne&32&&(g(D),g(z),d(D*3,15,C,N,y,H,X,J,D,z)),ne&64&&(g(R),g(z),h(R*3,18,C,v,G,H,Q,J,R,z)),ne&128&&(g(I),g(R),d(I*3,21,C,v,y,H,$,Q,I,R)),ne&256&&(g(S),g(I),p(S*3,24,C,v,y,w,V,$,S,I)),ne&512&&(g(b),g(D),p(b*3,27,C,N,y,w,j,X,b,D)),ne&1024&&(g(T),g(z),p(T*3,30,C,N,G,w,U,J,T,z)),ne&2048&&(g(M),g(R),p(M*3,33,C,v,G,w,Z,Q,M,R)),F<<=4;let oe,de,ce,ge=0,q=0;for(;Tx[F+q]!=-1;)oe=F+q,de=oe+1,ce=oe+2,m(l,c,u,3*Tx[oe],3*Tx[de],3*Tx[ce]),q+=3,ge++;return ge}function m(v,y,w,S,C,b){const M=a.count*3;if(a.positionArray[M+0]=v[S],a.positionArray[M+1]=v[S+1],a.positionArray[M+2]=v[S+2],a.positionArray[M+3]=v[C],a.positionArray[M+4]=v[C+1],a.positionArray[M+5]=v[C+2],a.positionArray[M+6]=v[b],a.positionArray[M+7]=v[b+1],a.positionArray[M+8]=v[b+2],a.material.flatShading===!0){const I=(y[S+0]+y[C+0]+y[b+0])/3,T=(y[S+1]+y[C+1]+y[b+1])/3,D=(y[S+2]+y[C+2]+y[b+2])/3;a.normalArray[M+0]=I,a.normalArray[M+1]=T,a.normalArray[M+2]=D,a.normalArray[M+3]=I,a.normalArray[M+4]=T,a.normalArray[M+5]=D,a.normalArray[M+6]=I,a.normalArray[M+7]=T,a.normalArray[M+8]=D}else a.normalArray[M+0]=y[S+0],a.normalArray[M+1]=y[S+1],a.normalArray[M+2]=y[S+2],a.normalArray[M+3]=y[C+0],a.normalArray[M+4]=y[C+1],a.normalArray[M+5]=y[C+2],a.normalArray[M+6]=y[b+0],a.normalArray[M+7]=y[b+1],a.normalArray[M+8]=y[b+2];if(a.enableUvs){const I=a.count*2;a.uvArray[I+0]=v[S+0],a.uvArray[I+1]=v[S+2],a.uvArray[I+2]=v[C+0],a.uvArray[I+3]=v[C+2],a.uvArray[I+4]=v[b+0],a.uvArray[I+5]=v[b+2]}a.enableColors&&(a.colorArray[M+0]=w[S+0],a.colorArray[M+1]=w[S+1],a.colorArray[M+2]=w[S+2],a.colorArray[M+3]=w[C+0],a.colorArray[M+4]=w[C+1],a.colorArray[M+5]=w[C+2],a.colorArray[M+6]=w[b+0],a.colorArray[M+7]=w[b+1],a.colorArray[M+8]=w[b+2]),a.count+=3}this.addBall=function(v,y,w,S,C,b){const M=Math.sign(S);S=Math.abs(S);const I=b!=null;let T=new Je(v,y,w);if(I)try{T=b instanceof Je?b:Array.isArray(b)?new Je(Math.min(Math.abs(b[0]),1),Math.min(Math.abs(b[1]),1),Math.min(Math.abs(b[2]),1)):new Je(b)}catch{T=new Je(v,y,w)}const D=this.size*Math.sqrt(S/C),R=w*this.size,z=y*this.size,F=v*this.size;let V=Math.floor(R-D);V<1&&(V=1);let j=Math.floor(R+D);j>this.size-1&&(j=this.size-1);let Z=Math.floor(z-D);Z<1&&(Z=1);let U=Math.floor(z+D);U>this.size-1&&(U=this.size-1);let $=Math.floor(F-D);$<1&&($=1);let X=Math.floor(F+D);X>this.size-1&&(X=this.size-1);let Q,J,ne,O,N,G,H,oe,de,ce,ge;for(ne=V;ne<j;ne++)for(N=this.size2*ne,oe=ne/this.size-w,de=oe*oe,J=Z;J<U;J++)for(O=N+this.size*J,H=J/this.size-y,ce=H*H,Q=$;Q<X;Q++)if(G=Q/this.size-v,ge=S/(1e-6+G*G+ce+de)-C,ge>0){this.field[O+Q]+=ge*M;const q=Math.sqrt((Q-F)*(Q-F)+(J-z)*(J-z)+(ne-R)*(ne-R))/D,xe=1-q*q*q*(q*(q*6-15)+10);this.palette[(O+Q)*3+0]+=T.r*xe,this.palette[(O+Q)*3+1]+=T.g*xe,this.palette[(O+Q)*3+2]+=T.b*xe}},this.addPlaneX=function(v,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,F,V=w*Math.sqrt(v/y);for(V>w&&(V=w),M=0;M<V;M++)if(z=M/w,D=z*z,R=v/(1e-4+D)-y,R>0)for(I=0;I<w;I++)for(F=M+I*S,T=0;T<w;T++)b[C*T+F]+=R},this.addPlaneY=function(v,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,F,V,j=w*Math.sqrt(v/y);for(j>w&&(j=w),I=0;I<j;I++)if(z=I/w,D=z*z,R=v/(1e-4+D)-y,R>0)for(F=I*S,M=0;M<w;M++)for(V=F+M,T=0;T<w;T++)b[C*T+V]+=R},this.addPlaneZ=function(v,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,F,V,j=w*Math.sqrt(v/y);for(j>w&&(j=w),T=0;T<j;T++)if(z=T/w,D=z*z,R=v/(1e-4+D)-y,R>0)for(F=C*T,I=0;I<w;I++)for(V=F+I*S,M=0;M<w;M++)b[V+M]+=R},this.setCell=function(v,y,w,S){const C=this.size2*w+this.size*y+v;this.field[C]=S},this.getCell=function(v,y,w){const S=this.size2*w+this.size*y+v;return this.field[S]},this.blur=function(v=1){const y=this.field,w=y.slice(),S=this.size,C=this.size2;for(let b=0;b<S;b++)for(let M=0;M<S;M++)for(let I=0;I<S;I++){const T=C*I+S*M+b;let D=w[T],R=1;for(let z=-1;z<=1;z+=2){const F=z+b;if(!(F<0||F>=S))for(let V=-1;V<=1;V+=2){const j=V+M;if(!(j<0||j>=S))for(let Z=-1;Z<=1;Z+=2){const U=Z+I;if(U<0||U>=S)continue;const $=C*U+S*j+F,X=w[$];R++,D+=v*(X-D)/R}}}y[T]=D}},this.reset=function(){for(let v=0;v<this.size3;v++)this.normal_cache[v*3]=0,this.field[v]=0,this.palette[v*3]=this.palette[v*3+1]=this.palette[v*3+2]=0},this.update=function(){this.count=0;const v=this.size-2;for(let y=1;y<v;y++){const w=this.size2*y,S=(y-this.halfsize)/this.halfsize;for(let C=1;C<v;C++){const b=w+this.size*C,M=(C-this.halfsize)/this.halfsize;for(let I=1;I<v;I++){const T=(I-this.halfsize)/this.halfsize,D=b+I;A(T,M,S,D,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}};const r0e=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),Tx=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var s0e=Object.defineProperty,o0e=(t,e,n)=>e in t?s0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ja=(t,e,n)=>(o0e(t,typeof e!="symbol"?e+"":e,n),n);class rM{constructor(e=Math){ja(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),ja(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),ja(this,"p",[]),ja(this,"perm",[]),ja(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),ja(this,"dot",(n,i,r)=>n[0]*i+n[1]*r),ja(this,"dot3",(n,i,r,s)=>n[0]*i+n[1]*r+n[2]*s),ja(this,"dot4",(n,i,r,s,o)=>n[0]*i+n[1]*r+n[2]*s+n[3]*o),ja(this,"noise",(n,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(n+i)*a,c=Math.floor(n+l),u=Math.floor(i+l),f=(3-Math.sqrt(3))/6,h=(c+u)*f,d=c-h,p=u-h,g=n-d,A=i-p;let m=0,v=1;g>A&&(m=1,v=0);const y=g-m+f,w=A-v+f,S=g-1+2*f,C=A-1+2*f,b=c&255,M=u&255,I=this.perm[b+this.perm[M]]%12,T=this.perm[b+m+this.perm[M+v]]%12,D=this.perm[b+1+this.perm[M+1]]%12;let R=.5-g*g-A*A;R<0?r=0:(R*=R,r=R*R*this.dot(this.grad3[I],g,A));let z=.5-y*y-w*w;z<0?s=0:(z*=z,s=z*z*this.dot(this.grad3[T],y,w));let F=.5-S*S-C*C;return F<0?o=0:(F*=F,o=F*F*this.dot(this.grad3[D],S,C)),70*(r+s+o)}),ja(this,"noise3d",(n,i,r)=>{let s,o,a,l;const u=(n+i+r)*.3333333333333333,f=Math.floor(n+u),h=Math.floor(i+u),d=Math.floor(r+u),p=1/6,g=(f+h+d)*p,A=f-g,m=h-g,v=d-g,y=n-A,w=i-m,S=r-v;let C,b,M,I,T,D;y>=w?w>=S?(C=1,b=0,M=0,I=1,T=1,D=0):y>=S?(C=1,b=0,M=0,I=1,T=0,D=1):(C=0,b=0,M=1,I=1,T=0,D=1):w<S?(C=0,b=0,M=1,I=0,T=1,D=1):y<S?(C=0,b=1,M=0,I=0,T=1,D=1):(C=0,b=1,M=0,I=1,T=1,D=0);const R=y-C+p,z=w-b+p,F=S-M+p,V=y-I+2*p,j=w-T+2*p,Z=S-D+2*p,U=y-1+3*p,$=w-1+3*p,X=S-1+3*p,Q=f&255,J=h&255,ne=d&255,O=this.perm[Q+this.perm[J+this.perm[ne]]]%12,N=this.perm[Q+C+this.perm[J+b+this.perm[ne+M]]]%12,G=this.perm[Q+I+this.perm[J+T+this.perm[ne+D]]]%12,H=this.perm[Q+1+this.perm[J+1+this.perm[ne+1]]]%12;let oe=.6-y*y-w*w-S*S;oe<0?s=0:(oe*=oe,s=oe*oe*this.dot3(this.grad3[O],y,w,S));let de=.6-R*R-z*z-F*F;de<0?o=0:(de*=de,o=de*de*this.dot3(this.grad3[N],R,z,F));let ce=.6-V*V-j*j-Z*Z;ce<0?a=0:(ce*=ce,a=ce*ce*this.dot3(this.grad3[G],V,j,Z));let ge=.6-U*U-$*$-X*X;return ge<0?l=0:(ge*=ge,l=ge*ge*this.dot3(this.grad3[H],U,$,X)),32*(s+o+a+l)}),ja(this,"noise4d",(n,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let f,h,d,p,g;const A=(n+i+r+s)*c,m=Math.floor(n+A),v=Math.floor(i+A),y=Math.floor(r+A),w=Math.floor(s+A),S=(m+v+y+w)*u,C=m-S,b=v-S,M=y-S,I=w-S,T=n-C,D=i-b,R=r-M,z=s-I,F=T>D?32:0,V=T>R?16:0,j=D>R?8:0,Z=T>z?4:0,U=D>z?2:0,$=R>z?1:0,X=F+V+j+Z+U+$;let Q,J,ne,O,N,G,H,oe,de,ce,ge,q;Q=a[X][0]>=3?1:0,J=a[X][1]>=3?1:0,ne=a[X][2]>=3?1:0,O=a[X][3]>=3?1:0,N=a[X][0]>=2?1:0,G=a[X][1]>=2?1:0,H=a[X][2]>=2?1:0,oe=a[X][3]>=2?1:0,de=a[X][0]>=1?1:0,ce=a[X][1]>=1?1:0,ge=a[X][2]>=1?1:0,q=a[X][3]>=1?1:0;const xe=T-Q+u,ue=D-J+u,me=R-ne+u,pe=z-O+u,Le=T-N+2*u,re=D-G+2*u,ie=R-H+2*u,te=z-oe+2*u,W=T-de+3*u,Me=D-ce+3*u,De=R-ge+3*u,Ee=z-q+3*u,_e=T-1+4*u,Ze=D-1+4*u,Oe=R-1+4*u,we=z-1+4*u,be=m&255,Be=v&255,Ve=y&255,ot=w&255,$e=l[be+l[Be+l[Ve+l[ot]]]]%32,qe=l[be+Q+l[Be+J+l[Ve+ne+l[ot+O]]]]%32,fe=l[be+N+l[Be+G+l[Ve+H+l[ot+oe]]]]%32,Ue=l[be+de+l[Be+ce+l[Ve+ge+l[ot+q]]]]%32,it=l[be+1+l[Be+1+l[Ve+1+l[ot+1]]]]%32;let Ae=.6-T*T-D*D-R*R-z*z;Ae<0?f=0:(Ae*=Ae,f=Ae*Ae*this.dot4(o[$e],T,D,R,z));let Ye=.6-xe*xe-ue*ue-me*me-pe*pe;Ye<0?h=0:(Ye*=Ye,h=Ye*Ye*this.dot4(o[qe],xe,ue,me,pe));let ye=.6-Le*Le-re*re-ie*ie-te*te;ye<0?d=0:(ye*=ye,d=ye*ye*this.dot4(o[fe],Le,re,ie,te));let He=.6-W*W-Me*Me-De*De-Ee*Ee;He<0?p=0:(He*=He,p=He*He*this.dot4(o[Ue],W,Me,De,Ee));let lt=.6-_e*_e-Ze*Ze-Oe*Oe-we*we;return lt<0?g=0:(lt*=lt,g=lt*lt*this.dot4(o[it],_e,Ze,Oe,we)),27*(f+h+d+p+g)});for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}}var a0e=Object.defineProperty,l0e=(t,e,n)=>e in t?a0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nj=(t,e,n)=>(l0e(t,typeof e!="symbol"?e+"":e,n),n);const q_={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new L},up:{value:new L(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Dj>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},Gj=new Fn({name:"SkyShader",fragmentShader:q_.fragmentShader,vertexShader:q_.vertexShader,uniforms:Ra.clone(q_.uniforms),side:Ki,depthWrite:!1});let NB=class extends ut{constructor(){super(new ks(1,1,1),Gj)}};Nj(NB,"SkyShader",q_);Nj(NB,"material",Gj);const c0e=t=>t&&t.isCubeTexture;class u0e extends ut{constructor(e,n){var i,r;const s=c0e(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,g={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},A=new Nv(1,16),m=new Fn({uniforms:g,fragmentShader:p,vertexShader:d,side:Qn});super(A,m)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function Hj(t,e,n={}){const i=new L,r=new Tt,s=new L,o=new Ge,a=new Ge,l=new Ge;n.preserveMatrix=n.preserveMatrix!==void 0?n.preserveMatrix:!0,n.preservePosition=n.preservePosition!==void 0?n.preservePosition:!0,n.preserveHipPosition=n.preserveHipPosition!==void 0?n.preserveHipPosition:!1,n.useTargetMatrix=n.useTargetMatrix!==void 0?n.useTargetMatrix:!1,n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{};const c=e.isObject3D?e.skeleton.bones:TE(e),u=t.isObject3D?t.skeleton.bones:TE(t);let f,h,d,p,g;if(t.isObject3D?t.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){g=[];for(let A=0;A<u.length;A++)g.push(u[A].position.clone())}if(n.preserveMatrix){t.updateMatrixWorld(),t.matrixWorld.identity();for(let A=0;A<t.children.length;++A)t.children[A].updateMatrixWorld(!0)}if(n.offsets){f=[];for(let A=0;A<u.length;++A)h=u[A],d=n.names[h.name]||h.name,n.offsets[d]&&(h.matrix.multiply(n.offsets[d]),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()),f.push(h.matrixWorld.clone())}for(let A=0;A<u.length;++A){if(h=u[A],d=n.names[h.name]||h.name,p=Qj(d,c),l.copy(h.matrixWorld),p){if(p.updateMatrixWorld(),n.useTargetMatrix?a.copy(p.matrixWorld):(a.copy(t.matrixWorld).invert(),a.multiply(p.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(r.setFromRotationMatrix(a)),t.isObject3D){const m=u.indexOf(h),v=f?f[m]:o.copy(t.skeleton.boneInverses[m]).invert();l.multiply(v)}l.copyPosition(a)}h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(l)):h.matrix.copy(l),n.preserveHipPosition&&d===n.hip&&h.matrix.setPosition(i.set(0,h.position.y,0)),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()}if(n.preservePosition)for(let A=0;A<u.length;++A)h=u[A],d=n.names[h.name]||h.name,d!==n.hip&&h.position.copy(g[A]);n.preserveMatrix&&t.updateMatrixWorld(!0)}function f0e(t,e,n,i={}){i.useFirstFramePosition=i.useFirstFramePosition!==void 0?i.useFirstFramePosition:!1,i.fps=i.fps!==void 0?i.fps:30,i.names=i.names||[],e.isObject3D||(e=d0e(e));const r=Math.round(n.duration*(i.fps/1e3)*1e3),s=1/i.fps,o=[],a=new $8(e),l=TE(t.skeleton),c=[];let u,f,h,d,p;a.clipAction(n).play(),a.update(0),e.updateMatrixWorld();for(let g=0;g<r;++g){const A=g*s;Hj(t,e,i);for(let m=0;m<l.length;++m)p=i.names[l[m].name]||l[m].name,h=Qj(p,e.skeleton),h&&(f=l[m],d=c[m]=c[m]||{bone:f},i.hip===p&&(d.pos||(d.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),i.useFirstFramePosition&&(g===0&&(u=f.position.clone()),f.position.sub(u)),d.pos.times[g]=A,f.position.toArray(d.pos.values,g*3)),d.quat||(d.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),d.quat.times[g]=A,f.quaternion.toArray(d.quat.values,g*4));a.update(s),e.updateMatrixWorld()}for(let g=0;g<c.length;++g)d=c[g],d&&(d.pos&&o.push(new Jc(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),o.push(new Kc(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return a.uncacheAction(n),new Ef(n.name,-1,o)}function h0e(t){const e=new Map,n=new Map,i=t.clone();return Vj(t,i,function(r,s){e.set(s,r),n.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return n.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function Qj(t,e){for(let n=0,i=TE(e);n<i.length;n++)if(t===i[n].name)return i[n]}function TE(t){return Array.isArray(t)?t:t.bones}function d0e(t){const e=new uV(t.bones[0]);return e.skeleton=t,e}function Vj(t,e,n){n(t,e);for(let i=0;i<t.children.length;i++)Vj(t.children[i],e.children[i],n)}const p0e={retarget:Hj,retargetClip:f0e,clone:h0e},es=new Tr,Ix=new L;class m0e{constructor(e){let n=e.geometry;n.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),n=n.toNonIndexed()),this.geometry=n,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,n=this.weightAttribute,i=new Float32Array(e.count/3);for(let s=0;s<e.count;s+=3){let o=1;n&&(o=n.getX(s)+n.getX(s+1)+n.getX(s+2)),es.a.fromBufferAttribute(e,s),es.b.fromBufferAttribute(e,s+1),es.c.fromBufferAttribute(e,s+2),o*=es.getArea(),i[s/3]=o}this.distribution=new Float32Array(e.count/3);let r=0;for(let s=0;s<i.length;s++)r+=i[s],this.distribution[s]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,n,i){const r=this.sampleFaceIndex();return this.sampleFace(r,e,n,i)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const n=this.distribution;let i=0,r=n.length-1,s=-1;for(;i<=r;){const o=Math.ceil((i+r)/2);if(o===0||n[o-1]<=e&&n[o]>e){s=o;break}else e<n[o]?r=o-1:i=o+1}return s}sampleFace(e,n,i,r){let s=this.randomFunction(),o=this.randomFunction();return s+o>1&&(s=1-s,o=1-o),es.a.fromBufferAttribute(this.positionAttribute,e*3),es.b.fromBufferAttribute(this.positionAttribute,e*3+1),es.c.fromBufferAttribute(this.positionAttribute,e*3+2),n.set(0,0,0).addScaledVector(es.a,s).addScaledVector(es.b,o).addScaledVector(es.c,1-(s+o)),i!==void 0&&es.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(es.a.fromBufferAttribute(this.colorAttribute,e*3),es.b.fromBufferAttribute(this.colorAttribute,e*3+1),es.c.fromBufferAttribute(this.colorAttribute,e*3+2),Ix.set(0,0,0).addScaledVector(es.a,s).addScaledVector(es.b,o).addScaledVector(es.c,1-(s+o)),r.r=Ix.x,r.g=Ix.y,r.b=Ix.z),this}}var g0e=Object.defineProperty,A0e=(t,e,n)=>e in t?g0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cn=(t,e,n)=>(A0e(t,typeof e!="symbol"?e+"":e,n),n);const FO=new L;let v0e=class extends $r{constructor(e,n){super(),cn(this,"object"),cn(this,"domElement"),cn(this,"enabled",!0),cn(this,"movementSpeed",1),cn(this,"lookSpeed",.005),cn(this,"lookVertical",!0),cn(this,"autoForward",!1),cn(this,"activeLook",!0),cn(this,"heightSpeed",!1),cn(this,"heightCoef",1),cn(this,"heightMin",0),cn(this,"heightMax",1),cn(this,"constrainVertical",!1),cn(this,"verticalMin",0),cn(this,"verticalMax",Math.PI),cn(this,"mouseDragOn",!1),cn(this,"autoSpeedFactor",0),cn(this,"mouseX",0),cn(this,"mouseY",0),cn(this,"moveForward",!1),cn(this,"moveBackward",!1),cn(this,"moveLeft",!1),cn(this,"moveRight",!1),cn(this,"moveUp",!1),cn(this,"moveDown",!1),cn(this,"viewHalfX",0),cn(this,"viewHalfY",0),cn(this,"lat",0),cn(this,"lon",0),cn(this,"lookDirection",new L),cn(this,"spherical",new ed),cn(this,"target",new L),cn(this,"connect",i=>{i.setAttribute("tabindex","-1"),i.style.touchAction="none",i.addEventListener("contextmenu",this.contextmenu),i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),this.domElement=i,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),cn(this,"dispose",()=>{var i,r,s,o;(i=this.domElement)==null||i.removeEventListener("contextmenu",this.contextmenu),(r=this.domElement)==null||r.removeEventListener("mousedown",this.onMouseDown),(s=this.domElement)==null||s.removeEventListener("mousemove",this.onMouseMove),(o=this.domElement)==null||o.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),cn(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),cn(this,"onMouseDown",i=>{var r;if((r=this.domElement)==null||r.focus(),this.activeLook)switch(i.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),cn(this,"onMouseUp",i=>{if(this.activeLook)switch(i.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),cn(this,"onMouseMove",i=>{this.domElement&&(this.mouseX=i.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=i.pageY-this.domElement.offsetTop-this.viewHalfY)}),cn(this,"onKeyDown",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),cn(this,"onKeyUp",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),cn(this,"lookAt",(i,r,s)=>(i instanceof L?this.target.copy(i):r&&s&&this.target.set(i,r,s),this.object.lookAt(this.target),this.setOrientation(),this)),cn(this,"update",i=>{if(!this.enabled)return;if(this.heightSpeed){const f=zt.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=i*(f*this.heightCoef)}else this.autoSpeedFactor=0;const r=i*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);let s=i*this.lookSpeed;this.activeLook||(s=0);let o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*s,this.lookVertical&&(this.lat-=this.mouseY*s*o),this.lat=Math.max(-85,Math.min(85,this.lat));let a=zt.degToRad(90-this.lat);const l=zt.degToRad(this.lon);this.constrainVertical&&(a=zt.mapLinear(a,0,Math.PI,this.verticalMin,this.verticalMax));const c=this.object.position;FO.setFromSphericalCoords(1,a,l).add(c),this.object.lookAt(FO)}),cn(this,"contextmenu",i=>i.preventDefault()),cn(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-zt.radToDeg(this.spherical.phi),this.lon=zt.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=n,this.setOrientation(),n&&this.connect(n)}};var y0e=Object.defineProperty,x0e=(t,e,n)=>e in t?y0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nt=(t,e,n)=>(x0e(t,typeof e!="symbol"?e+"":e,n),n);let _0e=class extends Ht{constructor(e,n){super(),nt(this,"isTransformControls",!0),nt(this,"visible",!1),nt(this,"domElement"),nt(this,"raycaster",new Ff),nt(this,"gizmo"),nt(this,"plane"),nt(this,"tempVector",new L),nt(this,"tempVector2",new L),nt(this,"tempQuaternion",new Tt),nt(this,"unit",{X:new L(1,0,0),Y:new L(0,1,0),Z:new L(0,0,1)}),nt(this,"pointStart",new L),nt(this,"pointEnd",new L),nt(this,"offset",new L),nt(this,"rotationAxis",new L),nt(this,"startNorm",new L),nt(this,"endNorm",new L),nt(this,"rotationAngle",0),nt(this,"cameraPosition",new L),nt(this,"cameraQuaternion",new Tt),nt(this,"cameraScale",new L),nt(this,"parentPosition",new L),nt(this,"parentQuaternion",new Tt),nt(this,"parentQuaternionInv",new Tt),nt(this,"parentScale",new L),nt(this,"worldPositionStart",new L),nt(this,"worldQuaternionStart",new Tt),nt(this,"worldScaleStart",new L),nt(this,"worldPosition",new L),nt(this,"worldQuaternion",new Tt),nt(this,"worldQuaternionInv",new Tt),nt(this,"worldScale",new L),nt(this,"eye",new L),nt(this,"positionStart",new L),nt(this,"quaternionStart",new Tt),nt(this,"scaleStart",new L),nt(this,"camera"),nt(this,"object"),nt(this,"enabled",!0),nt(this,"axis",null),nt(this,"mode","translate"),nt(this,"translationSnap",null),nt(this,"rotationSnap",null),nt(this,"scaleSnap",null),nt(this,"space","world"),nt(this,"size",1),nt(this,"dragging",!1),nt(this,"showX",!0),nt(this,"showY",!0),nt(this,"showZ",!0),nt(this,"changeEvent",{type:"change"}),nt(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),nt(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),nt(this,"objectChangeEvent",{type:"objectChange"}),nt(this,"intersectObjectWithRay",(r,s,o)=>{const a=s.intersectObject(r,!0);for(let l=0;l<a.length;l++)if(a[l].object.visible||o)return a[l];return!1}),nt(this,"attach",r=>(this.object=r,this.visible=!0,this)),nt(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),nt(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),nt(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),nt(this,"pointerHover",r=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);s?this.axis=s.object.name:this.axis=null}),nt(this,"pointerDown",r=>{if(!(this.object===void 0||this.dragging===!0||r.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(s){let o=this.space;if(this.mode==="scale"?o="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(o="world"),o==="local"&&this.mode==="rotate"){const a=this.rotationSnap;this.axis==="X"&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),this.axis==="Y"&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),this.axis==="Z"&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(s.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),nt(this,"pointerMove",r=>{const s=this.axis,o=this.mode,a=this.object;let l=this.space;if(o==="scale"?l="local":(s==="E"||s==="XYZE"||s==="XYZ")&&(l="world"),a===void 0||s===null||this.dragging===!1||r.button!==-1)return;this.raycaster.setFromCamera(r,this.camera);const c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),o==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&s!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),s.indexOf("X")===-1&&(this.offset.x=0),s.indexOf("Y")===-1&&(this.offset.y=0),s.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&s!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),a.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(a.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this.quaternionStart)),l==="world"&&(a.parent&&a.position.add(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld)),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld))));else if(o==="scale"){if(s.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),s.search("X")===-1&&(this.tempVector2.x=1),s.search("Y")===-1&&(this.tempVector2.y=1),s.search("Z")===-1&&(this.tempVector2.z=1);a.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(s.search("X")!==-1&&(this.object.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));s==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):s==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(s==="X"||s==="Y"||s==="Z")&&(this.rotationAxis.copy(this.unit[s]),this.tempVector.copy(this.unit[s]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&s!=="E"&&s!=="XYZE"?(a.quaternion.copy(this.quaternionStart),a.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),a.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),nt(this,"pointerUp",r=>{r.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),nt(this,"getPointer",r=>{var s;if(this.domElement&&((s=this.domElement.ownerDocument)!=null&&s.pointerLockElement))return{x:0,y:0,button:r.button};{const o=r.changedTouches?r.changedTouches[0]:r,a=this.domElement.getBoundingClientRect();return{x:(o.clientX-a.left)/a.width*2-1,y:-(o.clientY-a.top)/a.height*2+1,button:r.button}}}),nt(this,"onPointerHover",r=>{if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(r));break}}),nt(this,"onPointerDown",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(r)),this.pointerDown(this.getPointer(r)))}),nt(this,"onPointerMove",r=>{this.enabled&&this.pointerMove(this.getPointer(r))}),nt(this,"onPointerUp",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(r)))}),nt(this,"getMode",()=>this.mode),nt(this,"setMode",r=>{this.mode=r}),nt(this,"setTranslationSnap",r=>{this.translationSnap=r}),nt(this,"setRotationSnap",r=>{this.rotationSnap=r}),nt(this,"setScaleSnap",r=>{this.scaleSnap=r}),nt(this,"setSize",r=>{this.size=r}),nt(this,"setSpace",r=>{this.space=r}),nt(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),nt(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),nt(this,"dispose",()=>{var r,s,o,a,l,c;(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointermove",this.onPointerHover),(a=(o=this.domElement)==null?void 0:o.ownerDocument)==null||a.removeEventListener("pointermove",this.onPointerMove),(c=(l=this.domElement)==null?void 0:l.ownerDocument)==null||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{const f=u;f.geometry&&f.geometry.dispose(),f.material&&f.material.dispose()})}),this.domElement=n,this.camera=e,this.gizmo=new E0e,this.add(this.gizmo),this.plane=new w0e,this.add(this.plane);const i=(r,s)=>{let o=s;Object.defineProperty(this,r,{get:function(){return o!==void 0?o:s},set:function(a){o!==a&&(o=a,this.plane[r]=a,this.gizmo[r]=a,this.dispatchEvent({type:r+"-changed",value:a}),this.dispatchEvent(this.changeEvent))}}),this[r]=s,this.plane[r]=s,this.gizmo[r]=s};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),n!==void 0&&this.connect(n)}};class E0e extends Ht{constructor(){super(),nt(this,"isTransformControlsGizmo",!0),nt(this,"type","TransformControlsGizmo"),nt(this,"tempVector",new L(0,0,0)),nt(this,"tempEuler",new gi),nt(this,"alignVector",new L(0,1,0)),nt(this,"zeroVector",new L(0,0,0)),nt(this,"lookAtMatrix",new Ge),nt(this,"tempQuaternion",new Tt),nt(this,"tempQuaternion2",new Tt),nt(this,"identityQuaternion",new Tt),nt(this,"unitX",new L(1,0,0)),nt(this,"unitY",new L(0,1,0)),nt(this,"unitZ",new L(0,0,1)),nt(this,"gizmo"),nt(this,"picker"),nt(this,"helper"),nt(this,"rotationAxis",new L),nt(this,"cameraPosition",new L),nt(this,"worldPositionStart",new L),nt(this,"worldQuaternionStart",new Tt),nt(this,"worldPosition",new L),nt(this,"worldQuaternion",new Tt),nt(this,"eye",new L),nt(this,"camera",null),nt(this,"enabled",!0),nt(this,"axis",null),nt(this,"mode","translate"),nt(this,"space","world"),nt(this,"size",1),nt(this,"dragging",!1),nt(this,"showX",!0),nt(this,"showY",!0),nt(this,"showZ",!0),nt(this,"updateMatrixWorld",()=>{let X=this.space;this.mode==="scale"&&(X="local");const Q=X==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let J=[];J=J.concat(this.picker[this.mode].children),J=J.concat(this.gizmo[this.mode].children),J=J.concat(this.helper[this.mode].children);for(let ne=0;ne<J.length;ne++){const O=J[ne];O.visible=!0,O.rotation.set(0,0,0),O.position.copy(this.worldPosition);let N;if(this.camera.isOrthographicCamera?N=(this.camera.top-this.camera.bottom)/this.camera.zoom:N=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),O.scale.set(1,1,1).multiplyScalar(N*this.size/7),O.tag==="helper"){O.visible=!1,O.name==="AXIS"?(O.position.copy(this.worldPositionStart),O.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),O.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))>.9&&(O.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),O.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))>.9&&(O.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),O.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))>.9&&(O.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),O.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),O.quaternion.multiply(this.tempQuaternion),O.visible=this.dragging),this.axis==="E"&&(O.visible=!1)):O.name==="START"?(O.position.copy(this.worldPositionStart),O.visible=this.dragging):O.name==="END"?(O.position.copy(this.worldPosition),O.visible=this.dragging):O.name==="DELTA"?(O.position.copy(this.worldPositionStart),O.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),O.scale.copy(this.tempVector),O.visible=this.dragging):(O.quaternion.copy(Q),this.dragging?O.position.copy(this.worldPositionStart):O.position.copy(this.worldPosition),this.axis&&(O.visible=this.axis.search(O.name)!==-1));continue}O.quaternion.copy(Q),this.mode==="translate"||this.mode==="scale"?((O.name==="X"||O.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))>.99&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),(O.name==="Y"||O.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))>.99&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),(O.name==="Z"||O.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))>.99&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),O.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))<.2&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),O.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))<.2&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),O.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))<.2&&(O.scale.set(1e-10,1e-10,1e-10),O.visible=!1),O.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye)<0?O.tag==="fwd"?O.visible=!1:O.scale.x*=-1:O.tag==="bwd"&&(O.visible=!1)),O.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye)<0?O.tag==="fwd"?O.visible=!1:O.scale.y*=-1:O.tag==="bwd"&&(O.visible=!1)),O.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye)<0?O.tag==="fwd"?O.visible=!1:O.scale.z*=-1:O.tag==="bwd"&&(O.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Q),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Q).invert()),O.name.search("E")!==-1&&O.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),O.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),O.quaternion.copy(this.tempQuaternion)),O.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),O.quaternion.copy(this.tempQuaternion)),O.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),O.quaternion.copy(this.tempQuaternion))),O.visible=O.visible&&(O.name.indexOf("X")===-1||this.showX),O.visible=O.visible&&(O.name.indexOf("Y")===-1||this.showY),O.visible=O.visible&&(O.name.indexOf("Z")===-1||this.showZ),O.visible=O.visible&&(O.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),O.material.tempOpacity=O.material.tempOpacity||O.material.opacity,O.material.tempColor=O.material.tempColor||O.material.color.clone(),O.material.color.copy(O.material.tempColor),O.material.opacity=O.material.tempOpacity,this.enabled?this.axis&&(O.name===this.axis?(O.material.opacity=1,O.material.color.lerp(new Je(1,1,1),.5)):this.axis.split("").some(function(G){return O.name===G})?(O.material.opacity=1,O.material.color.lerp(new Je(1,1,1),.5)):(O.material.opacity*=.25,O.material.color.lerp(new Je(1,1,1),.5))):(O.material.opacity*=.5,O.material.color.lerp(new Je(1,1,1),.5))}super.updateMatrixWorld()});const e=new Br({depthTest:!1,depthWrite:!1,transparent:!0,side:Qn,fog:!1,toneMapped:!1}),n=new Ji({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;const r=e.clone();r.opacity=.33;const s=e.clone();s.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const l=e.clone();l.opacity=.25;const c=l.clone();c.color.set(16776960);const u=l.clone();u.color.set(65535);const f=l.clone();f.color.set(16711935),e.clone().color.set(16776960);const d=n.clone();d.color.set(16711680);const p=n.clone();p.color.set(65280);const g=n.clone();g.color.set(255);const A=n.clone();A.color.set(65535);const m=n.clone();m.color.set(16711935);const v=n.clone();v.color.set(16776960);const y=n.clone();y.color.set(7895160);const w=v.clone();w.opacity=.25;const S=new Qr(0,.05,.2,12,1,!1),C=new ks(.125,.125,.125),b=new Dt;b.setAttribute("position",new At([0,0,0,1,0,0],3));const M=(X,Q)=>{const J=new Dt,ne=[];for(let O=0;O<=64*Q;++O)ne.push(0,Math.cos(O/32*Math.PI)*X,Math.sin(O/32*Math.PI)*X);return J.setAttribute("position",new At(ne,3)),J},I=()=>{const X=new Dt;return X.setAttribute("position",new At([0,0,0,1,1,1],3)),X},T={X:[[new ut(S,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new ut(S,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new un(b,d)]],Y:[[new ut(S,o),[0,1,0],null,null,"fwd"],[new ut(S,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new un(b,p),null,[0,0,Math.PI/2]]],Z:[[new ut(S,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new ut(S,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new un(b,g),null,[0,-Math.PI/2,0]]],XYZ:[[new ut(new la(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new ut(new vr(.295,.295),c.clone()),[.15,.15,0]],[new un(b,v),[.18,.3,0],null,[.125,1,1]],[new un(b,v),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new ut(new vr(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new un(b,A),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new un(b,A),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new ut(new vr(.295,.295),f.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new un(b,m),[.18,0,.3],null,[.125,1,1]],[new un(b,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},D={X:[[new ut(new Qr(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new ut(new Qr(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new ut(new Qr(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new ut(new la(.2,0),i)]],XY:[[new ut(new vr(.4,.4),i),[.2,.2,0]]],YZ:[[new ut(new vr(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new ut(new vr(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},R={START:[[new ut(new la(.01,2),r),null,null,null,"helper"]],END:[[new ut(new la(.01,2),r),null,null,null,"helper"]],DELTA:[[new un(I(),r),null,null,null,"helper"]],X:[[new un(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new un(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new un(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z={X:[[new un(M(1,.5),d)],[new ut(new la(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new un(M(1,.5),p),null,[0,0,-Math.PI/2]],[new ut(new la(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new un(M(1,.5),g),null,[0,Math.PI/2,0]],[new ut(new la(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new un(M(1.25,1),w),null,[0,Math.PI/2,0]],[new ut(new Qr(.03,0,.15,4,1,!1),w),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new ut(new Qr(.03,0,.15,4,1,!1),w),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new ut(new Qr(.03,0,.15,4,1,!1),w),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new ut(new Qr(.03,0,.15,4,1,!1),w),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new un(M(1,1),y),null,[0,Math.PI/2,0]]]},F={AXIS:[[new un(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},V={X:[[new ut(new Wu(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ut(new Wu(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ut(new Wu(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ut(new Wu(1.25,.1,2,24),i)]],XYZE:[[new ut(new dd(.7,10,8),i)]]},j={X:[[new ut(C,s),[.8,0,0],[0,0,-Math.PI/2]],[new un(b,d),null,null,[.8,1,1]]],Y:[[new ut(C,o),[0,.8,0]],[new un(b,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new ut(C,a),[0,0,.8],[Math.PI/2,0,0]],[new un(b,g),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new ut(C,c),[.85,.85,0],null,[2,2,.2]],[new un(b,v),[.855,.98,0],null,[.125,1,1]],[new un(b,v),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new ut(C,u),[0,.85,.85],null,[.2,2,2]],[new un(b,A),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new un(b,A),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new ut(C,f),[.85,0,.85],null,[2,.2,2]],[new un(b,m),[.855,0,.98],null,[.125,1,1]],[new un(b,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new ut(new ks(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new ut(new ks(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new ut(new ks(.125,.125,.125),l.clone()),[0,0,1.1]]]},Z={X:[[new ut(new Qr(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new ut(new Qr(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new ut(new Qr(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new ut(C,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new ut(C,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new ut(C,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new ut(new ks(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new ut(new ks(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new ut(new ks(.2,.2,.2),i),[0,0,1.1]]]},U={X:[[new un(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new un(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new un(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},$=X=>{const Q=new Ht;for(let J in X)for(let ne=X[J].length;ne--;){const O=X[J][ne][0].clone(),N=X[J][ne][1],G=X[J][ne][2],H=X[J][ne][3],oe=X[J][ne][4];O.name=J,O.tag=oe,N&&O.position.set(N[0],N[1],N[2]),G&&O.rotation.set(G[0],G[1],G[2]),H&&O.scale.set(H[0],H[1],H[2]),O.updateMatrix();const de=O.geometry.clone();de.applyMatrix4(O.matrix),O.geometry=de,O.renderOrder=1/0,O.position.set(0,0,0),O.rotation.set(0,0,0),O.scale.set(1,1,1),Q.add(O)}return Q};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=$(T)),this.add(this.gizmo.rotate=$(z)),this.add(this.gizmo.scale=$(j)),this.add(this.picker.translate=$(D)),this.add(this.picker.rotate=$(V)),this.add(this.picker.scale=$(Z)),this.add(this.helper.translate=$(R)),this.add(this.helper.rotate=$(F)),this.add(this.helper.scale=$(U)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class w0e extends ut{constructor(){super(new vr(1e5,1e5,2,2),new Br({visible:!1,wireframe:!0,side:Qn,transparent:!0,opacity:.1,toneMapped:!1})),nt(this,"isTransformControlsPlane",!0),nt(this,"type","TransformControlsPlane"),nt(this,"unitX",new L(1,0,0)),nt(this,"unitY",new L(0,1,0)),nt(this,"unitZ",new L(0,0,1)),nt(this,"tempVector",new L),nt(this,"dirVector",new L),nt(this,"alignVector",new L),nt(this,"tempMatrix",new Ge),nt(this,"identityQuaternion",new Tt),nt(this,"cameraQuaternion",new Tt),nt(this,"worldPosition",new L),nt(this,"worldQuaternion",new Tt),nt(this,"eye",new L),nt(this,"axis",null),nt(this,"mode","translate"),nt(this,"space","world"),nt(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}var S0e=Object.defineProperty,C0e=(t,e,n)=>e in t?S0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cr=(t,e,n)=>(C0e(t,typeof e!="symbol"?e+"":e,n),n);const gp=new gi(0,0,0,"YXZ"),Ap=new L,b0e={type:"change"},M0e={type:"lock"},T0e={type:"unlock"},OO=Math.PI/2;let I0e=class extends $r{constructor(e,n){super(),Cr(this,"camera"),Cr(this,"domElement"),Cr(this,"isLocked"),Cr(this,"minPolarAngle"),Cr(this,"maxPolarAngle"),Cr(this,"pointerSpeed"),Cr(this,"onMouseMove",i=>{if(!this.domElement||this.isLocked===!1)return;const r=i.movementX||i.mozMovementX||i.webkitMovementX||0,s=i.movementY||i.mozMovementY||i.webkitMovementY||0;gp.setFromQuaternion(this.camera.quaternion),gp.y-=r*.002*this.pointerSpeed,gp.x-=s*.002*this.pointerSpeed,gp.x=Math.max(OO-this.maxPolarAngle,Math.min(OO-this.minPolarAngle,gp.x)),this.camera.quaternion.setFromEuler(gp),this.dispatchEvent(b0e)}),Cr(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(M0e),this.isLocked=!0):(this.dispatchEvent(T0e),this.isLocked=!1))}),Cr(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),Cr(this,"connect",i=>{this.domElement=i||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),Cr(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),Cr(this,"dispose",()=>{this.disconnect()}),Cr(this,"getObject",()=>this.camera),Cr(this,"direction",new L(0,0,-1)),Cr(this,"getDirection",i=>i.copy(this.direction).applyQuaternion(this.camera.quaternion)),Cr(this,"moveForward",i=>{Ap.setFromMatrixColumn(this.camera.matrix,0),Ap.crossVectors(this.camera.up,Ap),this.camera.position.addScaledVector(Ap,i)}),Cr(this,"moveRight",i=>{Ap.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Ap,i)}),Cr(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),Cr(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=n,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,n&&this.connect(n)}};var B0e=Object.defineProperty,R0e=(t,e,n)=>e in t?B0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,br=(t,e,n)=>(R0e(t,typeof e!="symbol"?e+"":e,n),n);let P0e=class extends $r{constructor(e){super(),br(this,"object"),br(this,"changeEvent",{type:"change"}),br(this,"EPS",1e-6),br(this,"enabled",!0),br(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),br(this,"screenOrientation",0),br(this,"alphaOffset",0),br(this,"onDeviceOrientationChangeEvent",n=>{this.deviceOrientation=n}),br(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),br(this,"zee",new L(0,0,1)),br(this,"euler",new gi),br(this,"q0",new Tt),br(this,"q1",new Tt(-Math.sqrt(.5),0,0,Math.sqrt(.5))),br(this,"setObjectQuaternion",(n,i,r,s,o)=>{this.euler.set(r,i,-s,"YXZ"),n.setFromEuler(this.euler),n.multiply(this.q1),n.multiply(this.q0.setFromAxisAngle(this.zee,-o))}),br(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(n=>{n=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(n=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),br(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),br(this,"lastQuaternion",new Tt),br(this,"update",()=>{if(this.enabled===!1)return;const n=this.deviceOrientation;if(n){const i=n.alpha?zt.degToRad(n.alpha)+this.alphaOffset:0,r=n.beta?zt.degToRad(n.beta):0,s=n.gamma?zt.degToRad(n.gamma):0,o=this.screenOrientation?zt.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,i,r,s,o),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),br(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}};var D0e=Object.defineProperty,L0e=(t,e,n)=>e in t?D0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xt=(t,e,n)=>(L0e(t,typeof e!="symbol"?e+"":e,n),n);let F0e=class extends $r{constructor(e,n){super(),xt(this,"enabled",!0),xt(this,"screen",{left:0,top:0,width:0,height:0}),xt(this,"rotateSpeed",1),xt(this,"zoomSpeed",1.2),xt(this,"panSpeed",.3),xt(this,"noRotate",!1),xt(this,"noZoom",!1),xt(this,"noPan",!1),xt(this,"staticMoving",!1),xt(this,"dynamicDampingFactor",.2),xt(this,"minDistance",0),xt(this,"maxDistance",1/0),xt(this,"keys",["KeyA","KeyS","KeyD"]),xt(this,"mouseButtons",{LEFT:pa.ROTATE,MIDDLE:pa.DOLLY,RIGHT:pa.PAN}),xt(this,"object"),xt(this,"domElement"),xt(this,"cursorZoom",!1),xt(this,"target",new L),xt(this,"mousePosition",new Ie),xt(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),xt(this,"EPS",1e-6),xt(this,"lastZoom",1),xt(this,"lastPosition",new L),xt(this,"cursorVector",new L),xt(this,"targetVector",new L),xt(this,"_state",this.STATE.NONE),xt(this,"_keyState",this.STATE.NONE),xt(this,"_eye",new L),xt(this,"_movePrev",new Ie),xt(this,"_moveCurr",new Ie),xt(this,"_lastAxis",new L),xt(this,"_lastAngle",0),xt(this,"_zoomStart",new Ie),xt(this,"_zoomEnd",new Ie),xt(this,"_touchZoomDistanceStart",0),xt(this,"_touchZoomDistanceEnd",0),xt(this,"_panStart",new Ie),xt(this,"_panEnd",new Ie),xt(this,"target0"),xt(this,"position0"),xt(this,"up0"),xt(this,"zoom0"),xt(this,"changeEvent",{type:"change"}),xt(this,"startEvent",{type:"start"}),xt(this,"endEvent",{type:"end"}),xt(this,"onScreenVector",new Ie),xt(this,"getMouseOnScreen",(i,r)=>(this.onScreenVector.set((i-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),this.onScreenVector)),xt(this,"onCircleVector",new Ie),xt(this,"getMouseOnCircle",(i,r)=>(this.onCircleVector.set((i-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),this.onCircleVector)),xt(this,"axis",new L),xt(this,"quaternion",new Tt),xt(this,"eyeDirection",new L),xt(this,"objectUpDirection",new L),xt(this,"objectSidewaysDirection",new L),xt(this,"moveDirection",new L),xt(this,"angle",0),xt(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),xt(this,"zoomCamera",()=>{let i;if(this._state===this.STATE.TOUCH_ZOOM_PAN)i=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(i):this.object.isOrthographicCamera?(this.object.zoom/=i,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(i=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(i-1)>this.EPS&&i>0&&(this.object.isPerspectiveCamera?(i>1&&this._eye.length()>=this.maxDistance-this.EPS&&(i=1),this._eye.multiplyScalar(i)):this.object.isOrthographicCamera?(i>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(i=1),this.object.zoom/=i):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let r=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(r,this.target,i)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),xt(this,"mouseChange",new Ie),xt(this,"objectUp",new L),xt(this,"pan",new L),xt(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const i=this.object,r=(i.right-i.left)/this.object.zoom,s=(i.top-i.bottom)/this.object.zoom;this.mouseChange.x*=r,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),xt(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),xt(this,"handleResize",()=>{if(!this.domElement)return;const i=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=i.left+window.pageXOffset-r.clientLeft,this.screen.top=i.top+window.pageYOffset-r.clientTop,this.screen.width=i.width,this.screen.height=i.height}),xt(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),xt(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),xt(this,"keydown",i=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(i.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:i.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:i.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),xt(this,"onPointerDown",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseDown(i);break}}),xt(this,"onPointerMove",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseMove(i);break}}),xt(this,"onPointerUp",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),xt(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),xt(this,"onMouseDown",i=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(i.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):r===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):r===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),xt(this,"onMouseMove",i=>{if(this.enabled===!1)return;const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY))):r===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY)):r===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY))}),xt(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),xt(this,"mousewheel",i=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.mousePosition.x=i.offsetX/this.screen.width*2-1,this.mousePosition.y=-(i.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),xt(this,"touchstart",i=>{if(this.enabled!==!1){switch(i.preventDefault(),i.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),xt(this,"touchmove",i=>{if(this.enabled!==!1)switch(i.preventDefault(),i.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY));break;default:const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),xt(this,"touchend",i=>{if(this.enabled!==!1){switch(i.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),xt(this,"contextmenu",i=>{this.enabled!==!1&&i.preventDefault()}),xt(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),xt(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,n!==void 0&&this.connect(n),this.update()}};var O0e=Object.defineProperty,z0e=(t,e,n)=>e in t?O0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>(z0e(t,typeof e!="symbol"?e+"":e,n),n);const Bx=new Da,zO=new Wr,U0e=Math.cos(70*(Math.PI/180)),UO=(t,e)=>(t%e+e)%e;let Wj=class extends $r{constructor(e,n){super(),rn(this,"object"),rn(this,"domElement"),rn(this,"enabled",!0),rn(this,"target",new L),rn(this,"minDistance",0),rn(this,"maxDistance",1/0),rn(this,"minZoom",0),rn(this,"maxZoom",1/0),rn(this,"minPolarAngle",0),rn(this,"maxPolarAngle",Math.PI),rn(this,"minAzimuthAngle",-1/0),rn(this,"maxAzimuthAngle",1/0),rn(this,"enableDamping",!1),rn(this,"dampingFactor",.05),rn(this,"enableZoom",!0),rn(this,"zoomSpeed",1),rn(this,"enableRotate",!0),rn(this,"rotateSpeed",1),rn(this,"enablePan",!0),rn(this,"panSpeed",1),rn(this,"screenSpacePanning",!0),rn(this,"keyPanSpeed",7),rn(this,"zoomToCursor",!1),rn(this,"autoRotate",!1),rn(this,"autoRotateSpeed",2),rn(this,"reverseOrbit",!1),rn(this,"reverseHorizontalOrbit",!1),rn(this,"reverseVerticalOrbit",!1),rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),rn(this,"mouseButtons",{LEFT:pa.ROTATE,MIDDLE:pa.DOLLY,RIGHT:pa.PAN}),rn(this,"touches",{ONE:Fc.ROTATE,TWO:Fc.DOLLY_PAN}),rn(this,"target0"),rn(this,"position0"),rn(this,"zoom0"),rn(this,"_domElementKeyEvents",null),rn(this,"getPolarAngle"),rn(this,"getAzimuthalAngle"),rn(this,"setPolarAngle"),rn(this,"setAzimuthalAngle"),rn(this,"getDistance"),rn(this,"listenToKeyEvents"),rn(this,"stopListenToKeyEvents"),rn(this,"saveState"),rn(this,"reset"),rn(this,"update"),rn(this,"connect"),rn(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=fe=>{let Ue=UO(fe,2*Math.PI),it=u.phi;it<0&&(it+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let Ae=Math.abs(Ue-it);2*Math.PI-Ae<Ae&&(Ue<it?Ue+=2*Math.PI:it+=2*Math.PI),f.phi=Ue-it,i.update()},this.setAzimuthalAngle=fe=>{let Ue=UO(fe,2*Math.PI),it=u.theta;it<0&&(it+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let Ae=Math.abs(Ue-it);2*Math.PI-Ae<Ae&&(Ue<it?Ue+=2*Math.PI:it+=2*Math.PI),f.theta=Ue-it,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",Oe),this._domElementKeyEvents=fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Oe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const fe=new L,Ue=new L(0,1,0),it=new Tt().setFromUnitVectors(e.up,Ue),Ae=it.clone().invert(),Ye=new L,ye=new Tt,He=2*Math.PI;return function(){const mt=i.object.position;it.setFromUnitVectors(e.up,Ue),Ae.copy(it).invert(),fe.copy(mt).sub(i.target),fe.applyQuaternion(it),u.setFromVector3(fe),i.autoRotate&&l===a.NONE&&F(R()),i.enableDamping?(u.theta+=f.theta*i.dampingFactor,u.phi+=f.phi*i.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let dt=i.minAzimuthAngle,Ot=i.maxAzimuthAngle;isFinite(dt)&&isFinite(Ot)&&(dt<-Math.PI?dt+=He:dt>Math.PI&&(dt-=He),Ot<-Math.PI?Ot+=He:Ot>Math.PI&&(Ot-=He),dt<=Ot?u.theta=Math.max(dt,Math.min(Ot,u.theta)):u.theta=u.theta>(dt+Ot)/2?Math.max(dt,u.theta):Math.min(Ot,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),i.zoomToCursor&&I||i.object.isOrthographicCamera?u.radius=J(u.radius):u.radius=J(u.radius*h),fe.setFromSpherical(u),fe.applyQuaternion(Ae),mt.copy(i.target).add(fe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),d.set(0,0,0));let Xt=!1;if(i.zoomToCursor&&I){let gt=null;if(i.object instanceof an&&i.object.isPerspectiveCamera){const en=fe.length();gt=J(en*h);const _n=en-gt;i.object.position.addScaledVector(b,_n),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const en=new L(M.x,M.y,0);en.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),Xt=!0;const _n=new L(M.x,M.y,0);_n.unproject(i.object),i.object.position.sub(_n).add(en),i.object.updateMatrixWorld(),gt=fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;gt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(gt).add(i.object.position):(Bx.origin.copy(i.object.position),Bx.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Bx.direction))<U0e?e.lookAt(i.target):(zO.setFromNormalAndCoplanarPoint(i.object.up,i.target),Bx.intersectPlane(zO,i.target))))}else i.object instanceof Hn&&i.object.isOrthographicCamera&&(Xt=h!==1,Xt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,I=!1,Xt||Ye.distanceToSquared(i.object.position)>c||8*(1-ye.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Ye.copy(i.object.position),ye.copy(i.object.quaternion),Xt=!1,!0):!1}})(),this.connect=fe=>{fe===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=fe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Be),i.domElement.addEventListener("pointerdown",W),i.domElement.addEventListener("pointercancel",De),i.domElement.addEventListener("wheel",Ze)},this.dispose=()=>{var fe,Ue,it,Ae,Ye,ye;i.domElement&&(i.domElement.style.touchAction="auto"),(fe=i.domElement)==null||fe.removeEventListener("contextmenu",Be),(Ue=i.domElement)==null||Ue.removeEventListener("pointerdown",W),(it=i.domElement)==null||it.removeEventListener("pointercancel",De),(Ae=i.domElement)==null||Ae.removeEventListener("wheel",Ze),(Ye=i.domElement)==null||Ye.ownerDocument.removeEventListener("pointermove",Me),(ye=i.domElement)==null||ye.ownerDocument.removeEventListener("pointerup",De),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Oe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new ed,f=new ed;let h=1;const d=new L,p=new Ie,g=new Ie,A=new Ie,m=new Ie,v=new Ie,y=new Ie,w=new Ie,S=new Ie,C=new Ie,b=new L,M=new Ie;let I=!1;const T=[],D={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function z(){return Math.pow(.95,i.zoomSpeed)}function F(fe){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=fe:f.theta-=fe}function V(fe){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=fe:f.phi-=fe}const j=(()=>{const fe=new L;return function(it,Ae){fe.setFromMatrixColumn(Ae,0),fe.multiplyScalar(-it),d.add(fe)}})(),Z=(()=>{const fe=new L;return function(it,Ae){i.screenSpacePanning===!0?fe.setFromMatrixColumn(Ae,1):(fe.setFromMatrixColumn(Ae,0),fe.crossVectors(i.object.up,fe)),fe.multiplyScalar(it),d.add(fe)}})(),U=(()=>{const fe=new L;return function(it,Ae){const Ye=i.domElement;if(Ye&&i.object instanceof an&&i.object.isPerspectiveCamera){const ye=i.object.position;fe.copy(ye).sub(i.target);let He=fe.length();He*=Math.tan(i.object.fov/2*Math.PI/180),j(2*it*He/Ye.clientHeight,i.object.matrix),Z(2*Ae*He/Ye.clientHeight,i.object.matrix)}else Ye&&i.object instanceof Hn&&i.object.isOrthographicCamera?(j(it*(i.object.right-i.object.left)/i.object.zoom/Ye.clientWidth,i.object.matrix),Z(Ae*(i.object.top-i.object.bottom)/i.object.zoom/Ye.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function $(fe){i.object instanceof an&&i.object.isPerspectiveCamera||i.object instanceof Hn&&i.object.isOrthographicCamera?h/=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(fe){i.object instanceof an&&i.object.isPerspectiveCamera||i.object instanceof Hn&&i.object.isOrthographicCamera?h*=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(fe){if(!i.zoomToCursor||!i.domElement)return;I=!0;const Ue=i.domElement.getBoundingClientRect(),it=fe.clientX-Ue.left,Ae=fe.clientY-Ue.top,Ye=Ue.width,ye=Ue.height;M.x=it/Ye*2-1,M.y=-(Ae/ye)*2+1,b.set(M.x,M.y,1).unproject(i.object).sub(i.object.position).normalize()}function J(fe){return Math.max(i.minDistance,Math.min(i.maxDistance,fe))}function ne(fe){p.set(fe.clientX,fe.clientY)}function O(fe){Q(fe),w.set(fe.clientX,fe.clientY)}function N(fe){m.set(fe.clientX,fe.clientY)}function G(fe){g.set(fe.clientX,fe.clientY),A.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Ue=i.domElement;Ue&&(F(2*Math.PI*A.x/Ue.clientHeight),V(2*Math.PI*A.y/Ue.clientHeight)),p.copy(g),i.update()}function H(fe){S.set(fe.clientX,fe.clientY),C.subVectors(S,w),C.y>0?$(z()):C.y<0&&X(z()),w.copy(S),i.update()}function oe(fe){v.set(fe.clientX,fe.clientY),y.subVectors(v,m).multiplyScalar(i.panSpeed),U(y.x,y.y),m.copy(v),i.update()}function de(fe){Q(fe),fe.deltaY<0?X(z()):fe.deltaY>0&&$(z()),i.update()}function ce(fe){let Ue=!1;switch(fe.code){case i.keys.UP:U(0,i.keyPanSpeed),Ue=!0;break;case i.keys.BOTTOM:U(0,-i.keyPanSpeed),Ue=!0;break;case i.keys.LEFT:U(i.keyPanSpeed,0),Ue=!0;break;case i.keys.RIGHT:U(-i.keyPanSpeed,0),Ue=!0;break}Ue&&(fe.preventDefault(),i.update())}function ge(){if(T.length==1)p.set(T[0].pageX,T[0].pageY);else{const fe=.5*(T[0].pageX+T[1].pageX),Ue=.5*(T[0].pageY+T[1].pageY);p.set(fe,Ue)}}function q(){if(T.length==1)m.set(T[0].pageX,T[0].pageY);else{const fe=.5*(T[0].pageX+T[1].pageX),Ue=.5*(T[0].pageY+T[1].pageY);m.set(fe,Ue)}}function xe(){const fe=T[0].pageX-T[1].pageX,Ue=T[0].pageY-T[1].pageY,it=Math.sqrt(fe*fe+Ue*Ue);w.set(0,it)}function ue(){i.enableZoom&&xe(),i.enablePan&&q()}function me(){i.enableZoom&&xe(),i.enableRotate&&ge()}function pe(fe){if(T.length==1)g.set(fe.pageX,fe.pageY);else{const it=qe(fe),Ae=.5*(fe.pageX+it.x),Ye=.5*(fe.pageY+it.y);g.set(Ae,Ye)}A.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Ue=i.domElement;Ue&&(F(2*Math.PI*A.x/Ue.clientHeight),V(2*Math.PI*A.y/Ue.clientHeight)),p.copy(g)}function Le(fe){if(T.length==1)v.set(fe.pageX,fe.pageY);else{const Ue=qe(fe),it=.5*(fe.pageX+Ue.x),Ae=.5*(fe.pageY+Ue.y);v.set(it,Ae)}y.subVectors(v,m).multiplyScalar(i.panSpeed),U(y.x,y.y),m.copy(v)}function re(fe){const Ue=qe(fe),it=fe.pageX-Ue.x,Ae=fe.pageY-Ue.y,Ye=Math.sqrt(it*it+Ae*Ae);S.set(0,Ye),C.set(0,Math.pow(S.y/w.y,i.zoomSpeed)),$(C.y),w.copy(S)}function ie(fe){i.enableZoom&&re(fe),i.enablePan&&Le(fe)}function te(fe){i.enableZoom&&re(fe),i.enableRotate&&pe(fe)}function W(fe){var Ue,it;i.enabled!==!1&&(T.length===0&&((Ue=i.domElement)==null||Ue.ownerDocument.addEventListener("pointermove",Me),(it=i.domElement)==null||it.ownerDocument.addEventListener("pointerup",De)),Ve(fe),fe.pointerType==="touch"?we(fe):Ee(fe))}function Me(fe){i.enabled!==!1&&(fe.pointerType==="touch"?be(fe):_e(fe))}function De(fe){var Ue,it,Ae;ot(fe),T.length===0&&((Ue=i.domElement)==null||Ue.releasePointerCapture(fe.pointerId),(it=i.domElement)==null||it.ownerDocument.removeEventListener("pointermove",Me),(Ae=i.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",De)),i.dispatchEvent(o),l=a.NONE}function Ee(fe){let Ue;switch(fe.button){case 0:Ue=i.mouseButtons.LEFT;break;case 1:Ue=i.mouseButtons.MIDDLE;break;case 2:Ue=i.mouseButtons.RIGHT;break;default:Ue=-1}switch(Ue){case pa.DOLLY:if(i.enableZoom===!1)return;O(fe),l=a.DOLLY;break;case pa.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enablePan===!1)return;N(fe),l=a.PAN}else{if(i.enableRotate===!1)return;ne(fe),l=a.ROTATE}break;case pa.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enableRotate===!1)return;ne(fe),l=a.ROTATE}else{if(i.enablePan===!1)return;N(fe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function _e(fe){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;G(fe);break;case a.DOLLY:if(i.enableZoom===!1)return;H(fe);break;case a.PAN:if(i.enablePan===!1)return;oe(fe);break}}function Ze(fe){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(fe.preventDefault(),i.dispatchEvent(s),de(fe),i.dispatchEvent(o))}function Oe(fe){i.enabled===!1||i.enablePan===!1||ce(fe)}function we(fe){switch($e(fe),T.length){case 1:switch(i.touches.ONE){case Fc.ROTATE:if(i.enableRotate===!1)return;ge(),l=a.TOUCH_ROTATE;break;case Fc.PAN:if(i.enablePan===!1)return;q(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Fc.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ue(),l=a.TOUCH_DOLLY_PAN;break;case Fc.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function be(fe){switch($e(fe),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;pe(fe),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Le(fe),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ie(fe),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;te(fe),i.update();break;default:l=a.NONE}}function Be(fe){i.enabled!==!1&&fe.preventDefault()}function Ve(fe){T.push(fe)}function ot(fe){delete D[fe.pointerId];for(let Ue=0;Ue<T.length;Ue++)if(T[Ue].pointerId==fe.pointerId){T.splice(Ue,1);return}}function $e(fe){let Ue=D[fe.pointerId];Ue===void 0&&(Ue=new Ie,D[fe.pointerId]=Ue),Ue.set(fe.pageX,fe.pageY)}function qe(fe){const Ue=fe.pointerId===T[0].pointerId?T[1]:T[0];return D[Ue.pointerId]}n!==void 0&&this.connect(n),this.update()}},k0e=class extends Wj{constructor(e,n){super(e,n),this.screenSpacePanning=!1,this.mouseButtons.LEFT=pa.PAN,this.mouseButtons.RIGHT=pa.ROTATE,this.touches.ONE=Fc.PAN,this.touches.TWO=Fc.DOLLY_ROTATE}};var N0e=Object.defineProperty,G0e=(t,e,n)=>e in t?N0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,We=(t,e,n)=>(G0e(t,typeof e!="symbol"?e+"":e,n),n);const Wt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Kn={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},mn={x:0,y:0},Ro={camera:new Ge,gizmos:new Ge},yi={type:"change"},Xa={type:"start"},na={type:"end"};let H0e=class extends $r{constructor(e,n=null,i=null){super(),We(this,"camera"),We(this,"domElement"),We(this,"scene"),We(this,"mouseActions"),We(this,"_mouseOp"),We(this,"_v2_1"),We(this,"_v3_1"),We(this,"_v3_2"),We(this,"_m4_1"),We(this,"_m4_2"),We(this,"_quat"),We(this,"_translationMatrix"),We(this,"_rotationMatrix"),We(this,"_scaleMatrix"),We(this,"_rotationAxis"),We(this,"_cameraMatrixState"),We(this,"_cameraProjectionState"),We(this,"_fovState"),We(this,"_upState"),We(this,"_zoomState"),We(this,"_nearPos"),We(this,"_farPos"),We(this,"_gizmoMatrixState"),We(this,"_up0"),We(this,"_zoom0"),We(this,"_fov0"),We(this,"_initialNear"),We(this,"_nearPos0"),We(this,"_initialFar"),We(this,"_farPos0"),We(this,"_cameraMatrixState0"),We(this,"_gizmoMatrixState0"),We(this,"_button"),We(this,"_touchStart"),We(this,"_touchCurrent"),We(this,"_input"),We(this,"_switchSensibility"),We(this,"_startFingerDistance"),We(this,"_currentFingerDistance"),We(this,"_startFingerRotation"),We(this,"_currentFingerRotation"),We(this,"_devPxRatio"),We(this,"_downValid"),We(this,"_nclicks"),We(this,"_downEvents"),We(this,"_clickStart"),We(this,"_maxDownTime"),We(this,"_maxInterval"),We(this,"_posThreshold"),We(this,"_movementThreshold"),We(this,"_currentCursorPosition"),We(this,"_startCursorPosition"),We(this,"_grid"),We(this,"_gridPosition"),We(this,"_gizmos"),We(this,"_curvePts"),We(this,"_timeStart"),We(this,"_animationId"),We(this,"focusAnimationTime"),We(this,"_timePrev"),We(this,"_timeCurrent"),We(this,"_anglePrev"),We(this,"_angleCurrent"),We(this,"_cursorPosPrev"),We(this,"_cursorPosCurr"),We(this,"_wPrev"),We(this,"_wCurr"),We(this,"adjustNearFar"),We(this,"scaleFactor"),We(this,"dampingFactor"),We(this,"wMax"),We(this,"enableAnimations"),We(this,"enableGrid"),We(this,"cursorZoom"),We(this,"minFov"),We(this,"maxFov"),We(this,"enabled"),We(this,"enablePan"),We(this,"enableRotate"),We(this,"enableZoom"),We(this,"minDistance"),We(this,"maxDistance"),We(this,"minZoom"),We(this,"maxZoom"),We(this,"target"),We(this,"_currentTarget"),We(this,"_tbRadius"),We(this,"_state"),We(this,"onWindowResize",()=>{const r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}const s=this._tbRadius/r,a=new Gh(0,0,s,s).getPoints(this._curvePts),l=new Dt().setFromPoints(a);for(const c in this._gizmos.children){const u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(yi)}),We(this,"onContextMenu",r=>{if(this.enabled){for(let s=0;s<this.mouseActions.length;s++)if(this.mouseActions[s].mouse==2){r.preventDefault();break}}}),We(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Kn.NONE}),We(this,"onPointerDown",r=>{if(r.button==0&&r.isPrimary?(this._downValid=!0,this._downEvents.push(r)):this._downValid=!1,r.pointerType=="touch"&&this._input!=Kn.CURSOR)switch(this._touchStart.push(r),this._touchCurrent.push(r),this._input){case Kn.NONE:this._input=Kn.ONE_FINGER,this.onSinglePanStart(r,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case Kn.ONE_FINGER:case Kn.ONE_FINGER_SWITCHED:this._input=Kn.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Kn.TWO_FINGER:this._input=Kn.MULT_FINGER,this.onTriplePanStart();break}else if(r.pointerType!="touch"&&this._input==Kn.NONE){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT"),this._mouseOp=this.getOpFromAction(r.button,s),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=Kn.CURSOR,this._button=r.button,this.onSinglePanStart(r,this._mouseOp))}}),We(this,"onPointerMove",r=>{if(r.pointerType=="touch"&&this._input!=Kn.CURSOR)switch(this._input){case Kn.ONE_FINGER:this.updateTouchEvent(r),this.onSinglePanMove(r,Wt.ROTATE);break;case Kn.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],r)*this._devPxRatio>=this._switchSensibility){this._input=Kn.ONE_FINGER,this.updateTouchEvent(r),this.onSinglePanStart(r,"ROTATE");break}break;case Kn.TWO_FINGER:this.updateTouchEvent(r),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Kn.MULT_FINGER:this.updateTouchEvent(r),this.onTriplePanMove();break}else if(r.pointerType!="touch"&&this._input==Kn.CURSOR){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT");const o=this.getOpStateFromAction(this._button,s);o&&this.onSinglePanMove(r,o)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],r)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),We(this,"onPointerUp",r=>{if(r.pointerType=="touch"&&this._input!=Kn.CURSOR){const s=this._touchCurrent.length;for(let o=0;o<s;o++)if(this._touchCurrent[o].pointerId==r.pointerId){this._touchCurrent.splice(o,1),this._touchStart.splice(o,1);break}switch(this._input){case Kn.ONE_FINGER:case Kn.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Kn.NONE,this.onSinglePanEnd();break;case Kn.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=Kn.ONE_FINGER_SWITCHED;break;case Kn.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Kn.NONE,this.onTriplePanEnd());break}}else r.pointerType!="touch"&&this._input==Kn.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Kn.NONE,this.onSinglePanEnd(),this._button=-1);if(r.isPrimary)if(this._downValid)if(r.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const o=r.timeStamp-this._clickStart,a=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;o<=this._maxInterval&&a<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(r)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),We(this,"onWheel",r=>{var s,o;if(this.enabled&&this.enableZoom&&this.domElement){let a=null;r.ctrlKey||r.metaKey?a="CTRL":r.shiftKey&&(a="SHIFT");const l=this.getOpFromAction("WHEEL",a);if(l){r.preventDefault(),this.dispatchEvent(Xa);const c=125;let u=r.deltaY/c,f=1;switch(u>0?f=1/this.scaleFactor:u<0&&(f=this.scaleFactor),l){case"ZOOM":if(this.updateTbState(Wt.SCALE,!0),u>0?f=1/Math.pow(this.scaleFactor,u):u<0&&(f=Math.pow(this.scaleFactor,-u)),this.cursorZoom&&this.enablePan){let h;this.camera instanceof Hn&&(h=(s=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof an&&(h=(o=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:o.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),h!==void 0&&this.applyTransformMatrix(this.applyScale(f,h))}else this.applyTransformMatrix(this.applyScale(f,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(yi),this.dispatchEvent(na);break;case"FOV":if(this.camera instanceof an){this.updateTbState(Wt.FOV,!0),r.deltaX!=0&&(u=r.deltaX/c,f=1,u>0?f=1/Math.pow(this.scaleFactor,u):u<0&&(f=Math.pow(this.scaleFactor,-u))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const h=this._v3_1.distanceTo(this._gizmos.position);let d=h/f;d=zt.clamp(d,this.minDistance,this.maxDistance);const p=h*Math.tan(zt.DEG2RAD*this.camera.fov*.5);let g=zt.RAD2DEG*(Math.atan(p/d)*2);g>this.maxFov?g=this.maxFov:g<this.minFov&&(g=this.minFov);const A=p/Math.tan(zt.DEG2RAD*(g/2));f=h/A,this.setFov(g),this.applyTransformMatrix(this.applyScale(f,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(yi),this.dispatchEvent(na);break}}}}),We(this,"onSinglePanStart",(r,s)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(Xa),this.setCenter(r.clientX,r.clientY),s){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(yi)),this.camera){this.updateTbState(Wt.PAN,!0);const o=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement);o!==void 0&&this._startCursorPosition.copy(o),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(yi))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(Wt.ROTATE,!0);const o=this.unprojectOnTbSurface(this.camera,mn.x,mn.y,this.domElement,this._tbRadius);o!==void 0&&this._startCursorPosition.copy(o),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(yi);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof an&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(yi)),this.updateTbState(Wt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(yi)),this.updateTbState(Wt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),We(this,"onSinglePanMove",(r,s)=>{if(this.enabled&&this.domElement){const o=s!=this._state;switch(this.setCenter(r.clientX,r.clientY),s){case Wt.PAN:if(this.enablePan&&this.camera)if(o){this.dispatchEvent(na),this.dispatchEvent(Xa),this.updateTbState(s,!0);const a=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const a=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement);a!==void 0&&this._currentCursorPosition.copy(a),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case Wt.ROTATE:if(this.enableRotate&&this.camera)if(o){this.dispatchEvent(na),this.dispatchEvent(Xa),this.updateTbState(s,!0);const a=this.unprojectOnTbSurface(this.camera,mn.x,mn.y,this.domElement,this._tbRadius);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const a=this.unprojectOnTbSurface(this.camera,mn.x,mn.y,this.domElement,this._tbRadius);a!==void 0&&this._currentCursorPosition.copy(a);const l=this._startCursorPosition.distanceTo(this._currentCursorPosition),c=this._startCursorPosition.angleTo(this._currentCursorPosition),u=Math.max(l/this._tbRadius,c);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),u)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=u,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Wt.SCALE:if(this.enableZoom)if(o)this.dispatchEvent(na),this.dispatchEvent(Xa),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this.applyTransformMatrix(this.applyScale(c,this._gizmos.position))}break;case Wt.FOV:if(this.enableZoom&&this.camera instanceof an)if(o)this.dispatchEvent(na),this.dispatchEvent(Xa),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let f=u/c;f=zt.clamp(f,this.minDistance,this.maxDistance);const h=u*Math.tan(zt.DEG2RAD*this._fovState*.5);let d=zt.RAD2DEG*(Math.atan(h/f)*2);d=zt.clamp(d,this.minFov,this.maxFov);const p=h/Math.tan(zt.DEG2RAD*(d/2));c=u/p,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const g=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(p/u);this._m4_1.makeTranslation(g.x,g.y,g.z)}break}this.dispatchEvent(yi)}}),We(this,"onSinglePanEnd",()=>{if(this._state==Wt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const s=Math.abs((this._wPrev+this._wCurr)/2),o=this;this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(Wt.ANIMATION_ROTATE,!0);const l=o.calculateRotationAxis(o._cursorPosPrev,o._cursorPosCurr);o.onRotationAnim(a,l,Math.min(s,o.wMax))})}else this.updateTbState(Wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(yi);else this.updateTbState(Wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(yi)}else(this._state==Wt.PAN||this._state==Wt.IDLE)&&(this.updateTbState(Wt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(yi));this.dispatchEvent(na)}),We(this,"onDoubleTap",r=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(Xa),this.setCenter(r.clientX,r.clientY);const s=this.unprojectOnObj(this.getCursorNDC(mn.x,mn.y,this.domElement),this.camera);if(s&&this.enableAnimations){const o=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(Wt.ANIMATION_FOCUS,!0),o.onFocusAnim(a,s,o._cameraMatrixState,o._gizmoMatrixState)})}else s&&!this.enableAnimations&&(this.updateTbState(Wt.FOCUS,!0),this.focus(s,this.scaleFactor),this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(yi))}this.dispatchEvent(na)}),We(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(Xa),this.updateTbState(Wt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const r=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement,!0);r!==void 0&&this._startCursorPosition.copy(r),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),We(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Wt.PAN&&(this.updateTbState(Wt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const r=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement,!0);r!==void 0&&this._currentCursorPosition.copy(r),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(yi)}}),We(this,"onDoublePanEnd",()=>{this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(na)}),We(this,"onRotateStart",()=>{var r;this.enabled&&this.enableRotate&&(this.dispatchEvent(Xa),this.updateTbState(Wt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(r=this.camera)==null||r.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),We(this,"onRotateMove",()=>{var r;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s;this._state!=Wt.ZROTATE&&(this.updateTbState(Wt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),s=(r=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):s=new L().setFromMatrixPosition(this._gizmoMatrixState);const o=zt.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);s!==void 0&&this.applyTransformMatrix(this.zRotate(s,o)),this.dispatchEvent(yi)}}),We(this,"onRotateEnd",()=>{this.updateTbState(Wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(na)}),We(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(Xa),this.updateTbState(Wt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),We(this,"onPinchMove",()=>{var r,s;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const o=12;this._state!=Wt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Wt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),o*this._devPxRatio);const a=this._currentFingerDistance/this._startFingerDistance;let l;this.enablePan?this.camera instanceof Hn?l=(r=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof an&&(l=(s=this.unprojectOnTbPlane(this.camera,mn.x,mn.y,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):l=this._gizmos.position,l!==void 0&&this.applyTransformMatrix(this.applyScale(a,l)),this.dispatchEvent(yi)}}),We(this,"onPinchEnd",()=>{this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(na)}),We(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(Xa),this.updateTbState(Wt.SCALE,!0);let r=0,s=0;const o=this._touchCurrent.length;for(let a=0;a<o;a++)r+=this._touchCurrent[a].clientX,s+=this._touchCurrent[a].clientY;this.setCenter(r/o,s/o),this._startCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),We(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let r=0,s=0;const o=this._touchCurrent.length;for(let A=0;A<o;A++)r+=this._touchCurrent[A].clientX,s+=this._touchCurrent[A].clientY;this.setCenter(r/o,s/o);const a=8;this._currentCursorPosition.setY(this.getCursorNDC(mn.x,mn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*a):l>0&&(c=Math.pow(this.scaleFactor,l*a)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let f=u/c;f=zt.clamp(f,this.minDistance,this.maxDistance);const h=u*Math.tan(zt.DEG2RAD*this._fovState*.5);let d=zt.RAD2DEG*(Math.atan(h/f)*2);d=zt.clamp(d,this.minFov,this.maxFov);const p=h/Math.tan(zt.DEG2RAD*(d/2));c=u/p,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const g=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(p/u);this._m4_1.makeTranslation(g.x,g.y,g.z),this.dispatchEvent(yi)}}),We(this,"onTriplePanEnd",()=>{this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(na)}),We(this,"setCenter",(r,s)=>{mn.x=r,mn.y=s}),We(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),We(this,"setMouseAction",(r,s,o=null)=>{const a=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null];let u;if(!a.includes(r)||!l.includes(s)||!c.includes(o)||s=="WHEEL"&&r!="ZOOM"&&r!="FOV")return!1;switch(r){case"PAN":u=Wt.PAN;break;case"ROTATE":u=Wt.ROTATE;break;case"ZOOM":u=Wt.SCALE;break;case"FOV":u=Wt.FOV;break}const f={operation:r,mouse:s,key:o,state:u};for(let h=0;h<this.mouseActions.length;h++)if(this.mouseActions[h].mouse==f.mouse&&this.mouseActions[h].key==f.key)return this.mouseActions.splice(h,1,f),!0;return this.mouseActions.push(f),!0}),We(this,"getOpFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.operation;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.operation}return null}),We(this,"getOpStateFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.state;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.state}return null}),We(this,"getAngle",(r,s)=>Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX)*180/Math.PI),We(this,"updateTouchEvent",r=>{for(let s=0;s<this._touchCurrent.length;s++)if(this._touchCurrent[s].pointerId==r.pointerId){this._touchCurrent.splice(s,1,r);break}}),We(this,"calculateAngularSpeed",(r,s,o,a)=>{const l=s-r,c=(a-o)/1e3;return c==0?0:l/c}),We(this,"calculatePointersDistance",(r,s)=>Math.sqrt(Math.pow(s.clientX-r.clientX,2)+Math.pow(s.clientY-r.clientY,2))),We(this,"calculateRotationAxis",(r,s)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(r,s).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),We(this,"calculateTbRadius",r=>{const o=r.position.distanceTo(this._gizmos.position);if(r instanceof an){const a=zt.DEG2RAD*r.fov*.5,l=Math.atan(r.aspect*Math.tan(a));return Math.tan(Math.min(a,l))*o*.67}else if(r instanceof Hn)return Math.min(r.top,r.right)*.67}),We(this,"focus",(r,s,o=1)=>{if(this.camera){const a=r.clone();a.sub(this._gizmos.position).multiplyScalar(o),this._translationMatrix.makeTranslation(a.x,a.y,a.z);const l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(s,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),We(this,"drawGrid",()=>{if(this.scene){let o,a,l,c;if(this.camera instanceof Hn){const u=this.camera.right-this.camera.left,f=this.camera.bottom-this.camera.top;l=Math.max(u,f),c=l/20,o=l/this.camera.zoom*3,a=o/c*this.camera.zoom}else if(this.camera instanceof an){const u=this.camera.position.distanceTo(this._gizmos.position),f=zt.DEG2RAD*this.camera.fov*.5,h=Math.atan(this.camera.aspect*Math.tan(f));l=Math.tan(Math.max(f,h))*u*2,c=l/20,o=l*3,a=o/c}this._grid==null&&this.camera&&(this._grid=new hV(o,a,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),We(this,"connect",r=>{r===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),We(this,"dispose",()=>{var r,s,o,a,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointercancel",this.onPointerCancel),(o=this.domElement)==null||o.removeEventListener("wheel",this.onWheel),(a=this.domElement)==null||a.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)==null||l.remove(this._gizmos),this.disposeGrid()}),We(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),We(this,"easeOutCubic",r=>1-Math.pow(1-r,3)),We(this,"activateGizmos",r=>{for(const s of this._gizmos.children)s.material.setValues({opacity:r?1:.6})}),We(this,"getCursorNDC",(r,s,o)=>{const a=o.getBoundingClientRect();return this._v2_1.setX((r-a.left)/a.width*2-1),this._v2_1.setY((a.bottom-s)/a.height*2-1),this._v2_1.clone()}),We(this,"getCursorPosition",(r,s,o)=>(this._v2_1.copy(this.getCursorNDC(r,s,o)),this.camera instanceof Hn&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),We(this,"setCamera",r=>{if(r){r.lookAt(this.target),r.updateMatrix(),r instanceof an&&(this._fov0=r.fov,this._fovState=r.fov),this._cameraMatrixState0.copy(r.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(r.projectionMatrix),this._zoom0=r.zoom,this._zoomState=this._zoom0,this._initialNear=r.near,this._nearPos0=r.position.distanceTo(this.target)-r.near,this._nearPos=this._initialNear,this._initialFar=r.far,this._farPos0=r.position.distanceTo(this.target)-r.far,this._farPos=this._initialFar,this._up0.copy(r.up),this._upState.copy(r.up),this.camera=r,this.camera.updateProjectionMatrix();const s=this.calculateTbRadius(r);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius)}}),We(this,"makeGizmos",(r,s)=>{const a=new Gh(0,0,s,s).getPoints(this._curvePts),l=new Dt().setFromPoints(a),c=new Ji({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new Ji({color:8454016,fog:!1,transparent:!0,opacity:.6}),f=new Ji({color:8421631,fog:!1,transparent:!0,opacity:.6}),h=new un(l,c),d=new un(l,u),p=new un(l,f),g=Math.PI*.5;if(h.rotation.x=g,d.rotation.y=g,this._gizmoMatrixState0.identity().setPosition(r),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const A=1/this.camera.zoom;this._scaleMatrix.makeScale(A,A,A),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(r.x,r.y,r.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(h),this._gizmos.add(d),this._gizmos.add(p)}),We(this,"onFocusAnim",(r,s,o,a)=>{if(this._timeStart==-1&&(this._timeStart=r),this._state==Wt.ANIMATION_FOCUS){const c=(r-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(a),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,this.scaleFactor),this._timeStart=-1,this.updateTbState(Wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(yi);else{const u=this.easeOutCubic(c),f=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,f,u),this.dispatchEvent(yi);const h=this;this._animationId=window.requestAnimationFrame(function(d){h.onFocusAnim(d,s,o,a.clone())})}}else this._animationId=-1,this._timeStart=-1}),We(this,"onRotationAnim",(r,s,o)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=r),this._state==Wt.ANIMATION_ROTATE){const a=(r-this._timeStart)/1e3;if(o+-this.dampingFactor*a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(a,2)+o*a+0,this.applyTransformMatrix(this.rotate(s,this._angleCurrent)),this.dispatchEvent(yi);const c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,s,o)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(yi)}else this._animationId=-1,this._timeStart=-1,this._state!=Wt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(yi))}),We(this,"pan",(r,s,o=!1)=>{if(this.camera){const a=r.clone().sub(s);if(this.camera instanceof Hn&&a.multiplyScalar(1/this.camera.zoom),this.camera instanceof an&&o){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);a.multiplyScalar(1/l)}this._v3_1.set(a.x,a.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return Ro}),We(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof an&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const r=this.calculateTbRadius(this.camera);r!==void 0&&(this._tbRadius=r),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(yi)}}),We(this,"rotate",(r,s)=>{const o=this._gizmos.position;return this._translationMatrix.makeTranslation(-o.x,-o.y,-o.z),this._rotationMatrix.makeRotationAxis(r,-s),this._m4_1.makeTranslation(o.x,o.y,o.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Ro}),We(this,"copyState",()=>{if(this.camera){const r=JSON.stringify(this.camera instanceof Hn?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(r)}}),We(this,"pasteState",()=>{const r=this;navigator.clipboard.readText().then(function(o){r.setStateFromJSON(o)})}),We(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof an&&(this._fov0=this.camera.fov))}),We(this,"applyScale",(r,s,o=!0)=>{if(!this.camera)return;const a=s.clone();let l=1/r;if(this.camera instanceof Hn){this.camera.zoom=this._zoomState,this.camera.zoom*=r,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),a.sub(this._v3_1);const c=a.clone().multiplyScalar(l);return a.sub(c),this._m4_1.makeTranslation(a.x,a.y,a.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Ro}if(this.camera instanceof an){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(a),u=c-c*l;const f=c-u;f<this.minDistance?(l=this.minDistance/c,u=c-c*l):f>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let h=a.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(h.x,h.y,h.z),o){const d=this._v3_2;c=d.distanceTo(a),u=c-c*l,h=a.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(d.x,d.y,d.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(h.x,h.y,h.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-d.x,-d.y,-d.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Ro}}),We(this,"setFov",r=>{this.camera instanceof an&&(this.camera.fov=zt.clamp(r,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),We(this,"setTarget",(r,s,o)=>{if(this.camera){this.target.set(r,s,o),this._gizmos.position.set(r,s,o);const a=this.calculateTbRadius(this.camera);a!==void 0&&(this._tbRadius=a),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),We(this,"zRotate",(r,s)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,s),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._m4_1.makeTranslation(r.x,r.y,r.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(r),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,s),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Ro)),We(this,"unprojectOnObj",(r,s)=>{if(!this.scene)return null;const o=new Ff;o.near=s.near,o.far=s.far,o.setFromCamera(r,s);const a=o.intersectObjects(this.scene.children,!0);for(let l=0;l<a.length;l++)if(a[l].object.uuid!=this._gizmos.uuid&&a[l].face)return a[l].point.clone();return null}),We(this,"unprojectOnTbSurface",(r,s,o,a,l)=>{if(r instanceof Hn){this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),f=Math.pow(this._tbRadius,2);return c+u<=f*.5?this._v3_1.setZ(Math.sqrt(f-(c+u))):this._v3_1.setZ(f*.5/Math.sqrt(c+u)),this._v3_1}if(r instanceof an){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=r.position.distanceTo(this._gizmos.position),f=Math.pow(l,2),h=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;const p=h/d,g=u;let A=Math.pow(p,2)+1,m=2*p*g,v=Math.pow(g,2)-f,y=Math.pow(m,2)-4*A*v;if(y>=0&&(this._v2_1.setX((-m-Math.sqrt(y))/(2*A)),this._v2_1.setY(p*this._v2_1.x+g),zt.RAD2DEG*this._v2_1.angle()>=45)){const C=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(C),c.z+=u,c}A=p,m=g,v=-f*.5,y=Math.pow(m,2)-4*A*v,this._v2_1.setX((-m-Math.sqrt(y))/(2*A)),this._v2_1.setY(p*this._v2_1.x+g);const w=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(w),c.z+=u,c}}),We(this,"unprojectOnTbPlane",(r,s,o,a,l=!1)=>{if(r instanceof Hn)return this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(r instanceof an){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=this._v3_1.z,f=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let h;if(l?h=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):h=r.position.distanceTo(this._gizmos.position),f==0)return c.set(0,0,0),c;const d=u/f,p=h,g=-p/d,A=Math.sqrt(Math.pow(p,2)+Math.pow(g,2));return c.multiplyScalar(A),c.z=0,c}}),We(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof Hn&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof an&&(this._fovState=this.camera.fov))}),We(this,"updateTbState",(r,s)=>{this._state=r,s&&this.updateMatrixState()}),We(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof Hn&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const s=zt.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(s/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof an){const s=this.camera.position.distanceTo(this._gizmos.position);if(s>this.maxDistance+1e-6||s<this.minDistance-1e-6){const l=zt.clamp(s,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/s,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=zt.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const o=this._tbRadius,a=this.calculateTbRadius(this.camera);if(a!==void 0&&(this._tbRadius=a),o<this._tbRadius-1e-6||o>this._tbRadius+1e-6){const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,f=new Gh(0,0,c,c).getPoints(this._curvePts),h=new Dt().setFromPoints(f);for(const d in this._gizmos.children){const p=this._gizmos.children[d];p.geometry=h}}}this.camera.lookAt(this._gizmos.position)}}),We(this,"setStateFromJSON",r=>{const s=JSON.parse(r);if(s.arcballState&&this.camera){this._cameraMatrixState.fromArray(s.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(s.arcballState.cameraUp),this.camera.near=s.arcballState.cameraNear,this.camera.far=s.arcballState.cameraFar,this.camera.zoom=s.arcballState.cameraZoom,this.camera instanceof an&&(this.camera.fov=s.arcballState.cameraFov),this._gizmoMatrixState.fromArray(s.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o);const a=new Ge().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(a),this.camera.lookAt(this._gizmos.position),this.updateTbState(Wt.IDLE,!1),this.dispatchEvent(yi)}}),this.camera=null,this.domElement=n,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new Ie,this._v3_1=new L,this._v3_2=new L,this._m4_1=new Ge,this._m4_2=new Ge,this._quat=new Tt,this._translationMatrix=new Ge,this._rotationMatrix=new Ge,this._scaleMatrix=new Ge,this._rotationAxis=new L,this._cameraMatrixState=new Ge,this._cameraProjectionState=new Ge,this._fovState=1,this._upState=new L,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Ge,this._up0=new L,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Ge,this._gizmoMatrixState0=new Ge,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Kn.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new L,this._startCursorPosition=new L,this._grid=null,this._gridPosition=new L,this._gizmos=new uo,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new L,this._cursorPosCurr=new L,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new L(0,0,0),this._currentTarget=new L(0,0,0),this._tbRadius=1,this._state=Wt.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e!=null&&e.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Wt.ROTATE||this._state==Wt.ZROTATE||this._state==Wt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e!=null&&e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==Wt.SCALE||this._state==Wt.FOCUS||this._state==Wt.ANIMATION_FOCUS)&&this.camera){const n=this.calculateTbRadius(this.camera);if(n!==void 0&&(this._tbRadius=n),this.adjustNearFar){const i=this.camera.position.distanceTo(this._gizmos.position),r=new xn;r.setFromObject(this._gizmos);const s=new $n;r.getBoundingSphere(s);const o=Math.max(this._nearPos0,s.radius+s.center.length()),a=i-this._initialNear,l=Math.min(o,a);this.camera.near=i-l;const c=Math.min(this._farPos0,-s.radius+s.center.length()),u=i-this._initialFar,f=Math.min(c,u);this.camera.far=i-f,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(yi)}setTransformationMatrices(e=null,n=null){e?Ro.camera?Ro.camera.copy(e):Ro.camera=e.clone():Ro.camera=null,n?Ro.gizmos?Ro.gizmos.copy(n):Ro.gizmos=n.clone():Ro.gizmos=null}};var Q0e=Object.defineProperty,V0e=(t,e,n)=>e in t?Q0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,li=(t,e,n)=>(V0e(t,typeof e!="symbol"?e+"":e,n),n);function kO(t){t.preventDefault()}let W0e=class extends $r{constructor(e,n){super(),li(this,"object"),li(this,"domElement",null),li(this,"movementSpeed",1),li(this,"rollSpeed",.005),li(this,"dragToLook",!1),li(this,"autoForward",!1),li(this,"changeEvent",{type:"change"}),li(this,"EPS",1e-6),li(this,"tmpQuaternion",new Tt),li(this,"mouseStatus",0),li(this,"movementSpeedMultiplier",1),li(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),li(this,"moveVector",new L(0,0,0)),li(this,"rotationVector",new L(0,0,0)),li(this,"keydown",i=>{if(!i.altKey){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),li(this,"keyup",i=>{switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),li(this,"pointerdown",i=>{if(this.dragToLook)this.mouseStatus++;else{switch(i.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),li(this,"pointermove",i=>{if(!this.dragToLook||this.mouseStatus>0){const r=this.getContainerDimensions(),s=r.size[0]/2,o=r.size[1]/2;this.moveState.yawLeft=-(i.pageX-r.offset[0]-s)/s,this.moveState.pitchDown=(i.pageY-r.offset[1]-o)/o,this.updateRotationVector()}}),li(this,"pointerup",i=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(i.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),li(this,"lastQuaternion",new Tt),li(this,"lastPosition",new L),li(this,"update",i=>{const r=i*this.movementSpeed,s=i*this.rollSpeed;this.object.translateX(this.moveVector.x*r),this.object.translateY(this.moveVector.y*r),this.object.translateZ(this.moveVector.z*r),this.tmpQuaternion.set(this.rotationVector.x*s,this.rotationVector.y*s,this.rotationVector.z*s,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),li(this,"updateMovementVector",()=>{const i=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-i+this.moveState.back}),li(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),li(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),li(this,"connect",i=>{this.domElement=i,i instanceof Document||i.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",kO),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),li(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",kO),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,n!==void 0&&this.connect(n),this.updateMovementVector(),this.updateRotationVector()}};var j0e=Object.defineProperty,X0e=(t,e,n)=>e in t?j0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lh=(t,e,n)=>(X0e(t,typeof e!="symbol"?e+"":e,n),n);class aS{constructor(){Lh(this,"enabled",!0),Lh(this,"needsSwap",!0),Lh(this,"clear",!1),Lh(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Uc{constructor(e){Lh(this,"camera",new Hn(-1,1,1,-1,0,1)),Lh(this,"geometry",new vr(2,2)),Lh(this,"mesh"),this.mesh=new ut(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var Y0e=Object.defineProperty,q0e=(t,e,n)=>e in t?Y0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rx=(t,e,n)=>(q0e(t,typeof e!="symbol"?e+"":e,n),n);class CI extends aS{constructor(e,n="tDiffuse"){super(),Rx(this,"textureID"),Rx(this,"uniforms"),Rx(this,"material"),Rx(this,"fsQuad"),this.textureID=n,e instanceof Fn?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=Ra.clone(e.uniforms),this.material=new Fn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Uc(this.material)}render(e,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const NO={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var $0e=Object.defineProperty,K0e=(t,e,n)=>e in t?$0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sM=(t,e,n)=>(K0e(t,typeof e!="symbol"?e+"":e,n),n);class GO extends aS{constructor(e,n){super(),sM(this,"scene"),sM(this,"camera"),sM(this,"inverse"),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class J0e extends aS{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var Z0e=Object.defineProperty,e1e=(t,e,n)=>e in t?Z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ia=(t,e,n)=>(e1e(t,typeof e!="symbol"?e+"":e,n),n);class t1e{constructor(e,n){if(ia(this,"renderer"),ia(this,"_pixelRatio"),ia(this,"_width"),ia(this,"_height"),ia(this,"renderTarget1"),ia(this,"renderTarget2"),ia(this,"writeBuffer"),ia(this,"readBuffer"),ia(this,"renderToScreen"),ia(this,"passes",[]),ia(this,"copyPass"),ia(this,"clock"),this.renderer=e,n===void 0){const i={minFilter:Vt,magFilter:Vt,format:In},r=e.getSize(new Ie);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,n=new Ln(this._width*this._pixelRatio,this._height*this._pixelRatio,i),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,NO===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),CI===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new CI(NO),this.copyPass.material.blending=ba,this.clock=new b0}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let i=!1;const r=this.passes.length;for(let s=0;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}GO!==void 0&&(o instanceof GO?i=!0:o instanceof J0e&&(i=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Ie);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var n1e=Object.defineProperty,i1e=(t,e,n)=>e in t?n1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ph=(t,e,n)=>(i1e(t,typeof e!="symbol"?e+"":e,n),n);class r1e extends aS{constructor(e,n,i,r,s=0){super(),ph(this,"scene"),ph(this,"camera"),ph(this,"overrideMaterial"),ph(this,"clearColor"),ph(this,"clearAlpha"),ph(this,"clearDepth",!1),ph(this,"_oldClearColor",new Je),this.scene=e,this.camera=n,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,n,i){let r=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}function f0(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Fh="srgb",jc="srgb-linear",HO=3001,s1e=3e3;class GB extends Zi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new u1e(n)}),this.register(function(n){return new f1e(n)}),this.register(function(n){return new x1e(n)}),this.register(function(n){return new _1e(n)}),this.register(function(n){return new E1e(n)}),this.register(function(n){return new d1e(n)}),this.register(function(n){return new p1e(n)}),this.register(function(n){return new m1e(n)}),this.register(function(n){return new g1e(n)}),this.register(function(n){return new c1e(n)}),this.register(function(n){return new A1e(n)}),this.register(function(n){return new h1e(n)}),this.register(function(n){return new y1e(n)}),this.register(function(n){return new v1e(n)}),this.register(function(n){return new a1e(n)}),this.register(function(n){return new w1e(n)}),this.register(function(n){return new S1e(n)})}load(e,n,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Wc.extractUrlBase(e);o=Wc.resolveURL(c,this.path)}else o=Wc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Gi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(f0(new Uint8Array(e.slice(0,4)))===jj){try{o[Tn.KHR_BINARY_GLTF]=new C1e(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Tn.KHR_BINARY_GLTF].content)}else s=JSON.parse(f0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new U1e(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Tn.KHR_MATERIALS_UNLIT:o[u]=new l1e;break;case Tn.KHR_DRACO_MESH_COMPRESSION:o[u]=new b1e(s,this.dracoLoader);break;case Tn.KHR_TEXTURE_TRANSFORM:o[u]=new M1e;break;case Tn.KHR_MESH_QUANTIZATION:o[u]=new T1e;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function o1e(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Tn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class a1e{constructor(e){this.parser=e,this.name=Tn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Je(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],jc);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Dw(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new sv(u),c.distance=f;break;case"spot":c=new Pw(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Dc(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class l1e{constructor(){this.name=Tn.KHR_MATERIALS_UNLIT}getMaterialType(){return Br}extendParams(e,n,i){const r=[];e.color=new Je(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],jc),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Fh))}return Promise.all(r)}}class c1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class u1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ie(a,a)}return Promise.all(s)}}class f1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class h1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class d1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Je(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],jc)}return o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Fh)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class p1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class m1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Je().setRGB(a[0],a[1],a[2],jc),Promise.all(s)}}class g1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class A1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Je().setRGB(a[0],a[1],a[2],jc),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,Fh)),Promise.all(s)}}class v1e{constructor(e){this.parser=e,this.name=Tn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return n.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(n,"bumpMap",o.bumpTexture)),Promise.all(s)}}class y1e{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:qs}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class x1e{constructor(e){this.parser=e,this.name=Tn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class _1e{constructor(e){this.parser=e,this.name=Tn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class E1e{constructor(e){this.parser=e,this.name=Tn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class w1e{constructor(e){this.name=Tn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}else return null}}class S1e{constructor(e){this.name=Tn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==oa.TRIANGLES&&c.mode!==oa.TRIANGLE_STRIP&&c.mode!==oa.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const p of f){const g=new Ge,A=new L,m=new Tt,v=new L(1,1,1),y=new Ov(p.geometry,p.material,h);for(let w=0;w<h;w++)l.TRANSLATION&&A.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,w),l.SCALE&&v.fromBufferAttribute(l.SCALE,w),y.setMatrixAt(w,g.compose(A,m,v));for(const w in l)if(w==="_COLOR_0"){const S=l[w];y.instanceColor=new ml(S.array,S.itemSize,S.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&p.geometry.setAttribute(w,l[w]);Ht.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const jj="glTF",J1=12,QO={JSON:1313821514,BIN:5130562};class C1e{constructor(e){this.name=Tn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,J1);if(this.header={magic:f0(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==jj)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-J1,r=new DataView(e,J1);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===QO.JSON){const l=new Uint8Array(e,J1+s,o);this.content=f0(l)}else if(a===QO.BIN){const l=J1+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class b1e{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=bI[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=bI[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],d=Um[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(d){for(const p in d.attributes){const g=d.attributes[p],A=l[p];A!==void 0&&(g.normalized=A)}f(d)},a,c,jc,h)})})}}class M1e{constructor(){this.name=Tn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class T1e{constructor(){this.name=Tn.KHR_MESH_QUANTIZATION}}class Xj extends C0{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-n,f=(i-n)/u,h=f*f,d=h*f,p=e*c,g=p-c,A=-2*d+3*h,m=d-h,v=1-A,y=m-h+f;for(let w=0;w!==a;w++){const S=o[g+w+a],C=o[g+w+l]*u,b=o[p+w+a],M=o[p+w]*u;s[w]=v*S+y*C+A*b+m*M}return s}}const I1e=new Tt;class B1e extends Xj{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return I1e.fromArray(s).normalize().toArray(s),s}}const oa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Um={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},VO={9728:fn,9729:Vt,9984:iw,9985:Mm,9986:Th,9987:Qs},WO={33071:wi,33648:$m,10497:qr},oM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Dj>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},R1e={CUBICSPLINE:void 0,LINEAR:e0,STEP:Zm},aM={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function P1e(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new pd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:js})),t.DefaultMaterial}function mh(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Dc(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function D1e(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return i&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function L1e(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F1e(t){let e;const n=t.extensions&&t.extensions[Tn.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+lM(n.attributes):e=t.indices+":"+lM(t.attributes)+":"+t.mode,t.targets!==void 0)for(let i=0,r=t.targets.length;i<r;i++)e+=":"+lM(t.targets[i]);return e}function lM(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function MI(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O1e(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const z1e=new Ge;class U1e{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new o1e,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new rc(this.options.manager):this.textureLoader=new iV(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return mh(s,a,r),Dc(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Tn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Wc.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=oM[r.type],a=Um[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Gt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=oM[r.type],c=Um[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let g,A;if(d&&d!==f){const m=Math.floor(h/d),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count;let y=n.cache.get(v);y||(g=new c(a,m*d,r.count*d/u),y=new Lv(g,d/u),n.cache.add(v,y)),A=new fo(y,l,h%d/u,p)}else a===null?g=new c(r.count*l):g=new c(a,h,r.count*l),A=new Gt(g,l,p);if(r.sparse!==void 0){const m=oM.SCALAR,v=Um[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,S=new v(o[1],y,r.sparse.count*m),C=new c(o[2],w,r.sparse.count*l);a!==null&&(A=new Gt(A.array.slice(),A.itemSize,A.normalized));for(let b=0,M=S.length;b<M;b++){const I=S[b];if(A.setX(I,C[b*l]),l>=2&&A.setY(I,C[b*l+1]),l>=3&&A.setZ(I,C[b*l+2]),l>=4&&A.setW(I,C[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=VO[h.magFilter]||Vt,u.minFilter=VO[h.minFilter]||Qs,u.wrapS=WO[h.wrapS]||qr,u.wrapT=WO[h.wrapT]||qr,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let p=h;n.isImageBitmapLoader===!0&&(p=function(g){const A=new Bn(g);A.needsUpdate=!0,h(A)}),n.load(Wc.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),Dc(f,o),f.userData.mimeType=o.mimeType||O1e(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Tn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Tn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Tn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===HO?Fh:jc),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Fh?HO:s1e),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new zv,cr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ji,cr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return pd}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Tn.KHR_MATERIALS_UNLIT]){const f=r[Tn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Je(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],jc),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,Fh)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Qn);const u=s.alphaMode||aM.OPAQUE;if(u===aM.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===aM.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Br&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ie(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Br&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Br){const f=s.emissiveFactor;a.emissive=new Je().setRGB(f[0],f[1],f[2],jc)}return s.emissiveTexture!==void 0&&o!==Br&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Fh)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Dc(f,s),n.associations.set(f,{materials:e}),s.extensions&&mh(r,f,s),f})}createUniqueName(e){const n=Cn.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Tn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return jO(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=F1e(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[Tn.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=jO(new Dt,c,n),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?P1e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const g=u[d],A=o[d];let m;const v=c[d];if(A.mode===oa.TRIANGLES||A.mode===oa.TRIANGLE_STRIP||A.mode===oa.TRIANGLE_FAN||A.mode===void 0)m=s.isSkinnedMesh===!0?new Fv(g,v):new ut(g,v),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),A.mode===oa.TRIANGLE_STRIP?m.geometry=LO(m.geometry,_8):A.mode===oa.TRIANGLE_FAN&&(m.geometry=LO(m.geometry,tE));else if(A.mode===oa.LINES)m=new xl(g,v);else if(A.mode===oa.LINE_STRIP)m=new un(g,v);else if(A.mode===oa.LINE_LOOP)m=new B8(g,v);else if(A.mode===oa.POINTS)m=new R8(g,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(m.geometry.morphAttributes).length>0&&L1e(m,s),m.name=n.createUniqueName(s.name||"mesh_"+e),Dc(m,s),A.extensions&&mh(r,m,A),n.assignFinalMaterial(m),f.push(m)}for(let d=0,p=f.length;d<p;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return s.extensions&&mh(r,f[0],s),f[0];const h=new uo;s.extensions&&mh(r,h,s),n.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new an(zt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Hn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Dc(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new Ge;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new S0(a,l)})}loadAnimation(e){const n=this.json,i=this,r=n.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const d=r.channels[f],p=r.samplers[d.sampler],g=d.target,A=g.node,m=r.parameters!==void 0?r.parameters[p.input]:p.input,v=r.parameters!==void 0?r.parameters[p.output]:p.output;g.node!==void 0&&(o.push(this.getDependency("node",A)),a.push(this.getDependency("accessor",m)),l.push(this.getDependency("accessor",v)),c.push(p),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],p=f[2],g=f[3],A=f[4],m=[];for(let v=0,y=h.length;v<y;v++){const w=h[v],S=d[v],C=p[v],b=g[v],M=A[v];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=i._createAnimationTracks(w,S,C,b,M);if(I)for(let T=0;T<I.length;T++)m.push(I[T])}return new Ef(s,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,z1e)});for(let d=0,p=f.length;d<p;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new i0:c.length>1?u=new uo:c.length===1?u=c[0]:u=new Ht,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Dc(u,s),s.extensions&&mh(i,u,s),s.matrix!==void 0){const f=new Ge;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new uo;i.name&&(s.name=r.createUniqueName(i.name)),Dc(s,i),i.extensions&&mh(n,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,d]of r.associations)(h instanceof cr||h instanceof Bn)&&f.set(h,d);return u.traverse(h=>{const d=r.associations.get(h);d!=null&&f.set(h,d)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,n,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Bu[s.path]===Bu.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(Bu[s.path]){case Bu.weights:c=_f;break;case Bu.rotation:c=Kc;break;case Bu.position:case Bu.scale:c=Jc;break;default:switch(i.itemSize){case 1:c=_f;break;case 2:case 3:default:c=Jc;break}break}const u=r.interpolation!==void 0?R1e[r.interpolation]:e0,f=this._getArrayFromAccessor(i);for(let h=0,d=l.length;h<d;h++){const p=new c(l[h]+"."+Bu[s.path],n.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const i=MI(n.constructor),r=new Float32Array(n.length);for(let s=0,o=n.length;s<o;s++)r[s]=n[s]*i;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Kc?B1e:Xj;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function k1e(t,e,n){const i=e.attributes,r=new xn;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new L(l[0],l[1],l[2]),new L(c[0],c[1],c[2])),a.normalized){const u=MI(Um[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new L,l=new L;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const g=MI(Um[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new $n;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function jO(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=bI[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return Dc(t,e),k1e(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?D1e(t,e.targets,n):t})}class N1e extends Dt{constructor(e,n,i,r){super();const s=[],o=[],a=[],l=new L,c=new Ge;c.makeRotationFromEuler(i),c.setPosition(n);const u=new Ge;u.copy(c).invert(),f(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(o,3)),this.setAttribute("uv",new At(a,2));function f(){let g,A=[];const m=new L,v=new L;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const y=e.geometry,w=y.attributes.position,S=y.attributes.normal;if(y.index!==null){const C=y.index;for(g=0;g<C.count;g++)m.fromBufferAttribute(w,C.getX(g)),v.fromBufferAttribute(S,C.getX(g)),h(A,m,v)}else for(g=0;g<w.count;g++)m.fromBufferAttribute(w,g),v.fromBufferAttribute(S,g),h(A,m,v);for(A=d(A,l.set(1,0,0)),A=d(A,l.set(-1,0,0)),A=d(A,l.set(0,1,0)),A=d(A,l.set(0,-1,0)),A=d(A,l.set(0,0,1)),A=d(A,l.set(0,0,-1)),g=0;g<A.length;g++){const C=A[g];a.push(.5+C.position.x/r.x,.5+C.position.y/r.y),C.position.applyMatrix4(c),s.push(C.position.x,C.position.y,C.position.z),o.push(C.normal.x,C.normal.y,C.normal.z)}}function h(g,A,m){A.applyMatrix4(e.matrixWorld),A.applyMatrix4(u),m.transformDirection(e.matrixWorld),g.push(new XO(A.clone(),m.clone()))}function d(g,A){const m=[],v=.5*Math.abs(r.dot(A));for(let y=0;y<g.length;y+=3){let w,S,C,b=0,M,I,T,D;const R=g[y+0].position.dot(A)-v,z=g[y+1].position.dot(A)-v,F=g[y+2].position.dot(A)-v;switch(w=R>0,S=z>0,C=F>0,b=(w?1:0)+(S?1:0)+(C?1:0),b){case 0:{m.push(g[y]),m.push(g[y+1]),m.push(g[y+2]);break}case 1:{if(w&&(M=g[y+1],I=g[y+2],T=p(g[y],M,A,v),D=p(g[y],I,A,v)),S){M=g[y],I=g[y+2],T=p(g[y+1],M,A,v),D=p(g[y+1],I,A,v),m.push(T),m.push(I.clone()),m.push(M.clone()),m.push(I.clone()),m.push(T.clone()),m.push(D);break}C&&(M=g[y],I=g[y+1],T=p(g[y+2],M,A,v),D=p(g[y+2],I,A,v)),m.push(M.clone()),m.push(I.clone()),m.push(T),m.push(D),m.push(T.clone()),m.push(I.clone());break}case 2:{w||(M=g[y].clone(),I=p(M,g[y+1],A,v),T=p(M,g[y+2],A,v),m.push(M),m.push(I),m.push(T)),S||(M=g[y+1].clone(),I=p(M,g[y+2],A,v),T=p(M,g[y],A,v),m.push(M),m.push(I),m.push(T)),C||(M=g[y+2].clone(),I=p(M,g[y],A,v),T=p(M,g[y+1],A,v),m.push(M),m.push(I),m.push(T));break}}}return m}function p(g,A,m,v){const y=g.position.dot(m)-v,w=A.position.dot(m)-v,S=y/(y-w);return new XO(new L(g.position.x+S*(A.position.x-g.position.x),g.position.y+S*(A.position.y-g.position.y),g.position.z+S*(A.position.z-g.position.z)),new L(g.normal.x+S*(A.normal.x-g.normal.x),g.normal.y+S*(A.normal.y-g.normal.y),g.normal.z+S*(A.normal.z-g.normal.z)))}}}class XO{constructor(e,n){this.position=e,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class G1e extends kv{constructor(e,n={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=n;if(o===void 0)super();else{const h=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(h,{...f,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a})}this.type="TextGeometry"}}const H1e={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},Q1e={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},V1e={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},cM=new fd,uM=new L,vp=new L,Ya=new L,Sc=new L,Pl=new L,Cc=new L,bc=new L,Z1=new L,eg=new L,tg=new L,Px=new L,ng=new L,ig=new L,rg=new L;class W1e{constructor(e,n,i){this.camera=e,this.scene=n,this.startPoint=new L,this.endPoint=new L,this.collection=[],this.deep=i||Number.MAX_VALUE}select(e,n){return this.startPoint=e||this.startPoint,this.endPoint=n||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(cM,this.scene),this.collection}updateFrustum(e,n){if(e=e||this.startPoint,n=n||this.endPoint,e.x===n.x&&(n.x+=Number.EPSILON),e.y===n.y&&(n.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){vp.copy(e),vp.x=Math.min(e.x,n.x),vp.y=Math.max(e.y,n.y),n.x=Math.max(e.x,n.x),n.y=Math.min(e.y,n.y),Ya.setFromMatrixPosition(this.camera.matrixWorld),Sc.copy(vp),Pl.set(n.x,vp.y,0),Cc.copy(n),bc.set(vp.x,n.y,0),Sc.unproject(this.camera),Pl.unproject(this.camera),Cc.unproject(this.camera),bc.unproject(this.camera),ng.copy(Sc).sub(Ya),ig.copy(Pl).sub(Ya),rg.copy(Cc).sub(Ya),ng.normalize(),ig.normalize(),rg.normalize(),ng.multiplyScalar(this.deep),ig.multiplyScalar(this.deep),rg.multiplyScalar(this.deep),ng.add(Ya),ig.add(Ya),rg.add(Ya);var i=cM.planes;i[0].setFromCoplanarPoints(Ya,Sc,Pl),i[1].setFromCoplanarPoints(Ya,Pl,Cc),i[2].setFromCoplanarPoints(Cc,bc,Ya),i[3].setFromCoplanarPoints(bc,Sc,Ya),i[4].setFromCoplanarPoints(Pl,Cc,bc),i[5].setFromCoplanarPoints(rg,ig,ng),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,n.x),s=Math.max(e.y,n.y),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y);Sc.set(r,s,-1),Pl.set(o,s,-1),Cc.set(o,a,-1),bc.set(r,a,-1),Z1.set(r,s,1),eg.set(o,s,1),tg.set(o,a,1),Px.set(r,a,1),Sc.unproject(this.camera),Pl.unproject(this.camera),Cc.unproject(this.camera),bc.unproject(this.camera),Z1.unproject(this.camera),eg.unproject(this.camera),tg.unproject(this.camera),Px.unproject(this.camera);var i=cM.planes;i[0].setFromCoplanarPoints(Sc,Z1,eg),i[1].setFromCoplanarPoints(Pl,eg,tg),i[2].setFromCoplanarPoints(tg,Px,bc),i[3].setFromCoplanarPoints(Px,Z1,Sc),i[4].setFromCoplanarPoints(Pl,Cc,bc),i[5].setFromCoplanarPoints(tg,eg,Z1),i[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,n){if((n.isMesh||n.isLine||n.isPoints)&&n.material!==void 0&&(n.geometry.boundingSphere===null&&n.geometry.computeBoundingSphere(),uM.copy(n.geometry.boundingSphere.center),uM.applyMatrix4(n.matrixWorld),e.containsPoint(uM)&&this.collection.push(n)),n.children.length>0)for(let i=0;i<n.children.length;i++)this.searchChildInFrustum(e,n.children[i])}}class j1e{constructor(e,n=" .:-=+*#%@",i={}){const r=i.resolution||.15,s=i.scale||1,o=i.color||!1,a=i.alpha||!1,l=i.block||!1,c=i.invert||!1,u=i.strResolution||"low";let f,h;const d=document.createElement("div");d.style.cursor="default";const p=document.createElement("table");d.appendChild(p);let g,A,m;this.setSize=function(F,V){f=F,h=V,e.setSize(F,V),v()},this.render=function(F,V){e.render(F,V),z(p)},this.domElement=d;function v(){g=Math.floor(f*r),A=Math.floor(h*r),b.width=g,b.height=A,m=e.domElement,m.style.backgroundColor&&(p.rows[0].cells[0].style.backgroundColor=m.style.backgroundColor,p.rows[0].cells[0].style.color=m.style.color),p.cellSpacing=0,p.cellPadding=0;const F=p.style;F.whiteSpace="pre",F.margin="0px",F.padding="0px",F.letterSpacing=R+"px",F.fontFamily=S,F.fontSize=T+"px",F.lineHeight=D+"px",F.textAlign="left",F.textDecoration="none"}const y=" .,:;i1tfLCG08@".split(""),w=" CGO08@".split(""),S="courier new, monospace",C=e.domElement,b=document.createElement("canvas");if(!b.getContext)return;const M=b.getContext("2d");if(!M.getImageData)return;let I=o?w:y;n&&(I=n);const T=2/r*s,D=2/r*s;let R=0;if(u=="low")switch(s){case 1:R=-1;break;case 2:case 3:R=-2.1;break;case 4:R=-3.1;break;case 5:R=-4.15;break}if(u=="medium")switch(s){case 1:R=0;break;case 2:R=-1;break;case 3:R=-1.04;break;case 4:case 5:R=-2.1;break}if(u=="high")switch(s){case 1:case 2:R=0;break;case 3:case 4:case 5:R=-1;break}function z(F){M.clearRect(0,0,g,A),M.drawImage(C,0,0,g,A);const V=M.getImageData(0,0,g,A).data;let j="";for(let Z=0;Z<A;Z+=2){for(let U=0;U<g;U++){const $=(Z*g+U)*4,X=V[$],Q=V[$+1],J=V[$+2],ne=V[$+3];let O,N;N=(.3*X+.59*Q+.11*J)/255,ne==0&&(N=1),O=Math.floor((1-N)*(I.length-1)),c&&(O=I.length-O-1);let G=I[O];(G===void 0||G==" ")&&(G="&nbsp;"),o?j+="<span style='color:rgb("+X+","+Q+","+J+");"+(l?"background-color:rgb("+X+","+Q+","+J+");":"")+(a?"opacity:"+ne/255+";":"")+"'>"+G+"</span>":j+=G}j+="<br/>"}F.innerHTML=`<tr><td style="display:block;width:${f}px;height:${h}px;overflow:hidden">${j}</td></tr>`}}}function Yj(t,e,n){const i=n.length-t-1;if(e>=n[i])return i-1;if(e<=n[t])return t;let r=t,s=i,o=Math.floor((r+s)/2);for(;e<n[o]||e>=n[o+1];)e<n[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function X1e(t,e,n,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=n;++a){s[a]=e-i[t+1-a],o[a]=i[t+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],h=r[c]/(u+f);r[c]=l+u*h,l=f*h}r[a]=l}return r}function Y1e(t,e,n,i){const r=Yj(t,i,e),s=X1e(r,i,t,e),o=new Jt(0,0,0,0);for(let a=0;a<=t;++a){const l=n[r-t+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function q1e(t,e,n,i,r){const s=[];for(let f=0;f<=n;++f)s[f]=0;const o=[];for(let f=0;f<=i;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=n;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=n;++f){l[f]=e-r[t+1-f],c[f]=r[t+f]-e;let h=0;for(let d=0;d<f;++d){const p=c[d+1],g=l[f-d];a[f][d]=p+g;const A=a[d][f-1]/a[f][d];a[d][f]=h+p*A,h=g*A}a[f][f]=h}for(let f=0;f<=n;++f)o[0][f]=a[f][n];for(let f=0;f<=n;++f){let h=0,d=1;const p=[];for(let g=0;g<=n;++g)p[g]=s.slice(0);p[0][0]=1;for(let g=1;g<=i;++g){let A=0;const m=f-g,v=n-g;f>=g&&(p[d][0]=p[h][0]/a[v+1][m],A=p[d][0]*a[m][v]);const y=m>=-1?1:-m,w=f-1<=v?g-1:n-f;for(let C=y;C<=w;++C)p[d][C]=(p[h][C]-p[h][C-1])/a[v+1][m+C],A+=p[d][C]*a[m+C][v];f<=v&&(p[d][g]=-p[h][g-1]/a[v+1][f],A+=p[d][g]*a[f][v]),o[g][f]=A;const S=h;h=d,d=S}}let u=n;for(let f=1;f<=i;++f){for(let h=0;h<=n;++h)o[f][h]*=u;u*=n-f}return o}function $1e(t,e,n,i,r){const s=r<t?r:t,o=[],a=Yj(t,i,e),l=q1e(a,i,t,s,e),c=[];for(let u=0;u<n.length;++u){const f=n[u].clone(),h=f.w;f.x*=h,f.y*=h,f.z*=h,c[u]=f}for(let u=0;u<=s;++u){const f=c[a-t].clone().multiplyScalar(l[u][0]);for(let h=1;h<=t;++h)f.add(c[a-t+h].clone().multiplyScalar(l[u][h]));o[u]=f}for(let u=s+1;u<=r+1;++u)o[u]=new Jt(0,0,0);return o}function K1e(t,e){let n=1;for(let r=2;r<=t;++r)n*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=t-e;++r)i*=r;return n/i}function J1e(t){const e=t.length,n=[],i=[];for(let s=0;s<e;++s){const o=t[s];n[s]=new L(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=n[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(K1e(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function Z1e(t,e,n,i,r){const s=$1e(t,e,n,i,r);return J1e(s)}class YO extends La{constructor(e,n,i,r,s){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new Jt(a.x,a.y,a.z,a.w)}}getPoint(e,n){const i=n||new L,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Y1e(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,n){const i=n||new L,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Z1e(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let Mn,ar,so;class HB extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=s.path===""?Wc.extractUrlBase(e):s.path,a=new Gi(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,n){if(sge(e))Mn=new rge().parse(e);else{const r=Jj(e);if(!oge(r))throw new Error("THREE.FBXLoader: Unknown format.");if($O(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$O(r));Mn=new ige().parse(r)}const i=new rc(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new ege(i,this.manager).parse(Mn)}}class ege{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){ar=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),r=this.parseDeformers(),s=new tge().parse(r);return this.parseScene(r,s,i),so}parseConnections(){const e=new Map;return"Connections"in Mn&&Mn.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},n={};if("Video"in Mn.Objects){const i=Mn.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);n[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];n[r]!==void 0?e[i]=n[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof n=="string")return"data:"+s+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const n=new Map;if("Texture"in Mn.Objects){const i=Mn.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);n.set(parseInt(r),s)}}return n}parseTexture(e,n){const i=this.loadTexture(e,n);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?qr:wi,i.wrapT=a===0?qr:wi,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,n){let i;const r=this.textureLoader.path,s=ar.get(e.id).children;s!==void 0&&s.length>0&&n[s[0].ID]!==void 0&&(i=n[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Bn):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Bn):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const n=new Map;if("Material"in Mn.Objects){const i=Mn.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&n.set(parseInt(r),s)}}return n}parseMaterial(e,n){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!ar.has(i))return null;const o=this.parseParameters(e,n,i);let a;switch(s.toLowerCase()){case"phong":a=new oA;break;case"lambert":a=new Gv;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new oA;break}return a.setValues(o),a.name=r,a}parseParameters(e,n,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new Je().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new Je().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new Je().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new Je().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new Je().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new Je().fromArray(e.SpecularColor.value));const s=this;return ar.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(n,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(n,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(n,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(n,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(n,o.ID),r.envMap!==void 0&&(r.envMap.mapping=yf,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(n,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(n,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,n){return"LayeredTexture"in Mn.Objects&&n in Mn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=ar.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in Mn.Objects){const i=Mn.Objects.Deformer;for(const r in i){const s=i[r],o=ar.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[r]=a}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const i=[];return e.children.forEach(function(r){const s=n[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Ge().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,n){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=n[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=ar.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,n,i){so=new uo;const r=this.parseModels(e.skeletons,n,i),s=Mn.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),ar.get(l.ID).parents.forEach(function(f){const h=r.get(f.ID);h!==void 0&&h.add(l)}),l.parent===null&&so.add(l)}),this.bindSkeleton(e.skeletons,n,r),this.createAmbientLight(),so.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=$j(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new nge().parse();so.children.length===1&&so.children[0].isGroup&&(so.children[0].animations=a,so=so.children[0]),so.animations=a}parseModels(e,n,i){const r=new Map,s=Mn.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=ar.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,n,i);break;case"NurbsCurve":u=this.createCurve(c,n);break;case"LimbNode":case"Root":u=new i0;break;case"Null":default:u=new uo;break}u.name=l.attrName?Cn.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,n,i,r){let s=null;return e.parents.forEach(function(o){for(const a in n){const l=n[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new i0,s.matrixWorld.copy(c.transformLink),s.name=r?Cn.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let n,i;if(e.children.forEach(function(r){const s=Mn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new Ht;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const f=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:n=new an(u,c,s,o),f!==null&&n.setFocalLength(f);break;case 1:n=new Hn(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),n=new Ht;break}}return n}createLight(e){let n,i;if(e.children.forEach(function(r){const s=Mn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new Ht;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new Je().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:n=new sv(s,o,a,l);break;case 1:n=new Dw(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=zt.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=zt.degToRad(i.OuterAngle.value),u=Math.max(u,1)),n=new Pw(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new sv(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){n.has(l.ID)&&(s=n.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new oA({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new Fv(s,o),r.normalizeSkinWeights()):r=new ut(s,o),r}createCurve(e,n){const i=e.children.reduce(function(s,o){return n.has(o.ID)&&(s=n.get(o.ID)),s},null),r=new Ji({color:3342591,linewidth:1});return new un(i,r)}getTransformData(e,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=Kj(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,n){"LookAtProperty"in n&&ar.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=Mn.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),so.add(e.target)):e.lookAt(new L().fromArray(o))}}})}bindSkeleton(e,n,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];ar.get(parseInt(o.ID)).parents.forEach(function(l){if(n.has(l.ID)){const c=l.ID;ar.get(c).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new S0(o.bones),r[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Mn.Objects){const n=Mn.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const r=n[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Ge().fromArray(s.Matrix.a)}):e[r.Node]=new Ge().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Mn&&"AmbientColor"in Mn.GlobalSettings){const e=Mn.GlobalSettings.AmbientColor.value,n=e[0],i=e[1],r=e[2];if(n!==0||i!==0||r!==0){const s=new Je(n,i,r);so.add(new j8(s,1))}}}}class tge{parse(e){const n=new Map;if("Geometry"in Mn.Objects){const i=Mn.Objects.Geometry;for(const r in i){const s=ar.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);n.set(parseInt(r),o)}}return n}parseGeometry(e,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,i){const r=i.skeletons,s=[],o=e.parents.map(function(f){return Mn.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,h){return r[h.ID]!==void 0&&(f=r[h.ID]),f},null);e.children.forEach(function(f){i.morphTargets[f.ID]!==void 0&&s.push(i.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Kj(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=$j(c);return this.genGeometry(n,a,s,u)}genGeometry(e,n,i,r){const s=new Dt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,n),a=this.genBuffers(o),l=new At(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new At(a.colors,3)),n&&(s.setAttribute("skinIndex",new uw(a.weightsIndices,4)),s.setAttribute("skinWeight",new At(a.vertexWeights,4)),s.FBX_Deformer=n),a.normal.length>0){const c=new jt().getNormalMatrix(r),u=new At(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let f="uv"+(u+1).toString();u===0&&(f="uv"),s.setAttribute(f,new At(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==c&&(s.addGroup(u,h-u,c),c=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,n){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(d,p){let g,A=!1;d<0&&(d=d^-1,A=!0);let m=[],v=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const y=Dx(p,i,d,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){v.push(y.weight),m.push(y.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],w=[0,0,0,0];v.forEach(function(S,C){let b=S,M=m[C];w.forEach(function(I,T,D){if(b>I){D[T]=b,b=I;const R=y[T];y[T]=M,M=R}})}),m=y,v=w}for(;v.length<4;)v.push(0),m.push(0);for(let y=0;y<4;++y)u.push(v[y]),f.push(m[y])}if(e.normal){const y=Dx(p,i,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(g=Dx(p,i,d,e.material)[0]),e.uv&&e.uv.forEach(function(y,w){const S=Dx(p,i,d,y);c[w]===void 0&&(c[w]=[]),c[w].push(S[0]),c[w].push(S[1])}),r++,A&&(h.genFace(n,e,o,g,a,l,c,u,f,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],f=[])}),n}genFace(e,n,i,r,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(n.vertexPositions[i[0]]),e.vertex.push(n.vertexPositions[i[1]]),e.vertex.push(n.vertexPositions[i[2]]),e.vertex.push(n.vertexPositions[i[(f-1)*3]]),e.vertex.push(n.vertexPositions[i[(f-1)*3+1]]),e.vertex.push(n.vertexPositions[i[(f-1)*3+2]]),e.vertex.push(n.vertexPositions[i[f*3]]),e.vertex.push(n.vertexPositions[i[f*3+1]]),e.vertex.push(n.vertexPositions[i[f*3+2]]),n.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),n.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),n.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),n.uv&&n.uv.forEach(function(h,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(f-1)*2]),e.uvs[d].push(a[d][(f-1)*2+1]),e.uvs[d].push(a[d][f*2]),e.uvs[d].push(a[d][f*2+1])})}addMorphTargets(e,n,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=Mn.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,n,l,r,a.name)})})}genMorphGeometry(e,n,i,r,s){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const g=l[p]*3;u[g]=a[p*3],u[g+1]=a[p*3+1],u[g+2]=a[p*3+2]}const f={vertexIndices:o,vertexPositions:u},h=this.genBuffers(f),d=new At(h.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:n,referenceType:i}}parseUVs(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:n,referenceType:i}}parseVertexColors(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:n,referenceType:i}}parseMaterialIndices(e){const n=e.MappingInformationType,i=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:n,referenceType:i}}parseNurbsGeometry(e){if(YO===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Dt;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Dt;const i=n-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push(new Jt().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let f=0;f<i;++f)s.push(s[f])}const u=new YO(i,r,s,a,l).getPoints(s.length*12);return new Dt().setFromPoints(u)}}class nge{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const i in n){const r=n[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Mn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=Mn.Objects.AnimationCurveNode,n=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};n.set(s.id,s)}}return n}parseAnimationCurves(e){const n=Mn.Objects.AnimationCurve;for(const i in n){const r={id:n[i].id,times:n[i].KeyTime.a.map(age),values:n[i].KeyValueFloat.a},s=ar.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const n=Mn.Objects.AnimationLayer,i=new Map;for(const r in n){const s=[],o=ar.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=ar.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(f!==void 0){const h=Mn.Objects.Model[f.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:h.attrName?Cn.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};so.traverse(function(p){p.ID===h.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Ge),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),s[c]=d}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=ar.get(l.ID).parents.filter(function(m){return m.relationship!==void 0})[0].ID,h=ar.get(f).parents[0].ID,d=ar.get(h).parents[0].ID,p=ar.get(d).parents[0].ID,g=Mn.Objects.Model[p],A={modelName:g.attrName?Cn.sanitizeNodeName(g.attrName):"",morphName:Mn.Objects.Deformer[f].attrName};s[c]=A}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const n=Mn.Objects.AnimationStack,i={};for(const r in n){const s=ar.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:n[r].attrName,layer:o}}return i}addClip(e){let n=[];const i=this;return e.layer.forEach(function(r){n=n.concat(i.generateTracks(r))}),new Ef(e.name,-1,n)}generateTracks(e){const n=[];let i=new L,r=new Tt,s=new L;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new gi().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,i,r){const s=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(s,n,i);return new Jc(e+"."+r,s,o)}generateRotationTrack(e,n,i,r,s,o){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(zt.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(zt.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(zt.degToRad));const a=this.getTimesForAllAxes(n),l=this.getKeyframeTrackValues(a,n,i);r!==void 0&&(r=r.map(zt.degToRad),r.push(o),r=new gi().fromArray(r),r=new Tt().setFromEuler(r)),s!==void 0&&(s=s.map(zt.degToRad),s.push(o),s=new gi().fromArray(s),s=new Tt().setFromEuler(s).invert());const c=new Tt,u=new gi,f=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(f,h/3*4);return new Kc(e+".quaternion",a,f)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,i=n.values.map(function(s){return s/100}),r=so.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new _f(e.modelName+".morphTargetInfluences["+r+"]",n.times,i)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(i,r){return i-r}),n.length>1){let i=1,r=n[0];for(let s=1;s<n.length;s++){const o=n[s];o!==r&&(n[i]=o,r=o,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(e,n,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(n.x&&(o=n.x.times.indexOf(c)),n.y&&(a=n.y.times.indexOf(c)),n.z&&(l=n.z.times.indexOf(c)),o!==-1){const u=n.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=n.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=n.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const i=e.values[n-1],r=e.values[n]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[n-1],f=(e.times[n]-c)/o;let h=c+f;const d=[],p=[];for(;h<e.times[n];)d.push(h),h+=f,p.push(l),l+=a;e.times=KO(e.times,n,d),e.values=KO(e.values,n,p)}}}}class ige{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new qj,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(n.currentIndent-1)+"}}");l?n.parseNodeBegin(r,l):c?n.parseNodeProperty(r,c,i[++s]):u?n.popStack():r.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),r=n[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:n,name:i,type:r}}parseNodeProperty(e,n,i){let r=n[1].replace(/^"/,"").replace(/"$/,"").trim(),s=n[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],cge(s,f),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=hM(s))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=hM(n.a))}parseNodeSpecialProperty(e,n,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=hM(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class rge{parse(e){const n=new qO(e);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new qj;for(;!this.endOfContent(n);){const s=this.parseNode(n,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const i={},r=n>=7500?e.getUint64():e.getUint32(),s=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,n);h!==null&&this.parseSubNode(a,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),f!==""&&(i.attrType=f),a!==""&&(i.name=a),i}parseSubNode(e,n,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(n[i.name]=i,i.a=r):n[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),n.connections===void 0&&(n.connections=[]),n.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){n[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],n[r]={type:s,type2:o,flag:a,value:l}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(e){const n=e.getString(1);let i;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=Ng(new Uint8Array(e.getArrayBuffer(o))),l=new qO(a.buffer);switch(n){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class qO{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let i=0;i<e;i++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let r=0;r<e;r++)n[r]=this.getUint8();const i=n.indexOf(0);return i>=0&&(n=n.slice(0,i)),f0(new Uint8Array(n))}}class qj{add(e,n){this[e]=n}}function sge(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===Jj(t,0,e.length)}function oge(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(r){const s=t[r-1];return t=t.slice(n+r),n++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function $O(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function age(t){return t/46186158e3}const lge=[];function Dx(t,e,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=t;break;case"ByPolygon":r=e;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return uge(lge,i.buffer,s,o)}const fM=new gi,yp=new L;function $j(t){const e=new Ge,n=new Ge,i=new Ge,r=new Ge,s=new Ge,o=new Ge,a=new Ge,l=new Ge,c=new Ge,u=new Ge,f=new Ge,h=new Ge,d=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(yp.fromArray(t.translation)),t.preRotation){const T=t.preRotation.map(zt.degToRad);T.push(t.eulerOrder),n.makeRotationFromEuler(fM.fromArray(T))}if(t.rotation){const T=t.rotation.map(zt.degToRad);T.push(t.eulerOrder),i.makeRotationFromEuler(fM.fromArray(T))}if(t.postRotation){const T=t.postRotation.map(zt.degToRad);T.push(t.eulerOrder),r.makeRotationFromEuler(fM.fromArray(T)),r.invert()}t.scale&&s.scale(yp.fromArray(t.scale)),t.scalingOffset&&a.setPosition(yp.fromArray(t.scalingOffset)),t.scalingPivot&&o.setPosition(yp.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(yp.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(yp.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(f.copy(t.parentMatrix),u.copy(t.parentMatrixWorld));const p=n.clone().multiply(i).multiply(r),g=new Ge;g.extractRotation(u);const A=new Ge;A.copyPosition(u);const m=A.clone().invert().multiply(u),v=g.clone().invert().multiply(m),y=s,w=new Ge;if(d===0)w.copy(g).multiply(p).multiply(v).multiply(y);else if(d===1)w.copy(g).multiply(v).multiply(p).multiply(y);else{const D=new Ge().scale(new L().setFromMatrixScale(f)).clone().invert(),R=v.clone().multiply(D);w.copy(g).multiply(p).multiply(R).multiply(y)}const S=c.clone().invert(),C=o.clone().invert();let b=e.clone().multiply(l).multiply(c).multiply(n).multiply(i).multiply(r).multiply(S).multiply(a).multiply(o).multiply(s).multiply(C);const M=new Ge().copyPosition(b),I=u.clone().multiply(M);return h.copyPosition(I),b=h.clone().multiply(w),b.premultiply(u.invert()),b}function Kj(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function hM(t){return t.split(",").map(function(n){return parseFloat(n)})}function Jj(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),f0(new Uint8Array(t,e,n))}function cge(t,e){for(let n=0,i=t.length,r=e.length;n<r;n++,i++)t[i]=e[n]}function uge(t,e,n,i){for(let r=n,s=0;r<i;r++,s++)t[s]=e[r];return t}function KO(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}var fge=Object.defineProperty,hge=(t,e,n)=>e in t?fge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QB=(t,e,n)=>(hge(t,typeof e!="symbol"?e+"":e,n),n);class dge extends Zi{constructor(e){super(e)}load(e,n,i,r){const s=new Gi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},i,r)}loadAsync(e,n){return super.loadAsync(e,n)}parse(e){return new VB(e)}}class VB{constructor(e){QB(this,"data"),this.data=e}generateShapes(e,n=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=pge(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}QB(VB,"isFont");QB(VB,"type");function pge(t,e,n,i){const r=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)l=0,c-=o*i.lineHeight;else{const h=mge(f,s,l,c,n);h&&(l+=h.offsetX+i.letterSpacing,a.push(h.path))}}return a}function mge(t,e,n,i,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");return}const o=new Bc;let a,l,c,u,f,h,d,p;if(s.o){const g=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let A=0,m=g.length;A<m;)switch(g[A++]){case"m":a=parseInt(g[A++])*e+n,l=parseInt(g[A++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(g[A++])*e+n,l=parseInt(g[A++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(g[A++])*e+n,u=parseInt(g[A++])*e+i,f=parseInt(g[A++])*e+n,h=parseInt(g[A++])*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=parseInt(g[A++])*e+n,u=parseInt(g[A++])*e+i,f=parseInt(g[A++])*e+n,h=parseInt(g[A++])*e+i,d=parseInt(g[A++])*e+n,p=parseInt(g[A++])*e+i,o.bezierCurveTo(f,h,d,p,c,u);break}}return{offsetX:s.ha*e,path:o}}class gge extends Bn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=fn,this.minFilter=fn,this.wrapR=wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Age{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=n}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,n){const i=this.workersResolve[e];if(i&&i(n),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,n){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,n)):this.queue.push({resolve:i,msg:e,transfer:n})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Zj=0,JO=2,vge=0,yge=0,xge=2,_ge=0,Ege=0,wge=1,TI=2,Sge=0,eX=1,Cge=10,bge=64,tX=0,nX=9,iX=15,rX=16,sX=22,oX=37,aX=43,lX=76,cX=83,uX=97,fX=100,hX=103,dX=109,pX=165,mX=166;class Mge{constructor(){this.vkFormat=tX,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=Zj,this.levels=[],this.dataFormatDescriptor=[{vendorId:yge,descriptorType:vge,descriptorBlockSize:0,versionNumber:xge,colorModel:_ge,colorPrimaries:eX,transferFunction:TI,flags:Ege,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class sg{constructor(e,n,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+n,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),n=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*n;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const n=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,n}_skip(e){return this._offset+=e,this}_scan(e,n){n===void 0&&(n=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==n&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const Fs=[171,75,84,88,32,50,48,187,13,10,26,10];function ZO(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function Tge(t){const e=new Uint8Array(t.buffer,t.byteOffset,Fs.length);if(e[0]!==Fs[0]||e[1]!==Fs[1]||e[2]!==Fs[2]||e[3]!==Fs[3]||e[4]!==Fs[4]||e[5]!==Fs[5]||e[6]!==Fs[6]||e[7]!==Fs[7]||e[8]!==Fs[8]||e[9]!==Fs[9]||e[10]!==Fs[10]||e[11]!==Fs[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Mge,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new sg(t,Fs.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const s=r._nextUint32();n.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),f=r._nextUint64(),h=s*3*8,d=new sg(t,Fs.length+i,h,!0);for(let X=0;X<s;X++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new sg(t,o,a,!0),g={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},v=(g.descriptorBlockSize/4-6)/4;for(let X=0;X<v;X++){const Q={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Q.channelType&bge?(Q.sampleLower=p._nextInt32(),Q.sampleUpper=p._nextInt32()):(Q.sampleLower=p._nextUint32(),Q.sampleUpper=p._nextUint32()),g.samples[X]=Q}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(g);const y=new sg(t,l,c,!0);for(;y._offset<c;){const X=y._nextUint32(),Q=y._scan(X),J=ZO(Q);if(n.keyValue[J]=y._nextUint8Array(X-Q.byteLength-1),J.match(/^ktx/i)){const O=ZO(n.keyValue[J]);n.keyValue[J]=O.substring(0,O.lastIndexOf("\0"))}const ne=X%4?4-X%4:0;y._skip(ne)}if(f<=0)return n;const w=new sg(t,u,f,!0),S=w._nextUint16(),C=w._nextUint16(),b=w._nextUint32(),M=w._nextUint32(),I=w._nextUint32(),T=w._nextUint32(),D=[];for(let X=0;X<s;X++)D.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});const R=u+w._offset,z=R+b,F=z+M,V=F+I,j=new Uint8Array(t.buffer,t.byteOffset+R,b),Z=new Uint8Array(t.buffer,t.byteOffset+z,M),U=new Uint8Array(t.buffer,t.byteOffset+F,I),$=new Uint8Array(t.buffer,t.byteOffset+V,T);return n.globalData={endpointCount:S,selectorCount:C,imageDescs:D,endpointsData:j,selectorsData:Z,tablesData:U,extendedData:$},n}let og,Mc,II;const dM={env:{emscripten_notify_memory_growth:function(t){II=new Uint8Array(Mc.exports.memory.buffer)}}};class Ige{init(){return og||(typeof fetch<"u"?og=fetch("data:application/wasm;base64,"+ez).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,dM)).then(this._init):og=WebAssembly.instantiate(Buffer.from(ez,"base64"),dM).then(this._init),og)}_init(e){Mc=e.instance,dM.env.emscripten_notify_memory_growth(0)}decode(e,n=0){if(!Mc)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Mc.exports.malloc(i);II.set(e,r),n=n||Number(Mc.exports.ZSTD_findDecompressedSize(r,i));const s=Mc.exports.malloc(n),o=Mc.exports.ZSTD_decompress(s,n,r,i),a=II.slice(s,s+o);return Mc.exports.free(r),Mc.exports.free(s),a}}const ez="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class Bge extends Pf{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,pl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Rge extends Pf{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=wi}}var Pge=Object.defineProperty,Dge=(t,e,n)=>e in t?Pge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lS=(t,e,n)=>(Dge(t,typeof e!="symbol"?e+"":e,n),n);const gX=3e3,AX=3001,tz="",Lge="display-p3",Fge="display-p3-linear",Oge="srgb-linear",WB="srgb",pM=new WeakMap;let mM=0,gM;const Gg=class extends Zi{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Age,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new Gi(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),n=new Gi(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,i]).then(([r,s])=>{const o=Gg.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Gg.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Gg.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Gg.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),c=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:c},[c]),l})}),mM>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),mM++}return this.transcoderPending}load(t,e,n,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new Gi(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(t,s=>{if(pM.has(s))return pM.get(s).promise.then(e).catch(i);this._createTexture(s).then(o=>e?e(o):null).catch(i)},n,i)}_createTextureFrom(t,e){const{faces:n,width:i,height:r,format:s,type:o,error:a,dfdFlags:l}=t;if(o==="error")return Promise.reject(a);let c;if(e.faceCount===6)c=new Bge(n,s,Jn);else{const f=n[0].mipmaps;c=e.layerCount>1?new Rge(f,i,r,e.layerCount,s,Jn):new Pf(f,i,r,s,Jn)}c.minFilter=n[0].mipmaps.length===1?Vt:Qs,c.magFilter=Vt,c.generateMipmaps=!1,c.needsUpdate=!0;const u=vX(e);return"colorSpace"in c?c.colorSpace=u:c.encoding=u===WB?AX:gX,c.premultiplyAlpha=!!(l&wge),c}async _createTexture(t,e={}){const n=Tge(new Uint8Array(t));if(n.vkFormat!==tX)return Uge(n);const i=e,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:i},[t])).then(s=>this._createTextureFrom(s.data,n));return pM.set(t,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),mM--,this}};let yd=Gg;lS(yd,"BasisFormat",{ETC1S:0,UASTC_4x4:1});lS(yd,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});lS(yd,"EngineFormat",{RGBAFormat:In,RGBA_ASTC_4x4_Format:XA,RGBA_BPTC_Format:Bm,RGBA_ETC2_EAC_Format:jA,RGBA_PVRTC_4BPPV1_Format:QA,RGBA_S3TC_DXT5_Format:Im,RGB_ETC1_Format:VA,RGB_ETC2_Format:WA,RGB_PVRTC_4BPPV1_Format:HA,RGB_S3TC_DXT1_Format:Tm});lS(yd,"BasisWorker",function(){let t,e,n;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(p){const g=p.data;switch(g.type){case"init":t=g.config,o(g.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:A,buffers:m,width:v,height:y,hasAlpha:w,format:S,dfdFlags:C}=a(g.buffer);self.postMessage({type:"transcode",id:g.id,faces:A,width:v,height:y,hasAlpha:w,format:S,dfdFlags:C},m)}catch(A){console.error(A),self.postMessage({type:"error",id:g.id,error:A.message})}});break}});function o(p){e=new Promise(g=>{n={wasmBinary:p,onRuntimeInitialized:g},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(p){const g=new n.KTX2File(new Uint8Array(p));function A(){g.close(),g.delete()}if(!g.isValid())throw A(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const m=g.isUASTC()?s.UASTC_4x4:s.ETC1S,v=g.getWidth(),y=g.getHeight(),w=g.getLayers()||1,S=g.getLevels(),C=g.getFaces(),b=g.getHasAlpha(),M=g.getDFDFlags(),{transcoderFormat:I,engineFormat:T}=f(m,v,y,b);if(!v||!y||!S)throw A(),new Error("THREE.KTX2Loader:	Invalid texture");if(!g.startTranscoding())throw A(),new Error("THREE.KTX2Loader: .startTranscoding failed");const D=[],R=[];for(let z=0;z<C;z++){const F=[];for(let V=0;V<S;V++){const j=[];let Z,U;for(let X=0;X<w;X++){const Q=g.getImageLevelInfo(V,X,z);z===0&&V===0&&X===0&&(Q.origWidth%4!==0||Q.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),S>1?(Z=Q.origWidth,U=Q.origHeight):(Z=Q.width,U=Q.height);const J=new Uint8Array(g.getImageTranscodedSizeInBytes(V,X,0,I));if(!g.transcodeImage(J,V,X,z,I,0,-1,-1))throw A(),new Error("THREE.KTX2Loader: .transcodeImage failed.");j.push(J)}const $=d(j);F.push({data:$,width:Z,height:U}),R.push($.buffer)}D.push({mipmaps:F,width:v,height:y,format:T})}return A(),{faces:D,buffers:R,width:v,height:y,hasAlpha:b,format:T,dfdFlags:M}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(p,g){return p.priorityETC1S-g.priorityETC1S}),u=l.sort(function(p,g){return p.priorityUASTC-g.priorityUASTC});function f(p,g,A,m){let v,y;const w=p===s.ETC1S?c:u;for(let S=0;S<w.length;S++){const C=w[S];if(t[C.if]&&C.basisFormat.includes(p)&&!(m&&C.transcoderFormat.length<2)&&!(C.needsPowerOfTwo&&!(h(g)&&h(A))))return v=C.transcoderFormat[m?1:0],y=C.engineFormat[m?1:0],{transcoderFormat:v,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),v=r.RGBA32,y=i.RGBAFormat,{transcoderFormat:v,engineFormat:y}}function h(p){return p<=2?!0:(p&p-1)===0&&p!==0}function d(p){if(p.length===1)return p[0];let g=0;for(let v=0;v<p.length;v++){const y=p[v];g+=y.byteLength}const A=new Uint8Array(g);let m=0;for(let v=0;v<p.length;v++){const y=p[v];A.set(y,m),m+=y.byteLength}return A}});const zge=new Set([In,Gc,co]),AM={[dX]:In,[uX]:In,[oX]:In,[aX]:In,[hX]:Gc,[cX]:Gc,[rX]:Gc,[sX]:Gc,[fX]:co,[lX]:co,[iX]:co,[nX]:co,[mX]:Jm,[pX]:Jm},vM={[dX]:vn,[uX]:On,[oX]:Jn,[aX]:Jn,[hX]:vn,[cX]:On,[rX]:Jn,[sX]:Jn,[fX]:vn,[lX]:On,[iX]:Jn,[nX]:Jn,[mX]:Jn,[pX]:Jn};async function Uge(t){const{vkFormat:e}=t;if(AM[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let n;t.supercompressionScheme===JO&&(gM||(gM=new Promise(async o=>{const a=new Ige;await a.init(),o(a)})),n=await gM);const i=[];for(let o=0;o<t.levels.length;o++){const a=Math.max(1,t.pixelWidth>>o),l=Math.max(1,t.pixelHeight>>o),c=t.pixelDepth?Math.max(1,t.pixelDepth>>o):0,u=t.levels[o];let f;if(t.supercompressionScheme===Zj)f=u.levelData;else if(t.supercompressionScheme===JO)f=n.decode(u.levelData,u.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let h;vM[e]===vn?h=new Float32Array(f.buffer,f.byteOffset,f.byteLength/Float32Array.BYTES_PER_ELEMENT):vM[e]===On?h=new Uint16Array(f.buffer,f.byteOffset,f.byteLength/Uint16Array.BYTES_PER_ELEMENT):h=f,i.push({data:h,width:a,height:l,depth:c})}let r;if(zge.has(AM[e]))r=t.pixelDepth===0?new Yr(i[0].data,t.pixelWidth,t.pixelHeight):new gge(i[0].data,t.pixelWidth,t.pixelHeight,t.pixelDepth);else{if(t.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new Pf(i,t.pixelWidth,t.pixelHeight)}r.mipmaps=i,r.type=vM[e],r.format=AM[e],r.needsUpdate=!0;const s=vX(t);return"colorSpace"in r?r.colorSpace=s:r.encoding=s===WB?AX:gX,Promise.resolve(r)}function vX(t){const e=t.dataFormatDescriptor[0];return e.colorPrimaries===eX?e.transferFunction===TI?WB:Oge:e.colorPrimaries===Cge?e.transferFunction===TI?Lge:Fge:(e.colorPrimaries===Sge||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),tz)}class kge extends Rw{constructor(e){super(e),this.type=On}parse(e){const o=function(M,I){switch(M){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,f=function(M,I,T){I=I||1024;let R=M.pos,z=-1,F=0,V="",j=String.fromCharCode.apply(null,new Uint16Array(M.subarray(R,R+128)));for(;0>(z=j.indexOf(u))&&F<I&&R<M.byteLength;)V+=j,F+=j.length,R+=128,j+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(R,R+128)));return-1<z?(M.pos+=F+z+1,V+j.slice(0,z)):!1},h=function(M){const I=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let V,j;for((M.pos>=M.byteLength||!(V=f(M)))&&o(1,"no header found"),(j=V.match(I))||o(3,"bad initial token"),F.valid|=1,F.programtype=j[1],F.string+=V+`
`;V=f(M),V!==!1;){if(F.string+=V+`
`,V.charAt(0)==="#"){F.comments+=V+`
`;continue}if((j=V.match(T))&&(F.gamma=parseFloat(j[1])),(j=V.match(D))&&(F.exposure=parseFloat(j[1])),(j=V.match(R))&&(F.valid|=2,F.format=j[1]),(j=V.match(z))&&(F.valid|=4,F.height=parseInt(j[1],10),F.width=parseInt(j[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||o(3,"missing format specifier"),F.valid&4||o(3,"missing image size specifier"),F},d=function(M,I,T){const D=I;if(D<8||D>32767||M[0]!==2||M[1]!==2||M[2]&128)return new Uint8Array(M);D!==(M[2]<<8|M[3])&&o(3,"wrong scanline width");const R=new Uint8Array(4*I*T);R.length||o(4,"unable to allocate buffer space");let z=0,F=0;const V=4*D,j=new Uint8Array(4),Z=new Uint8Array(V);let U=T;for(;U>0&&F<M.byteLength;){F+4>M.byteLength&&o(1),j[0]=M[F++],j[1]=M[F++],j[2]=M[F++],j[3]=M[F++],(j[0]!=2||j[1]!=2||(j[2]<<8|j[3])!=D)&&o(3,"bad rgbe scanline format");let $=0,X;for(;$<V&&F<M.byteLength;){X=M[F++];const J=X>128;if(J&&(X-=128),(X===0||$+X>V)&&o(3,"bad scanline data"),J){const ne=M[F++];for(let O=0;O<X;O++)Z[$++]=ne}else Z.set(M.subarray(F,F+X),$),$+=X,F+=X}const Q=D;for(let J=0;J<Q;J++){let ne=0;R[z]=Z[J+ne],ne+=D,R[z+1]=Z[J+ne],ne+=D,R[z+2]=Z[J+ne],ne+=D,R[z+3]=Z[J+ne],z+=4}U--}return R},p=function(M,I,T,D){const R=M[I+3],z=Math.pow(2,R-128)/255;T[D+0]=M[I+0]*z,T[D+1]=M[I+1]*z,T[D+2]=M[I+2]*z,T[D+3]=1},g=function(M,I,T,D){const R=M[I+3],z=Math.pow(2,R-128)/255;T[D+0]=rl.toHalfFloat(Math.min(M[I+0]*z,65504)),T[D+1]=rl.toHalfFloat(Math.min(M[I+1]*z,65504)),T[D+2]=rl.toHalfFloat(Math.min(M[I+2]*z,65504)),T[D+3]=rl.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;const m=h(A),v=m.width,y=m.height,w=d(A.subarray(A.pos),v,y);let S,C,b;switch(this.type){case vn:b=w.length/4;const M=new Float32Array(b*4);for(let T=0;T<b;T++)p(w,T*4,M,T*4);S=M,C=vn;break;case On:b=w.length/4;const I=new Uint16Array(b*4);for(let T=0;T<b;T++)g(w,T*4,I,T*4);S=I,C=On;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:v,height:y,data:S,header:m.string,gamma:m.gamma,exposure:m.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){switch(o.type){case vn:case On:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Vt,o.magFilter=Vt,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,i,r)}}const ag="colorSpace"in new Bn;class Nge extends Rw{constructor(e){super(e),this.type=On}parse(e){const I=Math.pow(2.7182818,2.2);function T(ee,se){for(var Ce=0,K=0;K<65536;++K)(K==0||ee[K>>3]&1<<(K&7))&&(se[Ce++]=K);for(var ae=Ce-1;Ce<65536;)se[Ce++]=0;return ae}function D(ee){for(var se=0;se<16384;se++)ee[se]={},ee[se].len=0,ee[se].lit=0,ee[se].p=null}const R={l:0,c:0,lc:0};function z(ee,se,Ce,K,ae){for(;Ce<ee;)se=se<<8|fe(K,ae),Ce+=8;Ce-=ee,R.l=se>>Ce&(1<<ee)-1,R.c=se,R.lc=Ce}const F=new Array(59);function V(ee){for(var se=0;se<=58;++se)F[se]=0;for(var se=0;se<65537;++se)F[ee[se]]+=1;for(var Ce=0,se=58;se>0;--se){var K=Ce+F[se]>>1;F[se]=Ce,Ce=K}for(var se=0;se<65537;++se){var ae=ee[se];ae>0&&(ee[se]=ae|F[ae]++<<6)}}function j(ee,se,Ce,K,ae,le,Se){for(var he=Ce,Ne=0,Qe=0;ae<=le;ae++){if(he.value-Ce.value>K)return!1;z(6,Ne,Qe,ee,he);var Xe=R.l;if(Ne=R.c,Qe=R.lc,Se[ae]=Xe,Xe==63){if(he.value-Ce.value>K)throw"Something wrong with hufUnpackEncTable";z(8,Ne,Qe,ee,he);var Pe=R.l+6;if(Ne=R.c,Qe=R.lc,ae+Pe>le+1)throw"Something wrong with hufUnpackEncTable";for(;Pe--;)Se[ae++]=0;ae--}else if(Xe>=59){var Pe=Xe-59+2;if(ae+Pe>le+1)throw"Something wrong with hufUnpackEncTable";for(;Pe--;)Se[ae++]=0;ae--}}V(Se)}function Z(ee){return ee&63}function U(ee){return ee>>6}function $(ee,se,Ce,K){for(;se<=Ce;se++){var ae=U(ee[se]),le=Z(ee[se]);if(ae>>le)throw"Invalid table entry";if(le>14){var Se=K[ae>>le-14];if(Se.len)throw"Invalid table entry";if(Se.lit++,Se.p){var he=Se.p;Se.p=new Array(Se.lit);for(var Ne=0;Ne<Se.lit-1;++Ne)Se.p[Ne]=he[Ne]}else Se.p=new Array(1);Se.p[Se.lit-1]=se}else if(le)for(var Qe=0,Ne=1<<14-le;Ne>0;Ne--){var Se=K[(ae<<14-le)+Qe];if(Se.len||Se.p)throw"Invalid table entry";Se.len=le,Se.lit=se,Qe++}}return!0}const X={c:0,lc:0};function Q(ee,se,Ce,K){ee=ee<<8|fe(Ce,K),se+=8,X.c=ee,X.lc=se}const J={c:0,lc:0};function ne(ee,se,Ce,K,ae,le,Se,he,Ne,Qe){if(ee==se){K<8&&(Q(Ce,K,ae,Se),Ce=X.c,K=X.lc),K-=8;var Xe=Ce>>K,Xe=new Uint8Array([Xe])[0];if(Ne.value+Xe>Qe)return!1;for(var Pe=he[Ne.value-1];Xe-- >0;)he[Ne.value++]=Pe}else if(Ne.value<Qe)he[Ne.value++]=ee;else return!1;J.c=Ce,J.lc=K}function O(ee){return ee&65535}function N(ee){var se=O(ee);return se>32767?se-65536:se}const G={a:0,b:0};function H(ee,se){var Ce=N(ee),K=N(se),ae=K,le=Ce+(ae&1)+(ae>>1),Se=le,he=le-ae;G.a=Se,G.b=he}function oe(ee,se){var Ce=O(ee),K=O(se),ae=Ce-(K>>1)&65535,le=K+ae-32768&65535;G.a=le,G.b=ae}function de(ee,se,Ce,K,ae,le,Se){for(var he=Se<16384,Ne=Ce>ae?ae:Ce,Qe=1,Xe;Qe<=Ne;)Qe<<=1;for(Qe>>=1,Xe=Qe,Qe>>=1;Qe>=1;){for(var Pe=0,vt=Pe+le*(ae-Xe),at=le*Qe,st=le*Xe,_t=K*Qe,It=K*Xe,Lt,qt,yt,ct;Pe<=vt;Pe+=st){for(var Ut=Pe,Ft=Pe+K*(Ce-Xe);Ut<=Ft;Ut+=It){var Qt=Ut+_t,Pn=Ut+at,Dn=Pn+_t;he?(H(ee[Ut+se],ee[Pn+se]),Lt=G.a,yt=G.b,H(ee[Qt+se],ee[Dn+se]),qt=G.a,ct=G.b,H(Lt,qt),ee[Ut+se]=G.a,ee[Qt+se]=G.b,H(yt,ct),ee[Pn+se]=G.a,ee[Dn+se]=G.b):(oe(ee[Ut+se],ee[Pn+se]),Lt=G.a,yt=G.b,oe(ee[Qt+se],ee[Dn+se]),qt=G.a,ct=G.b,oe(Lt,qt),ee[Ut+se]=G.a,ee[Qt+se]=G.b,oe(yt,ct),ee[Pn+se]=G.a,ee[Dn+se]=G.b)}if(Ce&Qe){var Pn=Ut+at;he?H(ee[Ut+se],ee[Pn+se]):oe(ee[Ut+se],ee[Pn+se]),Lt=G.a,ee[Pn+se]=G.b,ee[Ut+se]=Lt}}if(ae&Qe)for(var Ut=Pe,Ft=Pe+K*(Ce-Xe);Ut<=Ft;Ut+=It){var Qt=Ut+_t;he?H(ee[Ut+se],ee[Qt+se]):oe(ee[Ut+se],ee[Qt+se]),Lt=G.a,ee[Qt+se]=G.b,ee[Ut+se]=Lt}Xe=Qe,Qe>>=1}return Pe}function ce(ee,se,Ce,K,ae,le,Se,he,Ne,Qe){for(var Xe=0,Pe=0,vt=he,at=Math.trunc(ae.value+(le+7)/8);ae.value<at;)for(Q(Xe,Pe,Ce,ae),Xe=X.c,Pe=X.lc;Pe>=14;){var st=Xe>>Pe-14&16383,_t=se[st];if(_t.len)Pe-=_t.len,ne(_t.lit,Se,Xe,Pe,Ce,K,ae,Ne,Qe,vt),Xe=J.c,Pe=J.lc;else{if(!_t.p)throw"hufDecode issues";var It;for(It=0;It<_t.lit;It++){for(var Lt=Z(ee[_t.p[It]]);Pe<Lt&&ae.value<at;)Q(Xe,Pe,Ce,ae),Xe=X.c,Pe=X.lc;if(Pe>=Lt&&U(ee[_t.p[It]])==(Xe>>Pe-Lt&(1<<Lt)-1)){Pe-=Lt,ne(_t.p[It],Se,Xe,Pe,Ce,K,ae,Ne,Qe,vt),Xe=J.c,Pe=J.lc;break}}if(It==_t.lit)throw"hufDecode issues"}}var qt=8-le&7;for(Xe>>=qt,Pe-=qt;Pe>0;){var _t=se[Xe<<14-Pe&16383];if(_t.len)Pe-=_t.len,ne(_t.lit,Se,Xe,Pe,Ce,K,ae,Ne,Qe,vt),Xe=J.c,Pe=J.lc;else throw"hufDecode issues"}return!0}function ge(ee,se,Ce,K,ae,le){var Se={value:0},he=Ce.value,Ne=qe(se,Ce),Qe=qe(se,Ce);Ce.value+=4;var Xe=qe(se,Ce);if(Ce.value+=4,Ne<0||Ne>=65537||Qe<0||Qe>=65537)throw"Something wrong with HUF_ENCSIZE";var Pe=new Array(65537),vt=new Array(16384);D(vt);var at=K-(Ce.value-he);if(j(ee,se,Ce,at,Ne,Qe,Pe),Xe>8*(K-(Ce.value-he)))throw"Something wrong with hufUncompress";$(Pe,Ne,Qe,vt),ce(Pe,vt,ee,se,Ce,Xe,Qe,le,ae,Se)}function q(ee,se,Ce){for(var K=0;K<Ce;++K)se[K]=ee[se[K]]}function xe(ee){for(var se=1;se<ee.length;se++){var Ce=ee[se-1]+ee[se]-128;ee[se]=Ce}}function ue(ee,se){for(var Ce=0,K=Math.floor((ee.length+1)/2),ae=0,le=ee.length-1;!(ae>le||(se[ae++]=ee[Ce++],ae>le));)se[ae++]=ee[K++]}function me(ee){for(var se=ee.byteLength,Ce=new Array,K=0,ae=new DataView(ee);se>0;){var le=ae.getInt8(K++);if(le<0){var Se=-le;se-=Se+1;for(var he=0;he<Se;he++)Ce.push(ae.getUint8(K++))}else{var Se=le;se-=2;for(var Ne=ae.getUint8(K++),he=0;he<Se+1;he++)Ce.push(Ne)}}return Ce}function pe(ee,se,Ce,K,ae,le){var Qt=new DataView(le.buffer),Se=Ce[ee.idx[0]].width,he=Ce[ee.idx[0]].height,Ne=3,Qe=Math.floor(Se/8),Xe=Math.ceil(Se/8),Pe=Math.ceil(he/8),vt=Se-(Xe-1)*8,at=he-(Pe-1)*8,st={value:0},_t=new Array(Ne),It=new Array(Ne),Lt=new Array(Ne),qt=new Array(Ne),yt=new Array(Ne);for(let hn=0;hn<Ne;++hn)yt[hn]=se[ee.idx[hn]],_t[hn]=hn<1?0:_t[hn-1]+Xe*Pe,It[hn]=new Float32Array(64),Lt[hn]=new Uint16Array(64),qt[hn]=new Uint16Array(Xe*64);for(let hn=0;hn<Pe;++hn){var ct=8;hn==Pe-1&&(ct=at);var Ut=8;for(let on=0;on<Xe;++on){on==Xe-1&&(Ut=vt);for(let nn=0;nn<Ne;++nn)Lt[nn].fill(0),Lt[nn][0]=ae[_t[nn]++],Le(st,K,Lt[nn]),re(Lt[nn],It[nn]),ie(It[nn]);te(It);for(let nn=0;nn<Ne;++nn)W(It[nn],qt[nn],on*64)}let oi=0;for(let on=0;on<Ne;++on){const nn=Ce[ee.idx[on]].type;for(let ii=8*hn;ii<8*hn+ct;++ii){oi=yt[on][ii];for(let Jr=0;Jr<Qe;++Jr){const nr=Jr*64+(ii&7)*8;Qt.setUint16(oi+0*2*nn,qt[on][nr+0],!0),Qt.setUint16(oi+1*2*nn,qt[on][nr+1],!0),Qt.setUint16(oi+2*2*nn,qt[on][nr+2],!0),Qt.setUint16(oi+3*2*nn,qt[on][nr+3],!0),Qt.setUint16(oi+4*2*nn,qt[on][nr+4],!0),Qt.setUint16(oi+5*2*nn,qt[on][nr+5],!0),Qt.setUint16(oi+6*2*nn,qt[on][nr+6],!0),Qt.setUint16(oi+7*2*nn,qt[on][nr+7],!0),oi+=8*2*nn}}if(Qe!=Xe)for(let ii=8*hn;ii<8*hn+ct;++ii){const Jr=yt[on][ii]+8*Qe*2*nn,nr=Qe*64+(ii&7)*8;for(let _o=0;_o<Ut;++_o)Qt.setUint16(Jr+_o*2*nn,qt[on][nr+_o],!0)}}}for(var Ft=new Uint16Array(Se),Qt=new DataView(le.buffer),Pn=0;Pn<Ne;++Pn){Ce[ee.idx[Pn]].decoded=!0;var Dn=Ce[ee.idx[Pn]].type;if(Ce[Pn].type==2)for(var ni=0;ni<he;++ni){const hn=yt[Pn][ni];for(var ln=0;ln<Se;++ln)Ft[ln]=Qt.getUint16(hn+ln*2*Dn,!0);for(var ln=0;ln<Se;++ln)Qt.setFloat32(hn+ln*2*Dn,ye(Ft[ln]),!0)}}}function Le(ee,se,Ce){for(var K,ae=1;ae<64;)K=se[ee.value],K==65280?ae=64:K>>8==255?ae+=K&255:(Ce[ae]=K,ae++),ee.value++}function re(ee,se){se[0]=ye(ee[0]),se[1]=ye(ee[1]),se[2]=ye(ee[5]),se[3]=ye(ee[6]),se[4]=ye(ee[14]),se[5]=ye(ee[15]),se[6]=ye(ee[27]),se[7]=ye(ee[28]),se[8]=ye(ee[2]),se[9]=ye(ee[4]),se[10]=ye(ee[7]),se[11]=ye(ee[13]),se[12]=ye(ee[16]),se[13]=ye(ee[26]),se[14]=ye(ee[29]),se[15]=ye(ee[42]),se[16]=ye(ee[3]),se[17]=ye(ee[8]),se[18]=ye(ee[12]),se[19]=ye(ee[17]),se[20]=ye(ee[25]),se[21]=ye(ee[30]),se[22]=ye(ee[41]),se[23]=ye(ee[43]),se[24]=ye(ee[9]),se[25]=ye(ee[11]),se[26]=ye(ee[18]),se[27]=ye(ee[24]),se[28]=ye(ee[31]),se[29]=ye(ee[40]),se[30]=ye(ee[44]),se[31]=ye(ee[53]),se[32]=ye(ee[10]),se[33]=ye(ee[19]),se[34]=ye(ee[23]),se[35]=ye(ee[32]),se[36]=ye(ee[39]),se[37]=ye(ee[45]),se[38]=ye(ee[52]),se[39]=ye(ee[54]),se[40]=ye(ee[20]),se[41]=ye(ee[22]),se[42]=ye(ee[33]),se[43]=ye(ee[38]),se[44]=ye(ee[46]),se[45]=ye(ee[51]),se[46]=ye(ee[55]),se[47]=ye(ee[60]),se[48]=ye(ee[21]),se[49]=ye(ee[34]),se[50]=ye(ee[37]),se[51]=ye(ee[47]),se[52]=ye(ee[50]),se[53]=ye(ee[56]),se[54]=ye(ee[59]),se[55]=ye(ee[61]),se[56]=ye(ee[35]),se[57]=ye(ee[36]),se[58]=ye(ee[48]),se[59]=ye(ee[49]),se[60]=ye(ee[57]),se[61]=ye(ee[58]),se[62]=ye(ee[62]),se[63]=ye(ee[63])}function ie(ee){const se=.5*Math.cos(.7853975),Ce=.5*Math.cos(3.14159/16),K=.5*Math.cos(3.14159/8),ae=.5*Math.cos(3*3.14159/16),le=.5*Math.cos(5*3.14159/16),Se=.5*Math.cos(3*3.14159/8),he=.5*Math.cos(7*3.14159/16);for(var Ne=new Array(4),Qe=new Array(4),Xe=new Array(4),Pe=new Array(4),vt=0;vt<8;++vt){var at=vt*8;Ne[0]=K*ee[at+2],Ne[1]=Se*ee[at+2],Ne[2]=K*ee[at+6],Ne[3]=Se*ee[at+6],Qe[0]=Ce*ee[at+1]+ae*ee[at+3]+le*ee[at+5]+he*ee[at+7],Qe[1]=ae*ee[at+1]-he*ee[at+3]-Ce*ee[at+5]-le*ee[at+7],Qe[2]=le*ee[at+1]-Ce*ee[at+3]+he*ee[at+5]+ae*ee[at+7],Qe[3]=he*ee[at+1]-le*ee[at+3]+ae*ee[at+5]-Ce*ee[at+7],Xe[0]=se*(ee[at+0]+ee[at+4]),Xe[3]=se*(ee[at+0]-ee[at+4]),Xe[1]=Ne[0]+Ne[3],Xe[2]=Ne[1]-Ne[2],Pe[0]=Xe[0]+Xe[1],Pe[1]=Xe[3]+Xe[2],Pe[2]=Xe[3]-Xe[2],Pe[3]=Xe[0]-Xe[1],ee[at+0]=Pe[0]+Qe[0],ee[at+1]=Pe[1]+Qe[1],ee[at+2]=Pe[2]+Qe[2],ee[at+3]=Pe[3]+Qe[3],ee[at+4]=Pe[3]-Qe[3],ee[at+5]=Pe[2]-Qe[2],ee[at+6]=Pe[1]-Qe[1],ee[at+7]=Pe[0]-Qe[0]}for(var st=0;st<8;++st)Ne[0]=K*ee[16+st],Ne[1]=Se*ee[16+st],Ne[2]=K*ee[48+st],Ne[3]=Se*ee[48+st],Qe[0]=Ce*ee[8+st]+ae*ee[24+st]+le*ee[40+st]+he*ee[56+st],Qe[1]=ae*ee[8+st]-he*ee[24+st]-Ce*ee[40+st]-le*ee[56+st],Qe[2]=le*ee[8+st]-Ce*ee[24+st]+he*ee[40+st]+ae*ee[56+st],Qe[3]=he*ee[8+st]-le*ee[24+st]+ae*ee[40+st]-Ce*ee[56+st],Xe[0]=se*(ee[st]+ee[32+st]),Xe[3]=se*(ee[st]-ee[32+st]),Xe[1]=Ne[0]+Ne[3],Xe[2]=Ne[1]-Ne[2],Pe[0]=Xe[0]+Xe[1],Pe[1]=Xe[3]+Xe[2],Pe[2]=Xe[3]-Xe[2],Pe[3]=Xe[0]-Xe[1],ee[0+st]=Pe[0]+Qe[0],ee[8+st]=Pe[1]+Qe[1],ee[16+st]=Pe[2]+Qe[2],ee[24+st]=Pe[3]+Qe[3],ee[32+st]=Pe[3]-Qe[3],ee[40+st]=Pe[2]-Qe[2],ee[48+st]=Pe[1]-Qe[1],ee[56+st]=Pe[0]-Qe[0]}function te(ee){for(var se=0;se<64;++se){var Ce=ee[0][se],K=ee[1][se],ae=ee[2][se];ee[0][se]=Ce+1.5747*ae,ee[1][se]=Ce-.1873*K-.4682*ae,ee[2][se]=Ce+1.8556*K}}function W(ee,se,Ce){for(var K=0;K<64;++K)se[Ce+K]=rl.toHalfFloat(Me(ee[K]))}function Me(ee){return ee<=1?Math.sign(ee)*Math.pow(Math.abs(ee),2.2):Math.sign(ee)*Math.pow(I,Math.abs(ee)-1)}function De(ee){return new DataView(ee.array.buffer,ee.offset.value,ee.size)}function Ee(ee){var se=ee.viewer.buffer.slice(ee.offset.value,ee.offset.value+ee.size),Ce=new Uint8Array(me(se)),K=new Uint8Array(Ce.length);return xe(Ce),ue(Ce,K),new DataView(K.buffer)}function _e(ee){var se=ee.array.slice(ee.offset.value,ee.offset.value+ee.size),Ce=Ng(se),K=new Uint8Array(Ce.length);return xe(Ce),ue(Ce,K),new DataView(K.buffer)}function Ze(ee){for(var se=ee.viewer,Ce={value:ee.offset.value},K=new Uint16Array(ee.width*ee.scanlineBlockSize*(ee.channels*ee.type)),ae=new Uint8Array(8192),le=0,Se=new Array(ee.channels),he=0;he<ee.channels;he++)Se[he]={},Se[he].start=le,Se[he].end=Se[he].start,Se[he].nx=ee.width,Se[he].ny=ee.lines,Se[he].size=ee.type,le+=Se[he].nx*Se[he].ny*Se[he].size;var Ne=He(se,Ce),Qe=He(se,Ce);if(Qe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ne<=Qe)for(var he=0;he<Qe-Ne+1;he++)ae[he+Ne]=Ue(se,Ce);var Xe=new Uint16Array(65536),Pe=T(ae,Xe),vt=qe(se,Ce);ge(ee.array,se,Ce,vt,K,le);for(var he=0;he<ee.channels;++he)for(var at=Se[he],st=0;st<Se[he].size;++st)de(K,at.start+st,at.nx,at.size,at.ny,at.nx*at.size,Pe);q(Xe,K,le);for(var _t=0,It=new Uint8Array(K.buffer.byteLength),Lt=0;Lt<ee.lines;Lt++)for(var qt=0;qt<ee.channels;qt++){var at=Se[qt],yt=at.nx*at.size,ct=new Uint8Array(K.buffer,at.end*2,yt*2);It.set(ct,_t),_t+=yt*2,at.end+=yt}return new DataView(It.buffer)}function Oe(ee){var se=ee.array.slice(ee.offset.value,ee.offset.value+ee.size),Ce=Ng(se);const K=ee.lines*ee.channels*ee.width,ae=ee.type==1?new Uint16Array(K):new Uint32Array(K);let le=0,Se=0;const he=new Array(4);for(let Ne=0;Ne<ee.lines;Ne++)for(let Qe=0;Qe<ee.channels;Qe++){let Xe=0;switch(ee.type){case 1:he[0]=le,he[1]=he[0]+ee.width,le=he[1]+ee.width;for(let Pe=0;Pe<ee.width;++Pe){const vt=Ce[he[0]++]<<8|Ce[he[1]++];Xe+=vt,ae[Se]=Xe,Se++}break;case 2:he[0]=le,he[1]=he[0]+ee.width,he[2]=he[1]+ee.width,le=he[2]+ee.width;for(let Pe=0;Pe<ee.width;++Pe){const vt=Ce[he[0]++]<<24|Ce[he[1]++]<<16|Ce[he[2]++]<<8;Xe+=vt,ae[Se]=Xe,Se++}break}}return new DataView(ae.buffer)}function we(ee){var se=ee.viewer,Ce={value:ee.offset.value},K=new Uint8Array(ee.width*ee.lines*(ee.channels*ee.type*2)),ae={version:it(se,Ce),unknownUncompressedSize:it(se,Ce),unknownCompressedSize:it(se,Ce),acCompressedSize:it(se,Ce),dcCompressedSize:it(se,Ce),rleCompressedSize:it(se,Ce),rleUncompressedSize:it(se,Ce),rleRawSize:it(se,Ce),totalAcUncompressedCount:it(se,Ce),totalDcUncompressedCount:it(se,Ce),acCompression:it(se,Ce)};if(ae.version<2)throw"EXRLoader.parse: "+fi.compression+" version "+ae.version+" is unsupported";for(var le=new Array,Se=He(se,Ce)-2;Se>0;){var he=be(se.buffer,Ce),Ne=Ue(se,Ce),Qe=Ne>>2&3,Xe=(Ne>>4)-1,Pe=new Int8Array([Xe])[0],vt=Ue(se,Ce);le.push({name:he,index:Pe,type:vt,compression:Qe}),Se-=he.length+3}for(var at=fi.channels,st=new Array(ee.channels),_t=0;_t<ee.channels;++_t){var It=st[_t]={},Lt=at[_t];It.name=Lt.name,It.compression=0,It.decoded=!1,It.type=Lt.pixelType,It.pLinear=Lt.pLinear,It.width=ee.width,It.height=ee.lines}for(var qt={idx:new Array(3)},yt=0;yt<ee.channels;++yt)for(var It=st[yt],_t=0;_t<le.length;++_t){var ct=le[_t];It.name==ct.name&&(It.compression=ct.compression,ct.index>=0&&(qt.idx[ct.index]=yt),It.offset=yt)}if(ae.acCompressedSize>0)switch(ae.acCompression){case 0:var Qt=new Uint16Array(ae.totalAcUncompressedCount);ge(ee.array,se,Ce,ae.acCompressedSize,Qt,ae.totalAcUncompressedCount);break;case 1:var Ut=ee.array.slice(Ce.value,Ce.value+ae.totalAcUncompressedCount),Ft=Ng(Ut),Qt=new Uint16Array(Ft.buffer);Ce.value+=ae.totalAcUncompressedCount;break}if(ae.dcCompressedSize>0){var Pn={array:ee.array,offset:Ce,size:ae.dcCompressedSize},Dn=new Uint16Array(_e(Pn).buffer);Ce.value+=ae.dcCompressedSize}if(ae.rleRawSize>0){var Ut=ee.array.slice(Ce.value,Ce.value+ae.rleCompressedSize),Ft=Ng(Ut),ni=me(Ft.buffer);Ce.value+=ae.rleCompressedSize}for(var ln=0,hn=new Array(st.length),_t=0;_t<hn.length;++_t)hn[_t]=new Array;for(var oi=0;oi<ee.lines;++oi)for(var on=0;on<st.length;++on)hn[on].push(ln),ln+=st[on].width*ee.type*2;pe(qt,hn,st,Qt,Dn,K);for(var _t=0;_t<st.length;++_t){var It=st[_t];if(!It.decoded)switch(It.compression){case 2:for(var nn=0,ii=0,oi=0;oi<ee.lines;++oi){for(var Jr=hn[_t][nn],nr=0;nr<It.width;++nr){for(var _o=0;_o<2*It.type;++_o)K[Jr++]=ni[ii+_o*It.width*It.height];ii++}nn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(K.buffer)}function be(ee,se){for(var Ce=new Uint8Array(ee),K=0;Ce[se.value+K]!=0;)K+=1;var ae=new TextDecoder().decode(Ce.slice(se.value,se.value+K));return se.value=se.value+K+1,ae}function Be(ee,se,Ce){var K=new TextDecoder().decode(new Uint8Array(ee).slice(se.value,se.value+Ce));return se.value=se.value+Ce,K}function Ve(ee,se){var Ce=$e(ee,se),K=qe(ee,se);return[Ce,K]}function ot(ee,se){var Ce=qe(ee,se),K=qe(ee,se);return[Ce,K]}function $e(ee,se){var Ce=ee.getInt32(se.value,!0);return se.value=se.value+4,Ce}function qe(ee,se){var Ce=ee.getUint32(se.value,!0);return se.value=se.value+4,Ce}function fe(ee,se){var Ce=ee[se.value];return se.value=se.value+1,Ce}function Ue(ee,se){var Ce=ee.getUint8(se.value);return se.value=se.value+1,Ce}const it=function(ee,se){let Ce;return"getBigInt64"in DataView.prototype?Ce=Number(ee.getBigInt64(se.value,!0)):Ce=ee.getUint32(se.value+4,!0)+Number(ee.getUint32(se.value,!0)<<32),se.value+=8,Ce};function Ae(ee,se){var Ce=ee.getFloat32(se.value,!0);return se.value+=4,Ce}function Ye(ee,se){return rl.toHalfFloat(Ae(ee,se))}function ye(ee){var se=(ee&31744)>>10,Ce=ee&1023;return(ee>>15?-1:1)*(se?se===31?Ce?NaN:1/0:Math.pow(2,se-15)*(1+Ce/1024):6103515625e-14*(Ce/1024))}function He(ee,se){var Ce=ee.getUint16(se.value,!0);return se.value+=2,Ce}function lt(ee,se){return ye(He(ee,se))}function mt(ee,se,Ce,K){for(var ae=Ce.value,le=[];Ce.value<ae+K-1;){var Se=be(se,Ce),he=$e(ee,Ce),Ne=Ue(ee,Ce);Ce.value+=3;var Qe=$e(ee,Ce),Xe=$e(ee,Ce);le.push({name:Se,pixelType:he,pLinear:Ne,xSampling:Qe,ySampling:Xe})}return Ce.value+=1,le}function dt(ee,se){var Ce=Ae(ee,se),K=Ae(ee,se),ae=Ae(ee,se),le=Ae(ee,se),Se=Ae(ee,se),he=Ae(ee,se),Ne=Ae(ee,se),Qe=Ae(ee,se);return{redX:Ce,redY:K,greenX:ae,greenY:le,blueX:Se,blueY:he,whiteX:Ne,whiteY:Qe}}function Ot(ee,se){var Ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],K=Ue(ee,se);return Ce[K]}function Xt(ee,se){var Ce=qe(ee,se),K=qe(ee,se),ae=qe(ee,se),le=qe(ee,se);return{xMin:Ce,yMin:K,xMax:ae,yMax:le}}function gt(ee,se){var Ce=["INCREASING_Y"],K=Ue(ee,se);return Ce[K]}function en(ee,se){var Ce=Ae(ee,se),K=Ae(ee,se);return[Ce,K]}function _n(ee,se){var Ce=Ae(ee,se),K=Ae(ee,se),ae=Ae(ee,se);return[Ce,K,ae]}function vi(ee,se,Ce,K,ae){if(K==="string"||K==="stringvector"||K==="iccProfile")return Be(se,Ce,ae);if(K==="chlist")return mt(ee,se,Ce,ae);if(K==="chromaticities")return dt(ee,Ce);if(K==="compression")return Ot(ee,Ce);if(K==="box2i")return Xt(ee,Ce);if(K==="lineOrder")return gt(ee,Ce);if(K==="float")return Ae(ee,Ce);if(K==="v2f")return en(ee,Ce);if(K==="v3f")return _n(ee,Ce);if(K==="int")return $e(ee,Ce);if(K==="rational")return Ve(ee,Ce);if(K==="timecode")return ot(ee,Ce);if(K==="preview")return Ce.value+=ae,"skipped";Ce.value+=ae}function zn(ee,se,Ce){const K={};if(ee.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";K.version=ee.getUint8(4);const ae=ee.getUint8(5);K.spec={singleTile:!!(ae&2),longName:!!(ae&4),deepFormat:!!(ae&8),multiPart:!!(ae&16)},Ce.value=8;for(var le=!0;le;){var Se=be(se,Ce);if(Se==0)le=!1;else{var he=be(se,Ce),Ne=qe(ee,Ce),Qe=vi(ee,se,Ce,he,Ne);Qe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${he}'.`):K[Se]=Qe}}if(ae&-5)throw console.error("EXRHeader:",K),"THREE.EXRLoader: provided file is currently unsupported.";return K}function er(ee,se,Ce,K,ae){const le={size:0,viewer:se,array:Ce,offset:K,width:ee.dataWindow.xMax-ee.dataWindow.xMin+1,height:ee.dataWindow.yMax-ee.dataWindow.yMin+1,channels:ee.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ee.channels[0].pixelType,uncompress:null,getter:null,format:null,[ag?"colorSpace":"encoding"]:null};switch(ee.compression){case"NO_COMPRESSION":le.lines=1,le.uncompress=De;break;case"RLE_COMPRESSION":le.lines=1,le.uncompress=Ee;break;case"ZIPS_COMPRESSION":le.lines=1,le.uncompress=_e;break;case"ZIP_COMPRESSION":le.lines=16,le.uncompress=_e;break;case"PIZ_COMPRESSION":le.lines=32,le.uncompress=Ze;break;case"PXR24_COMPRESSION":le.lines=16,le.uncompress=Oe;break;case"DWAA_COMPRESSION":le.lines=32,le.uncompress=we;break;case"DWAB_COMPRESSION":le.lines=256,le.uncompress=we;break;default:throw"EXRLoader.parse: "+ee.compression+" is unsupported"}if(le.scanlineBlockSize=le.lines,le.type==1)switch(ae){case vn:le.getter=lt,le.inputSize=2;break;case On:le.getter=He,le.inputSize=2;break}else if(le.type==2)switch(ae){case vn:le.getter=Ae,le.inputSize=4;break;case On:le.getter=Ye,le.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+le.type+" for "+ee.compression+".";le.blockCount=(ee.dataWindow.yMax+1)/le.scanlineBlockSize;for(var Se=0;Se<le.blockCount;Se++)it(se,K);le.outputChannels=le.channels==3?4:le.channels;const he=le.width*le.height*le.outputChannels;switch(ae){case vn:le.byteArray=new Float32Array(he),le.channels<le.outputChannels&&le.byteArray.fill(1,0,he);break;case On:le.byteArray=new Uint16Array(he),le.channels<le.outputChannels&&le.byteArray.fill(15360,0,he);break;default:console.error("THREE.EXRLoader: unsupported type: ",ae);break}return le.bytesPerLine=le.width*le.inputSize*le.channels,le.outputChannels==4?le.format=In:le.format=co,ag?le.colorSpace="srgb-linear":le.encoding=3e3,le}const tr=new DataView(e),hr=new Uint8Array(e),Di={value:0},fi=zn(tr,e,Di),Yt=er(fi,tr,hr,Di,this.type),si={value:0},Or={R:0,G:1,B:2,A:3,Y:0};for(let ee=0;ee<Yt.height/Yt.scanlineBlockSize;ee++){const se=qe(tr,Di);Yt.size=qe(tr,Di),Yt.lines=se+Yt.scanlineBlockSize>Yt.height?Yt.height-se:Yt.scanlineBlockSize;const K=Yt.size<Yt.lines*Yt.bytesPerLine?Yt.uncompress(Yt):De(Yt);Di.value+=Yt.size;for(let ae=0;ae<Yt.scanlineBlockSize;ae++){const le=ae+ee*Yt.scanlineBlockSize;if(le>=Yt.height)break;for(let Se=0;Se<Yt.channels;Se++){const he=Or[fi.channels[Se].name];for(let Ne=0;Ne<Yt.width;Ne++){si.value=(ae*(Yt.channels*Yt.width)+Se*Yt.width+Ne)*Yt.inputSize;const Qe=(Yt.height-1-le)*(Yt.width*Yt.outputChannels)+Ne*Yt.outputChannels+he;Yt.byteArray[Qe]=Yt.getter(K,si)}}}}return{header:fi,width:Yt.width,height:Yt.height,data:Yt.byteArray,format:Yt.format,[ag?"colorSpace":"encoding"]:Yt[ag?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){ag?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Vt,o.magFilter=Vt,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,a)}return super.load(e,s,i,r)}}const Gge="srgb";class mA extends Zi{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,i,r){const s=this,o=new Gi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this;function i(O,N){if(O.nodeType!==1)return;const G=w(O);let H=!1,oe=null;switch(O.nodeName){case"svg":N=p(O,N);break;case"style":s(O);break;case"g":N=p(O,N);break;case"path":N=p(O,N),O.hasAttribute("d")&&(oe=r(O));break;case"rect":N=p(O,N),oe=l(O);break;case"polygon":N=p(O,N),oe=c(O);break;case"polyline":N=p(O,N),oe=u(O);break;case"circle":N=p(O,N),oe=f(O);break;case"ellipse":N=p(O,N),oe=h(O);break;case"line":N=p(O,N),oe=d(O);break;case"defs":H=!0;break;case"use":N=p(O,N);const ge=(O.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),q=O.viewportElement.getElementById(ge);q?i(q,N):console.warn("SVGLoader: 'use node' references non-existent node id: "+ge);break}oe&&(N.fill!==void 0&&N.fill!=="none"&&oe.color.setStyle(N.fill,Gge),C(oe,Q),R.push(oe),oe.userData={node:O,style:N});const de=O.childNodes;for(let ce=0;ce<de.length;ce++){const ge=de[ce];H&&ge.nodeName!=="style"&&ge.nodeName!=="defs"||i(ge,N)}G&&(F.pop(),F.length>0?Q.copy(F[F.length-1]):Q.identity())}function r(O){const N=new Bc,G=new Ie,H=new Ie,oe=new Ie;let de=!0,ce=!1;const ge=O.getAttribute("d");if(ge===""||ge==="none")return null;const q=ge.match(/[a-df-z][^a-df-z]*/gi);for(let xe=0,ue=q.length;xe<ue;xe++){const me=q[xe],pe=me.charAt(0),Le=me.slice(1).trim();de===!0&&(ce=!0,de=!1);let re;switch(pe){case"M":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2)G.x=re[ie+0],G.y=re[ie+1],H.x=G.x,H.y=G.y,ie===0?N.moveTo(G.x,G.y):N.lineTo(G.x,G.y),ie===0&&oe.copy(G);break;case"H":re=A(Le);for(let ie=0,te=re.length;ie<te;ie++)G.x=re[ie],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"V":re=A(Le);for(let ie=0,te=re.length;ie<te;ie++)G.y=re[ie],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"L":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2)G.x=re[ie+0],G.y=re[ie+1],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"C":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=6)N.bezierCurveTo(re[ie+0],re[ie+1],re[ie+2],re[ie+3],re[ie+4],re[ie+5]),H.x=re[ie+2],H.y=re[ie+3],G.x=re[ie+4],G.y=re[ie+5],ie===0&&ce===!0&&oe.copy(G);break;case"S":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=4)N.bezierCurveTo(g(G.x,H.x),g(G.y,H.y),re[ie+0],re[ie+1],re[ie+2],re[ie+3]),H.x=re[ie+0],H.y=re[ie+1],G.x=re[ie+2],G.y=re[ie+3],ie===0&&ce===!0&&oe.copy(G);break;case"Q":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=4)N.quadraticCurveTo(re[ie+0],re[ie+1],re[ie+2],re[ie+3]),H.x=re[ie+0],H.y=re[ie+1],G.x=re[ie+2],G.y=re[ie+3],ie===0&&ce===!0&&oe.copy(G);break;case"T":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2){const W=g(G.x,H.x),Me=g(G.y,H.y);N.quadraticCurveTo(W,Me,re[ie+0],re[ie+1]),H.x=W,H.y=Me,G.x=re[ie+0],G.y=re[ie+1],ie===0&&ce===!0&&oe.copy(G)}break;case"A":re=A(Le,[3,4],7);for(let ie=0,te=re.length;ie<te;ie+=7){if(re[ie+5]==G.x&&re[ie+6]==G.y)continue;const W=G.clone();G.x=re[ie+5],G.y=re[ie+6],H.x=G.x,H.y=G.y,o(N,re[ie],re[ie+1],re[ie+2],re[ie+3],re[ie+4],W,G),ie===0&&ce===!0&&oe.copy(G)}break;case"m":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2)G.x+=re[ie+0],G.y+=re[ie+1],H.x=G.x,H.y=G.y,ie===0?N.moveTo(G.x,G.y):N.lineTo(G.x,G.y),ie===0&&oe.copy(G);break;case"h":re=A(Le);for(let ie=0,te=re.length;ie<te;ie++)G.x+=re[ie],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"v":re=A(Le);for(let ie=0,te=re.length;ie<te;ie++)G.y+=re[ie],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"l":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2)G.x+=re[ie+0],G.y+=re[ie+1],H.x=G.x,H.y=G.y,N.lineTo(G.x,G.y),ie===0&&ce===!0&&oe.copy(G);break;case"c":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=6)N.bezierCurveTo(G.x+re[ie+0],G.y+re[ie+1],G.x+re[ie+2],G.y+re[ie+3],G.x+re[ie+4],G.y+re[ie+5]),H.x=G.x+re[ie+2],H.y=G.y+re[ie+3],G.x+=re[ie+4],G.y+=re[ie+5],ie===0&&ce===!0&&oe.copy(G);break;case"s":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=4)N.bezierCurveTo(g(G.x,H.x),g(G.y,H.y),G.x+re[ie+0],G.y+re[ie+1],G.x+re[ie+2],G.y+re[ie+3]),H.x=G.x+re[ie+0],H.y=G.y+re[ie+1],G.x+=re[ie+2],G.y+=re[ie+3],ie===0&&ce===!0&&oe.copy(G);break;case"q":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=4)N.quadraticCurveTo(G.x+re[ie+0],G.y+re[ie+1],G.x+re[ie+2],G.y+re[ie+3]),H.x=G.x+re[ie+0],H.y=G.y+re[ie+1],G.x+=re[ie+2],G.y+=re[ie+3],ie===0&&ce===!0&&oe.copy(G);break;case"t":re=A(Le);for(let ie=0,te=re.length;ie<te;ie+=2){const W=g(G.x,H.x),Me=g(G.y,H.y);N.quadraticCurveTo(W,Me,G.x+re[ie+0],G.y+re[ie+1]),H.x=W,H.y=Me,G.x=G.x+re[ie+0],G.y=G.y+re[ie+1],ie===0&&ce===!0&&oe.copy(G)}break;case"a":re=A(Le,[3,4],7);for(let ie=0,te=re.length;ie<te;ie+=7){if(re[ie+5]==0&&re[ie+6]==0)continue;const W=G.clone();G.x+=re[ie+5],G.y+=re[ie+6],H.x=G.x,H.y=G.y,o(N,re[ie],re[ie+1],re[ie+2],re[ie+3],re[ie+4],W,G),ie===0&&ce===!0&&oe.copy(G)}break;case"Z":case"z":N.currentPath.autoClose=!0,N.currentPath.curves.length>0&&(G.copy(oe),N.currentPath.currentPoint.copy(G),de=!0);break;default:console.warn(me)}ce=!1}return N}function s(O){if(!(!O.sheet||!O.sheet.cssRules||!O.sheet.cssRules.length))for(let N=0;N<O.sheet.cssRules.length;N++){const G=O.sheet.cssRules[N];if(G.type!==1)continue;const H=G.selectorText.split(/,/gm).filter(Boolean).map(oe=>oe.trim());for(let oe=0;oe<H.length;oe++){const de=Object.fromEntries(Object.entries(G.style).filter(([,ce])=>ce!==""));z[H[oe]]=Object.assign(z[H[oe]]||{},de)}}}function o(O,N,G,H,oe,de,ce,ge){if(N==0||G==0){O.lineTo(ge.x,ge.y);return}H=H*Math.PI/180,N=Math.abs(N),G=Math.abs(G);const q=(ce.x-ge.x)/2,xe=(ce.y-ge.y)/2,ue=Math.cos(H)*q+Math.sin(H)*xe,me=-Math.sin(H)*q+Math.cos(H)*xe;let pe=N*N,Le=G*G;const re=ue*ue,ie=me*me,te=re/pe+ie/Le;if(te>1){const Be=Math.sqrt(te);N=Be*N,G=Be*G,pe=N*N,Le=G*G}const W=pe*ie+Le*re,Me=(pe*Le-W)/W;let De=Math.sqrt(Math.max(0,Me));oe===de&&(De=-De);const Ee=De*N*me/G,_e=-De*G*ue/N,Ze=Math.cos(H)*Ee-Math.sin(H)*_e+(ce.x+ge.x)/2,Oe=Math.sin(H)*Ee+Math.cos(H)*_e+(ce.y+ge.y)/2,we=a(1,0,(ue-Ee)/N,(me-_e)/G),be=a((ue-Ee)/N,(me-_e)/G,(-ue-Ee)/N,(-me-_e)/G)%(Math.PI*2);O.currentPath.absellipse(Ze,Oe,N,G,we,we+be,de===0,H)}function a(O,N,G,H){const oe=O*G+N*H,de=Math.sqrt(O*O+N*N)*Math.sqrt(G*G+H*H);let ce=Math.acos(Math.max(-1,Math.min(1,oe/de)));return O*H-N*G<0&&(ce=-ce),ce}function l(O){const N=y(O.getAttribute("x")||0),G=y(O.getAttribute("y")||0),H=y(O.getAttribute("rx")||O.getAttribute("ry")||0),oe=y(O.getAttribute("ry")||O.getAttribute("rx")||0),de=y(O.getAttribute("width")),ce=y(O.getAttribute("height")),ge=1-.551915024494,q=new Bc;return q.moveTo(N+H,G),q.lineTo(N+de-H,G),(H!==0||oe!==0)&&q.bezierCurveTo(N+de-H*ge,G,N+de,G+oe*ge,N+de,G+oe),q.lineTo(N+de,G+ce-oe),(H!==0||oe!==0)&&q.bezierCurveTo(N+de,G+ce-oe*ge,N+de-H*ge,G+ce,N+de-H,G+ce),q.lineTo(N+H,G+ce),(H!==0||oe!==0)&&q.bezierCurveTo(N+H*ge,G+ce,N,G+ce-oe*ge,N,G+ce-oe),q.lineTo(N,G+oe),(H!==0||oe!==0)&&q.bezierCurveTo(N,G+oe*ge,N+H*ge,G,N+H,G),q}function c(O){function N(de,ce,ge){const q=y(ce),xe=y(ge);oe===0?H.moveTo(q,xe):H.lineTo(q,xe),oe++}const G=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,H=new Bc;let oe=0;return O.getAttribute("points").replace(G,N),H.currentPath.autoClose=!0,H}function u(O){function N(de,ce,ge){const q=y(ce),xe=y(ge);oe===0?H.moveTo(q,xe):H.lineTo(q,xe),oe++}const G=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,H=new Bc;let oe=0;return O.getAttribute("points").replace(G,N),H.currentPath.autoClose=!1,H}function f(O){const N=y(O.getAttribute("cx")||0),G=y(O.getAttribute("cy")||0),H=y(O.getAttribute("r")||0),oe=new uf;oe.absarc(N,G,H,0,Math.PI*2);const de=new Bc;return de.subPaths.push(oe),de}function h(O){const N=y(O.getAttribute("cx")||0),G=y(O.getAttribute("cy")||0),H=y(O.getAttribute("rx")||0),oe=y(O.getAttribute("ry")||0),de=new uf;de.absellipse(N,G,H,oe,0,Math.PI*2);const ce=new Bc;return ce.subPaths.push(de),ce}function d(O){const N=y(O.getAttribute("x1")||0),G=y(O.getAttribute("y1")||0),H=y(O.getAttribute("x2")||0),oe=y(O.getAttribute("y2")||0),de=new Bc;return de.moveTo(N,G),de.lineTo(H,oe),de.currentPath.autoClose=!1,de}function p(O,N){N=Object.assign({},N);let G={};if(O.hasAttribute("class")){const ce=O.getAttribute("class").split(/\s/).filter(Boolean).map(ge=>ge.trim());for(let ge=0;ge<ce.length;ge++)G=Object.assign(G,z["."+ce[ge]])}O.hasAttribute("id")&&(G=Object.assign(G,z["#"+O.getAttribute("id")]));function H(ce,ge,q){q===void 0&&(q=function(ue){return ue.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ue}),O.hasAttribute(ce)&&(N[ge]=q(O.getAttribute(ce))),G[ce]&&(N[ge]=q(G[ce])),O.style&&O.style[ce]!==""&&(N[ge]=q(O.style[ce]))}function oe(ce){return Math.max(0,Math.min(1,y(ce)))}function de(ce){return Math.max(0,y(ce))}return H("fill","fill"),H("fill-opacity","fillOpacity",oe),H("fill-rule","fillRule"),H("opacity","opacity",oe),H("stroke","stroke"),H("stroke-opacity","strokeOpacity",oe),H("stroke-width","strokeWidth",de),H("stroke-linejoin","strokeLineJoin"),H("stroke-linecap","strokeLineCap"),H("stroke-miterlimit","strokeMiterLimit",de),H("visibility","visibility"),N}function g(O,N){return O-(N-O)}function A(O,N,G){if(typeof O!="string")throw new TypeError("Invalid input: "+typeof O);const H={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},oe=0,de=1,ce=2,ge=3;let q=oe,xe=!0,ue="",me="";const pe=[];function Le(W,Me,De){const Ee=new SyntaxError('Unexpected character "'+W+'" at index '+Me+".");throw Ee.partial=De,Ee}function re(){ue!==""&&(me===""?pe.push(Number(ue)):pe.push(Number(ue)*Math.pow(10,Number(me)))),ue="",me=""}let ie;const te=O.length;for(let W=0;W<te;W++){if(ie=O[W],Array.isArray(N)&&N.includes(pe.length%G)&&H.FLAGS.test(ie)){q=de,ue=ie,re();continue}if(q===oe){if(H.WHITESPACE.test(ie))continue;if(H.DIGIT.test(ie)||H.SIGN.test(ie)){q=de,ue=ie;continue}if(H.POINT.test(ie)){q=ce,ue=ie;continue}H.COMMA.test(ie)&&(xe&&Le(ie,W,pe),xe=!0)}if(q===de){if(H.DIGIT.test(ie)){ue+=ie;continue}if(H.POINT.test(ie)){ue+=ie,q=ce;continue}if(H.EXP.test(ie)){q=ge;continue}H.SIGN.test(ie)&&ue.length===1&&H.SIGN.test(ue[0])&&Le(ie,W,pe)}if(q===ce){if(H.DIGIT.test(ie)){ue+=ie;continue}if(H.EXP.test(ie)){q=ge;continue}H.POINT.test(ie)&&ue[ue.length-1]==="."&&Le(ie,W,pe)}if(q===ge){if(H.DIGIT.test(ie)){me+=ie;continue}if(H.SIGN.test(ie)){if(me===""){me+=ie;continue}me.length===1&&H.SIGN.test(me)&&Le(ie,W,pe)}}H.WHITESPACE.test(ie)?(re(),q=oe,xe=!1):H.COMMA.test(ie)?(re(),q=oe,xe=!0):H.SIGN.test(ie)?(re(),q=de,ue=ie):H.POINT.test(ie)?(re(),q=ce,ue=ie):Le(ie,W,pe)}return re(),pe}const m=["mm","cm","in","pt","pc","px"],v={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function y(O){let N="px";if(typeof O=="string"||O instanceof String)for(let H=0,oe=m.length;H<oe;H++){const de=m[H];if(O.endsWith(de)){N=de,O=O.substring(0,O.length-de.length);break}}let G;return N==="px"&&n.defaultUnit!=="px"?G=v.in[n.defaultUnit]/n.defaultDPI:(G=v[N][n.defaultUnit],G<0&&(G=v[N].in*n.defaultDPI)),G*parseFloat(O)}function w(O){if(!(O.hasAttribute("transform")||O.nodeName==="use"&&(O.hasAttribute("x")||O.hasAttribute("y"))))return null;const N=S(O);return F.length>0&&N.premultiply(F[F.length-1]),Q.copy(N),F.push(N),N}function S(O){const N=new jt,G=V;if(O.nodeName==="use"&&(O.hasAttribute("x")||O.hasAttribute("y"))){const H=y(O.getAttribute("x")),oe=y(O.getAttribute("y"));N.translate(H,oe)}if(O.hasAttribute("transform")){const H=O.getAttribute("transform").split(")");for(let oe=H.length-1;oe>=0;oe--){const de=H[oe].trim();if(de==="")continue;const ce=de.indexOf("("),ge=de.length;if(ce>0&&ce<ge){const q=de.slice(0,ce),xe=A(de.slice(ce+1));switch(G.identity(),q){case"translate":if(xe.length>=1){const ue=xe[0];let me=0;xe.length>=2&&(me=xe[1]),G.translate(ue,me)}break;case"rotate":if(xe.length>=1){let ue=0,me=0,pe=0;ue=xe[0]*Math.PI/180,xe.length>=3&&(me=xe[1],pe=xe[2]),j.makeTranslation(-me,-pe),Z.makeRotation(ue),U.multiplyMatrices(Z,j),j.makeTranslation(me,pe),G.multiplyMatrices(j,U)}break;case"scale":if(xe.length>=1){const ue=xe[0];let me=ue;xe.length>=2&&(me=xe[1]),G.scale(ue,me)}break;case"skewX":xe.length===1&&G.set(1,Math.tan(xe[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":xe.length===1&&G.set(1,0,0,Math.tan(xe[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":xe.length===6&&G.set(xe[0],xe[2],xe[4],xe[1],xe[3],xe[5],0,0,1);break}}N.premultiply(G)}}return N}function C(O,N){function G(ce){X.set(ce.x,ce.y,1).applyMatrix3(N),ce.set(X.x,X.y)}function H(ce){const ge=ce.xRadius,q=ce.yRadius,xe=Math.cos(ce.aRotation),ue=Math.sin(ce.aRotation),me=new L(ge*xe,ge*ue,0),pe=new L(-q*ue,q*xe,0),Le=me.applyMatrix3(N),re=pe.applyMatrix3(N),ie=V.set(Le.x,re.x,0,Le.y,re.y,0,0,0,1),te=j.copy(ie).invert(),De=Z.copy(te).transpose().multiply(te).elements,Ee=D(De[0],De[1],De[4]),_e=Math.sqrt(Ee.rt1),Ze=Math.sqrt(Ee.rt2);if(ce.xRadius=1/_e,ce.yRadius=1/Ze,ce.aRotation=Math.atan2(Ee.sn,Ee.cs),!((ce.aEndAngle-ce.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const we=j.set(_e,0,0,0,Ze,0,0,0,1),be=Z.set(Ee.cs,Ee.sn,0,-Ee.sn,Ee.cs,0,0,0,1),Be=we.multiply(be).multiply(ie),Ve=ot=>{const{x:$e,y:qe}=new L(Math.cos(ot),Math.sin(ot),0).applyMatrix3(Be);return Math.atan2(qe,$e)};ce.aStartAngle=Ve(ce.aStartAngle),ce.aEndAngle=Ve(ce.aEndAngle),b(N)&&(ce.aClockwise=!ce.aClockwise)}}function oe(ce){const ge=I(N),q=T(N);ce.xRadius*=ge,ce.yRadius*=q;const xe=ge>Number.EPSILON?Math.atan2(N.elements[1],N.elements[0]):Math.atan2(-N.elements[3],N.elements[4]);ce.aRotation+=xe,b(N)&&(ce.aStartAngle*=-1,ce.aEndAngle*=-1,ce.aClockwise=!ce.aClockwise)}const de=O.subPaths;for(let ce=0,ge=de.length;ce<ge;ce++){const xe=de[ce].curves;for(let ue=0;ue<xe.length;ue++){const me=xe[ue];me.isLineCurve?(G(me.v1),G(me.v2)):me.isCubicBezierCurve?(G(me.v0),G(me.v1),G(me.v2),G(me.v3)):me.isQuadraticBezierCurve?(G(me.v0),G(me.v1),G(me.v2)):me.isEllipseCurve&&($.set(me.aX,me.aY),G($),me.aX=$.x,me.aY=$.y,M(N)?H(me):oe(me))}}}function b(O){const N=O.elements;return N[0]*N[4]-N[1]*N[3]<0}function M(O){const N=O.elements,G=N[0]*N[3]+N[1]*N[4];if(G===0)return!1;const H=I(O),oe=T(O);return Math.abs(G/(H*oe))>Number.EPSILON}function I(O){const N=O.elements;return Math.sqrt(N[0]*N[0]+N[1]*N[1])}function T(O){const N=O.elements;return Math.sqrt(N[3]*N[3]+N[4]*N[4])}function D(O,N,G){let H,oe,de,ce,ge;const q=O+G,xe=O-G,ue=Math.sqrt(xe*xe+4*N*N);return q>0?(H=.5*(q+ue),ge=1/H,oe=O*ge*G-N*ge*N):q<0?oe=.5*(q-ue):(H=.5*ue,oe=-.5*ue),xe>0?de=xe+ue:de=xe-ue,Math.abs(de)>2*Math.abs(N)?(ge=-2*N/de,ce=1/Math.sqrt(1+ge*ge),de=ge*ce):Math.abs(N)===0?(de=1,ce=0):(ge=-.5*de/N,de=1/Math.sqrt(1+ge*ge),ce=ge*de),xe>0&&(ge=de,de=-ce,ce=ge),{rt1:H,rt2:oe,cs:de,sn:ce}}const R=[],z={},F=[],V=new jt,j=new jt,Z=new jt,U=new jt,$=new Ie,X=new L,Q=new jt,J=new DOMParser().parseFromString(e,"image/svg+xml");return i(J.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:R,xml:J.documentElement}}static createShapes(e){const i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:i.ORIGIN,t:0};function s(g,A,m,v){const y=g.x,w=A.x,S=m.x,C=v.x,b=g.y,M=A.y,I=m.y,T=v.y,D=(C-S)*(b-I)-(T-I)*(y-S),R=(w-y)*(b-I)-(M-b)*(y-S),z=(T-I)*(w-y)-(C-S)*(M-b),F=D/z,V=R/z;if(z===0&&D!==0||F<=0||F>=1||V<0||V>1)return null;if(D===0&&z===0){for(let j=0;j<2;j++)if(o(j===0?m:v,g,A),r.loc==i.ORIGIN){const Z=j===0?m:v;return{x:Z.x,y:Z.y,t:r.t}}else if(r.loc==i.BETWEEN){const Z=+(y+r.t*(w-y)).toPrecision(10),U=+(b+r.t*(M-b)).toPrecision(10);return{x:Z,y:U,t:r.t}}return null}else{for(let U=0;U<2;U++)if(o(U===0?m:v,g,A),r.loc==i.ORIGIN){const $=U===0?m:v;return{x:$.x,y:$.y,t:r.t}}const j=+(y+F*(w-y)).toPrecision(10),Z=+(b+F*(M-b)).toPrecision(10);return{x:j,y:Z,t:F}}}function o(g,A,m){const v=m.x-A.x,y=m.y-A.y,w=g.x-A.x,S=g.y-A.y,C=v*S-w*y;if(g.x===A.x&&g.y===A.y){r.loc=i.ORIGIN,r.t=0;return}if(g.x===m.x&&g.y===m.y){r.loc=i.DESTINATION,r.t=1;return}if(C<-Number.EPSILON){r.loc=i.LEFT;return}if(C>Number.EPSILON){r.loc=i.RIGHT;return}if(v*w<0||y*S<0){r.loc=i.BEHIND;return}if(Math.sqrt(v*v+y*y)<Math.sqrt(w*w+S*S)){r.loc=i.BEYOND;return}let b;v!==0?b=w/v:b=S/y,r.loc=i.BETWEEN,r.t=b}function a(g,A){const m=[],v=[];for(let y=1;y<g.length;y++){const w=g[y-1],S=g[y];for(let C=1;C<A.length;C++){const b=A[C-1],M=A[C],I=s(w,S,b,M);I!==null&&m.find(T=>T.t<=I.t+Number.EPSILON&&T.t>=I.t-Number.EPSILON)===void 0&&(m.push(I),v.push(new Ie(I.x,I.y)))}}return v}function l(g,A,m){const v=new Ie;A.getCenter(v);const y=[];return m.forEach(w=>{w.boundingBox.containsPoint(v)&&a(g,w.points).forEach(C=>{y.push({identifier:w.identifier,isCW:w.isCW,point:C})})}),y.sort((w,S)=>w.point.x-S.point.x),y}function c(g,A,m,v,y){(y==null||y==="")&&(y="nonzero");const w=new Ie;g.boundingBox.getCenter(w);const S=[new Ie(m,w.y),new Ie(v,w.y)],C=l(S,g.boundingBox,A);C.sort((R,z)=>R.point.x-z.point.x);const b=[],M=[];C.forEach(R=>{R.identifier===g.identifier?b.push(R):M.push(R)});const I=b[0].point.x,T=[];let D=0;for(;D<M.length&&M[D].point.x<I;)T.length>0&&T[T.length-1]===M[D].identifier?T.pop():T.push(M[D].identifier),D++;if(T.push(g.identifier),y==="evenodd"){const R=T.length%2===0,z=T[T.length-2];return{identifier:g.identifier,isHole:R,for:z}}else if(y==="nonzero"){let R=!0,z=null,F=null;for(let V=0;V<T.length;V++){const j=T[V];R?(F=A[j].isCW,R=!1,z=j):F!==A[j].isCW&&(F=A[j].isCW,R=!0)}return{identifier:g.identifier,isHole:R,for:z}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let u=999999999,f=-999999999,h=e.subPaths.map(g=>{const A=g.getPoints();let m=-999999999,v=999999999,y=-999999999,w=999999999;for(let S=0;S<A.length;S++){const C=A[S];C.y>m&&(m=C.y),C.y<v&&(v=C.y),C.x>y&&(y=C.x),C.x<w&&(w=C.x)}return f<=y&&(f=y+1),u>=w&&(u=w-1),{curves:g.curves,points:A,isCW:ul.isClockWise(A),identifier:-1,boundingBox:new cV(new Ie(w,v),new Ie(y,m))}});h=h.filter(g=>g.points.length>1);for(let g=0;g<h.length;g++)h[g].identifier=g;const d=h.map(g=>c(g,h,u,f,e.userData?e.userData.style.fillRule:void 0)),p=[];return h.forEach(g=>{if(!d[g.identifier].isHole){const m=new Vc;m.curves=g.curves,d.filter(y=>y.isHole&&y.for===g.identifier).forEach(y=>{const w=h[y.identifier],S=new uf;S.curves=w.curves,m.holes.push(S)}),p.push(m)}}),p}static getStrokeStyle(e,n,i,r,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",i=i!==void 0?i:"miter",r=r!==void 0?r:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:i,strokeLineCap:r,strokeMiterLimit:s}}static pointsToStroke(e,n,i,r){const s=[],o=[],a=[];if(mA.pointsToStrokeWithBuffers(e,n,i,r,s,o,a)===0)return null;const l=new Dt;return l.setAttribute("position",new At(s,3)),l.setAttribute("normal",new At(o,3)),l.setAttribute("uv",new At(a,2)),l}static pointsToStrokeWithBuffers(e,n,i,r,s,o,a,l){const c=new Ie,u=new Ie,f=new Ie,h=new Ie,d=new Ie,p=new Ie,g=new Ie,A=new Ie,m=new Ie,v=new Ie,y=new Ie,w=new Ie,S=new Ie,C=new Ie,b=new Ie,M=new Ie,I=new Ie;i=i!==void 0?i:12,r=r!==void 0?r:.001,l=l!==void 0?l:0,e=xe(e);const T=e.length;if(T<2)return 0;const D=e[0].equals(e[T-1]);let R,z=e[0],F;const V=n.strokeWidth/2,j=1/(T-1);let Z=0,U,$,X,Q,J=!1,ne=0,O=l*3,N=l*2;G(e[0],e[1],c).multiplyScalar(V),A.copy(e[0]).sub(c),m.copy(e[0]).add(c),v.copy(A),y.copy(m);for(let ue=1;ue<T;ue++){R=e[ue],ue===T-1?D?F=e[1]:F=void 0:F=e[ue+1];const me=c;if(G(z,R,me),f.copy(me).multiplyScalar(V),w.copy(R).sub(f),S.copy(R).add(f),U=Z+j,$=!1,F!==void 0){G(R,F,u),f.copy(u).multiplyScalar(V),C.copy(R).sub(f),b.copy(R).add(f),X=!0,f.subVectors(F,z),me.dot(f)<0&&(X=!1),ue===1&&(J=X),f.subVectors(F,R),f.normalize();const pe=Math.abs(me.dot(f));if(pe>Number.EPSILON){const Le=V/pe;f.multiplyScalar(-Le),h.subVectors(R,z),d.copy(h).setLength(Le).add(f),M.copy(d).negate();const re=d.length(),ie=h.length();h.divideScalar(ie),p.subVectors(F,R);const te=p.length();switch(p.divideScalar(te),h.dot(M)<ie&&p.dot(M)<te&&($=!0),I.copy(d).add(R),M.add(R),Q=!1,$?X?(b.copy(M),S.copy(M)):(C.copy(M),w.copy(M)):de(),n.strokeLineJoin){case"bevel":ce(X,$,U);break;case"round":ge(X,$),X?oe(R,w,C,U,0):oe(R,b,S,U,1);break;case"miter":case"miter-clip":default:const W=V*n.strokeMiterLimit/re;if(W<1)if(n.strokeLineJoin!=="miter-clip"){ce(X,$,U);break}else ge(X,$),X?(p.subVectors(I,w).multiplyScalar(W).add(w),g.subVectors(I,C).multiplyScalar(W).add(C),H(w,U,0),H(p,U,0),H(R,U,.5),H(R,U,.5),H(p,U,0),H(g,U,0),H(R,U,.5),H(g,U,0),H(C,U,0)):(p.subVectors(I,S).multiplyScalar(W).add(S),g.subVectors(I,b).multiplyScalar(W).add(b),H(S,U,1),H(p,U,1),H(R,U,.5),H(R,U,.5),H(p,U,1),H(g,U,1),H(R,U,.5),H(g,U,1),H(b,U,1));else $?(X?(H(m,Z,1),H(A,Z,0),H(I,U,0),H(m,Z,1),H(I,U,0),H(M,U,1)):(H(m,Z,1),H(A,Z,0),H(I,U,1),H(A,Z,0),H(M,U,0),H(I,U,1)),X?C.copy(I):b.copy(I)):X?(H(w,U,0),H(I,U,0),H(R,U,.5),H(R,U,.5),H(I,U,0),H(C,U,0)):(H(S,U,1),H(I,U,1),H(R,U,.5),H(R,U,.5),H(I,U,1),H(b,U,1)),Q=!0;break}}else de()}else de();!D&&ue===T-1&&q(e[0],v,y,X,!0,Z),Z=U,z=R,A.copy(C),m.copy(b)}if(!D)q(R,w,S,X,!1,U);else if($&&s){let ue=I,me=M;J!==X&&(ue=M,me=I),X?(Q||J)&&(me.toArray(s,0*3),me.toArray(s,3*3),Q&&ue.toArray(s,1*3)):(Q||!J)&&(me.toArray(s,1*3),me.toArray(s,3*3),Q&&ue.toArray(s,0*3))}return ne;function G(ue,me,pe){return pe.subVectors(me,ue),pe.set(-pe.y,pe.x).normalize()}function H(ue,me,pe){s&&(s[O]=ue.x,s[O+1]=ue.y,s[O+2]=0,o&&(o[O]=0,o[O+1]=0,o[O+2]=1),O+=3,a&&(a[N]=me,a[N+1]=pe,N+=2)),ne+=3}function oe(ue,me,pe,Le,re){c.copy(me).sub(ue).normalize(),u.copy(pe).sub(ue).normalize();let ie=Math.PI;const te=c.dot(u);Math.abs(te)<1&&(ie=Math.abs(Math.acos(te))),ie/=i,f.copy(me);for(let W=0,Me=i-1;W<Me;W++)h.copy(f).rotateAround(ue,ie),H(f,Le,re),H(h,Le,re),H(ue,Le,.5),f.copy(h);H(h,Le,re),H(pe,Le,re),H(ue,Le,.5)}function de(){H(m,Z,1),H(A,Z,0),H(w,U,0),H(m,Z,1),H(w,U,0),H(S,U,1)}function ce(ue,me,pe){me?ue?(H(m,Z,1),H(A,Z,0),H(w,U,0),H(m,Z,1),H(w,U,0),H(M,U,1),H(w,pe,0),H(C,pe,0),H(M,pe,.5)):(H(m,Z,1),H(A,Z,0),H(S,U,1),H(A,Z,0),H(M,U,0),H(S,U,1),H(S,pe,1),H(M,pe,0),H(b,pe,1)):ue?(H(w,pe,0),H(C,pe,0),H(R,pe,.5)):(H(S,pe,1),H(b,pe,0),H(R,pe,.5))}function ge(ue,me){me&&(ue?(H(m,Z,1),H(A,Z,0),H(w,U,0),H(m,Z,1),H(w,U,0),H(M,U,1),H(w,Z,0),H(R,U,.5),H(M,U,1),H(R,U,.5),H(C,Z,0),H(M,U,1)):(H(m,Z,1),H(A,Z,0),H(S,U,1),H(A,Z,0),H(M,U,0),H(S,U,1),H(S,Z,1),H(M,U,0),H(R,U,.5),H(R,U,.5),H(M,U,0),H(b,Z,1)))}function q(ue,me,pe,Le,re,ie){switch(n.strokeLineCap){case"round":re?oe(ue,pe,me,ie,.5):oe(ue,me,pe,ie,.5);break;case"square":if(re)c.subVectors(me,ue),u.set(c.y,-c.x),f.addVectors(c,u).add(ue),h.subVectors(u,c).add(ue),Le?(f.toArray(s,1*3),h.toArray(s,0*3),h.toArray(s,3*3)):(f.toArray(s,1*3),a[3*2+1]===1?h.toArray(s,3*3):f.toArray(s,3*3),h.toArray(s,0*3));else{c.subVectors(pe,ue),u.set(c.y,-c.x),f.addVectors(c,u).add(ue),h.subVectors(u,c).add(ue);const te=s.length;Le?(f.toArray(s,te-1*3),h.toArray(s,te-2*3),h.toArray(s,te-4*3)):(h.toArray(s,te-2*3),f.toArray(s,te-1*3),h.toArray(s,te-4*3))}break}}function xe(ue){let me=!1;for(let Le=1,re=ue.length-1;Le<re;Le++)if(ue[Le].distanceTo(ue[Le+1])<r){me=!0;break}if(!me)return ue;const pe=[];pe.push(ue[0]);for(let Le=1,re=ue.length-1;Le<re;Le++)ue[Le].distanceTo(ue[Le+1])>=r&&pe.push(ue[Le]);return pe.push(ue[ue.length-1]),pe}}}const yM=new WeakMap;class Hge extends Zi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new Gi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(yM.has(e)){const l=yM.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),yM.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new Dt;e.index&&n.setIndex(new Gt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new Gt(o,a))}return n}_loadLibrary(e,n){const i=new Gi(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Qge.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Qge(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const p=n(f,h,d,c),g=p.attributes.map(A=>A.array.buffer);p.index&&g.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},g)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{f.destroy(d),f.destroy(h)}});break}};function n(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,d=a.DecodeBufferToMesh(l,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const g={index:null,attributes:[]};for(const A in u){const m=self[f[A]];let v,y;if(c.useUniqueIDs)y=u[A],v=a.GetAttributeByUniqueId(h,y);else{if(y=a.GetAttributeId(h,o[u[A]]),y===-1)continue;v=a.GetAttribute(h,y)}g.attributes.push(r(o,a,h,A,m,v))}return p===o.TRIANGULAR_MESH&&(g.index=i(o,a,h)),o.destroy(h),g}function i(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function r(o,a,l,c,u,f){const h=f.num_components(),p=l.num_points()*h,g=p*u.BYTES_PER_ELEMENT,A=s(o,u),m=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,f,A,g,m);const v=new u(o.HEAPF32.buffer,m,p).slice();return o._free(m),{name:c,array:v,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const nz=new xn,Lx=new L;class cS extends Hv{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new At(e,3)),this.setAttribute("uv",new At(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new oE(n,6,1);return this.setAttribute("instanceStart",new fo(i,3,0)),this.setAttribute("instanceEnd",new fo(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new oE(i,n*2,1);return this.setAttribute("instanceColorStart",new fo(r,n,0)),this.setAttribute("instanceColorEnd",new fo(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new N8(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xn);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),nz.setFromBufferAttribute(n),this.boundingBox.union(nz))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $n),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Lx.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Lx)),Lx.fromBufferAttribute(n,s),r=Math.max(r,i.distanceToSquared(Lx));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class yX extends cS{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,n=3){const i=e.length-n,r=new Float32Array(2*i);if(n===3)for(let s=0;s<i;s+=n)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=n)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class uS extends Fn{constructor(e){super({type:"LineMaterial",uniforms:Ra.clone(Ra.merge([wt.common,wt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ie(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const iz=new L,rz=new L,ts=new Jt,ns=new Jt,Dl=new Jt,xM=new L,_M=new Ge,xs=new fl,sz=new L,Fx=new xn,Ox=new $n,Ll=new Jt;let ql,BI,xX,Hh;function oz(t,e,n){return Ll.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Ll.multiplyScalar(1/Ll.w),Ll.x=Hh/n.width,Ll.y=Hh/n.height,Ll.applyMatrix4(t.projectionMatrixInverse),Ll.multiplyScalar(1/Ll.w),Math.abs(Math.max(Ll.x,Ll.y))}function Vge(t,e){for(let n=0,i=BI.count;n<i;n++){xs.start.fromBufferAttribute(BI,n),xs.end.fromBufferAttribute(xX,n);const r=new L,s=new L;ql.distanceSqToSegment(xs.start,xs.end,s,r),s.distanceTo(r)<Hh*.5&&e.push({point:s,pointOnLine:r,distance:ql.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function Wge(t,e,n){const i=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;ql.at(1,Dl),Dl.w=1,Dl.applyMatrix4(e.matrixWorldInverse),Dl.applyMatrix4(i),Dl.multiplyScalar(1/Dl.w),Dl.x*=s.x/2,Dl.y*=s.y/2,Dl.z=0,xM.copy(Dl),_M.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,h=l.count;f<h;f++){if(ts.fromBufferAttribute(l,f),ns.fromBufferAttribute(c,f),ts.w=1,ns.w=1,ts.applyMatrix4(_M),ns.applyMatrix4(_M),ts.z>u&&ns.z>u)continue;if(ts.z>u){const v=ts.z-ns.z,y=(ts.z-u)/v;ts.lerp(ns,y)}else if(ns.z>u){const v=ns.z-ts.z,y=(ns.z-u)/v;ns.lerp(ts,y)}ts.applyMatrix4(i),ns.applyMatrix4(i),ts.multiplyScalar(1/ts.w),ns.multiplyScalar(1/ns.w),ts.x*=s.x/2,ts.y*=s.y/2,ns.x*=s.x/2,ns.y*=s.y/2,xs.start.copy(ts),xs.start.z=0,xs.end.copy(ns),xs.end.z=0;const p=xs.closestPointToPointParameter(xM,!0);xs.at(p,sz);const g=zt.lerp(ts.z,ns.z,p),A=g>=-1&&g<=1,m=xM.distanceTo(sz)<Hh*.5;if(A&&m){xs.start.fromBufferAttribute(l,f),xs.end.fromBufferAttribute(c,f),xs.start.applyMatrix4(o),xs.end.applyMatrix4(o);const v=new L,y=new L;ql.distanceSqToSegment(xs.start,xs.end,y,v),n.push({point:y,pointOnLine:v,distance:ql.origin.distanceTo(y),object:t,face:null,faceIndex:f,uv:null,uv2:null})}}}class _X extends ut{constructor(e=new cS,n=new uS({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)iz.fromBufferAttribute(n,o),rz.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+iz.distanceTo(rz);const s=new oE(r,2,1);return e.setAttribute("instanceDistanceStart",new fo(s,1,0)),e.setAttribute("instanceDistanceEnd",new fo(s,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ql=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Hh=l.linewidth+s,BI=a.attributes.instanceStart,xX=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Ox.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Hh*.5;else{const f=Math.max(r.near,Ox.distanceToPoint(ql.origin));c=oz(r,f,l.resolution)}if(Ox.radius+=c,ql.intersectsSphere(Ox)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Fx.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Hh*.5;else{const f=Math.max(r.near,Fx.distanceToPoint(ql.origin));u=oz(r,f,l.resolution)}Fx.expandByScalar(u),ql.intersectsBox(Fx)!==!1&&(i?Vge(this,n):Wge(this,r,n))}}class EX extends _X{constructor(e=new yX,n=new uS({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let zx;const EM=()=>{if(zx)return zx;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let p=0;p<f.length;++p){const g=f.charCodeAt(p);h[p]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let d=0;for(let p=0;p<f.length;++p)h[d++]=h[p]<60?i[h[p]]:(h[p]-60)*64+h[++p];return h.buffer.slice(0,d)}function l(f,h,d,p,g,A){const m=s.exports.sbrk,v=d+3&-4,y=m(v*p),w=m(g.length),S=new Uint8Array(s.exports.memory.buffer);S.set(g,w);const C=f(y,d,p,w,g.length);if(C===0&&A&&A(y,v,p),h.set(S.subarray(y,y+d*p)),m(y-m(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return zx={ready:o,supported:!0,decodeVertexBuffer(f,h,d,p,g){l(s.exports.meshopt_decodeVertexBuffer,f,h,d,p,s.exports[c[g]])},decodeIndexBuffer(f,h,d,p){l(s.exports.meshopt_decodeIndexBuffer,f,h,d,p)},decodeIndexSequence(f,h,d,p){l(s.exports.meshopt_decodeIndexSequence,f,h,d,p)},decodeGltfBuffer(f,h,d,p,g,A){l(s.exports[u[g]],f,h,d,p,s.exports[c[A]])}},zx};function jge(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Object.is(t[n[i]],e[n[i]]))return!1;return!0}const wX=E.createContext([]);function Xge({box:t,multiple:e,children:n,onChange:i,onChangePointerUp:r,border:s="1px solid #55aaff",backgroundColor:o="rgba(75, 160, 255, 0.1)",filter:a=c=>c,...l}){const[c,u]=E.useState(!1),{setEvents:f,camera:h,raycaster:d,gl:p,controls:g,size:A,get:m}=Fe(),[v,y]=E.useState(!1),[w,S]=E.useReducer((I,{object:T,shift:D})=>T===void 0?[]:Array.isArray(T)?T:D?I.includes(T)?I.filter(R=>R!==T):[T,...I]:I[0]===T?[]:[T],[]);E.useEffect(()=>{c?i==null||i(w):r==null||r(w)},[w,c]);const C=E.useCallback(I=>{I.stopPropagation(),S({object:a([I.object])[0],shift:e&&I.shiftKey})},[]),b=E.useCallback(I=>!v&&S({}),[v]),M=E.useRef(null);return E.useEffect(()=>{if(!t||!e)return;const I=new W1e(h,M.current),T=document.createElement("div");T.style.pointerEvents="none",T.style.border=s,T.style.backgroundColor=o,T.style.position="fixed";const D=new Ie,R=new Ie,z=new Ie,F=m().events.enabled,V=g==null?void 0:g.enabled;let j=!1;function Z(N,G){const{offsetX:H,offsetY:oe}=N,{width:de,height:ce}=A;G.set(H/de*2-1,-(oe/ce)*2+1)}function U(N){var G;g&&(g.enabled=!1),f({enabled:!1}),u(j=!0),(G=p.domElement.parentElement)==null||G.appendChild(T),T.style.left=`${N.clientX}px`,T.style.top=`${N.clientY}px`,T.style.width="0px",T.style.height="0px",D.x=N.clientX,D.y=N.clientY}function $(N){z.x=Math.max(D.x,N.clientX),z.y=Math.max(D.y,N.clientY),R.x=Math.min(D.x,N.clientX),R.y=Math.min(D.y,N.clientY),T.style.left=`${R.x}px`,T.style.top=`${R.y}px`,T.style.width=`${z.x-R.x}px`,T.style.height=`${z.y-R.y}px`}function X(){if(j){var N;g&&(g.enabled=V),f({enabled:F}),u(j=!1),(N=T.parentElement)==null||N.removeChild(T)}}function Q(N){N.shiftKey&&(U(N),Z(N,I.startPoint))}let J=[];function ne(N){if(j){$(N),Z(N,I.endPoint);const G=I.select().sort(H=>H.uuid).filter(H=>H.isMesh);jge(G,J)||(J=G,S({object:a(G)}))}}function O(N){j&&X()}return document.addEventListener("pointerdown",Q,{passive:!0}),document.addEventListener("pointermove",ne,{passive:!0,capture:!0}),document.addEventListener("pointerup",O,{passive:!0}),()=>{document.removeEventListener("pointerdown",Q),document.removeEventListener("pointermove",ne,!0),document.removeEventListener("pointerup",O)}},[A.width,A.height,d,h,g,p]),E.createElement("group",Te({ref:M,onClick:C,onPointerOver:()=>y(!0),onPointerOut:()=>y(!1),onPointerMissed:b},l),E.createElement(wX.Provider,{value:w},n))}function Yge(){return E.useContext(wX)}const qge=E.forwardRef(function({children:e,follow:n=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...o},a){const l=E.useRef(null),c=E.useRef(null),u=new Tt;return Ct(({camera:f})=>{if(!n||!c.current)return;const h=c.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),f.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),i&&(c.current.rotation.x=h.x),r&&(c.current.rotation.y=h.y),s&&(c.current.rotation.z=h.z)}),E.useImperativeHandle(a,()=>c.current,[]),E.createElement("group",Te({ref:c,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),E.createElement("group",{ref:l},e))}),$ge=E.forwardRef(({children:t,depth:e=-1,...n},i)=>{const r=E.useRef(null);return E.useImperativeHandle(i,()=>r.current,[]),Ct(({camera:s})=>{r.current.quaternion.copy(s.quaternion),r.current.position.copy(s.position)}),E.createElement("group",Te({ref:r},n),E.createElement("group",{"position-z":-e},t))}),Kge=new L,Jge=new L,Zge=new L,eAe=(t,e,n)=>{const i=n.width/2,r=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},tAe=(t,e,n,i=1)=>{const r=Kge.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,i);return r.unproject(e),r},fS=(t,e,n,i)=>{const r=eAe(Zge.copy(t),n,i);let s=0;for(let o=0;o<2;++o){const a=Jge.copy(r).setComponent(o,r.getComponent(o)+e),l=tAe(a,n,i,a.z);s=Math.max(s,t.distanceTo(l))}return s},nAe=new L,iAe=E.forwardRef(({scale:t=1,...e},n)=>{const i=E.useRef(null);return E.useImperativeHandle(n,()=>i.current,[]),Ct(r=>{const s=i.current;if(!s)return;const o=fS(s.getWorldPosition(nAe),t,r.camera,r.size);s.scale.setScalar(o*t)}),E.createElement("object3D",Te({ref:i},e))}),Al=E.forwardRef(function({points:e,color:n=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},c){var u,f;const h=Fe(m=>m.size),d=E.useMemo(()=>o?new _X:new EX,[o]),[p]=E.useState(()=>new uS),g=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,A=E.useMemo(()=>{const m=o?new cS:new yX,v=e.map(y=>{const w=Array.isArray(y);return y instanceof L||y instanceof Jt?[y.x,y.y,y.z]:y instanceof Ie?[y.x,y.y,0]:w&&y.length===3?[y[0],y[1],y[2]]:w&&y.length===2?[y[0],y[1],0]:y});if(m.setPositions(v.flat()),i){n=16777215;const y=i.map(w=>w instanceof Je?w.toArray():w);m.setColors(y.flat(),g)}return m},[e,o,i,g]);return E.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),E.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),E.useEffect(()=>()=>A.dispose(),[A]),E.createElement("primitive",Te({object:d,ref:c},l),E.createElement("primitive",{object:A,attach:"geometry"}),E.createElement("primitive",Te({object:p,attach:"material",color:n,vertexColors:!!i,resolution:[h.width,h.height],linewidth:(f=r??s)!==null&&f!==void 0?f:1,dashed:a,transparent:g===4},l)))}),rAe=new L,sAe=E.forwardRef(function({start:e=[0,0,0],end:n=[0,0,0],mid:i,segments:r=20,...s},o){const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current);const[l]=E.useState(()=>new vw(void 0,void 0,void 0)),c=E.useCallback((f,h,d,p=20)=>(f instanceof L?l.v0.copy(f):l.v0.set(...f),h instanceof L?l.v2.copy(h):l.v2.set(...h),d instanceof L?l.v1.copy(d):Array.isArray(d)?l.v1.set(...d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(rAe.set(0,l.v0.y-l.v2.y,0))),l.getPoints(p)),[]);E.useLayoutEffect(()=>{a.current.setPoints=(f,h,d)=>{const p=c(f,h,d);a.current.geometry&&a.current.geometry.setPositions(p.map(g=>g.toArray()).flat())}},[]);const u=E.useMemo(()=>c(e,n,i,r),[e,n,i,r]);return E.createElement(Al,Te({ref:a,points:u},s))}),oAe=E.forwardRef(function({start:e,end:n,midA:i,midB:r,segments:s=20,...o},a){const l=E.useMemo(()=>{const c=e instanceof L?e:new L(...e),u=n instanceof L?n:new L(...n),f=i instanceof L?i:new L(...i),h=r instanceof L?r:new L(...r);return new L8(c,f,h,u).getPoints(s)},[e,n,i,r,s]);return E.createElement(Al,Te({ref:a,points:l},o))}),aAe=E.forwardRef(function({points:e,closed:n=!1,curveType:i="centripetal",tension:r=.5,segments:s=20,vertexColors:o,...a},l){const c=E.useMemo(()=>{const h=e.map(d=>d instanceof L?d:new L(...d));return new Aw(h,n,i,r)},[e,n,i,r]),u=E.useMemo(()=>c.getPoints(s),[c,s]),f=E.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const h=o.map(g=>g instanceof Je?g:new Je(...g));n&&h.push(h[0].clone());const d=[h[0]],p=s/(h.length-1);for(let g=1;g<s;g++){const A=g%p/p,m=Math.floor(g/p);d.push(h[m].clone().lerp(h[m+1],A))}return d.push(h[h.length-1]),d},[o,s]);return E.createElement(Al,Te({ref:l,points:u,vertexColors:f},a))}),lAe=E.forwardRef(({url:t,distance:e=1,loop:n=!0,autoplay:i,...r},s)=>{const o=E.useRef(null);E.useImperativeHandle(s,()=>o.current,[]);const a=Fe(({camera:u})=>u),[l]=E.useState(()=>new sV),c=bi(rV,t);return E.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(n),i&&!u.isPlaying&&u.play())},[c,a,e,n]),E.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),E.createElement("positionalAudio",Te({ref:o,args:[l]},r))});function cAe(){var t=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=t[h.id].value),h}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:f,getTransferables:u},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function n(r,s){var o,a=r.id,l=r.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var h=t[a].getTransferables&&t[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(d){console.error(d),s(d)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function uAe(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(n).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var SX=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return SX=function(){return t},t},fAe=0,hAe=0,wM=!1,gA=Object.create(null),AA=Object.create(null),RI=Object.create(null);function B0(t){if((!t||typeof t.init!="function")&&!wM)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId;if(!SX())return uAe(t);r==null&&(r="#default");var s="workerModule"+ ++fAe,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(wM=!0,c=B0({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+$_(c)+`
)}`}),wM=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=az(r,"registerModule",l.workerModuleData);var f=function(){a=null,AA[r].delete(f)};(AA[r]||(AA[r]=new Set)).add(f)}return a.then(function(h){var d=h.isCallable;if(d)return az(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:$_(n),getTransferables:i&&$_(i)},l}function dAe(t){AA[t]&&AA[t].forEach(function(e){e()}),gA[t]&&(gA[t].terminate(),delete gA[t])}function $_(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function pAe(t){var e=gA[t];if(!e){var n=$_(cAe);e=gA[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=RI[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete RI[s],o(r)}}return e}function az(t,e,n){return new Promise(function(i,r){var s=++hAe;RI[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},pAe(t).postMessage({messageId:s,action:e,data:n})})}function CX(){var t=function(e){function n($,X,Q,J,ne,O,N,G){var H=1-N;G.x=H*H*$+2*H*N*Q+N*N*ne,G.y=H*H*X+2*H*N*J+N*N*O}function i($,X,Q,J,ne,O,N,G,H,oe){var de=1-H;oe.x=de*de*de*$+3*de*de*H*Q+3*de*H*H*ne+H*H*H*N,oe.y=de*de*de*X+3*de*de*H*J+3*de*H*H*O+H*H*H*G}function r($,X){for(var Q=/([MLQCZ])([^MLQCZ]*)/g,J,ne,O,N,G;J=Q.exec($);){var H=J[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(J[1]){case"M":N=ne=H[0],G=O=H[1];break;case"L":(H[0]!==N||H[1]!==G)&&X("L",N,G,N=H[0],G=H[1]);break;case"Q":{X("Q",N,G,N=H[2],G=H[3],H[0],H[1]);break}case"C":{X("C",N,G,N=H[4],G=H[5],H[0],H[1],H[2],H[3]);break}case"Z":(N!==ne||G!==O)&&X("L",N,G,ne,O);break}}}function s($,X,Q){Q===void 0&&(Q=16);var J={x:0,y:0};r($,function(ne,O,N,G,H,oe,de,ce,ge){switch(ne){case"L":X(O,N,G,H);break;case"Q":{for(var q=O,xe=N,ue=1;ue<Q;ue++)n(O,N,oe,de,G,H,ue/(Q-1),J),X(q,xe,J.x,J.y),q=J.x,xe=J.y;break}case"C":{for(var me=O,pe=N,Le=1;Le<Q;Le++)i(O,N,oe,de,ce,ge,G,H,Le/(Q-1),J),X(me,pe,J.x,J.y),me=J.x,pe=J.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u($,X){var Q=$.getContext?$.getContext("webgl",c):$,J=l.get(Q);if(!J){let de=function(me){var pe=O[me];if(!pe&&(pe=O[me]=Q.getExtension(me),!pe))throw new Error(me+" not supported");return pe},ce=function(me,pe){var Le=Q.createShader(pe);return Q.shaderSource(Le,me),Q.compileShader(Le),Le},ge=function(me,pe,Le,re){if(!N[me]){var ie={},te={},W=Q.createProgram();Q.attachShader(W,ce(pe,Q.VERTEX_SHADER)),Q.attachShader(W,ce(Le,Q.FRAGMENT_SHADER)),Q.linkProgram(W),N[me]={program:W,transaction:function(De){Q.useProgram(W),De({setUniform:function(_e,Ze){for(var Oe=[],we=arguments.length-2;we-- >0;)Oe[we]=arguments[we+2];var be=te[Ze]||(te[Ze]=Q.getUniformLocation(W,Ze));Q["uniform"+_e].apply(Q,[be].concat(Oe))},setAttribute:function(_e,Ze,Oe,we,be){var Be=ie[_e];Be||(Be=ie[_e]={buf:Q.createBuffer(),loc:Q.getAttribLocation(W,_e),data:null}),Q.bindBuffer(Q.ARRAY_BUFFER,Be.buf),Q.vertexAttribPointer(Be.loc,Ze,Q.FLOAT,!1,0,0),Q.enableVertexAttribArray(Be.loc),ne?Q.vertexAttribDivisor(Be.loc,we):de("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Be.loc,we),be!==Be.data&&(Q.bufferData(Q.ARRAY_BUFFER,be,Oe),Be.data=be)}})}}}N[me].transaction(re)},q=function(me,pe){H++;try{Q.activeTexture(Q.TEXTURE0+H);var Le=G[me];Le||(Le=G[me]=Q.createTexture(),Q.bindTexture(Q.TEXTURE_2D,Le),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.NEAREST),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.NEAREST)),Q.bindTexture(Q.TEXTURE_2D,Le),pe(Le,H)}finally{H--}},xe=function(me,pe,Le){var re=Q.createFramebuffer();oe.push(re),Q.bindFramebuffer(Q.FRAMEBUFFER,re),Q.activeTexture(Q.TEXTURE0+pe),Q.bindTexture(Q.TEXTURE_2D,me),Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,me,0);try{Le(re)}finally{Q.deleteFramebuffer(re),Q.bindFramebuffer(Q.FRAMEBUFFER,oe[--oe.length-1]||null)}},ue=function(){O={},N={},G={},H=-1,oe.length=0};var ne=typeof WebGL2RenderingContext<"u"&&Q instanceof WebGL2RenderingContext,O={},N={},G={},H=-1,oe=[];Q.canvas.addEventListener("webglcontextlost",function(me){ue(),me.preventDefault()},!1),l.set(Q,J={gl:Q,isWebGL2:ne,getExtension:de,withProgram:ge,withTexture:q,withTextureFramebuffer:xe,handleContextLoss:ue})}X(J)}function f($,X,Q,J,ne,O,N,G){N===void 0&&(N=15),G===void 0&&(G=null),u($,function(H){var oe=H.gl,de=H.withProgram,ce=H.withTexture;ce("copy",function(ge,q){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,ne,O,0,oe.RGBA,oe.UNSIGNED_BYTE,X),de("copy",o,a,function(xe){var ue=xe.setUniform,me=xe.setAttribute;me("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ue("1i","image",q),oe.bindFramebuffer(oe.FRAMEBUFFER,G||null),oe.disable(oe.BLEND),oe.colorMask(N&8,N&4,N&2,N&1),oe.viewport(Q,J,ne,O),oe.scissor(Q,J,ne,O),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function h($,X,Q){var J=$.width,ne=$.height;u($,function(O){var N=O.gl,G=new Uint8Array(J*ne*4);N.readPixels(0,0,J,ne,N.RGBA,N.UNSIGNED_BYTE,G),$.width=X,$.height=Q,f(N,G,0,0,J,ne)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function p($,X,Q,J,ne,O){O===void 0&&(O=1);var N=new Uint8Array($*X),G=J[2]-J[0],H=J[3]-J[1],oe=[];s(Q,function(me,pe,Le,re){oe.push({x1:me,y1:pe,x2:Le,y2:re,minX:Math.min(me,Le),minY:Math.min(pe,re),maxX:Math.max(me,Le),maxY:Math.max(pe,re)})}),oe.sort(function(me,pe){return me.maxX-pe.maxX});for(var de=0;de<$;de++)for(var ce=0;ce<X;ce++){var ge=xe(J[0]+G*(de+.5)/$,J[1]+H*(ce+.5)/X),q=Math.pow(1-Math.abs(ge)/ne,O)/2;ge<0&&(q=1-q),q=Math.max(0,Math.min(255,Math.round(q*255))),N[ce*$+de]=q}return N;function xe(me,pe){for(var Le=1/0,re=1/0,ie=oe.length;ie--;){var te=oe[ie];if(te.maxX+re<=me)break;if(me+re>te.minX&&pe-re<te.maxY&&pe+re>te.minY){var W=m(me,pe,te.x1,te.y1,te.x2,te.y2);W<Le&&(Le=W,re=Math.sqrt(Le))}}return ue(me,pe)&&(re=-re),re}function ue(me,pe){for(var Le=0,re=oe.length;re--;){var ie=oe[re];if(ie.maxX<=me)break;var te=ie.y1>pe!=ie.y2>pe&&me<(ie.x2-ie.x1)*(pe-ie.y1)/(ie.y2-ie.y1)+ie.x1;te&&(Le+=ie.y1<ie.y2?1:-1)}return Le!==0}}function g($,X,Q,J,ne,O,N,G,H,oe){O===void 0&&(O=1),G===void 0&&(G=0),H===void 0&&(H=0),oe===void 0&&(oe=0),A($,X,Q,J,ne,O,N,null,G,H,oe)}function A($,X,Q,J,ne,O,N,G,H,oe,de){O===void 0&&(O=1),H===void 0&&(H=0),oe===void 0&&(oe=0),de===void 0&&(de=0);for(var ce=p($,X,Q,J,ne,O),ge=new Uint8Array(ce.length*4),q=0;q<ce.length;q++)ge[q*4+de]=ce[q];f(N,ge,H,oe,$,X,1<<3-de,G)}function m($,X,Q,J,ne,O){var N=ne-Q,G=O-J,H=N*N+G*G,oe=H?Math.max(0,Math.min(1,(($-Q)*N+(X-J)*G)/H)):0,de=$-(Q+oe*N),ce=X-(J+oe*G);return de*de+ce*ce}var v=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:A}),y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),b=null,M=!1,I={},T=new WeakMap;function D($){if(!M&&!V($))throw new Error("WebGL generation not supported")}function R($,X,Q,J,ne,O,N){if(O===void 0&&(O=1),N===void 0&&(N=null),!N&&(N=b,!N)){var G=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!G)throw new Error("OffscreenCanvas or DOM canvas not supported");N=b=G.getContext("webgl",{depth:!1})}D(N);var H=new Uint8Array($*X*4);u(N,function(ge){var q=ge.gl,xe=ge.withTexture,ue=ge.withTextureFramebuffer;xe("readable",function(me,pe){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,$,X,0,q.RGBA,q.UNSIGNED_BYTE,null),ue(me,pe,function(Le){F($,X,Q,J,ne,O,q,Le,0,0,0),q.readPixels(0,0,$,X,q.RGBA,q.UNSIGNED_BYTE,H)})})});for(var oe=new Uint8Array($*X),de=0,ce=0;de<H.length;de+=4)oe[ce++]=H[de];return oe}function z($,X,Q,J,ne,O,N,G,H,oe){O===void 0&&(O=1),G===void 0&&(G=0),H===void 0&&(H=0),oe===void 0&&(oe=0),F($,X,Q,J,ne,O,N,null,G,H,oe)}function F($,X,Q,J,ne,O,N,G,H,oe,de){O===void 0&&(O=1),H===void 0&&(H=0),oe===void 0&&(oe=0),de===void 0&&(de=0),D(N);var ce=[];s(Q,function(ge,q,xe,ue){ce.push(ge,q,xe,ue)}),ce=new Float32Array(ce),u(N,function(ge){var q=ge.gl,xe=ge.isWebGL2,ue=ge.getExtension,me=ge.withProgram,pe=ge.withTexture,Le=ge.withTextureFramebuffer,re=ge.handleContextLoss;if(pe("rawDistances",function(ie,te){($!==ie._lastWidth||X!==ie._lastHeight)&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,ie._lastWidth=$,ie._lastHeight=X,0,q.RGBA,q.UNSIGNED_BYTE,null),me("main",y,w,function(W){var Me=W.setAttribute,De=W.setUniform,Ee=!xe&&ue("ANGLE_instanced_arrays"),_e=!xe&&ue("EXT_blend_minmax");Me("aUV",2,q.STATIC_DRAW,0,C),Me("aLineSegment",4,q.DYNAMIC_DRAW,1,ce),De.apply(void 0,["4f","uGlyphBounds"].concat(J)),De("1f","uMaxDistance",ne),De("1f","uExponent",O),Le(ie,te,function(Ze){q.enable(q.BLEND),q.colorMask(!0,!0,!0,!0),q.viewport(0,0,$,X),q.scissor(0,0,$,X),q.blendFunc(q.ONE,q.ONE),q.blendEquationSeparate(q.FUNC_ADD,xe?q.MAX:_e.MAX_EXT),q.clear(q.COLOR_BUFFER_BIT),xe?q.drawArraysInstanced(q.TRIANGLES,0,3,ce.length/4):Ee.drawArraysInstancedANGLE(q.TRIANGLES,0,3,ce.length/4)})}),me("post",o,S,function(W){W.setAttribute("aUV",2,q.STATIC_DRAW,0,C),W.setUniform("1i","tex",te),q.bindFramebuffer(q.FRAMEBUFFER,G),q.disable(q.BLEND),q.colorMask(de===0,de===1,de===2,de===3),q.viewport(H,oe,$,X),q.scissor(H,oe,$,X),q.drawArrays(q.TRIANGLES,0,3)})}),q.isContextLost())throw re(),new Error("webgl context lost")})}function V($){var X=!$||$===b?I:$.canvas||$,Q=T.get(X);if(Q===void 0){M=!0;var J=null;try{var ne=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],O=R(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,$);Q=O&&ne.length===O.length&&O.every(function(N,G){return N===ne[G]}),Q||(J="bad trial run results",console.info(ne,O))}catch(N){Q=!1,J=N.message}J&&console.warn("WebGL SDF generation not supported:",J),M=!1,T.set(X,Q)}return Q}var j=Object.freeze({__proto__:null,generate:R,generateIntoCanvas:z,generateIntoFramebuffer:F,isSupported:V});function Z($,X,Q,J,ne,O){ne===void 0&&(ne=Math.max(J[2]-J[0],J[3]-J[1])/2),O===void 0&&(O=1);try{return R.apply(j,arguments)}catch(N){return console.info("WebGL SDF generation failed, falling back to JS",N),p.apply(v,arguments)}}function U($,X,Q,J,ne,O,N,G,H,oe){ne===void 0&&(ne=Math.max(J[2]-J[0],J[3]-J[1])/2),O===void 0&&(O=1),G===void 0&&(G=0),H===void 0&&(H=0),oe===void 0&&(oe=0);try{return z.apply(j,arguments)}catch(de){return console.info("WebGL SDF generation failed, falling back to JS",de),g.apply(v,arguments)}}return e.forEachPathCommand=r,e.generate=Z,e.generateIntoCanvas=U,e.javascript=v,e.pathToLineSegments=s,e.webgl=j,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function mAe(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(re,ie){i[re]=1<<ie+1,r[i[re]]=re}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function f(){if(!u){u=new Map;var re=function(te){if(n.hasOwnProperty(te)){var W=0;n[te].split(",").forEach(function(Me){var De=Me.split("+"),Ee=De[0],_e=De[1];Ee=parseInt(Ee,36),_e=_e?parseInt(_e,36):0,u.set(W+=Ee,i[te]);for(var Ze=0;Ze<_e;Ze++)u.set(++W,i[te])})}};for(var ie in n)re(ie)}}function h(re){return f(),u.get(re.codePointAt(0))||i.L}function d(re){return r[h(re)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(re,ie){var te=36,W=0,Me=new Map,De=ie&&new Map,Ee;return re.split(",").forEach(function _e(Ze){if(Ze.indexOf("+")!==-1)for(var Oe=+Ze;Oe--;)_e(Ee);else{Ee=Ze;var we=Ze.split(">"),be=we[0],Be=we[1];be=String.fromCodePoint(W+=parseInt(be,te)),Be=String.fromCodePoint(W+=parseInt(Be,te)),Me.set(be,Be),ie&&De.set(Be,be)}}),{map:Me,reverseMap:De}}var A,m,v;function y(){if(!A){var re=g(p.pairs,!0),ie=re.map,te=re.reverseMap;A=ie,m=te,v=g(p.canonical,!1).map}}function w(re){return y(),A.get(re)||null}function S(re){return y(),m.get(re)||null}function C(re){return y(),v.get(re)||null}var b=i.L,M=i.R,I=i.EN,T=i.ES,D=i.ET,R=i.AN,z=i.CS,F=i.B,V=i.S,j=i.ON,Z=i.BN,U=i.NSM,$=i.AL,X=i.LRO,Q=i.RLO,J=i.LRE,ne=i.RLE,O=i.PDF,N=i.LRI,G=i.RLI,H=i.FSI,oe=i.PDI;function de(re,ie){for(var te=125,W=new Uint32Array(re.length),Me=0;Me<re.length;Me++)W[Me]=h(re[Me]);var De=new Map;function Ee(Ur,Rs){var ir=W[Ur];W[Ur]=Rs,De.set(ir,De.get(ir)-1),ir&a&&De.set(a,De.get(a)-1),De.set(Rs,(De.get(Rs)||0)+1),Rs&a&&De.set(a,(De.get(a)||0)+1)}for(var _e=new Uint8Array(re.length),Ze=new Map,Oe=[],we=null,be=0;be<re.length;be++)we||Oe.push(we={start:be,end:re.length-1,level:ie==="rtl"?1:ie==="ltr"?0:Sd(be,!1)}),W[be]&F&&(we.end=be,we=null);for(var Be=ne|J|Q|X|s|oe|O|F,Ve=function(Ur){return Ur+(Ur&1?1:2)},ot=function(Ur){return Ur+(Ur&1?2:1)},$e=0;$e<Oe.length;$e++){we=Oe[$e];var qe=[{_level:we.level,_override:0,_isolate:0}],fe=void 0,Ue=0,it=0,Ae=0;De.clear();for(var Ye=we.start;Ye<=we.end;Ye++){var ye=W[Ye];if(fe=qe[qe.length-1],De.set(ye,(De.get(ye)||0)+1),ye&a&&De.set(a,(De.get(a)||0)+1),ye&Be)if(ye&(ne|J)){_e[Ye]=fe._level;var He=(ye===ne?ot:Ve)(fe._level);He<=te&&!Ue&&!it?qe.push({_level:He,_override:0,_isolate:0}):Ue||it++}else if(ye&(Q|X)){_e[Ye]=fe._level;var lt=(ye===Q?ot:Ve)(fe._level);lt<=te&&!Ue&&!it?qe.push({_level:lt,_override:ye&Q?M:b,_isolate:0}):Ue||it++}else if(ye&s){ye&H&&(ye=Sd(Ye+1,!0)===1?G:N),_e[Ye]=fe._level,fe._override&&Ee(Ye,fe._override);var mt=(ye===G?ot:Ve)(fe._level);mt<=te&&Ue===0&&it===0?(Ae++,qe.push({_level:mt,_override:0,_isolate:1,_isolInitIndex:Ye})):Ue++}else if(ye&oe){if(Ue>0)Ue--;else if(Ae>0){for(it=0;!qe[qe.length-1]._isolate;)qe.pop();var dt=qe[qe.length-1]._isolInitIndex;dt!=null&&(Ze.set(dt,Ye),Ze.set(Ye,dt)),qe.pop(),Ae--}fe=qe[qe.length-1],_e[Ye]=fe._level,fe._override&&Ee(Ye,fe._override)}else ye&O?(Ue===0&&(it>0?it--:!fe._isolate&&qe.length>1&&(qe.pop(),fe=qe[qe.length-1])),_e[Ye]=fe._level):ye&F&&(_e[Ye]=we.level);else _e[Ye]=fe._level,fe._override&&ye!==Z&&Ee(Ye,fe._override)}for(var Ot=[],Xt=null,gt=we.start;gt<=we.end;gt++){var en=W[gt];if(!(en&l)){var _n=_e[gt],vi=en&s,zn=en===oe;Xt&&_n===Xt._level?(Xt._end=gt,Xt._endsWithIsolInit=vi):Ot.push(Xt={_start:gt,_end:gt,_level:_n,_startsWithPDI:zn,_endsWithIsolInit:vi})}}for(var er=[],tr=0;tr<Ot.length;tr++){var hr=Ot[tr];if(!hr._startsWithPDI||hr._startsWithPDI&&!Ze.has(hr._start)){for(var Di=[Xt=hr],fi=void 0;Xt&&Xt._endsWithIsolInit&&(fi=Ze.get(Xt._end))!=null;)for(var Yt=tr+1;Yt<Ot.length;Yt++)if(Ot[Yt]._start===fi){Di.push(Xt=Ot[Yt]);break}for(var si=[],Or=0;Or<Di.length;Or++)for(var ee=Di[Or],se=ee._start;se<=ee._end;se++)si.push(se);for(var Ce=_e[si[0]],K=we.level,ae=si[0]-1;ae>=0;ae--)if(!(W[ae]&l)){K=_e[ae];break}var le=si[si.length-1],Se=_e[le],he=we.level;if(!(W[le]&s)){for(var Ne=le+1;Ne<=we.end;Ne++)if(!(W[Ne]&l)){he=_e[Ne];break}}er.push({_seqIndices:si,_sosType:Math.max(K,Ce)%2?M:b,_eosType:Math.max(he,Se)%2?M:b})}}for(var Qe=0;Qe<er.length;Qe++){var Xe=er[Qe],Pe=Xe._seqIndices,vt=Xe._sosType,at=Xe._eosType,st=_e[Pe[0]]&1?M:b;if(De.get(U))for(var _t=0;_t<Pe.length;_t++){var It=Pe[_t];if(W[It]&U){for(var Lt=vt,qt=_t-1;qt>=0;qt--)if(!(W[Pe[qt]]&l)){Lt=W[Pe[qt]];break}Ee(It,Lt&(s|oe)?j:Lt)}}if(De.get(I))for(var yt=0;yt<Pe.length;yt++){var ct=Pe[yt];if(W[ct]&I)for(var Ut=yt-1;Ut>=-1;Ut--){var Ft=Ut===-1?vt:W[Pe[Ut]];if(Ft&o){Ft===$&&Ee(ct,R);break}}}if(De.get($))for(var Qt=0;Qt<Pe.length;Qt++){var Pn=Pe[Qt];W[Pn]&$&&Ee(Pn,M)}if(De.get(T)||De.get(z))for(var Dn=1;Dn<Pe.length-1;Dn++){var ni=Pe[Dn];if(W[ni]&(T|z)){for(var ln=0,hn=0,oi=Dn-1;oi>=0&&(ln=W[Pe[oi]],!!(ln&l));oi--);for(var on=Dn+1;on<Pe.length&&(hn=W[Pe[on]],!!(hn&l));on++);ln===hn&&(W[ni]===T?ln===I:ln&(I|R))&&Ee(ni,ln)}}if(De.get(I))for(var nn=0;nn<Pe.length;nn++){var ii=Pe[nn];if(W[ii]&I){for(var Jr=nn-1;Jr>=0&&W[Pe[Jr]]&(D|l);Jr--)Ee(Pe[Jr],I);for(nn++;nn<Pe.length&&W[Pe[nn]]&(D|l|I);nn++)W[Pe[nn]]!==I&&Ee(Pe[nn],I)}}if(De.get(D)||De.get(T)||De.get(z))for(var nr=0;nr<Pe.length;nr++){var _o=Pe[nr];if(W[_o]&(D|T|z)){Ee(_o,j);for(var oc=nr-1;oc>=0&&W[Pe[oc]]&l;oc--)Ee(Pe[oc],j);for(var ac=nr+1;ac<Pe.length&&W[Pe[ac]]&l;ac++)Ee(Pe[ac],j)}}if(De.get(I))for(var lc=0,zf=vt;lc<Pe.length;lc++){var dy=Pe[lc],H0=W[dy];H0&I?zf===b&&Ee(dy,b):H0&o&&(zf=H0)}if(De.get(a)){var cc=M|I|R,_d=cc|b,wl=[];{for(var lu=[],Sl=0;Sl<Pe.length;Sl++)if(W[Pe[Sl]]&a){var Sn=re[Pe[Sl]],Q0=void 0;if(w(Sn)!==null)if(lu.length<63)lu.push({char:Sn,seqIndex:Sl});else break;else if((Q0=S(Sn))!==null)for(var uc=lu.length-1;uc>=0;uc--){var Ed=lu[uc].char;if(Ed===Q0||Ed===S(C(Sn))||w(C(Ed))===Sn){wl.push([lu[uc].seqIndex,Sl]),lu.length=uc;break}}}wl.sort(function(Ur,Rs){return Ur[0]-Rs[0]})}for(var V0=0;V0<wl.length;V0++){for(var py=wl[V0],Li=py[0],Uf=py[1],my=!1,Ts=0,W0=Li+1;W0<Uf;W0++){var kf=Pe[W0];if(W[kf]&_d){my=!0;var Eo=W[kf]&cc?M:b;if(Eo===st){Ts=Eo;break}}}if(my&&!Ts){Ts=vt;for(var j0=Li-1;j0>=0;j0--){var gy=Pe[j0];if(W[gy]&_d){var wo=W[gy]&cc?M:b;wo!==st?Ts=wo:Ts=st;break}}}if(Ts){if(W[Pe[Li]]=W[Pe[Uf]]=Ts,Ts!==st){for(var Is=Li+1;Is<Pe.length;Is++)if(!(W[Pe[Is]]&l)){h(re[Pe[Is]])&U&&(W[Pe[Is]]=Ts);break}}if(Ts!==st){for(var Cl=Uf+1;Cl<Pe.length;Cl++)if(!(W[Pe[Cl]]&l)){h(re[Pe[Cl]])&U&&(W[Pe[Cl]]=Ts);break}}}}for(var jo=0;jo<Pe.length;jo++)if(W[Pe[jo]]&a){for(var X0=jo,Y0=jo,Js=vt,Nf=jo-1;Nf>=0;Nf--)if(W[Pe[Nf]]&l)X0=Nf;else{Js=W[Pe[Nf]]&cc?M:b;break}for(var Gf=at,Hf=jo+1;Hf<Pe.length;Hf++)if(W[Pe[Hf]]&(a|l))Y0=Hf;else{Gf=W[Pe[Hf]]&cc?M:b;break}for(var Bs=X0;Bs<=Y0;Bs++)W[Pe[Bs]]=Js===Gf?Js:st;jo=Y0}}}for(var zr=we.start;zr<=we.end;zr++){var wd=_e[zr],za=W[zr];if(wd&1?za&(b|I|R)&&_e[zr]++:za&M?_e[zr]++:za&(R|I)&&(_e[zr]+=2),za&l&&(_e[zr]=zr===0?we.level:_e[zr-1]),zr===we.end||h(re[zr])&(V|F))for(var cu=zr;cu>=0&&h(re[cu])&c;cu--)_e[cu]=we.level}}return{levels:_e,paragraphs:Oe};function Sd(Ur,Rs){for(var ir=Ur;ir<re.length;ir++){var rr=W[ir];if(rr&(M|$))return 1;if(rr&(F|b)||Rs&&rr===oe)return 0;if(rr&s){var So=Ay(ir);ir=So===-1?re.length:So}}return 0}function Ay(Ur){for(var Rs=1,ir=Ur+1;ir<re.length;ir++){var rr=W[ir];if(rr&F)break;if(rr&oe){if(--Rs===0)return ir}else rr&s&&Rs++}return-1}}var ce="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ge;function q(){if(!ge){var re=g(ce,!0),ie=re.map,te=re.reverseMap;te.forEach(function(W,Me){ie.set(Me,W)}),ge=ie}}function xe(re){return q(),ge.get(re)||null}function ue(re,ie,te,W){var Me=re.length;te=Math.max(0,te==null?0:+te),W=Math.min(Me-1,W==null?Me-1:+W);for(var De=new Map,Ee=te;Ee<=W;Ee++)if(ie[Ee]&1){var _e=xe(re[Ee]);_e!==null&&De.set(Ee,_e)}return De}function me(re,ie,te,W){var Me=re.length;te=Math.max(0,te==null?0:+te),W=Math.min(Me-1,W==null?Me-1:+W);var De=[];return ie.paragraphs.forEach(function(Ee){var _e=Math.max(te,Ee.start),Ze=Math.min(W,Ee.end);if(_e<Ze){for(var Oe=ie.levels.slice(_e,Ze+1),we=Ze;we>=_e&&h(re[we])&c;we--)Oe[we]=Ee.level;for(var be=Ee.level,Be=1/0,Ve=0;Ve<Oe.length;Ve++){var ot=Oe[Ve];ot>be&&(be=ot),ot<Be&&(Be=ot|1)}for(var $e=be;$e>=Be;$e--)for(var qe=0;qe<Oe.length;qe++)if(Oe[qe]>=$e){for(var fe=qe;qe+1<Oe.length&&Oe[qe+1]>=$e;)qe++;qe>fe&&De.push([fe+_e,qe+_e])}}}),De}function pe(re,ie,te,W){var Me=Le(re,ie,te,W),De=[].concat(re);return Me.forEach(function(Ee,_e){De[_e]=(ie.levels[Ee]&1?xe(re[Ee]):null)||re[Ee]}),De.join("")}function Le(re,ie,te,W){for(var Me=me(re,ie,te,W),De=[],Ee=0;Ee<re.length;Ee++)De[Ee]=Ee;return Me.forEach(function(_e){for(var Ze=_e[0],Oe=_e[1],we=De.slice(Ze,Oe+1),be=we.length;be--;)De[Oe-be]=we[be]}),De}return e.closingToOpeningBracket=S,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=C,e.getEmbeddingLevels=de,e.getMirroredCharacter=xe,e.getMirroredCharactersMap=ue,e.getReorderSegments=me,e.getReorderedIndices=Le,e.getReorderedString=pe,e.openingToClosingBracket=w,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const bX=/\bvoid\s+main\s*\(\s*\)\s*{/g;function PI(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let s=Zt[r];return s?PI(s):i}return t.replace(e,n)}const is=[];for(let t=0;t<256;t++)is[t]=(t<16?"0":"")+t.toString(16);function gAe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(is[t&255]+is[t>>8&255]+is[t>>16&255]+is[t>>24&255]+"-"+is[e&255]+is[e>>8&255]+"-"+is[e>>16&15|64]+is[e>>24&255]+"-"+is[n&63|128]+is[n>>8&255]+"-"+is[n>>16&255]+is[n>>24&255]+is[i&255]+is[i>>8&255]+is[i>>16&255]+is[i>>24&255]).toUpperCase()}const gh=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},AAe=Date.now(),lz=new WeakMap,cz=new Map;let vAe=1e10;function DI(t,e){const n=EAe(e);let i=lz.get(t);if(i||lz.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,s=function(c,u){t.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=cz[f];if(!h){const d=yAe(this,c,e,n);h=cz[f]=d}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,gh(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-AAe}}),this[r]&&this[r](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:vAe++}),u.uuid=gAe(),u.uniforms=gh({},c.uniforms,e.uniforms),u.defines=gh({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=gh({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(gh(this.extensions,c.extensions),gh(this.defines,c.defines),gh(this.uniforms,Ra.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=DI(t.isDerivedMaterial?t.getDepthMaterial():new Dv({depthPacking:aw}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=DI(t.isDerivedMaterial?t.getDistanceMaterial():new dw,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return i[n]=o,new o}function yAe(t,{vertexShader:e,fragmentShader:n},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||d)&&(e=PI(e)),(h||d)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=PI(n)),d){let g=d({vertexShader:e,fragmentShader:n});e=g.vertexShader,n=g.fragmentShader}if(h){let g=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,A=>(g.push(A),"")),f=`${h}
${g.join(`
`)}
${f}`}if(p){const g=`
uniform float ${p};
`;s=g+s,c=g+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,A,m,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,m))?A:`troika_${A}_${r}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=uz(e,r,s,o,a),n=uz(n,r,c,u,f),{vertexShader:e,fragmentShader:n}}function uz(t,e,n,i,r){return(i||r||n)&&(t=t.replace(bX,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function xAe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let _Ae=0;const fz=new Map;function EAe(t){const e=JSON.stringify(t,xAe);let n=fz.get(e);return n==null&&fz.set(e,n=++_Ae),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function wAe(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:a},f={},h=0;h<l;h++){var d=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var p=o.readUint(r,s);s+=4;var g=o.readUint(r,s);s+=4,f[d]={offset:p,length:g}}for(h=0;h<c.length;h++){var A=c[h];f[A]&&(u[A.trim()]=e[A.trim()].parse(r,f[A].offset,f[A].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var h=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,f==s)return h}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(r,s),s+=4;var h=c.readUshort(r,s);s+=2;var d=c.readUshort(r,s);s+=2;var p=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,f+h),u.featureList=e._lctf.readFeatureList(r,f+d),u.lookupList=e._lctf.readLookupList(r,f+p,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=a.readUshort(r,s);s+=2;var d=e._lctf.readLookupTable(r,l+h,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=c.ltype,h=0;h<u;h++){var d=a.readUshort(r,s);s+=2;var p=o(r,f,l+d,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(r,s)),s+=2}if(l==2){var h=o.readUshort(r,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2;var d=e._lctf.readFeatureTable(r,a+h);d.tag=f.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(r,s+2*f));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(r,a+h)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,a+c));var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(r,a+d)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(r,s,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(r,s+f[u],s+f[u+1]));s+=f[f.length-1];var d=h[0],p=[];s=e.CFF.readIndex(r,s,p);var g=[];for(u=0;u<p.length-1;u++)g.push(a.readASCII(r,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(r,s,d),d.CharStrings){s=d.CharStrings,p=[],s=e.CFF.readIndex(r,s,p);var A=[];for(u=0;u<p.length-1;u++)A.push(a.readBytes(r,s+p[u],p[u+1]-p[u]));d.CharStrings=A}if(d.ROS){s=d.FDArray;var m=[];for(s=e.CFF.readIndex(r,s,m),d.FDArray=[],u=0;u<m.length-1;u++){var v=e.CFF.readDict(r,s+m[u],s+m[u+1]);e.CFF._readFDict(r,v,g),d.FDArray.push(v)}s+=m[m.length-1],s=d.FDSelect,d.FDSelect=[];var y=r[s];if(s++,y!=3)throw y;var w=a.readUshort(r,s);for(s+=2,u=0;u<w+1;u++)d.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,g),d},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(r,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(r,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(r,s),s+=2;var h=0;for(c==1?(h=r[s],s++):(h=a.readUshort(r,s),s+=2),u=0;u<=h;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,f=null,h=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(h=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(r,s+1)/65535,u=5),o.val=h??"o"+f,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,p=null;u<=20&&(d=u,h=1),u==12&&(d=100*u+f,h=2),u!=19&&u!=20||(d=u,h=2),21<=u&&u<=27&&(d=u,h=1),u==28&&(p=l.readShort(r,s+1),h=3),29<=u&&u<=31&&(d=u,h=1),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255&&(p=l.readInt(r,s+1)/65535,h=5),c.push(p??"o"+d),s+=h}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,p=null;if(u==28&&(p=a.readShort(r,s+1),h=3),u==29&&(p=a.readInt(r,s+1),h=5),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255)throw p=a.readInt(r,s+1)/65535,h=5,"unknown number";if(u==30){var g=[];for(h=1;;){var A=r[s+h];h++;var m=A>>4,v=15&A;if(m!=15&&g.push(m),v!=15&&g.push(v),v==15)break}for(var y="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<g.length;S++)y+=w[g[S]];p=parseFloat(y)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(p),s+=h}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var h=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var p=a.readUint(r,s);s+=4;var g="p"+h+"e"+d,A=u.indexOf(p);if(A==-1){var m;A=l.tables.length,u.push(p);var v=a.readUshort(r,p);v==0?m=e.cmap.parse0(r,p):v==4?m=e.cmap.parse4(r,p):v==6?m=e.cmap.parse6(r,p):v==12?m=e.cmap.parse12(r,p):console.debug("unknown format: "+v,h,d,p),l.tables.push(m)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=A}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var f=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(r,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(r,u+0),h=o.readUint(r,u+4),d=o.readUint(r,u+8);a.groups.push([f,h,d])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var p=a[l];l++;for(var g=0;g<p;g++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<h;u++){var A=(2&c.flags[u])!=0,m=(16&c.flags[u])!=0;A?(c.xs.push(m?a[l]:-a[l]),l++):m?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)A=(4&c.flags[u])!=0,m=(32&c.flags[u])!=0,A?(c.ys.push(m?a[l]:-a[l]),l++):m?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var v=0,y=0;for(u=0;u<h;u++)v+=c.xs[u],y+=c.ys[u],c.xs[u]=v,c.ys[u]=y}else{var w;c.parts=[];do{w=o.readUshort(a,l),l+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(S),S.glyphIndex=o.readUshort(a,l),l+=2,1&w){var C=o.readShort(a,l);l+=2;var b=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,b=o.readInt8(a,l),l++;2&w?(S.m.tx=C,S.m.ty=b):(S.p1=C,S.p2=b),8&w?(S.m.a=S.m.d=o.readF2dot14(a,l),l+=2):64&w?(S.m.a=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2):128&w&&(S.m.a=o.readF2dot14(a,l),l+=2,S.m.b=o.readF2dot14(a,l),l+=2,S.m.c=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2)}while(32&w);if(256&w){var M=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<M;u++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(s==1&&u.fmt==1){var h=l.readUshort(r,o);o+=2,h!=0&&(u.pos=e.GPOS.readValueRecord(r,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(r,o),o+=2;var d=l.readUshort(r,o);o+=2;var p=e._lctf.numOfOnes(h),g=e._lctf.numOfOnes(d);if(u.fmt==1){u.pairsets=[];var A=l.readUshort(r,o);o+=2;for(var m=0;m<A;m++){var v=c+l.readUshort(r,o);o+=2;var y=l.readUshort(r,v);v+=2;for(var w=[],S=0;S<y;S++){var C=l.readUshort(r,v);v+=2,h!=0&&(R=e.GPOS.readValueRecord(r,v,h),v+=2*p),d!=0&&(z=e.GPOS.readValueRecord(r,v,d),v+=2*g),w.push({gid2:C,val1:R,val2:z})}u.pairsets.push(w)}}if(u.fmt==2){var b=l.readUshort(r,o);o+=2;var M=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+b),u.classDef2=e._lctf.readClassDef(r,c+M),u.matrix=[],m=0;m<I;m++){var D=[];for(S=0;S<T;S++){var R=null,z=null;h!=0&&(R=e.GPOS.readValueRecord(r,o,h),o+=2*p),d!=0&&(z=e.GPOS.readValueRecord(r,o,d),o+=2*g),D.push({val1:R,val2:z})}u.matrix.push(D)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var F=l.readUshort(r,o);o+=2;var V=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=F;else if(a.ltype!=F)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+V)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],c=s,u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){for(var h=[],d=0;d<o;d++)h.push(e.GPOS.readAnchorRecord(r,c+a.readUshort(r,s))),s+=2;l.push(h)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);f.markClass=o.readUshort(r,s),a.push(f),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var h=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,h),o+=2*u.newg.length}}else if(s==2&&u.fmt==1){h=l.readUshort(r,o),o+=2,u.seqs=[];for(var d=0;d<h;d++){var p=l.readUshort(r,o)+c;o+=2;var g=l.readUshort(r,p);u.seqs.push(l.readUshorts(r,p+2,g))}}else if(s==4)for(u.vals=[],h=l.readUshort(r,o),o+=2,d=0;d<h;d++){var A=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+A))}else if(s==5&&u.fmt==2){if(u.fmt==2){var m=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+m),u.scset=[];var v=l.readUshort(r,o);for(o+=2,d=0;d<v;d++){var y=l.readUshort(r,o);o+=2,u.scset.push(y==0?null:e.GSUB.readSubClassSet(r,c+y))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){h=l.readUshort(r,o),o+=2;for(var w=[],S=0;S<h;S++)w.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*S)));o+=2*h,d==0&&(u.backCvg=w),d==1&&(u.inptCvg=w),d==2&&(u.ahedCvg=w)}h=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,h)}}else{if(s==7&&u.fmt==1){var C=l.readUshort(r,o);o+=2;var b=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=C;else if(a.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+b)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var f=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+f))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+f))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+f))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,f=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(r,s,f)}return f},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(r,s),s+=4;var h=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(r,s);s+=2;var h=a.readUshort(r,s);s+=2;var d=a.readShort(r,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(h),p.vals.push(d),l=f}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(l.readUshort(r,s+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(l.readUint(r,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,d=0;d<c;d++){var p=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var w,S=f[m],C=h+12*c+y;if(p==0)w=a.readUnicode(r,C,v/2);else if(p==3&&g==0)w=a.readUnicode(r,C,v/2);else if(g==0)w=a.readASCII(r,C,v);else if(g==1)w=a.readUnicode(r,C,v/2);else if(g==3)w=a.readUnicode(r,C,v/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;w=a.readASCII(r,C,v),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var b="p"+p+","+A.toString(16);l[b]==null&&(l[b]={}),l[b][S!==void 0?S:m]=w,l[b]._lang=A}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){u=M;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,h=1&r.flags[c],d=1&r.flags[u],p=1&r.flags[f],g=r.xs[c],A=r.ys[c];if(c==a)if(h){if(!d){e.U.P.moveTo(s,g,A);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+g)/2,(r.ys[u]+A)/2);h?d&&e.U.P.lineTo(s,g,A):p?e.U.P.qcurveTo(s,g,A,r.xs[f],r.ys[f]):e.U.P.qcurveTo(s,g,A,(g+r.xs[f])/2,(A+r.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],d=l.crds[f+1];o.crds.push(h*u.a+d*u.b+u.tx),o.crds.push(h*u.c+d*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[s]))!=-1){if(o.ltype==1)r[s],f.fmt==1?r[s]=r[s]+f.delta:r[s]=f.newg[u];else if(o.ltype==4)for(var h=f.vals[u],d=0;d<h.length;d++){var p=h[d],g=p.chain.length;if(!(g>l)){for(var A=!0,m=0,v=0;v<g;v++){for(;r[s+m+(1+v)]==-1;)m++;p.chain[v]!=r[s+m+(1+v)]&&(A=!1)}if(A){for(r[s]=p.nglyph,v=0;v<g+m;v++)r[s+v+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var y=e._lctf.getInterval(f.cDef,r[s]),w=f.cDef[y+2],S=f.scset[w],C=0;C<S.length;C++){var b=S[C],M=b.input;if(!(M.length>l)){for(A=!0,v=0;v<M.length;v++){var I=e._lctf.getInterval(f.cDef,r[s+1+v]);if(y==-1&&f.cDef[I+2]!=M[v]){A=!1;break}}if(A){var T=b.substLookupRecords;for(d=0;d<T.length;d+=2)T[d],T[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,s)||!e.U._glsCovered(r,f.ahedCvg,s+f.inptCvg.length))continue;var D=f.lookupRec;for(C=0;C<D.length;C+=2){y=D[C];var R=a[D[C+1]];e.U._applySubs(r,s+y,R,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(r,u),d=0;d<h.crds.length;d+=2)a.crds.push(h.crds[d]+l),a.crds.push(h.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open,p=0,g=s.x,A=s.y,m=0,v=0,y=0,w=0,S=0,C=0,b=0,M=0,I=0,T=0,D={val:0,size:0};p<r.length;){e.CFF.getCharString(r,p,D);var R=D.val;if(p+=D.size,R=="o1"||R=="o18")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(R=="o3"||R=="o23")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(R=="o4")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),d&&e.U.P.closePath(l),A+=c.pop(),e.U.P.moveTo(l,g,A),d=!0;else if(R=="o5")for(;c.length>0;)g+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,g,A);else if(R=="o6"||R=="o7")for(var z=c.length,F=R=="o6",V=0;V<z;V++){var j=c.shift();F?g+=j:A+=j,F=!F,e.U.P.lineTo(l,g,A)}else if(R=="o8"||R=="o24"){z=c.length;for(var Z=0;Z+6<=z;)m=g+c.shift(),v=A+c.shift(),y=m+c.shift(),w=v+c.shift(),g=y+c.shift(),A=w+c.shift(),e.U.P.curveTo(l,m,v,y,w,g,A),Z+=6;R=="o24"&&(g+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,g,A))}else{if(R=="o11")break;if(R=="o1234"||R=="o1235"||R=="o1236"||R=="o1237")R=="o1234"&&(v=A,y=(m=g+c.shift())+c.shift(),T=w=v+c.shift(),C=w,M=A,g=(b=(S=(I=y+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,m,v,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,A)),R=="o1235"&&(m=g+c.shift(),v=A+c.shift(),y=m+c.shift(),w=v+c.shift(),I=y+c.shift(),T=w+c.shift(),S=I+c.shift(),C=T+c.shift(),b=S+c.shift(),M=C+c.shift(),g=b+c.shift(),A=M+c.shift(),c.shift(),e.U.P.curveTo(l,m,v,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,A)),R=="o1236"&&(m=g+c.shift(),v=A+c.shift(),y=m+c.shift(),T=w=v+c.shift(),C=w,b=(S=(I=y+c.shift())+c.shift())+c.shift(),M=C+c.shift(),g=b+c.shift(),e.U.P.curveTo(l,m,v,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,A)),R=="o1237"&&(m=g+c.shift(),v=A+c.shift(),y=m+c.shift(),w=v+c.shift(),I=y+c.shift(),T=w+c.shift(),S=I+c.shift(),C=T+c.shift(),b=S+c.shift(),M=C+c.shift(),Math.abs(b-g)>Math.abs(M-A)?g=b+c.shift():A=M+c.shift(),e.U.P.curveTo(l,m,v,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,A));else if(R=="o14"){if(c.length>0&&!f&&(h=c.shift()+o.nominalWidthX,f=!0),c.length==4){var U=c.shift(),$=c.shift(),X=c.shift(),Q=c.shift(),J=e.CFF.glyphBySE(o,X),ne=e.CFF.glyphBySE(o,Q);e.U._drawCFF(o.CharStrings[J],s,o,a,l),s.x=U,s.y=$,e.U._drawCFF(o.CharStrings[ne],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(R=="o19"||R=="o20")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,p+=u+7>>3;else if(R=="o21")c.length>2&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),A+=c.pop(),g+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,A),d=!0;else if(R=="o22")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),g+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,A),d=!0;else if(R=="o25"){for(;c.length>6;)g+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,g,A);m=g+c.shift(),v=A+c.shift(),y=m+c.shift(),w=v+c.shift(),g=y+c.shift(),A=w+c.shift(),e.U.P.curveTo(l,m,v,y,w,g,A)}else if(R=="o26")for(c.length%2&&(g+=c.shift());c.length>0;)m=g,v=A+c.shift(),g=y=m+c.shift(),A=(w=v+c.shift())+c.shift(),e.U.P.curveTo(l,m,v,y,w,g,A);else if(R=="o27")for(c.length%2&&(A+=c.shift());c.length>0;)v=A,y=(m=g+c.shift())+c.shift(),w=v+c.shift(),g=y+c.shift(),A=w,e.U.P.curveTo(l,m,v,y,w,g,A);else if(R=="o10"||R=="o29"){var O=R=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var N=c.pop(),G=O.Subrs[N+O.Bias];s.x=g,s.y=A,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d,e.U._drawCFF(G,s,o,a,l),g=s.x,A=s.y,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open}}else if(R=="o30"||R=="o31"){var H=c.length,oe=(Z=0,R=="o31");for(Z+=H-(z=-3&H);Z<z;)oe?(v=A,y=(m=g+c.shift())+c.shift(),A=(w=v+c.shift())+c.shift(),z-Z==5?(g=y+c.shift(),Z++):g=y,oe=!1):(m=g,v=A+c.shift(),y=m+c.shift(),w=v+c.shift(),g=y+c.shift(),z-Z==5?(A=w+c.shift(),Z++):A=w,oe=!0),e.U.P.curveTo(l,m,v,y,w,g,A),Z+=4}else{if((R+"").charAt(0)=="o")throw console.debug("Unknown operation: "+R,r),R;c.push(R)}}}s.x=g,s.y=A,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function SAe(){return function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(R,z){for(var F=new n(31),V=0;V<31;++V)F[V]=z+=1<<R[V-1];var j=new i(F[30]);for(V=1;V<30;++V)for(var Z=F[V];Z<F[V+1];++Z)j[Z]=Z-F[V]<<5|V;return[F,j]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],h=new n(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(R,z,F){for(var V=R.length,j=0,Z=new n(z);j<V;++j)++Z[R[j]-1];var U,$=new n(z);for(j=0;j<z;++j)$[j]=$[j-1]+Z[j-1]<<1;{U=new n(1<<z);var X=15-z;for(j=0;j<V;++j)if(R[j])for(var Q=j<<4|R[j],J=z-R[j],ne=$[R[j]-1]++<<J,O=ne|(1<<J)-1;ne<=O;++ne)U[h[ne]>>>X]=Q}return U},A=new e(288);for(d=0;d<144;++d)A[d]=8;for(d=144;d<256;++d)A[d]=9;for(d=256;d<280;++d)A[d]=7;for(d=280;d<288;++d)A[d]=8;var m=new e(32);for(d=0;d<32;++d)m[d]=5;var v=g(A,9),y=g(m,5),w=function(R){for(var z=R[0],F=1;F<R.length;++F)R[F]>z&&(z=R[F]);return z},S=function(R,z,F){var V=z/8|0;return(R[V]|R[V+1]<<8)>>(7&z)&F},C=function(R,z){var F=z/8|0;return(R[F]|R[F+1]<<8|R[F+2]<<16)>>(7&z)},b=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(R,z,F){var V=new Error(z||b[R]);if(V.code=R,Error.captureStackTrace&&Error.captureStackTrace(V,M),!F)throw V;return V},I=function(R,z,F){var V=R.length;if(!V||F&&!F.l&&V<5)return z||new e(0);var j=!z||F,Z=!F||F.i;F||(F={}),z||(z=new e(3*V));var U,$=function(fe){var Ue=z.length;if(fe>Ue){var it=new e(Math.max(2*Ue,fe));it.set(z),z=it}},X=F.f||0,Q=F.p||0,J=F.b||0,ne=F.l,O=F.d,N=F.m,G=F.n,H=8*V;do{if(!ne){F.f=X=S(R,Q,1);var oe=S(R,Q+1,3);if(Q+=3,!oe){var de=R[(te=((U=Q)/8|0)+(7&U&&1)+4)-4]|R[te-3]<<8,ce=te+de;if(ce>V){Z&&M(0);break}j&&$(J+de),z.set(R.subarray(te,ce),J),F.b=J+=de,F.p=Q=8*ce;continue}if(oe==1)ne=v,O=y,N=9,G=5;else if(oe==2){var ge=S(R,Q,31)+257,q=S(R,Q+10,15)+4,xe=ge+S(R,Q+5,31)+1;Q+=14;for(var ue=new e(xe),me=new e(19),pe=0;pe<q;++pe)me[o[pe]]=S(R,Q+3*pe,7);Q+=3*q;var Le=w(me),re=(1<<Le)-1,ie=g(me,Le);for(pe=0;pe<xe;){var te,W=ie[S(R,Q,re)];if(Q+=15&W,(te=W>>>4)<16)ue[pe++]=te;else{var Me=0,De=0;for(te==16?(De=3+S(R,Q,3),Q+=2,Me=ue[pe-1]):te==17?(De=3+S(R,Q,7),Q+=3):te==18&&(De=11+S(R,Q,127),Q+=7);De--;)ue[pe++]=Me}}var Ee=ue.subarray(0,ge),_e=ue.subarray(ge);N=w(Ee),G=w(_e),ne=g(Ee,N),O=g(_e,G)}else M(1);if(Q>H){Z&&M(0);break}}j&&$(J+131072);for(var Ze=(1<<N)-1,Oe=(1<<G)-1,we=Q;;we=Q){var be=(Me=ne[C(R,Q)&Ze])>>>4;if((Q+=15&Me)>H){Z&&M(0);break}if(Me||M(2),be<256)z[J++]=be;else{if(be==256){we=Q,ne=null;break}var Be=be-254;if(be>264){var Ve=r[pe=be-257];Be=S(R,Q,(1<<Ve)-1)+c[pe],Q+=Ve}var ot=O[C(R,Q)&Oe],$e=ot>>>4;if(ot||M(3),Q+=15&ot,_e=f[$e],$e>3&&(Ve=s[$e],_e+=C(R,Q)&(1<<Ve)-1,Q+=Ve),Q>H){Z&&M(0);break}j&&$(J+131072);for(var qe=J+Be;J<qe;J+=4)z[J]=z[J-_e],z[J+1]=z[J+1-_e],z[J+2]=z[J+2-_e],z[J+3]=z[J+3-_e];J=qe}}F.l=ne,F.p=we,F.b=J,ne&&(X=1,F.m=N,F.d=O,F.n=G)}while(!X);return J==z.length?z:function(fe,Ue,it){(it==null||it>fe.length)&&(it=fe.length);var Ae=new(fe instanceof n?n:fe instanceof i?i:e)(it-Ue);return Ae.set(fe.subarray(Ue,it)),Ae}(z,0,J)},T=new e(0),D=typeof TextDecoder<"u"&&new TextDecoder;try{D.decode(T,{stream:!0})}catch{}return t.convert_streams=function(R){var z=new DataView(R),F=0;function V(){var ge=z.getUint16(F);return F+=2,ge}function j(){var ge=z.getUint32(F);return F+=4,ge}function Z(ge){de.setUint16(ce,ge),ce+=2}function U(ge){de.setUint32(ce,ge),ce+=4}for(var $={signature:j(),flavor:j(),length:j(),numTables:V(),reserved:V(),totalSfntSize:j(),majorVersion:V(),minorVersion:V(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},X=0;Math.pow(2,X)<=$.numTables;)X++;X--;for(var Q=16*Math.pow(2,X),J=16*$.numTables-Q,ne=12,O=[],N=0;N<$.numTables;N++)O.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),ne+=16;var G,H=new Uint8Array(12+16*O.length+O.reduce(function(ge,q){return ge+q.origLength+4},0)),oe=H.buffer,de=new DataView(oe),ce=0;return U($.flavor),Z($.numTables),Z(Q),Z(X),Z(J),O.forEach(function(ge){U(ge.tag),U(ge.origChecksum),U(ne),U(ge.origLength),ge.outOffset=ne,(ne+=ge.origLength)%4!=0&&(ne+=4-ne%4)}),O.forEach(function(ge){var q,xe=R.slice(ge.offset,ge.offset+ge.compLength);if(ge.compLength!=ge.origLength){var ue=new Uint8Array(ge.origLength);q=new Uint8Array(xe,2),I(q,ue)}else ue=new Uint8Array(xe);H.set(ue,ge.outOffset);var me=0;(ne=ge.outOffset+ge.origLength)%4!=0&&(me=4-ne%4),H.set(new Uint8Array(me).buffer,ge.outOffset+ge.origLength),G=ne+me}),oe.slice(0,G)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function CAe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function f(b){if(!u){const M={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let I in i){let T=0;i[I].split(",").forEach(D=>{let[R,z]=D.split("+");R=parseInt(R,36),z=z?parseInt(z,36):0,u.set(T+=R,M[I]);for(let F=z;F--;)u.set(++T,M[I])})}}return u.get(b)||c}const h=1,d=2,p=3,g=4,A=[null,"isol","init","fina","medi"];function m(b){const M=new Uint8Array(b.length);let I=c,T=h,D=-1;for(let R=0;R<b.length;R++){const z=b.codePointAt(R);let F=f(z)|0,V=h;F&a||(I&(r|o|l)?F&(s|o|l)?(V=p,(T===h||T===p)&&M[D]++):F&(r|c)&&(T===d||T===g)&&M[D]--:I&(s|c)&&(T===d||T===g)&&M[D]--,T=M[R]=V,I=F,D=R,z>65535&&R++)}return M}function v(b,M){const I=[];for(let D=0;D<M.length;D++){const R=M.codePointAt(D);R>65535&&D++,I.push(t.U.codeToGlyph(b,R))}const T=b.GSUB;if(T){const{lookupList:D,featureList:R}=T;let z;const F=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,V=[];R.forEach(j=>{if(F.test(j.tag))for(let Z=0;Z<j.tab.length;Z++){if(V[j.tab[Z]])continue;V[j.tab[Z]]=!0;const U=D[j.tab[Z]],$=/^(isol|init|fina|medi)$/.test(j.tag);$&&!z&&(z=m(M));for(let X=0;X<I.length;X++)(!z||!$||A[z[X]]===j.tag)&&t.U._applySubs(I,X,U,D)}})}return I}function y(b,M){const I=new Int16Array(M.length*3);let T=0;for(;T<M.length;T++){const F=M[T];if(F===-1)continue;I[T*3+2]=b.hmtx.aWidth[F];const V=b.GPOS;if(V){const j=V.lookupList;for(let Z=0;Z<j.length;Z++){const U=j[Z];for(let $=0;$<U.tabs.length;$++){const X=U.tabs[$];if(U.ltype===1){if(t._lctf.coverageIndex(X.coverage,F)!==-1&&X.pos){z(X.pos,T);break}}else if(U.ltype===2){let Q=null,J=D();if(J!==-1){const ne=t._lctf.coverageIndex(X.coverage,M[J]);if(ne!==-1){if(X.fmt===1){const O=X.pairsets[ne];for(let N=0;N<O.length;N++)O[N].gid2===F&&(Q=O[N])}else if(X.fmt===2){const O=t.U._getGlyphClass(M[J],X.classDef1),N=t.U._getGlyphClass(F,X.classDef2);Q=X.matrix[O][N]}if(Q){Q.val1&&z(Q.val1,J),Q.val2&&z(Q.val2,T);break}}}}else if(U.ltype===4){const Q=t._lctf.coverageIndex(X.markCoverage,F);if(Q!==-1){const J=D(R),ne=J===-1?-1:t._lctf.coverageIndex(X.baseCoverage,M[J]);if(ne!==-1){const O=X.markArray[Q],N=X.baseArray[ne][O.markClass];I[T*3]=N.x-O.x+I[J*3]-I[J*3+2],I[T*3+1]=N.y-O.y+I[J*3+1];break}}}else if(U.ltype===6){const Q=t._lctf.coverageIndex(X.mark1Coverage,F);if(Q!==-1){const J=D();if(J!==-1){const ne=M[J];if(w(b,ne)===3){const O=t._lctf.coverageIndex(X.mark2Coverage,ne);if(O!==-1){const N=X.mark1Array[Q],G=X.mark2Array[O][N.markClass];I[T*3]=G.x-N.x+I[J*3]-I[J*3+2],I[T*3+1]=G.y-N.y+I[J*3+1];break}}}}}}}}else if(b.kern&&!b.cff){const j=D();if(j!==-1){const Z=b.kern.glyph1.indexOf(M[j]);if(Z!==-1){const U=b.kern.rval[Z].glyph2.indexOf(F);U!==-1&&(I[j*3+2]+=b.kern.rval[Z].vals[U])}}}}return I;function D(F){for(let V=T-1;V>=0;V--)if(M[V]!==-1&&(!F||F(M[V])))return V;return-1}function R(F){return w(b,F)===1}function z(F,V){for(let j=0;j<3;j++)I[V*3+j]+=F[j]||0}}function w(b,M){const I=b.GDEF&&b.GDEF.glyphClassDef;return I?t.U._getGlyphClass(M,I):0}function S(...b){for(let M=0;M<b.length;M++)if(typeof b[M]=="number")return b[M]}function C(b){const M=Object.create(null),I=b["OS/2"],T=b.hhea,D=b.head.unitsPerEm,R=S(I&&I.sTypoAscender,T&&T.ascender,D),z={unitsPerEm:D,ascender:R,descender:S(I&&I.sTypoDescender,T&&T.descender,0),capHeight:S(I&&I.sCapHeight,R),xHeight:S(I&&I.sxHeight,R),lineGap:S(I&&I.sTypoLineGap,T&&T.lineGap),supportsCodePoint(F){return t.U.codeToGlyph(b,F)>0},forEachGlyph(F,V,j,Z){let U=0;const $=1/z.unitsPerEm*V,X=v(b,F);let Q=0;const J=y(b,X);return X.forEach((ne,O)=>{if(ne!==-1){let N=M[ne];if(!N){const{cmds:G,crds:H}=t.U.glyphToPath(b,ne);let oe="",de=0;for(let ue=0,me=G.length;ue<me;ue++){const pe=n[G[ue]];oe+=G[ue];for(let Le=1;Le<=pe;Le++)oe+=(Le>1?",":"")+H[de++]}let ce,ge,q,xe;if(H.length){ce=ge=1/0,q=xe=-1/0;for(let ue=0,me=H.length;ue<me;ue+=2){let pe=H[ue],Le=H[ue+1];pe<ce&&(ce=pe),Le<ge&&(ge=Le),pe>q&&(q=pe),Le>xe&&(xe=Le)}}else ce=q=ge=xe=0;N=M[ne]={index:ne,advanceWidth:b.hmtx.aWidth[ne],xMin:ce,yMin:ge,xMax:q,yMax:xe,path:oe}}Z.call(null,N,U+J[O*3]*$,J[O*3+1]*$,Q),U+=J[O*3+2]*$,j&&(U+=j*V)}Q+=F.codePointAt(Q)>65535?2:1}),U}};return z}return function(M){const I=new Uint8Array(M,0,4),T=t._bin.readASCII(I,0,4);if(T==="wOFF")M=e(M);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return C(t.parse(M)[0])}}const bAe=B0({name:"Typr Font Parser",dependencies:[wAe,SAe,CAe],init(t,e,n){const i=t(),r=e();return n(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function MAe(){return function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(y){var w=y>>5;this.buckets.set(w,(this.buckets.get(w)||0)|1<<(31&y))},e.prototype.has=function(y){var w=this.buckets.get(y>>5);return w!==void 0&&(w&1<<(31&y))!=0},e.prototype.serialize=function(){var y=[];return this.buckets.forEach(function(w,S){y.push((+S).toString(36)+":"+w.toString(36))}),y.join(",")},e.prototype.deserialize=function(y){var w=this;this.buckets.clear(),y.split(",").forEach(function(S){var C=S.split(":");w.buckets.set(parseInt(C[0],36),parseInt(C[1],36))})};var n=Math.pow(2,8),i=n-1,r=~i;function s(y){var w=function(C){return C&r}(y).toString(16),S=function(C){return(C&r)+n-1}(y).toString(16);return"codepoint-index/plane"+(y>>16)+"/"+w+"-"+S+".json"}function o(y,w){var S=y&i,C=w.codePointAt(S/6|0);return((C=(C||48)-48)&1<<S%6)!=0}function a(y,w){var S;(S=y,S.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(C){return C.split("-").map(function(b){return parseInt(b.trim(),16)})})).forEach(function(C){var b=C[0],M=C[1];M===void 0&&(M=b),w(b,M)})}function l(y,w){a(y,function(S,C){for(var b=S;b<=C;b++)w(b)})}var c={},u={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(y){var w=f.get(y);return w||(w=new e,l(y.ranges,function(S){return w.add(S)}),f.set(y,w)),w}var p,g=new Map;function A(y,w,S){return y[w]?w:y[S]?S:function(C){for(var b in C)return b}(y)}function m(y,w){var S=w;if(!y.includes(S)){S=1/0;for(var C=0;C<y.length;C++)Math.abs(y[C]-w)<Math.abs(S-w)&&(S=y[C])}return S}function v(y){return p||(p=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(w){p.add(w)})),p.has(y)}return t.CodePointSet=e,t.clearCache=function(){c={},u={}},t.getFontsForString=function(y,w){w===void 0&&(w={});var S,C=w.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(S=y)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(S)?"ja":"en");var b=w.category;b===void 0&&(b="sans-serif");var M=w.style;M===void 0&&(M="normal");var I=w.weight;I===void 0&&(I=400);var T=(w.dataUrl||h).replace(/\/$/g,""),D=new Map,R=new Uint8Array(y.length),z={},F={},V=new Array(y.length),j=new Map,Z=!1;function U(Q){var J=g.get(Q);return J||(J=fetch(T+"/"+Q).then(function(ne){if(!ne.ok)throw new Error(ne.statusText);return ne.json().then(function(O){if(!Array.isArray(O)||O[0]!==1)throw new Error("Incorrect schema version; need 1, got "+O[0]);return O[1]})}).catch(function(ne){if(T!==h)return Z||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+T+'", trying default CDN. '+ne.message),Z=!0),T=h,g.delete(Q),U(Q);throw ne}),g.set(Q,J)),J}for(var $=function(Q){var J=y.codePointAt(Q),ne=s(J);V[Q]=ne,c[ne]||j.has(ne)||j.set(ne,U(ne).then(function(O){c[ne]=O})),J>65535&&(Q++,X=Q)},X=0;X<y.length;X++)$(X);return Promise.all(j.values()).then(function(){j.clear();for(var Q=function(ne){var O=y.codePointAt(ne),N=null,G=c[V[ne]],H=void 0;for(var oe in G){var de=F[oe];if(de===void 0&&(de=F[oe]=new RegExp(oe).test(C||"en")),de){for(var ce in H=oe,G[oe])if(o(O,G[oe][ce])){N=ce;break}break}}if(!N){e:for(var ge in G)if(ge!==H){for(var q in G[ge])if(o(O,G[ge][q])){N=q;break e}}}N||(console.debug("No font coverage for U+"+O.toString(16)),N="latin"),V[ne]=N,u[N]||j.has(N)||j.set(N,U("font-meta/"+N+".json").then(function(xe){u[N]=xe})),O>65535&&(ne++,J=ne)},J=0;J<y.length;J++)Q(J);return Promise.all(j.values())}).then(function(){for(var Q,J=null,ne=0;ne<y.length;ne++){var O=y.codePointAt(ne);if(J&&(v(O)||d(J).has(O)))R[ne]=R[ne-1];else{J=u[V[ne]];var N=z[J.id];if(!N){var G=J.typeforms,H=A(G,b,"sans-serif"),oe=A(G[H],M,"normal"),de=m((Q=G[H])===null||Q===void 0?void 0:Q[oe],I);N=z[J.id]=T+"/font-files/"+J.id+"/"+H+"."+oe+"."+de+".woff"}var ce=D.get(N);ce==null&&(ce=D.size,D.set(N,ce)),R[ne]=ce}O>65535&&(ne++,R[ne]=R[ne-1])}return{fontUrls:Array.from(D.keys()),chars:R}})},Object.defineProperty(t,"__esModule",{value:!0}),t}({})}function TAe(t,e){const n=Object.create(null),i=Object.create(null);function r(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=t(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=n[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,c=>{c.src=o,n[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(o.length),p=[];o.length||v();const g=new Map,A=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(w=>!w.lang||w.lang.test(l)).reverse(),c.length){let b=0;(function M(I=0){for(let T=I,D=o.length;T<D;T++){const R=o.codePointAt(T);if(b===1&&p[d[T-1]].supportsCodePoint(R)||/\s/.test(o[T]))d[T]=d[T-1],b===2&&(A[A.length-1][1]=T);else for(let z=d[T],F=c.length;z<=F;z++)if(z===F){const V=b===2?A[A.length-1]:A[A.length]=[T,T];V[1]=T,b=2}else{d[T]=z;const{src:V,unicodeRange:j}=c[z];if(!j||y(R,j)){const Z=n[V];if(!Z){s(V,()=>{M(T)});return}if(Z.supportsCodePoint(R)){let U=g.get(Z);typeof U!="number"&&(U=p.length,p.push(Z),g.set(Z,U)),d[T]=U,b=1;break}}}R>65535&&T+1<D&&(d[T+1]=d[T],T++,b===2&&(A[A.length-1][1]=T))}m()})()}else A.push([0,o.length-1]),m();function m(){if(A.length){const w=A.map(S=>o.substring(S[0],S[1]+1)).join(`
`);e.getFontsForString(w,{lang:l||void 0,style:u,weight:f,dataUrl:h}).then(({fontUrls:S,chars:C})=>{const b=p.length;let M=0;A.forEach(T=>{for(let D=0,R=T[1]-T[0];D<=R;D++)d[T[0]+D]=C[M++]+b;M++});let I=0;S.forEach((T,D)=>{s(T,R=>{p[D+b]=R,++I===S.length&&v()})})})}else v()}function v(){a({chars:d,fonts:p})}function y(w,S){for(let C=0;C<S.length;C++){const[b,M=b]=S[C];if(b<=w&&w<=M)return!0}return!1}}}const IAe=B0({name:"FontResolver",dependencies:[TAe,bAe,MAe],init(t,e,n){return t(e,n())}});function BAe(t,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:p,lang:g,fonts:A,style:m,weight:v,preResolvedFonts:y,unicodeFontsURL:w},S){const C=({chars:b,fonts:M})=>{let I,T;const D=[];for(let R=0;R<b.length;R++)b[R]!==T?(T=b[R],D.push(I={start:R,end:R,fontObj:M[b[R]]})):I.end=R;S(D)};y?C(y):t(p,C,{lang:g,fonts:A,style:m,weight:v,unicodeFontsURL:w})}function a({text:p="",font:g,lang:A,sdfGlyphSize:m=64,fontSize:v=400,fontWeight:y=1,fontStyle:w="normal",letterSpacing:S=0,lineHeight:C="normal",maxWidth:b=1/0,direction:M,textAlign:I="left",textIndent:T=0,whiteSpace:D="normal",overflowWrap:R="normal",anchorX:z=0,anchorY:F=0,metricsOnly:V=!1,unicodeFontsURL:j,preResolvedFonts:Z=null,includeCaretPositions:U=!1,chunkedBoundsSize:$=8192,colorRanges:X=null},Q){const J=f(),ne={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),v=+v,S=+S,b=+b,C=C||"normal",T=+T,o({text:p,lang:A,style:w,weight:y,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:j,preResolvedFonts:Z},O=>{ne.fontLoad=f()-J;const N=isFinite(b);let G=null,H=null,oe=null,de=null,ce=null,ge=null,q=null,xe=null,ue=0,me=0,pe=D!=="nowrap";const Le=new Map,re=f();let ie=T,te=0,W=new h;const Me=[W];O.forEach(Oe=>{const{fontObj:we}=Oe,{ascender:be,descender:Be,unitsPerEm:Ve,lineGap:ot,capHeight:$e,xHeight:qe}=we;let fe=Le.get(we);if(!fe){const ye=v/Ve,He=C==="normal"?(be-Be+ot)*ye:C*v,lt=(He-(be-Be)*ye)/2,mt=Math.min(He,(be-Be)*ye),dt=(be+Be)/2*ye+mt/2;fe={index:Le.size,src:we.src,fontObj:we,fontSizeMult:ye,unitsPerEm:Ve,ascender:be*ye,descender:Be*ye,capHeight:$e*ye,xHeight:qe*ye,lineHeight:He,baseline:-lt-be*ye,caretTop:dt,caretBottom:dt-mt},Le.set(we,fe)}const{fontSizeMult:Ue}=fe,it=p.slice(Oe.start,Oe.end+1);let Ae,Ye;we.forEachGlyph(it,v,S,(ye,He,lt,mt)=>{He+=te,mt+=Oe.start,Ae=He,Ye=ye;const dt=p.charAt(mt),Ot=ye.advanceWidth*Ue,Xt=W.count;let gt;if("isEmpty"in ye||(ye.isWhitespace=!!dt&&new RegExp(r).test(dt),ye.canBreakAfter=!!dt&&s.test(dt),ye.isEmpty=ye.xMin===ye.xMax||ye.yMin===ye.yMax||i.test(dt)),!ye.isWhitespace&&!ye.isEmpty&&me++,pe&&N&&!ye.isWhitespace&&He+Ot+ie>b&&Xt){if(W.glyphAt(Xt-1).glyphObj.canBreakAfter)gt=new h,ie=-He;else for(let _n=Xt;_n--;)if(_n===0&&R==="break-word"){gt=new h,ie=-He;break}else if(W.glyphAt(_n).glyphObj.canBreakAfter){gt=W.splitAt(_n+1);const vi=gt.glyphAt(0).x;ie-=vi;for(let zn=gt.count;zn--;)gt.glyphAt(zn).x-=vi;break}gt&&(W.isSoftWrapped=!0,W=gt,Me.push(W),ue=b)}let en=W.glyphAt(W.count);en.glyphObj=ye,en.x=He+ie,en.y=lt,en.width=Ot,en.charIndex=mt,en.fontData=fe,dt===`
`&&(W=new h,Me.push(W),ie=-(He+Ot+S*v)+T)}),te=Ae+Ye.advanceWidth*Ue+S*v});let De=0;Me.forEach(Oe=>{let we=!0;for(let be=Oe.count;be--;){const Be=Oe.glyphAt(be);we&&!Be.glyphObj.isWhitespace&&(Oe.width=Be.x+Be.width,Oe.width>ue&&(ue=Oe.width),we=!1);let{lineHeight:Ve,capHeight:ot,xHeight:$e,baseline:qe}=Be.fontData;Ve>Oe.lineHeight&&(Oe.lineHeight=Ve);const fe=qe-Oe.baseline;fe<0&&(Oe.baseline+=fe,Oe.cap+=fe,Oe.ex+=fe),Oe.cap=Math.max(Oe.cap,Oe.baseline+ot),Oe.ex=Math.max(Oe.ex,Oe.baseline+$e)}Oe.baseline-=De,Oe.cap-=De,Oe.ex-=De,De+=Oe.lineHeight});let Ee=0,_e=0;if(z&&(typeof z=="number"?Ee=-z:typeof z=="string"&&(Ee=-ue*(z==="left"?0:z==="center"?.5:z==="right"?1:c(z)))),F&&(typeof F=="number"?_e=-F:typeof F=="string"&&(_e=F==="top"?0:F==="top-baseline"?-Me[0].baseline:F==="top-cap"?-Me[0].cap:F==="top-ex"?-Me[0].ex:F==="middle"?De/2:F==="bottom"?De:F==="bottom-baseline"?-Me[Me.length-1].baseline:c(F)*De)),!V){const Oe=e.getEmbeddingLevels(p,M);G=new Uint16Array(me),H=new Uint8Array(me),oe=new Float32Array(me*2),de={},q=[1/0,1/0,-1/0,-1/0],xe=[],U&&(ge=new Float32Array(p.length*4)),X&&(ce=new Uint8Array(me*3));let we=0,be=-1,Be=-1,Ve,ot;if(Me.forEach(($e,qe)=>{let{count:fe,width:Ue}=$e;if(fe>0){let it=0;for(let mt=fe;mt--&&$e.glyphAt(mt).glyphObj.isWhitespace;)it++;let Ae=0,Ye=0;if(I==="center")Ae=(ue-Ue)/2;else if(I==="right")Ae=ue-Ue;else if(I==="justify"&&$e.isSoftWrapped){let mt=0;for(let dt=fe-it;dt--;)$e.glyphAt(dt).glyphObj.isWhitespace&&mt++;Ye=(ue-Ue)/mt}if(Ye||Ae){let mt=0;for(let dt=0;dt<fe;dt++){let Ot=$e.glyphAt(dt);const Xt=Ot.glyphObj;Ot.x+=Ae+mt,Ye!==0&&Xt.isWhitespace&&dt<fe-it&&(mt+=Ye,Ot.width+=Ye)}}const ye=e.getReorderSegments(p,Oe,$e.glyphAt(0).charIndex,$e.glyphAt($e.count-1).charIndex);for(let mt=0;mt<ye.length;mt++){const[dt,Ot]=ye[mt];let Xt=1/0,gt=-1/0;for(let en=0;en<fe;en++)if($e.glyphAt(en).charIndex>=dt){let _n=en,vi=en;for(;vi<fe;vi++){let zn=$e.glyphAt(vi);if(zn.charIndex>Ot)break;vi<fe-it&&(Xt=Math.min(Xt,zn.x),gt=Math.max(gt,zn.x+zn.width))}for(let zn=_n;zn<vi;zn++){const er=$e.glyphAt(zn);er.x=gt-(er.x+er.width-Xt)}break}}let He;const lt=mt=>He=mt;for(let mt=0;mt<fe;mt++){const dt=$e.glyphAt(mt);He=dt.glyphObj;const Ot=He.index,Xt=Oe.levels[dt.charIndex]&1;if(Xt){const gt=e.getMirroredCharacter(p[dt.charIndex]);gt&&dt.fontData.fontObj.forEachGlyph(gt,0,0,lt)}if(U){const{charIndex:gt,fontData:en}=dt,_n=dt.x+Ee,vi=dt.x+dt.width+Ee;ge[gt*4]=Xt?vi:_n,ge[gt*4+1]=Xt?_n:vi,ge[gt*4+2]=$e.baseline+en.caretBottom+_e,ge[gt*4+3]=$e.baseline+en.caretTop+_e;const zn=gt-be;zn>1&&u(ge,be,zn),be=gt}if(X){const{charIndex:gt}=dt;for(;gt>Be;)Be++,X.hasOwnProperty(Be)&&(ot=X[Be])}if(!He.isWhitespace&&!He.isEmpty){const gt=we++,{fontSizeMult:en,src:_n,index:vi}=dt.fontData,zn=de[_n]||(de[_n]={});zn[Ot]||(zn[Ot]={path:He.path,pathBounds:[He.xMin,He.yMin,He.xMax,He.yMax]});const er=dt.x+Ee,tr=dt.y+$e.baseline+_e;oe[gt*2]=er,oe[gt*2+1]=tr;const hr=er+He.xMin*en,Di=tr+He.yMin*en,fi=er+He.xMax*en,Yt=tr+He.yMax*en;hr<q[0]&&(q[0]=hr),Di<q[1]&&(q[1]=Di),fi>q[2]&&(q[2]=fi),Yt>q[3]&&(q[3]=Yt),gt%$===0&&(Ve={start:gt,end:gt,rect:[1/0,1/0,-1/0,-1/0]},xe.push(Ve)),Ve.end++;const si=Ve.rect;if(hr<si[0]&&(si[0]=hr),Di<si[1]&&(si[1]=Di),fi>si[2]&&(si[2]=fi),Yt>si[3]&&(si[3]=Yt),G[gt]=Ot,H[gt]=vi,X){const Or=gt*3;ce[Or]=ot>>16&255,ce[Or+1]=ot>>8&255,ce[Or+2]=ot&255}}}}}),ge){const $e=p.length-be;$e>1&&u(ge,be,$e)}}const Ze=[];Le.forEach(({index:Oe,src:we,unitsPerEm:be,ascender:Be,descender:Ve,lineHeight:ot,capHeight:$e,xHeight:qe})=>{Ze[Oe]={src:we,unitsPerEm:be,ascender:Be,descender:Ve,lineHeight:ot,capHeight:$e,xHeight:qe}}),ne.typesetting=f()-re,Q({glyphIds:G,glyphFontIndices:H,glyphPositions:oe,glyphData:de,fontData:Ze,caretPositions:ge,glyphColors:ce,chunkedBounds:xe,fontSize:v,topBaseline:_e+Me[0].baseline,blockBounds:[Ee,_e-De,Ee+ue,_e],visibleBounds:q,timings:ne})})}function l(p,g){a({...p,metricsOnly:!0},A=>{const[m,v,y,w]=A.blockBounds;g({width:y-m,height:w-v})})}function c(p){let g=p.match(/^([\d.]+)%$/),A=g?parseFloat(g[1]):NaN;return isNaN(A)?0:A/100}function u(p,g,A){const m=p[g*4],v=p[g*4+1],y=p[g*4+2],w=p[g*4+3],S=(v-m)/A;for(let C=0;C<A;C++){const b=(g+C)*4;p[b]=m+S*C,p[b+1]=m+S*(C+1),p[b+2]=y,p[b+3]=w}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(p){let g=h.flyweight;return g.data=this.data,g.index=p,g},splitAt(p){let g=new h;return g.data=this.data.splice(p*d.length),g}},h.flyweight=d.reduce((p,g,A,m)=>(Object.defineProperty(p,g,{get(){return this.data[this.index*d.length+A]},set(v){this.data[this.index*d.length+A]=v}}),p),{data:null,index:0}),{typeset:a,measure:l}}const Qh=()=>(self.performance||Date).now(),hS=CX();let hz;function RAe(t,e,n,i,r,s,o,a,l,c,u=!0){return u?DAe(t,e,n,i,r,s,o,a,l,c).then(null,f=>(hz||(console.warn("WebGL SDF generation failed, falling back to JS",f),hz=!0),pz(t,e,n,i,r,s,o,a,l,c))):pz(t,e,n,i,r,s,o,a,l,c)}const K_=[],PAe=5;let LI=0;function MX(){const t=Qh();for(;K_.length&&Qh()-t<PAe;)K_.shift()();LI=K_.length?setTimeout(MX,0):0}const DAe=(...t)=>new Promise((e,n)=>{K_.push(()=>{const i=Qh();try{hS.webgl.generateIntoCanvas(...t),e({timing:Qh()-i})}catch(r){n(r)}}),LI||(LI=setTimeout(MX,0))}),LAe=4,FAe=2e3,dz={};let OAe=0;function pz(t,e,n,i,r,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+OAe++%LAe;let f=dz[u];return f||(f=dz[u]={workerModule:B0({name:u,workerId:u,dependencies:[CX,Qh],init(h,d){const p=h().javascript.generate;return function(...g){const A=d();return{textureData:p(...g),timing:d()-A}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,i,r,s).then(({textureData:h,timing:d})=>{const p=Qh(),g=new Uint8Array(h.length*4);for(let A=0;A<h.length;A++)g[A*4+c]=h[A];return hS.webglUtils.renderImageData(o,g,a,l,t,e,1<<3-c),d+=Qh()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{dAe(u)},FAe)),{timing:d}})}function zAe(t){t._warm||(hS.webgl.isSupported(t),t._warm=!0)}const UAe=hS.webglUtils.resizeWebGLCanvasWithoutClearing,em={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},kAe=new Je;function xp(){return(self.performance||Date).now()}const mz=Object.create(null);function TX(t,e){t=HAe({},t);const n=xp(),{defaultFontURL:i}=em,r=[];if(i&&r.push({label:"default",src:gz(i)}),t.font&&r.push({label:"user",src:gz(t.font)}),t.font=r,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||em.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||em.unicodeFontsURL,t.colorRanges!=null){let h={};for(let d in t.colorRanges)if(t.colorRanges.hasOwnProperty(d)){let p=t.colorRanges[d];typeof p!="number"&&(p=kAe.set(p).getHex()),h[d]=p}t.colorRanges=h}Object.freeze(t);const{textureWidth:s,sdfExponent:o}=em,{sdfGlyphSize:a}=t,l=s/a*4;let c=mz[a];if(!c){const h=document.createElement("canvas");h.width=s,h.height=a*256/l,c=mz[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new Bn(h,void 0,void 0,void 0,Vt,Vt),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,NAe(c)}const{sdfTexture:u,sdfCanvas:f}=c;VAe(t).then(h=>{const{glyphIds:d,glyphFontIndices:p,fontData:g,glyphPositions:A,fontSize:m,timings:v}=h,y=[],w=new Float32Array(d.length*4);let S=0,C=0;const b=xp(),M=g.map(z=>{let F=c.glyphsByFont.get(z.src);return F||c.glyphsByFont.set(z.src,F=new Map),F});d.forEach((z,F)=>{const V=p[F],{src:j,unitsPerEm:Z}=g[V];let U=M[V].get(z);if(!U){const{path:ne,pathBounds:O}=h.glyphData[j][z],N=Math.max(O[2]-O[0],O[3]-O[1])/a*(em.sdfMargin*a+.5),G=c.glyphCount++,H=[O[0]-N,O[1]-N,O[2]+N,O[3]+N];M[V].set(z,U={path:ne,atlasIndex:G,sdfViewBox:H}),y.push(U)}const{sdfViewBox:$}=U,X=A[C++],Q=A[C++],J=m/Z;w[S++]=X+$[0]*J,w[S++]=Q+$[1]*J,w[S++]=X+$[2]*J,w[S++]=Q+$[3]*J,d[F]=U.atlasIndex}),v.quads=(v.quads||0)+(xp()-b);const I=xp();v.sdf={};const T=f.height,D=Math.ceil(c.glyphCount/l),R=Math.pow(2,Math.ceil(Math.log2(D*a)));R>T&&(console.info(`Increasing SDF texture size ${T}->${R}`),UAe(f,s,R),u.dispose()),Promise.all(y.map(z=>IX(z,c,t.gpuAccelerateSDF).then(({timing:F})=>{v.sdf[z.atlasIndex]=F}))).then(()=>{y.length&&!c.contextLost&&(BX(c),u.needsUpdate=!0),v.sdfTotal=xp()-I,v.total=xp()-n,e(Object.freeze({parameters:t,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:w,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{c.contextLost||zAe(f)})}function IX({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=em,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),f=u%(a/i)*i,h=Math.floor(u/(a/i))*i,d=e%4;return RAe(i,i,t,n,c,l,r,f,h,d,o)}function NAe(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(IX(s,t,!0))})}),Promise.all(i).then(()=>{BX(t),t.sdfTexture.needsUpdate=!0})})}function GAe({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;TX({font:t,sdfGlyphSize:n,text:r},i)}function HAe(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let Ux;function gz(t){return Ux||(Ux=typeof document>"u"?{}:document.createElement("a")),Ux.href=t,Ux.href}function BX(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const QAe=B0({name:"Typesetter",dependencies:[BAe,IAe,mAe],init(t,e,n){return t(e,n())}}),VAe=B0({name:"Typesetter",dependencies:[QAe],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}}),Az={};function WAe(t){let e=Az[t];if(!e){const n=new vr(1,1,t,t),i=n.clone(),r=n.attributes,s=i.attributes,o=new Dt,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new At([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...n.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=Az[t]=o}return e}const jAe="aTroikaGlyphBounds",vz="aTroikaGlyphIndex",XAe="aTroikaGlyphColor";class YAe extends Hv{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new $n,this.boundingBox=new xn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Ki?n/2:0,e===Qn?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=WAe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=n.attributes[i].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,i,r,s){SM(this,jAe,e,4),SM(this,vz,n,1),SM(this,XAe,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:i}=this;if(n){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=r/2,f=r*2,h=Math.abs(n),d=e[0]/h,p=e[2]/h,g=s((d+u)/f)!==s((p+u)/f)?-h:o(l(d)*h,l(p)*h),A=s((d-u)/f)!==s((p-u)/f)?h:a(l(d)*h,l(p)*h),m=s((d+r)/f)!==s((p+r)/f)?h*2:a(h-c(d)*h,h-c(p)*h);i.min.set(g,e[1],n<0?-m:0),i.max.set(A,e[3],n<0?0:m)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(vz).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){n=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function SM(t,e,n,i){const r=t.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(t.setAttribute(e,new ml(n,i)),delete t._maxInstanceCount,t.dispose()):r&&t.deleteAttribute(e)}const qAe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,$Ae=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,KAe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,JAe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function ZAe(t){const e=DI(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ie},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Jt(0,0,0,0)},uTroikaClipRect:{value:new Jt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ie},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Je},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new jt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:qAe,vertexTransform:$Ae,fragmentDefs:KAe,fragmentColorTransform:JAe,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(bX,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const jB=new Br({color:16777215,side:Qn,transparent:!0}),yz=8421504,xz=new Ge,kx=new L,CM=new L,lg=[],eve=new L,bM="+x+y";function _z(t){return Array.isArray(t)?t[0]:t}let RX=()=>{const t=new ut(new vr(1,1),jB);return RX=()=>t,t},PX=()=>{const t=new ut(new vr(1,1,32,1),jB);return PX=()=>t,t};const tve={type:"syncstart"},nve={type:"synccomplete"},DX=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],ive=DX.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let LX=class extends ut{constructor(){const e=new YAe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=yz,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=bM,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(tve),TX({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(nve),e&&e()})))}onBeforeRender(e,n,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=js}onAfterRender(e,n,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=jB.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=ZAe(n),n.addEventListener("dispose",function i(){n.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return _z(this.material).getDepthMaterial()}get customDistanceMaterial(){return _z(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!n&&!!r.glyphColors;let c=0,u=0,f=0,h,d,p,g=0,A=0;if(n){let{outlineWidth:v,outlineOffsetX:y,outlineOffsetY:w,outlineBlur:S,outlineOpacity:C}=this;c=this._parsePercent(v)||0,u=Math.max(0,this._parsePercent(S)||0),h=C,g=this._parsePercent(y)||0,A=this._parsePercent(w)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,i.uTroikaStrokeColor.value.set(p??yz),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(g,A),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=f,i.uTroikaStrokeOpacity.value=d,i.uTroikaFillOpacity.value=h??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let m=this.clipRect;if(m&&Array.isArray(m)&&m.length===4)i.uTroikaClipRect.value.fromArray(m);else{const v=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-v,l[1]-v,l[2]+v,l[3]+v)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Je;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||bM;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==bM&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,h]=l;kx.set(0,0,0)[u]=c==="-"?1:-1,CM.set(0,0,0)[h]=f==="-"?-1:1,xz.lookAt(eve,kx.cross(CM),CM),a.setFromMatrix4(xz)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),i=n?parseFloat(n[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Ie){n.copy(e);const i=this.curveRadius;return i&&(n.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),n}worldPositionToTextCoords(e,n=new Ie){return kx.copy(e),this.localPositionToTextCoords(this.worldToLocal(kx),n)}raycast(e,n){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?PX():RX(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const h=s[1]+c.getY(u)*(s[3]-s[1]);let d=0;r&&(d=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),l.setXYZ(u,f,h,d)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,lg.length=0,o.raycast(e,lg);for(let u=0;u<lg.length;u++)lg[u].object=this,n.push(lg[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,ive.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};DX.forEach(t=>{const e="_private_"+t;Object.defineProperty(LX.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const rve=E.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const u=Fe(({invalidate:p})=>p),[f]=E.useState(()=>new LX),[h,d]=E.useMemo(()=>{const p=[];let g="";return E.Children.forEach(s,A=>{typeof A=="string"||typeof A=="number"?g+=A:p.push(A)}),[p,g]},[s]);return su(()=>new Promise(p=>GAe({font:i,characters:o},p)),["troika-text",i,o]),E.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),E.useEffect(()=>()=>f.dispose(),[f]),E.createElement("primitive",Te({object:f,ref:c,font:i,text:d,anchorX:e,anchorY:n,fontSize:r,sdfGlyphSize:t},l),h)});let MM=null;async function sve(t){return typeof t=="string"?await(await fetch(t)).json():t}function ove(t){return MM||(MM=new dge),MM.parse(t)}async function FX(t){const e=await sve(t);return ove(e)}function dS(t){return su(FX,[t])}dS.preload=t=>xV(FX,[t]);dS.clear=t=>zw([t]);const ave=["string","number"],lve=t=>{let e="";const n=[];return E.Children.forEach(t,i=>{ave.includes(typeof i)?e+=i+"":n.push(i)}),[e,...n]},OX=E.forwardRef(({font:t,letterSpacing:e=0,lineHeight:n=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:f,children:h,...d},p)=>{E.useMemo(()=>ui({RenamedTextGeometry:G1e}),[]);const g=E.useRef(null),A=dS(t),m=E.useMemo(()=>({font:A,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:n}),[A,i,r,s,o,a,c,l,u,e,n]),[v,...y]=E.useMemo(()=>lve(h),[h]),w=E.useMemo(()=>[v,m],[v,m]);return E.useLayoutEffect(()=>{f&&(g.current.geometry=Qme(g.current.geometry,f),g.current.geometry.computeVertexNormals())},[w,f]),E.useImperativeHandle(p,()=>g.current,[]),E.createElement("mesh",Te({},d,{ref:g}),E.createElement("renamedTextGeometry",{args:w}),y)}),cve=()=>{try{var t=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&t.getContext("webgl2"))}catch{return!1}},uve=E.forwardRef(({children:t,multisamping:e=8,renderIndex:n=1,disableRender:i,disableGamma:r,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...f},h)=>{E.useMemo(()=>ui({EffectComposer:t1e,RenderPass:r1e,ShaderPass:CI}),[]);const d=E.useRef(null);E.useImperativeHandle(h,()=>d.current,[]);const{scene:p,camera:g,gl:A,size:m,viewport:v}=Fe(),[y]=E.useState(()=>{const S=new Ln(m.width,m.height,{type:u||On,format:In,depthBuffer:o,stencilBuffer:a,anisotropy:l});return u===Jn&&c!=null&&("colorSpace"in S?S.texture.colorSpace=c:S.texture.encoding=c),S.samples=e,S});E.useEffect(()=>{var S,C;(S=d.current)==null||S.setSize(m.width,m.height),(C=d.current)==null||C.setPixelRatio(v.dpr)},[A,m,v.dpr]),Ct(()=>{var S;i||(S=d.current)==null||S.render()},n);const w=[];return s||w.push(E.createElement("renderPass",{key:"renderpass",attach:`passes-${w.length}`,args:[p,g]})),r||w.push(E.createElement("shaderPass",{attach:`passes-${w.length}`,key:"gammapass",args:[H1e]})),E.Children.forEach(t,S=>{S&&w.push(E.cloneElement(S,{key:w.length,attach:`passes-${w.length}`}))}),E.createElement("effectComposer",Te({ref:d,args:[A,y]},f),w)});let FI=function(t){return t.Linear="linear",t.Radial="radial",t}({});function fve({stops:t,colors:e,size:n=1024,width:i=16,type:r=FI.Linear,innerCircleRadius:s=0,outerCircleRadius:o="auto",...a}){const l=Fe(u=>u.gl),c=E.useMemo(()=>{const u=document.createElement("canvas"),f=u.getContext("2d");u.width=i,u.height=n;let h;if(r===FI.Linear)h=f.createLinearGradient(0,0,0,n);else{const g=u.width/2,A=u.height/2,m=o!=="auto"?Math.abs(Number(o)):Math.sqrt(g**2+A**2);h=f.createRadialGradient(g,A,Math.abs(s),g,A,m)}const d=new Je;let p=t.length;for(;p--;)h.addColorStop(t[p],d.set(e[p]).getStyle());return f.save(),f.fillStyle=h,f.fillRect(0,0,i,n),f.restore(),u},[t]);return E.createElement("canvasTexture",Te({colorSpace:l.outputColorSpace,args:[c],attach:"map"},a))}function Vo(t,e,n,i){const r=class extends Fn{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,u])=>{const f=Ra.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),i&&i(this)}};return r.key=zt.generateUUID(),r}const km=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function Of(t,e){const n=Fe(s=>s.gl),i=bi(rc,km(t)?Object.values(t):t);return E.useLayoutEffect(()=>{e==null||e(i)},[e]),E.useEffect(()=>{if("initTexture"in n){let s=[];Array.isArray(i)?s=i:i instanceof Bn?s=[i]:km(i)&&(s=Object.values(i)),s.forEach(o=>{o instanceof Bn&&n.initTexture(o)})}},[n,i]),E.useMemo(()=>{if(km(t)){const s={};let o=0;for(const a in t)s[a]=i[o++];return s}else return i},[t,i])}Of.preload=t=>bi.preload(rc,t);Of.clear=t=>bi.clear(rc,t);const hve=({children:t,input:e,onLoad:n})=>{const i=Of(e,n);return E.createElement(E.Fragment,null,t==null?void 0:t(i))},dve=()=>parseInt(yl.replace(/\D+/g,"")),$s=dve(),Ez=Vo({color:new Je("white"),scale:new Ie(1,1),imageBounds:new Ie(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),zX=E.forwardRef(({children:t,color:e,segments:n=1,scale:i=1,zoom:r=1,grayscale:s=0,opacity:o=1,radius:a=0,texture:l,toneMapped:c,transparent:u,side:f,...h},d)=>{ui({ImageMaterial:Ez});const p=E.useRef(null),g=Fe(y=>y.size),A=Array.isArray(i)?[i[0],i[1]]:[i,i],m=[l.image.width,l.image.height],v=Math.max(g.width,g.height);return E.useImperativeHandle(d,()=>p.current,[]),E.useLayoutEffect(()=>{p.current.geometry.parameters&&p.current.material.scale.set(A[0]*p.current.geometry.parameters.width,A[1]*p.current.geometry.parameters.height)},[]),E.createElement("mesh",Te({ref:p,scale:Array.isArray(i)?[...i,1]:i},h),E.createElement("planeGeometry",{args:[1,1,n,n]}),E.createElement("imageMaterial",{color:e,map:l,zoom:r,grayscale:s,opacity:o,scale:A,imageBounds:m,resolution:v,radius:a,toneMapped:c,transparent:u,side:f,key:Ez.key}),t)}),pve=E.forwardRef(({url:t,...e},n)=>{const i=Of(t);return E.createElement(zX,Te({},e,{texture:i,ref:n}))}),mve=E.forwardRef(({url:t,...e},n)=>E.createElement(zX,Te({},e,{ref:n}))),gve=E.forwardRef((t,e)=>{if(t.url)return E.createElement(pve,Te({},t,{ref:e}));if(t.texture)return E.createElement(mve,Te({},t,{ref:e}));throw new Error("<Image /> requires a url or texture")}),UX=E.forwardRef(({threshold:t=15,geometry:e,...n},i)=>{const r=E.useRef(null);E.useImperativeHandle(i,()=>r.current,[]);const s=E.useMemo(()=>[0,0,0,1,0,0],[]),o=E.useRef(),a=E.useRef();return E.useLayoutEffect(()=>{const l=r.current.parent,c=e??(l==null?void 0:l.geometry);if(!c||o.current===c&&a.current===t)return;o.current=c,a.current=t;const f=new k8(c,t).attributes.position.array;r.current.geometry.setPositions(f),r.current.geometry.attributes.instanceStart.needsUpdate=!0,r.current.geometry.attributes.instanceEnd.needsUpdate=!0,r.current.computeLineDistances()}),E.createElement(Al,Te({segments:!0,points:s,ref:r,raycast:()=>null},n))}),wz=Vo({screenspace:!1,color:new Je("black"),opacity:1,thickness:.05,size:new Ie},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function Ave({color:t="black",opacity:e=1,transparent:n=!1,screenspace:i=!1,toneMapped:r=!0,polygonOffset:s=!1,polygonOffsetFactor:o=0,renderOrder:a=0,thickness:l=.05,angle:c=Math.PI,...u}){const f=E.useRef(),[h]=E.useState(()=>new wz({side:Ki})),{gl:d}=Fe(),p=d.getDrawingBufferSize(new Ie);E.useMemo(()=>ui({OutlinesMaterial:wz}),[]);const g=E.useRef(0),A=E.useRef();return E.useLayoutEffect(()=>{const m=f.current;if(!m)return;const v=m.parent;if(v&&v.geometry&&(g.current!==c||A.current!==v.geometry)){var y;g.current=c,A.current=v.geometry;let w=(y=m.children)==null?void 0:y[0];w&&(c&&w.geometry.dispose(),m.remove(w)),v.skeleton?(w=new Fv,w.material=h,w.bind(v.skeleton,v.bindMatrix),m.add(w)):v.isInstancedMesh?(w=new Ov(v.geometry,h,v.count),w.instanceMatrix=v.instanceMatrix,m.add(w)):(w=new ut,w.material=h,m.add(w)),w.geometry=c?Pj(v.geometry,c):v.geometry}}),E.useLayoutEffect(()=>{const m=f.current;if(!m)return;const v=m.children[0];v&&(v.renderOrder=a,yr(v.material,{transparent:n,thickness:l,color:t,opacity:e,size:p,screenspace:i,toneMapped:r,polygonOffset:s,polygonOffsetFactor:o}))}),E.useEffect(()=>()=>{const m=f.current;if(!m)return;const v=m.children[0];v&&(c&&v.geometry.dispose(),m.remove(v))},[]),E.createElement("group",Te({ref:f},u))}var vve=Object.defineProperty,yve=(t,e,n)=>e in t?vve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jn=(t,e,n)=>(yve(t,typeof e!="symbol"?e+"":e,n),n);function TM(t,e,n,i,r){let s;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(s=0;s<t.length;s++)n[s+i]=t[s];return n}function xve(t){return t instanceof Float32Array?t:t instanceof Dt?t.getAttribute("position").array:t.map(e=>{const n=Array.isArray(e);return e instanceof L?[e.x,e.y,e.z]:e instanceof Ie?[e.x,e.y,0]:n&&e.length===3?[e[0],e[1],e[2]]:n&&e.length===2?[e[0],e[1],0]:e}).flat()}class _ve extends Dt{constructor(){super(),jn(this,"type","MeshLine"),jn(this,"isMeshLine",!0),jn(this,"positions",[]),jn(this,"previous",[]),jn(this,"next",[]),jn(this,"side",[]),jn(this,"width",[]),jn(this,"indices_array",[]),jn(this,"uvs",[]),jn(this,"counters",[]),jn(this,"widthCallback",null),jn(this,"_attributes"),jn(this,"_points",[]),jn(this,"points"),jn(this,"matrixWorld",new Ge),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,n){if(e=xve(e),this._points=e,this.widthCallback=n??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof L)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,n){const i=e*6,r=n*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const n=e*6;return[this.positions[n],this.positions[n+1],this.positions[n+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let n,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?n=this.widthCallback(r/(e-1)):n=1,this.width.push(n),this.width.push(n),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new Gt(new Float32Array(this.positions),3),previous:new Gt(new Float32Array(this.previous),3),next:new Gt(new Float32Array(this.next),3),side:new Gt(new Float32Array(this.side),1),width:new Gt(new Float32Array(this.width),1),uv:new Gt(new Float32Array(this.uvs),2),index:new Gt(new Uint16Array(this.indices_array),1),counters:new Gt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:n,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;TM(r,0,s,0,a),TM(r,6,r,0,a-6),r[a-6]=e,r[a-5]=n,r[a-4]=i,r[a-3]=e,r[a-2]=n,r[a-1]=i,TM(r,6,o,0,a-6),o[a-6]=e,o[a-5]=n,o[a-4]=i,o[a-3]=e,o[a-2]=n,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const Eve=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,wve=parseInt(yl.replace(/\D+/g,"")),Sve=wve>=154?"colorspace_fragment":"encodings_fragment",Cve=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${Sve}>
  }
`;class bve extends Fn{constructor(e){super({uniforms:{...wt.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new Je(16777215)},gradient:{value:[new Je(16711680),new Je(65280)]},opacity:{value:1},resolution:{value:new Ie(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new Ie(1,1)}},vertexShader:Eve,fragmentShader:Cve}),jn(this,"lineWidth"),jn(this,"map"),jn(this,"useMap"),jn(this,"alphaMap"),jn(this,"useAlphaMap"),jn(this,"color"),jn(this,"gradient"),jn(this,"resolution"),jn(this,"sizeAttenuation"),jn(this,"dashArray"),jn(this,"dashOffset"),jn(this,"dashRatio"),jn(this,"useDash"),jn(this,"useGradient"),jn(this,"visibility"),jn(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(n){this.uniforms.lineWidth.value=n}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(n){this.uniforms.map.value=n}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(n){this.uniforms.useMap.value=n}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(n){this.uniforms.alphaMap.value=n}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(n){this.uniforms.useAlphaMap.value=n}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(n){this.uniforms.color.value=n}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(n){this.uniforms.gradient.value=n}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(n){this.uniforms.resolution.value.copy(n)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(n){this.uniforms.sizeAttenuation.value=n}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(n){this.uniforms.dashArray.value=n,this.useDash=n!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(n){this.uniforms.dashOffset.value=n}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(n){this.uniforms.dashRatio.value=n}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(n){this.uniforms.useDash.value=n}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(n){this.uniforms.useGradient.value=n}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(n){this.uniforms.visibility.value=n}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(n){this.uniforms.alphaTest.value=n}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(n){this.uniforms.repeat.value.copy(n)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const kX={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},Mve=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function NX(t,e){const{length:n,local:i,decay:r,interval:s,stride:o}={...kX,...e},a=E.useRef(),[l]=E.useState(()=>new L);E.useLayoutEffect(()=>{t&&(a.current=Float32Array.from({length:n*10*3},(f,h)=>t.position.getComponent(h%3)))},[n,t]);const c=E.useRef(new L),u=E.useRef(0);return Ct(()=>{if(t&&a.current){if(u.current===0){let f;i?f=t.position:(t.getWorldPosition(l),f=l);const h=1*r;for(let d=0;d<h;d++)f.distanceTo(c.current)<o||(Mve(a.current,3),a.current.set(f.toArray(),a.current.length-3));c.current.copy(f)}u.current++,u.current=u.current%s}}),a}const Tve=E.forwardRef((t,e)=>{const{children:n}=t,{width:i,length:r,decay:s,local:o,stride:a,interval:l}={...kX,...t},{color:c="hotpink",attenuation:u,target:f}=t,h=Fe(w=>w.size),d=Fe(w=>w.scene),p=E.useRef(null),[g,A]=E.useState(null),m=NX(g,{length:r,decay:s,local:o,stride:a,interval:l});E.useEffect(()=>{const w=(f==null?void 0:f.current)||p.current.children.find(S=>S instanceof Ht);w&&A(w)},[m,f]);const v=E.useMemo(()=>new _ve,[]),y=E.useMemo(()=>{var w;const S=new bve({lineWidth:.1*i,color:c,sizeAttenuation:1,resolution:new Ie(h.width,h.height)});let C;if(n)if(Array.isArray(n))C=n.find(b=>{const M=b;return typeof M.type=="string"&&M.type==="meshLineMaterial"});else{const b=n;typeof b.type=="string"&&b.type==="meshLineMaterial"&&(C=b)}return typeof((w=C)==null?void 0:w.props)=="object"&&S.setValues(C.props),S},[i,c,h,n]);return E.useEffect(()=>{y.uniforms.resolution.value.set(h.width,h.height)},[h]),Ct(()=>{m.current&&v.setPoints(m.current,u)}),E.createElement("group",null,ou(E.createElement("mesh",{ref:e,geometry:v,material:y}),d),E.createElement("group",{ref:p},n))});function GX(t,e=16,n,i,r){const[s,o]=E.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new ml(Float32Array.from(a),16)});return E.useLayoutEffect(()=>{if(typeof t.current>"u")return;const a=new m0e(t.current);i&&a.setWeightAttribute(i),a.build();const l=new L,c=new L,u=new Je,f=new Ht;t.current.updateMatrixWorld(!0);for(let h=0;h<e;h++)a.sample(l,c,u),typeof n=="function"?n({dummy:f,sampledMesh:t.current,position:l,normal:c,color:u},h):f.position.copy(l),f.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(h,f.matrix),f.matrix.toArray(s.array,h*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(new ml(s.array,s.itemSize).copy(s))},[t,r,i,e,n]),s}function Ive({children:t,weight:e,transform:n,instances:i,mesh:r,count:s=16,...o}){const a=E.useRef(null),l=E.useRef(null),c=E.useRef(null);return E.useLayoutEffect(()=>{var u,f;l.current=(u=i==null?void 0:i.current)!==null&&u!==void 0?u:a.current.children.find(h=>h.hasOwnProperty("instanceMatrix")),c.current=(f=r==null?void 0:r.current)!==null&&f!==void 0?f:a.current.children.find(h=>h.type==="Mesh")},[t,r==null?void 0:r.current,i==null?void 0:i.current]),GX(c,s,n,e,l),E.createElement("group",Te({ref:a},o),t)}const Bve=({compute:t,name:e,...n})=>{const[i]=E.useState(()=>new Gt(new Float32Array(0),1)),r=E.useRef(null);return E.useLayoutEffect(()=>{if(r.current){var s;const o=(s=r.current.parent)!==null&&s!==void 0?s:r.current.__r3f.parent,a=t(o);r.current.copy(a)}},[t]),E.createElement("primitive",Te({ref:r,object:i,attach:`attributes-${e}`},n))};function Rve(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:n,inject:i,castShadow:r,receiveShadow:s}){let o={};for(const a of e)o[a]=t[a];return n&&(o.geometry&&n!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&n!=="geometriesOnly"&&(o.material=o.material.clone())),i&&(typeof i=="function"?o={...o,children:i(t)}:E.isValidElement(i)?o={...o,children:i}:o={...o,...i}),t instanceof ut&&(r&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const mv=E.forwardRef(({isChild:t=!1,object:e,children:n,deep:i,castShadow:r,receiveShadow:s,inject:o,keys:a,...l},c)=>{const u={keys:a,deep:i,inject:o,castShadow:r,receiveShadow:s};if(e=E.useMemo(()=>{if(t===!1&&!Array.isArray(e)){let p=!1;if(e.traverse(g=>{g.isSkinnedMesh&&(p=!0)}),p)return p0e.clone(e)}return e},[e,t]),Array.isArray(e))return E.createElement("group",Te({},l,{ref:c}),e.map(p=>E.createElement(mv,Te({key:p.uuid,object:p},u))),n);const{children:f,...h}=Rve(e,u),d=e.type[0].toLowerCase()+e.type.slice(1);return E.createElement(d,Te({},h,l,{ref:c}),e.children.map(p=>p.type==="Bone"?E.createElement("primitive",Te({key:p.uuid,object:p},u)):E.createElement(mv,Te({key:p.uuid,object:p},u,{isChild:!0}))),n,f)}),XB=E.createContext(null),Pve=E.forwardRef(({resolution:t=28,maxPolyCount:e=1e4,enableUvs:n=!1,enableColors:i=!1,children:r,...s},o)=>{const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current,[]);const l=E.useMemo(()=>new i0e(t,null,n,i,e),[t,e,n,i]),c=E.useMemo(()=>({getParent:()=>a}),[]);return Ct(()=>{l.update(),l.reset()},-1),E.createElement(E.Fragment,null,E.createElement("primitive",Te({object:l,ref:a},s),E.createElement(XB.Provider,{value:c},r)))}),Dve=E.forwardRef(({strength:t=.5,subtract:e=12,color:n,...i},r)=>{const{getParent:s}=E.useContext(XB),o=E.useMemo(()=>s(),[s]),a=E.useRef(null);E.useImperativeHandle(r,()=>a.current,[]);const l=new L;return Ct(c=>{!o.current||!a.current||(a.current.getWorldPosition(l),o.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,t,e,n))}),E.createElement("group",Te({ref:a},i))}),Lve=E.forwardRef(({planeType:t="x",strength:e=.5,subtract:n=12,...i},r)=>{const{getParent:s}=E.useContext(XB),o=E.useMemo(()=>s(),[s]),a=E.useRef(null);E.useImperativeHandle(r,()=>a.current,[]);const l=E.useMemo(()=>t==="x"?"addPlaneX":t==="y"?"addPlaneY":"addPlaneZ",[t]);return Ct(()=>{!o.current||!a.current||o.current[l](e,n)}),E.createElement("group",Te({ref:a},i))});function Fve(t){return Array.isArray(t)}function IM(t=[0,0,0]){return Fve(t)?t:t instanceof L||t instanceof gi?[t.x,t.y,t.z]:[t,t,t]}const Ove=E.forwardRef(function({debug:e,depthTest:n=!1,polygonOffsetFactor:i=-10,map:r,mesh:s,children:o,position:a,rotation:l,scale:c,...u},f){const h=E.useRef(null);E.useImperativeHandle(f,()=>h.current);const d=E.useRef(null);return E.useLayoutEffect(()=>{const p=(s==null?void 0:s.current)||h.current.parent,g=h.current;if(!(p instanceof ut))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const A={position:new L,rotation:new gi,scale:new L(1,1,1)};if(p){yr(A,{position:a,scale:c});const m=p.matrixWorld.clone();if(p.matrixWorld.identity(),!l||typeof l=="number"){const v=new Ht;v.position.copy(A.position),v.lookAt(p.position),typeof l=="number"&&v.rotateZ(l),yr(A,{rotation:v.rotation})}else yr(A,{rotation:l});return g.geometry=new N1e(p,A.position,A.rotation,A.scale),d.current&&(yr(d.current,A),d.current.traverse(v=>v.raycast=()=>null)),p.matrixWorld=m,()=>{g.geometry.dispose()}}},[s,...IM(a),...IM(c),...IM(l)]),E.createElement("mesh",Te({ref:h,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":n,"material-map":r},u),o,e&&E.createElement("mesh",{ref:d},E.createElement("boxGeometry",null),E.createElement("meshNormalMaterial",{wireframe:!0}),E.createElement("axesHelper",null)))}),zve=E.forwardRef(function({src:e,skipFill:n,skipStrokes:i,fillMaterial:r,strokeMaterial:s,fillMeshProps:o,strokeMeshProps:a,...l},c){const u=bi(mA,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),f=E.useMemo(()=>i?[]:u.paths.map(h=>{var d;return((d=h.userData)==null?void 0:d.style.stroke)===void 0||h.userData.style.stroke==="none"?null:h.subPaths.map(p=>mA.pointsToStroke(p.getPoints(),h.userData.style))}),[u,i]);return E.useEffect(()=>()=>f.forEach(h=>h&&h.map(d=>d.dispose())),[f]),E.createElement("object3D",Te({ref:c},l),E.createElement("object3D",{scale:[1,-1,1]},u.paths.map((h,d)=>{var p,g;return E.createElement(E.Fragment,{key:d},!n&&((p=h.userData)==null?void 0:p.style.fill)!==void 0&&h.userData.style.fill!=="none"&&mA.createShapes(h).map((A,m)=>E.createElement("mesh",Te({key:m},o),E.createElement("shapeGeometry",{args:[A]}),E.createElement("meshBasicMaterial",Te({color:h.userData.style.fill,opacity:h.userData.style.fillOpacity,transparent:!0,side:Qn,depthWrite:!1},r)))),!i&&((g=h.userData)==null?void 0:g.style.stroke)!==void 0&&h.userData.style.stroke!=="none"&&h.subPaths.map((A,m)=>E.createElement("mesh",Te({key:m,geometry:f[d][m]},a),E.createElement("meshBasicMaterial",Te({color:h.userData.style.stroke,opacity:h.userData.style.strokeOpacity,transparent:!0,side:Qn,depthWrite:!1},s)))))})))});let Nx=null,HX="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function QX(t,e,n){return i=>{n&&n(i),t&&(Nx||(Nx=new Hge),Nx.setDecoderPath(typeof t=="string"?t:HX),i.setDRACOLoader(Nx)),e&&i.setMeshoptDecoder(typeof EM=="function"?EM():EM)}}function ty(t,e=!0,n=!0,i){return bi(GB,t,QX(e,n,i))}ty.preload=(t,e=!0,n=!0,i)=>bi.preload(GB,t,QX(e,n,i));ty.clear=t=>bi.clear(GB,t);ty.setDecoderPath=t=>{HX=t};const Uve=E.forwardRef(({src:t,useDraco:e,useMeshOpt:n,extendLoader:i,...r},s)=>{const{scene:o}=ty(t,e,n,i);return E.createElement(mv,Te({ref:s},r,{object:o}))});function kve({renderIndex:t=1,bgColor:e="black",fgColor:n="white",characters:i=" .:-+*=%@#",invert:r=!0,color:s=!1,resolution:o=.15}){const{size:a,gl:l,scene:c,camera:u}=Fe(),f=E.useMemo(()=>{const h=new j1e(l,i,{invert:r,color:s,resolution:o});return h.domElement.style.position="absolute",h.domElement.style.top="0px",h.domElement.style.left="0px",h.domElement.style.pointerEvents="none",h},[i,r,s,o]);return E.useLayoutEffect(()=>{f.domElement.style.color=n,f.domElement.style.backgroundColor=e},[n,e]),E.useEffect(()=>(l.domElement.style.opacity="0",l.domElement.parentNode.appendChild(f.domElement),()=>{l.domElement.style.opacity="1",l.domElement.parentNode.removeChild(f.domElement)}),[f]),E.useEffect(()=>{f.setSize(a.width,a.height)},[f,a]),Ct(h=>{f.render(c,u)},t),E.createElement(E.Fragment,null)}const Sz=Vo({alphaTest:0,viewport:new Ie(1980,1080),focal:1e3,centerAndScaleTexture:null,covAndColorTexture:null},`
    precision highp sampler2D;
    precision highp usampler2D;
    out vec4 vColor;
    out vec3 vPosition;
    uniform vec2 resolution;
    uniform vec2 viewport;
    uniform float focal;
    attribute uint splatIndex;
    uniform sampler2D centerAndScaleTexture;
    uniform usampler2D covAndColorTexture;    

    vec2 unpackInt16(in uint value) {
      int v = int(value);
      int v0 = v >> 16;
      int v1 = (v & 0xFFFF);
      if((v & 0x8000) != 0)
        v1 |= 0xFFFF0000;
      return vec2(float(v1), float(v0));
    }

    void main () {
      ivec2 texSize = textureSize(centerAndScaleTexture, 0);
      ivec2 texPos = ivec2(splatIndex%uint(texSize.x), splatIndex/uint(texSize.x));
      vec4 centerAndScaleData = texelFetch(centerAndScaleTexture, texPos, 0);
      vec4 center = vec4(centerAndScaleData.xyz, 1);
      vec4 camspace = modelViewMatrix * center;
      vec4 pos2d = projectionMatrix * camspace;

      float bounds = 1.2 * pos2d.w;
      if (pos2d.z < -pos2d.w || pos2d.x < -bounds || pos2d.x > bounds
        || pos2d.y < -bounds || pos2d.y > bounds) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
      }

      uvec4 covAndColorData = texelFetch(covAndColorTexture, texPos, 0);
      vec2 cov3D_M11_M12 = unpackInt16(covAndColorData.x) * centerAndScaleData.w;
      vec2 cov3D_M13_M22 = unpackInt16(covAndColorData.y) * centerAndScaleData.w;
      vec2 cov3D_M23_M33 = unpackInt16(covAndColorData.z) * centerAndScaleData.w;
      mat3 Vrk = mat3(
        cov3D_M11_M12.x, cov3D_M11_M12.y, cov3D_M13_M22.x,
        cov3D_M11_M12.y, cov3D_M13_M22.y, cov3D_M23_M33.x,
        cov3D_M13_M22.x, cov3D_M23_M33.x, cov3D_M23_M33.y
      );

      mat3 J = mat3(
        focal / camspace.z, 0., -(focal * camspace.x) / (camspace.z * camspace.z),
        0., focal / camspace.z, -(focal * camspace.y) / (camspace.z * camspace.z),
        0., 0., 0.
      );

      mat3 W = transpose(mat3(modelViewMatrix));
      mat3 T = W * J;
      mat3 cov = transpose(T) * Vrk * T;
      vec2 vCenter = vec2(pos2d) / pos2d.w;
      float diagonal1 = cov[0][0] + 0.3;
      float offDiagonal = cov[0][1];
      float diagonal2 = cov[1][1] + 0.3;
      float mid = 0.5 * (diagonal1 + diagonal2);
      float radius = length(vec2((diagonal1 - diagonal2) / 2.0, offDiagonal));
      float lambda1 = mid + radius;
      float lambda2 = max(mid - radius, 0.1);
      vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));
      vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
      vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);
      uint colorUint = covAndColorData.w;
      vColor = vec4(
        float(colorUint & uint(0xFF)) / 255.0,
        float((colorUint >> uint(8)) & uint(0xFF)) / 255.0,
        float((colorUint >> uint(16)) & uint(0xFF)) / 255.0,
        float(colorUint >> uint(24)) / 255.0
      );
      vPosition = position;

      gl_Position = vec4(
        vCenter 
          + position.x * v2 / viewport * 2.0 
          + position.y * v1 / viewport * 2.0, pos2d.z / pos2d.w, 1.0);
    }
    `,`
    #include <alphatest_pars_fragment>
    #include <alphahash_pars_fragment>
    in vec4 vColor;
    in vec3 vPosition;
    void main () {
      float A = -dot(vPosition.xy, vPosition.xy);
      if (A < -4.0) discard;
      float B = exp(A) * vColor.a;
      vec4 diffuseColor = vec4(vColor.rgb, B);
      #include <alphatest_fragment>
      #include <alphahash_fragment>
      gl_FragColor = diffuseColor;
      #include <tonemapping_fragment>
      #include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `);function Nve(t){let e=null,n=0;function i(r,s=!1){const o=e.length/16,a=-1e-4;let l=-1/0,c=1/0;const u=new Float32Array(o),f=new Int32Array(u.buffer),h=new Int32Array(o);let d=0;for(let v=0;v<o;v++){const y=r[0]*e[v*16+12]+r[1]*e[v*16+13]+r[2]*e[v*16+14]+r[3];(s||y<0&&e[v*16+15]>a*y)&&(u[d]=y,h[d]=v,d++,y>l&&(l=y),y<c&&(c=y))}const p=(256*256-1)/(l-c),g=new Uint32Array(256*256);for(let v=0;v<d;v++)f[v]=(u[v]-c)*p|0,g[f[v]]++;const A=new Uint32Array(256*256);for(let v=1;v<256*256;v++)A[v]=A[v-1]+g[v-1];const m=new Uint32Array(d);for(let v=0;v<d;v++)m[A[f[v]]++]=h[v];return m}t.onmessage=r=>{if(r.data.method=="push"){n===0&&(e=new Float32Array(r.data.length));const s=new Float32Array(r.data.matrices);e.set(s,n),n+=s.length}else if(r.data.method=="sort"&&e!==null){const s=i(new Float32Array(r.data.view),r.data.hashed);t.postMessage({indices:s,key:r.data.key},[s.buffer])}}}class Gve extends Zi{constructor(...e){super(...e),this.gl=null,this.chunkSize=25e3}load(e,n,i,r){const s={gl:this.gl,url:this.manager.resolveURL(e),worker:new Worker(URL.createObjectURL(new Blob(["(",Nve.toString(),")(self)"],{type:"application/javascript"}))),manager:this.manager,update:(o,a,l)=>Vve(a,s,o,l),connect:o=>Wve(s,o),loading:!1,loaded:!1,loadedVertexCount:0,chunkSize:this.chunkSize,totalDownloadBytes:0,numVertices:0,rowLength:32,maxVertexes:0,bufferTextureWidth:0,bufferTextureHeight:0,stream:null,centerAndScaleData:null,covAndColorData:null,covAndColorTexture:null,centerAndScaleTexture:null,onProgress:i};Hve(s).then(n).catch(o=>{r==null||r(o),s.manager.itemError(s.url)})}}async function Hve(t){t.manager.itemStart(t.url);const e=await fetch(t.url);if(e.body===null)throw"Failed to fetch file";let n=e.headers.get("Content-Length");const i=n?parseInt(n):void 0;if(i==null)throw"Failed to get content length";t.stream=e.body.getReader(),t.totalDownloadBytes=i,t.numVertices=Math.floor(t.totalDownloadBytes/t.rowLength);const r=t.gl.getContext();let s=r.getParameter(r.MAX_TEXTURE_SIZE);return t.maxVertexes=s*s,t.numVertices>t.maxVertexes&&(t.numVertices=t.maxVertexes),t.bufferTextureWidth=s,t.bufferTextureHeight=Math.floor((t.numVertices-1)/s)+1,t.centerAndScaleData=new Float32Array(t.bufferTextureWidth*t.bufferTextureHeight*4),t.covAndColorData=new Uint32Array(t.bufferTextureWidth*t.bufferTextureHeight*4),t.centerAndScaleTexture=new Yr(t.centerAndScaleData,t.bufferTextureWidth,t.bufferTextureHeight,In,vn),t.centerAndScaleTexture.needsUpdate=!0,t.covAndColorTexture=new Yr(t.covAndColorData,t.bufferTextureWidth,t.bufferTextureHeight,xf,Ss),t.covAndColorTexture.internalFormat="RGBA32UI",t.covAndColorTexture.needsUpdate=!0,t}async function Qve(t){t.loading=!0;let e=0,n=0;const i=[];let r=0;const s=t.totalDownloadBytes!==0;for(;;)try{const{value:o,done:a}=await t.stream.read();if(a)break;if(e+=o.length,t.totalDownloadBytes!=null){const c=e/t.totalDownloadBytes*100;if(t.onProgress&&c-r>1){const u=new ProgressEvent("progress",{lengthComputable:s,loaded:e,total:t.totalDownloadBytes});t.onProgress(u),r=c}}i.push(o);const l=e-n;if(t.totalDownloadBytes!=null&&l>t.rowLength*t.chunkSize){let c=Math.floor(l/t.rowLength);const u=new Uint8Array(l);let f=0;for(const p of i)u.set(p,f),f+=p.length;if(i.length=0,l>c*t.rowLength){const p=new Uint8Array(l-c*t.rowLength);p.set(u.subarray(l-p.length,l),0),i.push(p)}const h=new Uint8Array(c*t.rowLength);h.set(u.subarray(0,h.byteLength),0);const d=Cz(t,h.buffer,c);if(t.worker.postMessage({method:"push",src:t.url,length:t.numVertices*16,matrices:d.buffer},[d.buffer]),n+=c*t.rowLength,t.onProgress){const p=new ProgressEvent("progress",{lengthComputable:s,loaded:t.totalDownloadBytes,total:t.totalDownloadBytes});t.onProgress(p)}}}catch(o){console.error(o);break}if(e-n>0){let o=new Uint8Array(i.reduce((u,f)=>u+f.length,0)),a=0;for(const u of i)o.set(u,a),a+=u.length;let l=Math.floor(o.byteLength/t.rowLength);const c=Cz(t,o.buffer,l);t.worker.postMessage({method:"push",src:t.url,length:l*16,matrices:c.buffer},[c.buffer])}t.loaded=!0,t.manager.itemEnd(t.url)}function Vve(t,e,n,i){if(t.updateMatrixWorld(),e.gl.getCurrentViewport(n.viewport),n.material.viewport.x=n.viewport.z,n.material.viewport.y=n.viewport.w,n.material.focal=n.viewport.w/2*Math.abs(t.projectionMatrix.elements[5]),n.ready){if(i&&n.sorted)return;n.ready=!1;const r=new Float32Array([n.modelViewMatrix.elements[2],-n.modelViewMatrix.elements[6],n.modelViewMatrix.elements[10],n.modelViewMatrix.elements[14]]);e.worker.postMessage({method:"sort",src:e.url,key:n.uuid,view:r.buffer,hashed:i},[r.buffer]),i&&e.loaded&&(n.sorted=!0)}}function Wve(t,e){t.loading||Qve(t),e.ready=!1,e.pm=new Ge,e.vm1=new Ge,e.vm2=new Ge,e.viewport=new Jt;let n=new Uint32Array(t.bufferTextureWidth*t.bufferTextureHeight);const i=new ml(n,1,!1);i.setUsage(ws);const r=e.geometry=new Hv,s=new Float32Array(6*3),o=new Gt(s,3);r.setAttribute("position",o),o.setXYZ(2,-2,2,0),o.setXYZ(1,2,2,0),o.setXYZ(0,-2,-2,0),o.setXYZ(5,-2,-2,0),o.setXYZ(4,2,2,0),o.setXYZ(3,2,-2,0),o.needsUpdate=!0,r.setAttribute("splatIndex",i),r.instanceCount=1;function a(c){if(e&&c.data.key===e.uuid){let u=new Uint32Array(c.data.indices);r.attributes.splatIndex.set(u),r.attributes.splatIndex.needsUpdate=!0,r.instanceCount=u.length,e.ready=!0}}t.worker.addEventListener("message",a);async function l(){for(;;){const c=t.gl.properties.get(t.centerAndScaleTexture),u=t.gl.properties.get(t.covAndColorTexture);if(c!=null&&c.__webglTexture&&u!=null&&u.__webglTexture&&t.loadedVertexCount>0)break;await new Promise(f=>setTimeout(f,10))}e.ready=!0}return l(),()=>t.worker.removeEventListener("message",a)}function Cz(t,e,n){const i=t.gl.getContext();if(t.loadedVertexCount+n>t.maxVertexes&&(n=t.maxVertexes-t.loadedVertexCount),n<=0)throw"Failed to parse file";const r=new Uint8Array(e),s=new Float32Array(e),o=new Float32Array(n*16),a=new Uint8Array(t.covAndColorData.buffer),l=new Int16Array(t.covAndColorData.buffer);for(let c=0;c<n;c++){const u=new Tt(-(r[32*c+28+1]-128)/128,(r[32*c+28+2]-128)/128,(r[32*c+28+3]-128)/128,-(r[32*c+28+0]-128)/128);u.invert();const f=new L(s[8*c+0],s[8*c+1],-s[8*c+2]),h=new L(s[8*c+3+0],s[8*c+3+1],s[8*c+3+2]),d=new Ge;d.makeRotationFromQuaternion(u),d.transpose(),d.scale(h);const p=d.clone();d.transpose(),d.premultiply(p),d.setPosition(f);const g=[0,1,2,5,6,10];let A=0;for(let y=0;y<g.length;y++)Math.abs(d.elements[g[y]])>A&&(A=Math.abs(d.elements[g[y]]));let m=t.loadedVertexCount*4+c*4;t.centerAndScaleData[m+0]=f.x,t.centerAndScaleData[m+1]=-f.y,t.centerAndScaleData[m+2]=f.z,t.centerAndScaleData[m+3]=A/32767,m=t.loadedVertexCount*8+c*4*2;for(let y=0;y<g.length;y++)l[m+y]=d.elements[g[y]]*32767/A;m=t.loadedVertexCount*16+(c*4+3)*4;const v=new Je(r[32*c+24+0]/255,r[32*c+24+1]/255,r[32*c+24+2]/255);v.convertSRGBToLinear(),a[m+0]=v.r*255,a[m+1]=v.g*255,a[m+2]=v.b*255,a[m+3]=r[32*c+24+3],d.elements[15]=Math.max(h.x,h.y,h.z)*r[32*c+24+3]/255;for(let y=0;y<16;y++)o[c*16+y]=d.elements[y]}for(;n>0;){let c=0,u=0;const f=t.loadedVertexCount%t.bufferTextureWidth,h=Math.floor(t.loadedVertexCount/t.bufferTextureWidth);t.loadedVertexCount%t.bufferTextureWidth!=0?(c=Math.min(t.bufferTextureWidth,f+n)-f,u=1):Math.floor(n/t.bufferTextureWidth)>0?(c=t.bufferTextureWidth,u=Math.floor(n/t.bufferTextureWidth)):(c=n%t.bufferTextureWidth,u=1);const d=t.gl.properties.get(t.centerAndScaleTexture);i.bindTexture(i.TEXTURE_2D,d.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,f,h,c,u,i.RGBA,i.FLOAT,t.centerAndScaleData,t.loadedVertexCount*4);const p=t.gl.properties.get(t.covAndColorTexture);i.bindTexture(i.TEXTURE_2D,p.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,f,h,c,u,i.RGBA_INTEGER,i.UNSIGNED_INT,t.covAndColorData,t.loadedVertexCount*4),t.gl.resetState(),t.loadedVertexCount+=c*u,n-=c*u}return o}function jve({src:t,toneMapped:e=!1,alphaTest:n=0,alphaHash:i=!1,chunkSize:r=25e3,...s}){ui({SplatMaterial:Sz});const o=E.useRef(null),a=Fe(u=>u.gl),l=Fe(u=>u.camera),c=bi(Gve,t,u=>{u.gl=a,u.chunkSize=r});return E.useLayoutEffect(()=>c.connect(o.current),[t]),Ct(()=>c.update(o.current,l,i)),E.createElement("mesh",Te({ref:o,frustumCulled:!1},s),E.createElement("splatMaterial",{key:`${t}/${n}/${i}${Sz.key}`,transparent:!i,depthTest:!0,alphaTest:i?0:n,centerAndScaleTexture:c.centerAndScaleTexture,covAndColorTexture:c.covAndColorTexture,depthWrite:i?!0:n>0,blending:i?lf:tw,blendSrcAlpha:nw,alphaHash:!!i,toneMapped:e}))}function Vs(t,e,n){const i=Fe(h=>h.size),r=Fe(h=>h.viewport),s=typeof t=="number"?t:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,f=E.useMemo(()=>{const h=new Ln(s,o,{minFilter:Vt,magFilter:Vt,type:On,...u});return c&&(h.depthTexture=new hd(s,o,vn)),h.samples=l,h},[]);return E.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),E.useEffect(()=>()=>f.dispose(),[]),f}const Xve=({children:t,width:e,height:n,...i})=>{const r=Vs(e,n,i);return E.createElement(E.Fragment,null,t==null?void 0:t(r))},Yve=t=>typeof t=="function",VX=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,children:i,makeDefault:r,...s},o)=>{const a=Fe(({set:A})=>A),l=Fe(({camera:A})=>A),c=Fe(({size:A})=>A),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Vs(e);E.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(r){const A=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:A}))}},[u,r,a]);let d=0,p=null;const g=Yve(i);return Ct(A=>{g&&(n===1/0||d<n)&&(f.current.visible=!1,A.gl.setRenderTarget(h),p=A.scene.background,t&&(A.scene.background=t),A.gl.render(A.scene,u.current),A.scene.background=p,A.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.createElement(E.Fragment,null,E.createElement("orthographicCamera",Te({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:u},s),!g&&i),E.createElement("group",{ref:f},g&&i(h.texture)))}),qve=t=>typeof t=="function",$ve=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:i,children:r,...s},o)=>{const a=Fe(({set:A})=>A),l=Fe(({camera:A})=>A),c=Fe(({size:A})=>A),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Vs(e);E.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let d=0,p=null;const g=qve(r);return Ct(A=>{g&&(n===1/0||d<n)&&(f.current.visible=!1,A.gl.setRenderTarget(h),p=A.scene.background,t&&(A.scene.background=t),A.gl.render(A.scene,u.current),A.scene.background=p,A.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.useLayoutEffect(()=>{if(i){const A=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:A}))}},[u,i,a]),E.createElement(E.Fragment,null,E.createElement("perspectiveCamera",Te({ref:u},s),!g&&r),E.createElement("group",{ref:f},g&&r(h.texture)))});function WX({resolution:t=256,near:e=.1,far:n=1e3,envMap:i,fog:r}={}){const s=Fe(({gl:h})=>h),o=Fe(({scene:h})=>h),a=E.useMemo(()=>{const h=new E0(t);return h.texture.type=On,h},[t]);E.useEffect(()=>()=>{a.dispose()},[a]);const l=E.useMemo(()=>new fw(e,n,a),[e,n,a]);let c,u;const f=E.useCallback(()=>{c=o.fog,u=o.background,o.background=i||u,o.fog=r||c,l.update(s,o),o.fog=c,o.background=u},[s,o,l]);return{fbo:a,camera:l,update:f}}function Kve({children:t,frames:e=1/0,resolution:n,near:i,far:r,envMap:s,fog:o,...a}){const l=E.useRef(null),{fbo:c,camera:u,update:f}=WX({resolution:n,near:i,far:r,envMap:s,fog:o});let h=0;return Ct(()=>{l.current&&(e===1/0||h<e)&&(l.current.visible=!1,f(),l.current.visible=!0,h++)}),E.createElement("group",a,E.createElement("primitive",{object:u}),E.createElement("group",{ref:l},t==null?void 0:t(c.texture)))}const Jve=E.forwardRef((t,e)=>{const{camera:n,onChange:i,makeDefault:r,...s}=t,o=Fe(h=>h.camera),a=Fe(h=>h.invalidate),l=Fe(h=>h.get),c=Fe(h=>h.set),u=n||o,f=E.useMemo(()=>new P0e(u),[u]);return E.useEffect(()=>{const h=d=>{a(),i&&i(d)};return f==null||f.addEventListener==null||f.addEventListener("change",h),()=>f==null||f.removeEventListener==null?void 0:f.removeEventListener("change",h)},[i,f,a]),Ct(()=>f==null?void 0:f.update(),-1),E.useEffect(()=>{const h=f;return h==null||h.connect(),()=>h==null?void 0:h.dispose()},[f]),E.useEffect(()=>{if(r){const h=l().controls;return c({controls:f}),()=>c({controls:h})}},[r,f]),f?E.createElement("primitive",Te({ref:e,object:f},s)):null}),Zve=E.forwardRef(({domElement:t,...e},n)=>{const{onChange:i,makeDefault:r,...s}=e,o=Fe(p=>p.invalidate),a=Fe(p=>p.camera),l=Fe(p=>p.gl),c=Fe(p=>p.events),u=Fe(p=>p.get),f=Fe(p=>p.set),h=t||c.connected||l.domElement,d=E.useMemo(()=>new W0e(a),[a]);return E.useEffect(()=>(d.connect(h),()=>void d.dispose()),[h,d,o]),E.useEffect(()=>{const p=g=>{o(),i&&i(g)};return d.addEventListener==null||d.addEventListener("change",p),()=>d.removeEventListener==null?void 0:d.removeEventListener("change",p)},[i,o]),E.useEffect(()=>{if(r){const p=u().controls;return f({controls:d}),()=>f({controls:p})}},[r,d]),Ct((p,g)=>d.update(g)),E.createElement("primitive",Te({ref:n,object:d,args:[a,h]},s))}),eye=E.forwardRef((t={enableDamping:!0},e)=>{const{domElement:n,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=t,c=Fe(v=>v.invalidate),u=Fe(v=>v.camera),f=Fe(v=>v.gl),h=Fe(v=>v.events),d=Fe(v=>v.set),p=Fe(v=>v.get),g=n||h.connected||f.domElement,A=i||u,m=E.useMemo(()=>new k0e(A),[A]);return E.useEffect(()=>{m.connect(g);const v=y=>{c(),s&&s(y)};return m.addEventListener("change",v),o&&m.addEventListener("start",o),a&&m.addEventListener("end",a),()=>{m.dispose(),m.removeEventListener("change",v),o&&m.removeEventListener("start",o),a&&m.removeEventListener("end",a)}},[s,o,a,m,c,g]),E.useEffect(()=>{if(r){const v=p().controls;return d({controls:m}),()=>d({controls:v})}},[r,m]),Ct(()=>m.update(),-1),E.createElement("primitive",Te({ref:e,object:m,enableDamping:!0},l))}),tye=E.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=Fe(C=>C.invalidate),h=Fe(C=>C.camera),d=Fe(C=>C.gl),p=Fe(C=>C.events),g=Fe(C=>C.setEvents),A=Fe(C=>C.set),m=Fe(C=>C.get),v=Fe(C=>C.performance),y=e||h,w=i||p.connected||d.domElement,S=E.useMemo(()=>new Wj(y),[y]);return Ct(()=>{S.enabled&&S.update()},-1),E.useEffect(()=>(s&&S.connect(s===!0?w:s),S.connect(w),()=>void S.dispose()),[s,w,n,S,f]),E.useEffect(()=>{const C=I=>{f(),n&&v.regress(),o&&o(I)},b=I=>{a&&a(I)},M=I=>{l&&l(I)};return S.addEventListener("change",C),S.addEventListener("start",b),S.addEventListener("end",M),()=>{S.removeEventListener("start",b),S.removeEventListener("end",M),S.removeEventListener("change",C)}},[o,a,l,S,f,g]),E.useEffect(()=>{if(t){const C=m().controls;return A({controls:S}),()=>A({controls:C})}},[t,S]),E.createElement("primitive",Te({ref:u,object:S,enableDamping:r},c))}),nye=E.forwardRef(({makeDefault:t,camera:e,domElement:n,regress:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const{invalidate:c,camera:u,gl:f,events:h,set:d,get:p,performance:g,viewport:A}=Fe(),m=e||u,v=n||h.connected||f.domElement,y=E.useMemo(()=>new F0e(m),[m]);return Ct(()=>{y.enabled&&y.update()},-1),E.useEffect(()=>(y.connect(v),()=>void y.dispose()),[v,i,y,c]),E.useEffect(()=>{const w=S=>{c(),i&&g.regress(),r&&r(S)};return y.addEventListener("change",w),s&&y.addEventListener("start",s),o&&y.addEventListener("end",o),()=>{s&&y.removeEventListener("start",s),o&&y.removeEventListener("end",o),y.removeEventListener("change",w)}},[r,s,o,y,c]),E.useEffect(()=>{y.handleResize()},[A]),E.useEffect(()=>{if(t){const w=p().controls;return d({controls:y}),()=>d({controls:w})}},[t,y]),E.createElement("primitive",Te({ref:l,object:y},a))}),iye=E.forwardRef(({camera:t,makeDefault:e,regress:n,domElement:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const c=Fe(y=>y.invalidate),u=Fe(y=>y.camera),f=Fe(y=>y.gl),h=Fe(y=>y.events),d=Fe(y=>y.set),p=Fe(y=>y.get),g=Fe(y=>y.performance),A=t||u,m=i||h.connected||f.domElement,v=E.useMemo(()=>new H0e(A),[A]);return Ct(()=>{v.enabled&&v.update()},-1),E.useEffect(()=>(v.connect(m),()=>void v.dispose()),[m,n,v,c]),E.useEffect(()=>{const y=w=>{c(),n&&g.regress(),r&&r(w)};return v.addEventListener("change",y),s&&v.addEventListener("start",s),o&&v.addEventListener("end",o),()=>{v.removeEventListener("change",y),s&&v.removeEventListener("start",s),o&&v.removeEventListener("end",o)}},[r,s,o]),E.useEffect(()=>{if(e){const y=p().controls;return d({controls:v}),()=>d({controls:y})}},[e,v]),E.createElement("primitive",Te({ref:l,object:v},a))}),rye=E.forwardRef(({children:t,domElement:e,onChange:n,onMouseDown:i,onMouseUp:r,onObjectChange:s,object:o,makeDefault:a,camera:l,enabled:c,axis:u,mode:f,translationSnap:h,rotationSnap:d,scaleSnap:p,space:g,size:A,showX:m,showY:v,showZ:y,...w},S)=>{const C=Fe(Q=>Q.controls),b=Fe(Q=>Q.gl),M=Fe(Q=>Q.events),I=Fe(Q=>Q.camera),T=Fe(Q=>Q.invalidate),D=Fe(Q=>Q.get),R=Fe(Q=>Q.set),z=l||I,F=e||M.connected||b.domElement,V=E.useMemo(()=>new _0e(z,F),[z,F]),j=E.useRef(null);E.useLayoutEffect(()=>(o?V.attach(o instanceof Ht?o:o.current):j.current instanceof Ht&&V.attach(j.current),()=>void V.detach()),[o,t,V]),E.useEffect(()=>{if(C){const Q=J=>C.enabled=!J.value;return V.addEventListener("dragging-changed",Q),()=>V.removeEventListener("dragging-changed",Q)}},[V,C]);const Z=E.useRef(),U=E.useRef(),$=E.useRef(),X=E.useRef();return E.useLayoutEffect(()=>void(Z.current=n),[n]),E.useLayoutEffect(()=>void(U.current=i),[i]),E.useLayoutEffect(()=>void($.current=r),[r]),E.useLayoutEffect(()=>void(X.current=s),[s]),E.useEffect(()=>{const Q=N=>{T(),Z.current==null||Z.current(N)},J=N=>U.current==null?void 0:U.current(N),ne=N=>$.current==null?void 0:$.current(N),O=N=>X.current==null?void 0:X.current(N);return V.addEventListener("change",Q),V.addEventListener("mouseDown",J),V.addEventListener("mouseUp",ne),V.addEventListener("objectChange",O),()=>{V.removeEventListener("change",Q),V.removeEventListener("mouseDown",J),V.removeEventListener("mouseUp",ne),V.removeEventListener("objectChange",O)}},[T,V]),E.useEffect(()=>{if(a){const Q=D().controls;return R({controls:V}),()=>R({controls:Q})}},[a,V]),E.createElement(E.Fragment,null,E.createElement("primitive",{ref:S,object:V,enabled:c,axis:u,mode:f,translationSnap:h,rotationSnap:d,scaleSnap:p,space:g,size:A,showX:m,showY:v,showZ:y}),E.createElement("group",Te({ref:j},w),t))}),sye=E.forwardRef(({domElement:t,selector:e,onChange:n,onLock:i,onUnlock:r,enabled:s=!0,makeDefault:o,...a},l)=>{const{camera:c,...u}=a,f=Fe(S=>S.setEvents),h=Fe(S=>S.gl),d=Fe(S=>S.camera),p=Fe(S=>S.invalidate),g=Fe(S=>S.events),A=Fe(S=>S.get),m=Fe(S=>S.set),v=c||d,y=t||g.connected||h.domElement,w=E.useMemo(()=>new I0e(v),[v]);return E.useEffect(()=>{if(s){w.connect(y);const S=A().events.compute;return f({compute(C,b){const M=b.size.width/2,I=b.size.height/2;b.pointer.set(M/b.size.width*2-1,-(I/b.size.height)*2+1),b.raycaster.setFromCamera(b.pointer,b.camera)}}),()=>{w.disconnect(),f({compute:S})}}},[s,w]),E.useEffect(()=>{const S=M=>{p(),n&&n(M)};w.addEventListener("change",S),i&&w.addEventListener("lock",i),r&&w.addEventListener("unlock",r);const C=()=>w.lock(),b=e?Array.from(document.querySelectorAll(e)):[document];return b.forEach(M=>M&&M.addEventListener("click",C)),()=>{w.removeEventListener("change",S),i&&w.removeEventListener("lock",i),r&&w.removeEventListener("unlock",r),b.forEach(M=>M?M.removeEventListener("click",C):void 0)}},[n,i,r,e,w,p]),E.useEffect(()=>{if(o){const S=A().controls;return m({controls:w}),()=>m({controls:S})}},[o,w]),E.createElement("primitive",Te({ref:l,object:w},u))}),oye=E.forwardRef(({domElement:t,makeDefault:e,...n},i)=>{const r=Fe(f=>f.camera),s=Fe(f=>f.gl),o=Fe(f=>f.events),a=Fe(f=>f.get),l=Fe(f=>f.set),c=t||o.connected||s.domElement,[u]=E.useState(()=>new v0e(r,c));return E.useEffect(()=>{if(e){const f=a().controls;return l({controls:u}),()=>l({controls:f})}},[e,u]),Ct((f,h)=>{u.update(h)},-1),u?E.createElement("primitive",Te({ref:i,object:u},n)):null});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Oi={LEFT:1,RIGHT:2,MIDDLE:4},rt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),_p={NONE:0,IN:1,OUT:-1};function Ah(t){return t.isPerspectiveCamera}function Fu(t){return t.isOrthographicCamera}const Ep=Math.PI*2,bz=Math.PI/2,jX=1e-5,cg=Math.PI/180;function qa(t,e,n){return Math.max(e,Math.min(n,t))}function hi(t,e=jX){return Math.abs(t)<e}function Yn(t,e,n=jX){return hi(t-e,n)}function Mz(t,e){return Math.round(t/e)*e}function ug(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function fg(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function Gx(t,e,n,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=t-e;const u=e,f=r*i;c=qa(c,-f,f),e=t-c;const h=(n.value+o*c)*s;n.value=(n.value-o*h)*l;let d=e+(c+h)*l;return u-t>0==d>u&&(d=u,n.value=(d-u)/s),d}function Tz(t,e,n,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,f=e.y,h=e.z,d=t.x-u,p=t.y-f,g=t.z-h;const A=u,m=f,v=h,y=r*i,w=y*y,S=d*d+p*p+g*g;if(S>w){const V=Math.sqrt(S);d=d/V*y,p=p/V*y,g=g/V*y}u=t.x-d,f=t.y-p,h=t.z-g;const C=(n.x+a*d)*s,b=(n.y+a*p)*s,M=(n.z+a*g)*s;n.x=(n.x-a*C)*c,n.y=(n.y-a*b)*c,n.z=(n.z-a*M)*c,o.x=u+(d+C)*c,o.y=f+(p+b)*c,o.z=h+(g+M)*c;const I=A-t.x,T=m-t.y,D=v-t.z,R=o.x-A,z=o.y-m,F=o.z-v;return I*R+T*z+D*F>0&&(o.x=A,o.y=m,o.z=v,n.x=(o.x-A)/s,n.y=(o.y-m)/s,n.z=(o.z-v)/s),o}function BM(t,e){e.set(0,0),t.forEach(n=>{e.x+=n.clientX,e.y+=n.clientY}),e.x/=t.length,e.y/=t.length}function RM(t,e){return Fu(t)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class aye{constructor(){this._listeners={}}addEventListener(e,n){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}var PM;const lye="2.8.5",Hx=1/8,cye=/Mac/.test((PM=globalThis==null?void 0:globalThis.navigator)===null||PM===void 0?void 0:PM.platform);let sn,Iz,Qx,DM,io,yn,Gn,wp,hg,Fl,Ol,vh,Bz,Rz,ra,dg,Sp,Pz,LM,Dz,FM,OM,Vx,zM=class OI extends aye{static install(e){sn=e.THREE,Iz=Object.freeze(new sn.Vector3(0,0,0)),Qx=Object.freeze(new sn.Vector3(0,1,0)),DM=Object.freeze(new sn.Vector3(0,0,1)),io=new sn.Vector2,yn=new sn.Vector3,Gn=new sn.Vector3,wp=new sn.Vector3,hg=new sn.Vector3,Fl=new sn.Vector3,Ol=new sn.Vector3,vh=new sn.Vector3,Bz=new sn.Vector3,Rz=new sn.Vector3,ra=new sn.Spherical,dg=new sn.Spherical,Sp=new sn.Box3,Pz=new sn.Box3,LM=new sn.Sphere,Dz=new sn.Quaternion,FM=new sn.Quaternion,OM=new sn.Matrix4,Vx=new sn.Raycaster}static get ACTION(){return rt}constructor(e,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=rt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=_p.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new sn.Vector3,this._focalOffsetVelocity=new sn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(m,v,y)=>{let w,S;if(Ah(this._camera)){const C=yn.copy(this._camera.position).sub(this._target),b=this._camera.getEffectiveFOV()*cg,M=C.length()*Math.tan(b*.5);w=this.truckSpeed*m*M/this._elementRect.height,S=this.truckSpeed*v*M/this._elementRect.height}else if(Fu(this._camera)){const C=this._camera;w=m*(C.right-C.left)/C.zoom/this._elementRect.width,S=v*(C.top-C.bottom)/C.zoom/this._elementRect.height}else return;this.verticalDragToForward?(y?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(w,0,!0),this.forward(-S,!0)):y?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y+S,this._focalOffsetEnd.z,!0):this.truck(w,S,!0)},this._rotateInternal=(m,v)=>{const y=Ep*this.azimuthRotateSpeed*m/this._elementRect.height,w=Ep*this.polarRotateSpeed*v/this._elementRect.height;this.rotate(y,w,!0)},this._dollyInternal=(m,v,y)=>{const w=Math.pow(.95,-m*this.dollySpeed),S=this._sphericalEnd.radius,C=this._sphericalEnd.radius*w,b=qa(C,this.minDistance,this.maxDistance),M=b-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(M,!0),this._dollyToNoClamp(b,!0)):this._dollyToNoClamp(b,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:b)-S,this._dollyControlCoord.set(v,y)),this._lastDollyDirection=Math.sign(-m)},this._zoomInternal=(m,v,y)=>{const w=Math.pow(.95,m*this.dollySpeed),S=this._zoom,C=this._zoom*w;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-S,this._dollyControlCoord.set(v,y))},typeof sn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new sn.Quaternion().setFromUnitVectors(this._camera.up,Qx),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=rt.NONE,this._target=new sn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new sn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new sn.Spherical().setFromVector3(yn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new sn.Vector3,new sn.Vector3,new sn.Vector3,new sn.Vector3],this._updateNearPlaneCorners(),this._boundary=new sn.Box3(new sn.Vector3(-1/0,-1/0,-1/0),new sn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new sn.Vector2,this.mouseButtons={left:rt.ROTATE,middle:rt.DOLLY,right:rt.TRUCK,wheel:Ah(this._camera)?rt.DOLLY:Fu(this._camera)?rt.ZOOM:rt.NONE},this.touches={one:rt.TOUCH_ROTATE,two:Ah(this._camera)?rt.TOUCH_DOLLY_TRUCK:Fu(this._camera)?rt.TOUCH_ZOOM_TRUCK:rt.NONE,three:rt.TOUCH_TRUCK};const i=new sn.Vector2,r=new sn.Vector2,s=new sn.Vector2,o=m=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const w=this._domElement.getBoundingClientRect(),S=m.clientX/w.width,C=m.clientY/w.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const v=m.pointerType!=="mouse"?null:(m.buttons&Oi.LEFT)===Oi.LEFT?Oi.LEFT:(m.buttons&Oi.MIDDLE)===Oi.MIDDLE?Oi.MIDDLE:(m.buttons&Oi.RIGHT)===Oi.RIGHT?Oi.RIGHT:null;if(v!==null){const w=this._findPointerByMouseButton(v);w&&this._disposePointer(w)}if((m.buttons&Oi.LEFT)===Oi.LEFT&&this._lockedPointer)return;const y={pointerId:m.pointerId,clientX:m.clientX,clientY:m.clientY,deltaX:0,deltaY:0,mouseButton:v};this._activePointers.push(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,h(m)},a=m=>{m.cancelable&&m.preventDefault();const v=m.pointerId,y=this._lockedPointer||this._findPointerById(v);if(y){if(y.clientX=m.clientX,y.clientY=m.clientY,y.deltaX=m.movementX,y.deltaY=m.movementY,this._state=0,m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(m.buttons&Oi.LEFT)===Oi.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(m.buttons&Oi.MIDDLE)===Oi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(m.buttons&Oi.RIGHT)===Oi.RIGHT&&(this._state=this._state|this.mouseButtons.right);d()}},l=m=>{const v=this._findPointerById(m.pointerId);if(!(v&&v===this._lockedPointer)){if(v&&this._disposePointer(v),m.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=rt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=rt.NONE;p()}};let c=-1;const u=m=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===rt.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),b=m.clientX/C.width,M=m.clientY/C.height;if(b<this._interactiveArea.left||b>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}if(m.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===rt.ROTATE||this.mouseButtons.wheel===rt.TRUCK){const C=performance.now();c-C<1e3&&this._getClientRect(this._elementRect),c=C}const v=cye?-1:-3,y=m.deltaMode===1?m.deltaY/v:m.deltaY/(v*10),w=this.dollyToCursor?(m.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,S=this.dollyToCursor?(m.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case rt.ROTATE:{this._rotateInternal(m.deltaX,m.deltaY),this._isUserControllingRotate=!0;break}case rt.TRUCK:{this._truckInternal(m.deltaX,m.deltaY,!1),this._isUserControllingTruck=!0;break}case rt.OFFSET:{this._truckInternal(m.deltaX,m.deltaY,!0),this._isUserControllingOffset=!0;break}case rt.DOLLY:{this._dollyInternal(-y,w,S),this._isUserControllingDolly=!0;break}case rt.ZOOM:{this._zoomInternal(-y,w,S),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=m=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===OI.ACTION.NONE){const v=m instanceof PointerEvent?m.pointerId:0,y=this._findPointerById(v);y&&this._disposePointer(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}m.preventDefault()}},h=m=>{if(!this._enabled)return;if(BM(this._activePointers,io),this._getClientRect(this._elementRect),i.copy(io),r.copy(io),this._activePointers.length>=2){const y=io.x-this._activePointers[1].clientX,w=io.y-this._activePointers[1].clientY,S=Math.sqrt(y*y+w*w);s.set(0,S);const C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,b=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(C,b)}if(this._state=0,!m)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in m&&m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(m.buttons&Oi.LEFT)===Oi.LEFT&&(this._state=this._state|this.mouseButtons.left),(m.buttons&Oi.MIDDLE)===Oi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(m.buttons&Oi.RIGHT)===Oi.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&rt.ROTATE)===rt.ROTATE||(this._state&rt.TOUCH_ROTATE)===rt.TOUCH_ROTATE||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&rt.TRUCK)===rt.TRUCK||(this._state&rt.TOUCH_TRUCK)===rt.TOUCH_TRUCK||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&rt.DOLLY)===rt.DOLLY||(this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&rt.ZOOM)===rt.ZOOM||(this._state&rt.TOUCH_ZOOM)===rt.TOUCH_ZOOM||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&rt.OFFSET)===rt.OFFSET||(this._state&rt.TOUCH_OFFSET)===rt.TOUCH_OFFSET||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,BM(this._activePointers,io);const v=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,y=v?-v.deltaX:r.x-io.x,w=v?-v.deltaY:r.y-io.y;if(r.copy(io),((this._state&rt.ROTATE)===rt.ROTATE||(this._state&rt.TOUCH_ROTATE)===rt.TOUCH_ROTATE||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(y,w),this._isUserControllingRotate=!0),(this._state&rt.DOLLY)===rt.DOLLY||(this._state&rt.ZOOM)===rt.ZOOM){const S=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,b=this.dollyDragInverted?-1:1;(this._state&rt.DOLLY)===rt.DOLLY?(this._dollyInternal(b*w*Hx,S,C),this._isUserControllingDolly=!0):(this._zoomInternal(b*w*Hx,S,C),this._isUserControllingZoom=!0)}if((this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_ZOOM)===rt.TOUCH_ZOOM||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE){const S=io.x-this._activePointers[1].clientX,C=io.y-this._activePointers[1].clientY,b=Math.sqrt(S*S+C*C),M=s.y-b;s.set(0,b);const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,T=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(M*Hx,I,T),this._isUserControllingDolly=!0):(this._zoomInternal(M*Hx,I,T),this._isUserControllingZoom=!0)}((this._state&rt.TRUCK)===rt.TRUCK||(this._state&rt.TOUCH_TRUCK)===rt.TOUCH_TRUCK||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(y,w,!1),this._isUserControllingTruck=!0),((this._state&rt.OFFSET)===rt.OFFSET||(this._state&rt.TOUCH_OFFSET)===rt.TOUCH_OFFSET||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(y,w,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},p=()=>{BM(this._activePointers,io),r.copy(io),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",g),this._domElement.ownerDocument.addEventListener("pointerlockerror",A),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),h())},this.unlockPointer=()=>{var m,v,y;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(m=this._domElement)===null||m===void 0||m.ownerDocument.exitPointerLock(),(v=this._domElement)===null||v===void 0||v.ownerDocument.removeEventListener("pointerlockchange",g),(y=this._domElement)===null||y===void 0||y.ownerDocument.removeEventListener("pointerlockerror",A),this.cancel()};const g=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},A=()=>{this.unlockPointer()};this._addAllEventListeners=m=>{this._domElement=m,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",g),this._domElement.ownerDocument.removeEventListener("pointerlockerror",A))},this.cancel=()=>{this._state!==rt.NONE&&(this._state=rt.NONE,this._activePointers.length=0,p())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=qa(e.width,0,1),this._interactiveArea.height=qa(e.height,0,1),this._interactiveArea.x=qa(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=qa(e.y,0,1-this._interactiveArea.height)}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}rotate(e,n,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+n,i)}rotateAzimuthTo(e,n=!1){return this.rotateTo(e,this._sphericalEnd.phi,n)}rotatePolarTo(e,n=!1){return this.rotateTo(this._sphericalEnd.theta,e,n)}rotateTo(e,n,i=!1){this._isUserControllingRotate=!1;const r=qa(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=qa(n,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||Yn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Yn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,n=!1){return this.dollyTo(this._sphericalEnd.radius-e,n)}dollyTo(e,n=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=_p.NONE,this._changedDolly=0,this._dollyToNoClamp(qa(e,this.minDistance,this.maxDistance),n)}_dollyToNoClamp(e,n=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Yn(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,n||(this._spherical.radius=this._sphericalEnd.radius);const s=!n||Yn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,n=!1){this._targetEnd.add(this._getCameraDirection(hg).multiplyScalar(e)),n||this._target.copy(this._targetEnd);const i=!n||Yn(this._target.x,this._targetEnd.x,this.restThreshold)&&Yn(this._target.y,this._targetEnd.y,this.restThreshold)&&Yn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,n=!1){return this.zoomTo(this._zoomEnd+e,n)}zoomTo(e,n=!1){this._isUserControllingZoom=!1,this._zoomEnd=qa(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,n||(this._zoom=this._zoomEnd);const i=!n||Yn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,n,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,n,i)}truck(e,n,i=!1){this._camera.updateMatrix(),Fl.setFromMatrixColumn(this._camera.matrix,0),Ol.setFromMatrixColumn(this._camera.matrix,1),Fl.multiplyScalar(e),Ol.multiplyScalar(-n);const r=yn.copy(Fl).add(Ol),s=Gn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,n=!1){yn.setFromMatrixColumn(this._camera.matrix,0),yn.crossVectors(this._camera.up,yn),yn.multiplyScalar(e);const i=Gn.copy(this._targetEnd).add(yn);return this.moveTo(i.x,i.y,i.z,n)}elevate(e,n=!1){return yn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+yn.x,this._targetEnd.y+yn.y,this._targetEnd.z+yn.z,n)}moveTo(e,n,i,r=!1){this._isUserControllingTruck=!1;const s=yn.set(e,n,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||Yn(this._target.x,this._targetEnd.x,this.restThreshold)&&Yn(this._target.y,this._targetEnd.y,this.restThreshold)&&Yn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,n,i,r=!1){const a=yn.set(e,n,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,n,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Sp.copy(e):Sp.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=Mz(this._sphericalEnd.theta,bz),f=Mz(this._sphericalEnd.phi,bz);l.push(this.rotateTo(u,f,n));const h=yn.setFromSpherical(this._sphericalEnd).normalize(),d=Dz.setFromUnitVectors(h,DM),p=Yn(Math.abs(h.y),1);p&&d.multiply(FM.setFromAxisAngle(Qx,u)),d.multiply(this._yAxisUpSpaceInverse);const g=Pz.makeEmpty();Gn.copy(c.min).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.min).setX(c.max.x).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.min).setY(c.max.y).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.max).setZ(c.min.z).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.min).setZ(c.max.z).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.max).setY(c.min.y).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.max).setX(c.min.x).applyQuaternion(d),g.expandByPoint(Gn),Gn.copy(c.max).applyQuaternion(d),g.expandByPoint(Gn),g.min.x-=r,g.min.y-=o,g.max.x+=s,g.max.y+=a,d.setFromUnitVectors(DM,h),p&&d.premultiply(FM.invert()),d.premultiply(this._yAxisUpSpace);const A=g.getSize(yn),m=g.getCenter(Gn).applyQuaternion(d);if(Ah(this._camera)){const v=this.getDistanceToFitBox(A.x,A.y,A.z,i);l.push(this.moveTo(m.x,m.y,m.z,n)),l.push(this.dollyTo(v,n)),l.push(this.setFocalOffset(0,0,0,n))}else if(Fu(this._camera)){const v=this._camera,y=v.right-v.left,w=v.top-v.bottom,S=i?Math.max(y/A.x,w/A.y):Math.min(y/A.x,w/A.y);l.push(this.moveTo(m.x,m.y,m.z,n)),l.push(this.zoomTo(S,n)),l.push(this.setFocalOffset(0,0,0,n))}return Promise.all(l)}fitToSphere(e,n){const i=[],s="isObject3D"in e?OI.createBoundingSphere(e,LM):LM.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,n)),Ah(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,n))}else if(Fu(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,n))}return i.push(this.setFocalOffset(0,0,0,n)),Promise.all(i)}setLookAt(e,n,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=_p.NONE,this._changedDolly=0;const l=Gn.set(r,s,o),c=yn.set(e,n,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Yn(this._target.x,this._targetEnd.x,this.restThreshold)&&Yn(this._target.y,this._targetEnd.y,this.restThreshold)&&Yn(this._target.z,this._targetEnd.z,this.restThreshold)&&Yn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Yn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Yn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,n,i,r,s,o,a,l,c,u,f,h,d,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=_p.NONE,this._changedDolly=0;const g=yn.set(r,s,o),A=Gn.set(e,n,i);ra.setFromVector3(A.sub(g).applyQuaternion(this._yAxisUpSpace));const m=wp.set(u,f,h),v=Gn.set(a,l,c);dg.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(g.lerp(m,d));const y=dg.theta-ra.theta,w=dg.phi-ra.phi,S=dg.radius-ra.radius;this._sphericalEnd.set(ra.radius+S*d,ra.phi+w*d,ra.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const C=!p||Yn(this._target.x,this._targetEnd.x,this.restThreshold)&&Yn(this._target.y,this._targetEnd.y,this.restThreshold)&&Yn(this._target.z,this._targetEnd.z,this.restThreshold)&&Yn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Yn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Yn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(e,n,i,r=!1){return this.setLookAt(e,n,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,n,i,r=!1){const s=this.getPosition(yn),o=this.setLookAt(s.x,s.y,s.z,e,n,i,r);return this._sphericalEnd.phi=qa(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,n,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,n,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||Yn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Yn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Yn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,n,i){this._camera.updateMatrixWorld(),Fl.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Ol.setFromMatrixColumn(this._camera.matrixWorldInverse,1),vh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=yn.set(e,n,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);Fl.multiplyScalar(o.x),Ol.multiplyScalar(o.y),vh.multiplyScalar(o.z),yn.copy(Fl).add(Ol).add(vh),yn.z=yn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-yn.x,yn.y,-yn.z,!1),this.moveTo(e,n,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,n,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new sn.Vector4,typeof e=="number"?this._viewport.set(e,n,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,n,i,r=!1){if(RM(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/n,o=this._camera.getEffectiveFOV()*cg,a=this._camera.aspect;return((r?s>a:s<a)?n:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(RM(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const n=this._camera.getEffectiveFOV()*cg,i=Math.atan(Math.tan(n*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?n:i;return e/Math.sin(r*.5)}getTarget(e,n=!0){return(e&&e.isVector3?e:new sn.Vector3).copy(n?this._targetEnd:this._target)}getPosition(e,n=!0){return(e&&e.isVector3?e:new sn.Vector3).setFromSpherical(n?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(n?this._targetEnd:this._target)}getSpherical(e,n=!0){return(e||new sn.Spherical).copy(n?this._sphericalEnd:this._spherical)}getFocalOffset(e,n=!0){return(e&&e.isVector3?e:new sn.Vector3).copy(n?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Ep,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Ep),this._spherical.theta+=Ep*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Ep)}reset(e=!1){if(!Yn(this._camera.up.x,this._cameraUp0.x)||!Yn(this._camera.up.y,this._cameraUp0.y)||!Yn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(yn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(n)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Qx),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=yn.subVectors(this._target,this._camera.position).normalize(),n=Gn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(n,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(yn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const n=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=Bz.subVectors(this._targetEnd,this._target),o=Rz.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(hi(n))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Gx(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(hi(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Gx(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(hi(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Gx(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(hi(s.x)&&hi(s.y)&&hi(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Tz(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(hi(o.x)&&hi(o.y)&&hi(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Tz(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(hi(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Gx(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(Ah(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,h=this._camera,d=this._getCameraDirection(hg),p=yn.copy(d).cross(h.up).normalize();p.lengthSq()===0&&(p.x=1);const g=Gn.crossVectors(p,d),A=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*cg*.5),v=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,y=wp.copy(this._targetEnd).add(p.multiplyScalar(this._dollyControlCoord.x*A*h.aspect)).add(g.multiplyScalar(this._dollyControlCoord.y*A)),w=yn.copy(this._targetEnd).lerp(y,v),S=this._lastDollyDirection===_p.IN&&this._spherical.radius<=this.minDistance,C=this._lastDollyDirection===_p.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||C)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const M=Gn.copy(d).multiplyScalar(-f);w.add(M)}this._boundary.clampPoint(w,w);const b=Gn.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(b),this._changedDolly-=f,hi(this._changedDolly)&&(this._changedDolly=0)}else if(Fu(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,h=this._camera,d=yn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),p=Gn.set(0,0,-1).applyQuaternion(h.quaternion),g=wp.copy(d).add(p.multiplyScalar(-d.dot(h.up))),m=-(this._zoom-f-this._zoom)/this._zoom,v=this._getCameraDirection(hg),y=this._targetEnd.dot(v),w=yn.copy(this._targetEnd).lerp(g,m),S=w.dot(v),C=v.multiplyScalar(S-y);w.sub(C),this._boundary.clampPoint(w,w);const b=Gn.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(b),this._changedZoom-=f,hi(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!hi(this._focalOffset.x)||!hi(this._focalOffset.y)||!hi(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Fl.setFromMatrixColumn(this._camera.matrix,0),Ol.setFromMatrixColumn(this._camera.matrix,1),vh.setFromMatrixColumn(this._camera.matrix,2),Fl.multiplyScalar(this._focalOffset.x),Ol.multiplyScalar(-this._focalOffset.y),vh.multiplyScalar(this._focalOffset.z),yn.copy(Fl).add(Ol).add(vh),this._camera.position.add(yn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),yn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),hi(n,this.restThreshold)&&hi(i,this.restThreshold)&&hi(r,this.restThreshold)&&hi(s.x,this.restThreshold)&&hi(s.y,this.restThreshold)&&hi(s.z,this.restThreshold)&&hi(o.x,this.restThreshold)&&hi(o.y,this.restThreshold)&&hi(o.z,this.restThreshold)&&hi(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ug(this.maxDistance),minZoom:this.minZoom,maxZoom:ug(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ug(this.maxPolarAngle),minAzimuthAngle:ug(this.minAzimuthAngle),maxAzimuthAngle:ug(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:yn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,n=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=fg(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=fg(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=fg(i.maxPolarAngle),this.minAzimuthAngle=fg(i.minAzimuthAngle),this.maxAzimuthAngle=fg(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],n),ra.setFromVector3(yn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ra.theta,ra.phi,n),this.dollyTo(ra.radius,n),this.zoomTo(i.zoom,n),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],n),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",lye),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(n=>n.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(n=>n.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,n,i){const r=n.lengthSq();if(r===0)return e;const s=Gn.copy(n).add(e),a=this._boundary.clampPoint(s,wp).sub(s),l=a.lengthSq();if(l===0)return e.add(n);if(l===r)return e;if(i===0)return e.add(n).add(a);{const c=1+i*l/n.dot(a);return e.add(Gn.copy(n).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Ah(this._camera)){const e=this._camera,n=e.near,i=e.getEffectiveFOV()*cg,r=Math.tan(i*.5)*n,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Fu(this._camera)){const e=this._camera,n=1/e.zoom,i=e.left*n,r=e.right*n,s=e.top*n,o=e.bottom*n;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||RM(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(hg);OM.lookAt(Iz,i,this._camera.up);for(let r=0;r<4;r++){const s=Gn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(OM);const o=wp.addVectors(this._target,s);Vx.set(o,i),Vx.far=this._spherical.radius+1;const a=Vx.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const n=this._domElement.getBoundingClientRect();return e.x=n.left,e.y=n.top,this._viewport?(e.x+=this._viewport.x,e.y+=n.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=n.width,e.height=n.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(n=>{const i=()=>{this.removeEventListener("rest",i),n()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,n=new sn.Sphere){const i=n,r=i.center;Sp.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Sp.expandByObject(o)}),Sp.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let f=0,h=u.count;f<h;f++)yn.fromBufferAttribute(u,f),s=Math.max(s,r.distanceToSquared(yn))}),i.radius=Math.sqrt(s),i}};const uye=E.forwardRef((t,e)=>{E.useMemo(()=>{const S={Box3:xn,MathUtils:{clamp:zt.clamp},Matrix4:Ge,Quaternion:Tt,Raycaster:Ff,Sphere:$n,Spherical:ed,Vector2:Ie,Vector3:L,Vector4:Jt};zM.install({THREE:S}),ui({CameraControlsImpl:zM})},[]);const{camera:n,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...c}=t,u=Fe(S=>S.camera),f=Fe(S=>S.gl),h=Fe(S=>S.invalidate),d=Fe(S=>S.events),p=Fe(S=>S.setEvents),g=Fe(S=>S.set),A=Fe(S=>S.get),m=Fe(S=>S.performance),v=n||u,y=i||d.connected||f.domElement,w=E.useMemo(()=>new zM(v),[v]);return Ct((S,C)=>{w.enabled&&w.update(C)},-1),E.useEffect(()=>(w.connect(y),()=>void w.disconnect()),[y,w]),E.useEffect(()=>{const S=M=>{h(),l&&m.regress(),a&&a(M)},C=M=>{s&&s(M)},b=M=>{o&&o(M)};return w.addEventListener("update",S),w.addEventListener("controlstart",C),w.addEventListener("controlend",b),w.addEventListener("control",S),w.addEventListener("transitionstart",S),w.addEventListener("wake",S),()=>{w.removeEventListener("update",S),w.removeEventListener("controlstart",C),w.removeEventListener("controlend",b),w.removeEventListener("control",S),w.removeEventListener("transitionstart",S),w.removeEventListener("wake",S)}},[w,s,o,h,p,l,a]),E.useEffect(()=>{if(r){const S=A().controls;return g({controls:w}),()=>g({controls:S})}},[r,w]),E.createElement("primitive",Te({ref:e,object:w},c))}),fye=t=>(t==null?void 0:t.current)instanceof Ht,XX=E.createContext(null);function YX(){return E.useContext(XX)}function hye({points:t=50}){const{path:e}=YX(),[n,i]=E.useState([]),[r]=E.useState(()=>new Br({color:"black"})),[s]=E.useState(()=>new dd(.025,16,16)),o=E.useRef([]);return E.useEffect(()=>{e.curves!==o.current&&(i(e.getPoints(t)),o.current=e.curves)}),E.createElement(E.Fragment,null,n.map((a,l)=>E.createElement("mesh",{key:l,material:r,geometry:s,position:[a.x,a.y,a.z]})))}const dye=E.forwardRef(({children:t,curves:e=[],object:n,debug:i=!1,smooth:r=!1,focus:s,offset:o=void 0,eps:a=1e-5,damping:l=.1,focusDamping:c=.1,maxSpeed:u=1/0,...f},h)=>{const{camera:d}=Fe(),p=E.useRef(),[g]=E.useState(()=>new U8),A=E.useRef(o??0),m=E.useMemo(()=>({focus:s,object:(n==null?void 0:n.current)instanceof Ht?n:{current:d},path:g,current:A.current,offset:A.current,point:new L,tangent:new L,next:new L}),[s,n]);E.useLayoutEffect(()=>{var w;g.curves=[];const S=e.length>0?e:(w=p.current)==null?void 0:w.__r3f.objects;for(var C=0;C<S.length;C++)g.add(S[C]);if(r){const b=g.getPoints(typeof r=="number"?r:1),M=new Aw(b);g.curves=[M]}g.updateArcLengths()}),E.useImperativeHandle(h,()=>p.current,[]),E.useLayoutEffect(()=>{A.current=qb.repeat(A.current,1)},[o]);let v=0;const[y]=E.useState(()=>new L);return Ct((w,S)=>{if(v=m.offset,l0.damp(A,"current",o!==void 0?o:m.current,l,S,u,void 0,a),m.offset=qb.repeat(A.current,1),g.getCurveLengths().length>0){g.getPointAt(m.offset,m.point),g.getTangentAt(m.offset,m.tangent).normalize(),g.getPointAt(qb.repeat(A.current-(v-m.offset),1),m.next);const C=(n==null?void 0:n.current)instanceof Ht?n.current:d;C.position.copy(m.point),s&&l0.dampLookAt(C,fye(s)?s.current.getWorldPosition(y):s,c,S,u,void 0,a)}}),E.createElement("group",Te({ref:p},f),E.createElement(XX.Provider,{value:m},t,i&&E.createElement(hye,null)))});function pye({defaultScene:t,defaultCamera:e,renderPriority:n=1}){const{gl:i,scene:r,camera:s}=Fe();let o;return Ct(()=>{o=i.autoClear,n===1&&(i.autoClear=!0,i.render(t,e)),i.autoClear=!1,i.clearDepth(),i.render(r,s),i.autoClear=o},n),E.createElement("group",{onPointerOver:()=>null})}function qX({children:t,renderPriority:e=1}){const{scene:n,camera:i}=Fe(),[r]=E.useState(()=>new Go);return E.createElement(E.Fragment,null,ou(E.createElement(E.Fragment,null,t,E.createElement(pye,{defaultScene:n,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const $X=E.createContext({}),pS=()=>E.useContext($X),mye=2*Math.PI,UM=new Ht,Lz=new Ge,[Cp,kM]=[new Tt,new Tt],Fz=new L,Oz=new L,gye=t=>"minPolarAngle"in t,Aye=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:n=1,onUpdate:i,onTarget:r,children:s})=>{const o=Fe(C=>C.size),a=Fe(C=>C.camera),l=Fe(C=>C.controls),c=Fe(C=>C.invalidate),u=E.useRef(null),f=E.useRef(null),h=E.useRef(!1),d=E.useRef(0),p=E.useRef(new L(0,0,0)),g=E.useRef(new L(0,0,0));E.useEffect(()=>{g.current.copy(a.up)},[a]);const A=E.useCallback(C=>{h.current=!0,(l||r)&&(p.current=(l==null?void 0:l.target)||(r==null?void 0:r())),d.current=a.position.distanceTo(Fz),Cp.copy(a.quaternion),Oz.copy(C).multiplyScalar(d.current).add(Fz),UM.lookAt(Oz),UM.up.copy(a.up),kM.copy(UM.quaternion),c()},[l,a,r,c]);Ct((C,b)=>{if(f.current&&u.current){var M;if(h.current)if(Cp.angleTo(kM)<.01)h.current=!1,gye(l)&&a.up.copy(g.current);else{const I=b*mye;Cp.rotateTowards(kM,I),a.position.set(0,0,1).applyQuaternion(Cp).multiplyScalar(d.current).add(p.current),a.up.set(0,1,0).applyQuaternion(Cp).normalize(),a.quaternion.copy(Cp),i?i():l&&l.update(),c()}Lz.copy(a.matrix).invert(),(M=u.current)==null||M.quaternion.setFromRotationMatrix(Lz)}});const m=E.useMemo(()=>({tweenCamera:A}),[A]),[v,y]=e,w=t.endsWith("-center")?0:t.endsWith("-left")?-o.width/2+v:o.width/2-v,S=t.startsWith("center-")?0:t.startsWith("top-")?o.height/2-y:-o.height/2+y;return E.createElement(qX,{renderPriority:n},E.createElement($X.Provider,{value:m},E.createElement(VX,{makeDefault:!0,ref:f,position:[0,0,200]}),E.createElement("group",{ref:u,position:[w,S,0]},s)))},Hg={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},vye=["Right","Left","Top","Bottom","Front","Back"],KX=t=>new L(...t).multiplyScalar(.38),yye=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(KX),xye=[.25,.25,.25],JX=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(KX),_ye=JX.map(t=>t.toArray().map(e=>e==0?.5:.25)),Eye=({hover:t,index:e,font:n="20px Inter var, Arial, sans-serif",faces:i=vye,color:r=Hg.bg,hoverColor:s=Hg.hover,textColor:o=Hg.text,strokeColor:a=Hg.stroke,opacity:l=1})=>{const c=Fe(f=>f.gl),u=E.useMemo(()=>{const f=document.createElement("canvas");f.width=128,f.height=128;const h=f.getContext("2d");return h.fillStyle=r,h.fillRect(0,0,f.width,f.height),h.strokeStyle=a,h.strokeRect(0,0,f.width,f.height),h.font=n,h.textAlign="center",h.fillStyle=o,h.fillText(i[e].toUpperCase(),64,76),new gw(f)},[e,i,n,r,o,a]);return E.createElement("meshBasicMaterial",{map:u,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:t?s:"white",transparent:!0,opacity:l})},wye=t=>{const{tweenCamera:e}=pS(),[n,i]=E.useState(null),r=a=>{a.stopPropagation(),i(null)},s=a=>{a.stopPropagation(),e(a.face.normal)},o=a=>{a.stopPropagation(),i(Math.floor(a.faceIndex/2))};return E.createElement("mesh",{onPointerOut:r,onPointerMove:o,onClick:t.onClick||s},[...Array(6)].map((a,l)=>E.createElement(Eye,Te({key:l,index:l,hover:n===l},t))),E.createElement("boxGeometry",null))},zz=({onClick:t,dimensions:e,position:n,hoverColor:i=Hg.hover})=>{const{tweenCamera:r}=pS(),[s,o]=E.useState(!1),a=u=>{u.stopPropagation(),o(!1)},l=u=>{u.stopPropagation(),o(!0)},c=u=>{u.stopPropagation(),r(n)};return E.createElement("mesh",{scale:1.01,position:n,onPointerOver:l,onPointerOut:a,onClick:t||c},E.createElement("meshBasicMaterial",{color:s?i:"white",transparent:!0,opacity:.6,visible:s}),E.createElement("boxGeometry",{args:e}))},Sye=t=>E.createElement("group",{scale:[60,60,60]},E.createElement(wye,t),JX.map((e,n)=>E.createElement(zz,Te({key:n,position:e,dimensions:_ye[n]},t))),yye.map((e,n)=>E.createElement(zz,Te({key:n,position:e,dimensions:xye},t))));function NM({scale:t=[.8,.05,.05],color:e,rotation:n}){return E.createElement("group",{rotation:n},E.createElement("mesh",{position:[.4,0,0]},E.createElement("boxGeometry",{args:t}),E.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function bp({onClick:t,font:e,disabled:n,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const l=Fe(g=>g.gl),c=E.useMemo(()=>{const g=document.createElement("canvas");g.width=64,g.height=64;const A=g.getContext("2d");return A.beginPath(),A.arc(32,32,16,0,2*Math.PI),A.closePath(),A.fillStyle=i,A.fill(),r&&(A.font=e,A.textAlign="center",A.fillStyle=s,A.fillText(r,32,41)),new gw(g)},[i,r,s,e]),[u,f]=E.useState(!1),h=(r?1:.75)*(u?1.2:1)*o,d=g=>{g.stopPropagation(),f(!0)},p=g=>{g.stopPropagation(),f(!1)};return E.createElement("sprite",Te({scale:h,onPointerOver:n?void 0:d,onPointerOut:n?void 0:t||p},a),E.createElement("spriteMaterial",{map:c,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const Cye=({hideNegativeAxes:t,hideAxisHeads:e,disabled:n,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[f,h,d]=r,{tweenCamera:p}=pS(),g={font:i,disabled:n,labelColor:l,onClick:c,axisHeadScale:s,onPointerDown:n?void 0:A=>{p(A.object.position),A.stopPropagation()}};return E.createElement("group",Te({scale:40},u),E.createElement(NM,{color:f,rotation:[0,0,0],scale:o}),E.createElement(NM,{color:h,rotation:[0,0,Math.PI/2],scale:o}),E.createElement(NM,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&E.createElement(E.Fragment,null,E.createElement(bp,Te({arcStyle:f,position:[1,0,0],label:a[0]},g)),E.createElement(bp,Te({arcStyle:h,position:[0,1,0],label:a[1]},g)),E.createElement(bp,Te({arcStyle:d,position:[0,0,1],label:a[2]},g)),!t&&E.createElement(E.Fragment,null,E.createElement(bp,Te({arcStyle:f,position:[-1,0,0]},g)),E.createElement(bp,Te({arcStyle:h,position:[0,-1,0]},g)),E.createElement(bp,Te({arcStyle:d,position:[0,0,-1]},g)))))},bye=Vo({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Je,sectionColor:new Je,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new L,worldPlanePosition:new L},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Mye=E.forwardRef(({args:t,cellColor:e="#000000",sectionColor:n="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:c=1,cellThickness:u=.5,sectionThickness:f=1,side:h=Ki,...d},p)=>{ui({GridMaterial:bye});const g=E.useRef(null);E.useImperativeHandle(p,()=>g.current,[]);const A=new Wr,m=new L(0,1,0),v=new L(0,0,0);Ct(S=>{A.setFromNormalAndCoplanarPoint(m,v).applyMatrix4(g.current.matrixWorld);const C=g.current.material,b=C.uniforms.worldCamProjPosition,M=C.uniforms.worldPlanePosition;A.projectPoint(S.camera.position,b.value),M.value.set(0,0,0).applyMatrix4(g.current.matrixWorld)});const y={cellSize:i,sectionSize:r,cellColor:e,sectionColor:n,cellThickness:u,sectionThickness:f},w={fadeDistance:a,fadeStrength:l,fadeFrom:c,infiniteGrid:o,followCamera:s};return E.createElement("mesh",Te({ref:g,frustumCulled:!1},d),E.createElement("gridMaterial",Te({transparent:!0,"extensions-derivatives":!0,side:h},y,w)),E.createElement("planeGeometry",{args:t}))});function YB(t,{path:e}){const[n]=bi(Bw,[t],i=>i.setPath(e));return n}YB.preload=(t,{path:e})=>bi.preload(Bw,[t],n=>n.setPath(e));function Tye({children:t,files:e,...n}){const i=YB(e,{...n});return E.createElement(E.Fragment,null,t==null?void 0:t(i))}function mS(t){return bi(HB,t)}mS.preload=t=>bi.preload(HB,t);mS.clear=t=>bi.clear(HB,t);function Iye({path:t,...e}){const i=mS(t).children[0];return E.createElement(mv,Te({},e,{object:i}))}const ZX="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function gS(t,e=`${ZX}/basis/`){const n=Fe(r=>r.gl),i=bi(yd,km(t)?Object.values(t):t,r=>{r.detectSupport(n),r.setTranscoderPath(e)});if(E.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),km(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}gS.preload=(t,e=`${ZX}/basis/`)=>bi.preload(yd,t,n=>{n.setTranscoderPath(e)});gS.clear=t=>bi.clear(yd,t);const Bye=({children:t,input:e,basisPath:n})=>{const i=gS(e,n);return E.createElement(E.Fragment,null,t==null?void 0:t(i))},Rye="modulepreload",Pye=function(t){return"/"+t},Uz={},eY=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Pye(a),a in Uz)return;Uz[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Rye,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((f,h)=>{u.addEventListener("load",f),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var kz,Nz;const Dye=typeof window<"u"&&typeof((kz=window.document)==null?void 0:kz.createElement)=="function"&&typeof((Nz=window.navigator)==null?void 0:Nz.userAgent)=="string";let Wx=null;async function Lye(t,e){if(Dye&&t.pathname.endsWith(".m3u8")){var n;if((n=Wx)!==null&&n!==void 0||(Wx=await eY(()=>import("./hls-BP_Sm4kY.js").then(i=>i.h),[])),Wx.default.isSupported())return new Wx.default({...e})}return null}function qB(t,{unsuspend:e="loadedmetadata",start:n=!0,crossOrigin:i="anonymous",muted:r=!0,loop:s=!0,hls:o={},...a}={}){const l=new URL(typeof t=="string"?t:"",window.location.href),c=E.useRef(null),u=E.useRef(null),f=Fe(d=>d.gl),h=su(()=>new Promise(async d=>{const p=Object.assign(document.createElement("video"),{src:typeof t=="string"&&t||void 0,srcObject:t instanceof MediaStream&&t||void 0,crossOrigin:i,loop:s,muted:r,...a});if(u.current=p,typeof t=="string"){const A=c.current=await Lye(l,o);A?(A.attachMedia(p),A.on("hlsMediaAttached",()=>{A.loadSource(t)})):p.src=t}else t instanceof MediaStream&&(p.srcObject=t);const g=new OQ(p);"colorSpace"in g?g.colorSpace=f.outputColorSpace:g.encoding=f.outputEncoding,p.addEventListener(e,()=>d(g))}),[t]);return E.useEffect(()=>(n&&h.image.play(),()=>{c.current&&(c.current.destroy(),c.current=null)}),[h,n]),h}const Fye=({children:t,src:e,...n})=>{const i=qB(e,n);return E.createElement(E.Fragment,null,t==null?void 0:t(i))},tY=t=>{if(Array.isArray(t))return t[0];if(typeof t=="object"&&t!==null){const e=Object.keys(t);return t[e[0]][0]}else return{w:0,h:0}},nY=t=>{for(let e=3;e<t.length;e+=4)if(t[e]!==0)return!1;return!0},zI=(t,e,n,i)=>{const r=e*(i.aspect>t/e?i.width/t:i.height/e),o=t*(i.aspect>t/e?i.width/t:i.height/e)*n,a=r*n,l=1;let c=Math.min(l,o),u=Math.min(l,a);return o>l&&(c=l,u=a/o*l),new L(c,u,1)};function AS(t,e,n,i,r){const s=Fe(b=>b.viewport),o=E.useRef(null),a=E.useRef(0),l=.1,[c,u]=E.useState(null),[f,h]=E.useState(new Bn),d=new rc,[p,g]=E.useState(null);E.useLayoutEffect(()=>(e&&t?v(e,t,y):t&&m(),()=>{t&&bi.clear(rc,t)}),[]);function A(b,M){M&&b?v(M,b,y):m(b)}function m(b){(b||t)&&new Promise(M=>{d.load(b??t,M)}).then(M=>{y(null,M)})}function v(b,M,I){const T=fetch(b).then(R=>R.json()),D=new Promise(R=>{d.load(M,R)});Promise.all([T,D]).then(R=>{I(R[0],R[1])})}const y=(b,M)=>{let I=new L(1,1,1);if(b===null){if(M&&i){const T=M.image.width,D=M.image.height;a.current=i;const{rows:R,columns:z,frameWidth:F,frameHeight:V,emptyFrames:j}=w(M,i);o.current={frames:[],meta:{version:"1.0",size:{w:T,h:D},rows:R,columns:z,frameWidth:F,frameHeight:V,scale:"1"}};for(let Z=0;Z<R;Z++)for(let U=0;U<z;U++)(j??[]).some(X=>X.row===Z&&X.col===U)||o.current.frames.push({frame:{x:U*F,y:Z*V,w:F,h:V},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:F,h:V},sourceSize:{w:F,h:V}});I=zI(F,V,l,s)}o.current.frames=C(o.current.frames)}else if(M){o.current=b,o.current.frames=S(),a.current=Array.isArray(b.frames)?b.frames.length:Object.keys(b.frames).length;const{w:T,h:D}=tY(b.frames).sourceSize;I=zI(T,D,l,s)}u(o.current),"encoding"in M?M.encoding=3001:M.colorSpace=oo,h(M),g({spriteTexture:M,spriteData:o.current,aspect:I})},w=(b,M)=>{if(b.image){const I=document.createElement("canvas"),T=I.getContext("2d");I.width=b.image.width,I.height=b.image.height,T.drawImage(b.image,0,0);const D=b.image.width,R=b.image.height,z=Math.round(Math.sqrt(M*(D/R))),F=Math.round(M/z),V=D/z,j=R/F,Z=[];for(let U=0;U<F;U++)for(let $=0;$<z;$++){if(U*z+$>=M){Z.push({row:U,col:$});continue}const Q=T.getImageData($*V,U*j,V,j).data;nY(Q)&&Z.push({row:U,col:$})}return{rows:F,columns:z,frameWidth:V,frameHeight:j,emptyFrames:Z}}else return{rows:0,columns:0,frameWidth:0,frameHeight:0,emptyFrames:[]}},S=()=>{const b={},M=o.current,I=n;if(I&&Array.isArray(M.frames)){for(let T=0;T<I.length;T++){b[I[T]]=[];for(const D of M.frames){const R=D.frame,z=R.x,F=R.y,V=R.w,j=R.h,Z=D.sourceSize.w,U=D.sourceSize.h;typeof D.filename=="string"&&D.filename.toLowerCase().indexOf(I[T].toLowerCase())!==-1&&b[I[T]].push({x:z,y:F,w:V,h:j,frame:R,sourceSize:{w:Z,h:U}})}}for(const T in b)b[T].frame=C(b[T]);return b}else if(I&&typeof M.frames=="object"){for(let T=0;T<I.length;T++){b[I[T]]=[];for(const D in M.frames){const R=M.frames[D],z=R.frame,F=z.x,V=z.y,j=z.w,Z=z.h,U=R.sourceSize.w,$=R.sourceSize.h;typeof D=="string"&&D.toLowerCase().indexOf(I[T].toLowerCase())!==-1&&b[I[T]].push({x:F,y:V,w:j,h:Z,frame:z,sourceSize:{w:U,h:$}})}}for(const T in b)b[T].frame=C(b[T]);return b}else{let T=[];for(const D in M.frames)T.push(M.frames[D]);return T=C(T),T}},C=b=>{let M=null;for(const D of b){const{w:R,h:z}=D.frame,F=R*z;(!M||F>M.area)&&(M={...D.frame,area:F})}for(const D of b){var I;const{w:R,h:z}=D.frame,F=R*z;if(F===((I=M)==null?void 0:I.area))D.scaleRatio=1;else{var T;D.scaleRatio=Math.sqrt(F/((T=M)==null?void 0:T.area))}}return b};return E.useLayoutEffect(()=>{r==null||r(f,c)},[f,c]),{spriteObj:p,loadJsonAndTexture:A}}AS.preload=t=>bi.preload(rc,t);AS.clear=t=>bi.clear(rc,t);function $B(t,e,...n){const i=E.useRef(),r=Fe(s=>s.scene);return E.useLayoutEffect(()=>{let s;if(t&&t!=null&&t.current&&e&&(i.current=s=new e(t.current,...n)),s)return s.traverse(o=>o.raycast=()=>null),r.add(s),()=>{i.current=void 0,r.remove(s),s.dispose==null||s.dispose()}},[r,e,t,...n]),Ct(()=>{var s;return void((s=i.current)==null||s.update==null?void 0:s.update())}),i}const Oye=({type:t,args:e=[]})=>{const n=E.useRef(null),i=E.useRef(null);return E.useLayoutEffect(()=>{i.current=n.current.parent}),$B(i,t,...e),E.createElement("object3D",{ref:n})};var iY={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(IK,function(){var n=function(){function i(d){return o.appendChild(d.dom),d}function r(d){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=i(new n.Panel("FPS","#0ff","#002")),f=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:i,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(f.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:r}};return n.Panel=function(i,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,h=3*c,d=2*c,p=3*c,g=15*c,A=74*c,m=30*c,v=document.createElement("canvas");v.width=u,v.height=f,v.style.cssText="width:80px;height:48px";var y=v.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=s,y.fillRect(0,0,u,f),y.fillStyle=r,y.fillText(i,h,d),y.fillRect(p,g,A,m),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p,g,A,m),{dom:v,update:function(w,S){o=Math.min(o,w),a=Math.max(a,w),y.fillStyle=s,y.globalAlpha=1,y.fillRect(0,0,u,g),y.fillStyle=r,y.fillText(l(w)+" "+i+" ("+l(o)+"-"+l(a)+")",h,d),y.drawImage(v,p+c,g,A-c,m,p,g,A-c,m),y.fillRect(p+A-c,g,c,m),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p+A-c,g,c,l((1-w/S)*m))}}},n})})(iY);var zye=iY.exports;const Uye=m0(zye);function kye(t,e=[],n){const[i,r]=E.useState();return E.useLayoutEffect(()=>{const s=t();return r(s),()=>void 0},e),i}function Nye({showPanel:t=0,className:e,parent:n}){const i=kye(()=>new Uye,[]);return E.useEffect(()=>{if(i){const r=n&&n.current||document.body;i.showPanel(t),r==null||r.appendChild(i.dom);const s=(e??"").split(" ").filter(l=>l);s.length&&i.dom.classList.add(...s);const o=Qv(()=>i.begin()),a=Uw(()=>i.end());return()=>{s.length&&i.dom.classList.remove(...s),r==null||r.removeChild(i.dom),o(),a()}}},[n,i,e,t]),null}class Gye{constructor(e,n,i){this.name=e,this.fg=n,this.bg=i,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,i,r,s=0){let o=1/0,a=0;this.context&&(o=Math.min(o,e),a=Math.max(i,e),r=Math.max(r,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(s)+" "+this.name+" ("+o.toFixed(s)+"-"+parseFloat(a.toFixed(s))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/r)*this.GRAPH_HEIGHT))}}const rY=class tm{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:i=10,precision:r=2,minimal:s=!1,horizontal:o=!0,mode:a=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=a,this.horizontal=o,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",s&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=s,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new tm.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new tm.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.gpuPanelCompute=null,this.samplesLog=n,this.samplesGraph=i,this.precision=r,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",l=>{l.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=a,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)})}patchThreeRenderer(e){const n=e.render,i=this;e.render=function(r,s){i.begin(),n.call(this,r,s),i.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const i=this.dom.children[n];i.style.display=n===e?"block":"none"}this.mode=e}async init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}else!this.gl&&e instanceof WebGL2RenderingContext&&(this.gl=e);if(e.isWebGPURenderer){e.backend.trackTimestamp=!0,await e.hasFeatureAsync("timestamp-query")&&(this.gpuPanel=this.addPanel(new tm.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new tm.Panel("CPT","#e1e1e1","#212121"),3),this.info=e.info);return}else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new tm.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const i=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),r=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(i&&!r){const o=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=o,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.info===void 0?this.processGpuQueries():(this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration===0&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,i){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const r=performance.measure(i,e,n);this.totalCpuDuration+=r.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let i=0,r=.01;for(let a=0;a<n.logs.length;a++)i+=n.logs[a],n.logs[a]>r&&(r=n.logs[a]);let s=0,o=.01;for(let a=0;a<n.graph.length;a++)s+=n.graph[a],n.graph[a]>o&&(o=n.graph[a]);e&&e.update(i/Math.min(n.logs.length,this.samplesLog),s/Math.min(n.graph.length,this.samplesGraph),r,o,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};rY.Panel=Gye;let Hye=rY;function Qye({className:t,parent:e,...n}){const i=Fe(s=>s.gl),r=E.useMemo(()=>{const s=new Hye({...n});return s.init(i),s},[i]);return E.useEffect(()=>{if(r){const s=e&&e.current||document.body;s==null||s.appendChild(r.dom);const o=(t??"").split(" ").filter(l=>l);o.length&&r.dom.classList.add(...o);const a=Uw(()=>r.update());return()=>{o.length&&r.dom.classList.remove(...o),s==null||s.removeChild(r.dom),a()}}},[e,r,t]),null}function Vye({size:t=256,frames:e=1/0}={}){const n=Fe(u=>u.viewport.dpr),{width:i,height:r}=Fe(u=>u.size),s=t||i*n,o=t||r*n,a=E.useMemo(()=>{const u=new hd(s,o);return u.format=Zl,u.type=ic,{depthTexture:u}},[s,o]);let l=0;const c=Vs(s,o,a);return Ct(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}function Wye(t,e,n=1){const i=Fe(o=>o.viewport),r=e*(i.aspect>t/e?i.width/t:i.height/e);return[t*(i.aspect>t/e?i.width/t:i.height/e)*n,r*n,1]}function jye(t,e){const n=Fe(r=>r.pointer),[i]=E.useState(()=>{const r=new Ff;return e&&yr(r,e,{}),function(s,o){r.setFromCamera(n,t instanceof Rf?t:t.current);const a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}function GM(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(c){try{l(i.next(c))}catch(u){s(u)}}function a(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof n?u:new n(function(f){f(u)})).then(o,a)}l((i=i.apply(t,[])).next())})}const Xye=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function Gz(t){return t=t.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const sY=typeof window>"u",kl=(()=>{if(sY)return;const{userAgent:t,platform:e,maxTouchPoints:n}=window.navigator,i=/(iphone|ipod|ipad)/i.test(t),r=e==="iPad"||e==="MacIntel"&&n>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||i||r,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t)}})();function Yye(t,e,n){if(!n)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,f=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,h=c.createShader(35633),d=c.createShader(35632),p=c.createProgram();if(!(d&&h&&p))return;c.shaderSource(h,u),c.shaderSource(d,f),c.compileShader(h),c.compileShader(d),c.attachShader(p,h),c.attachShader(p,d),c.linkProgram(p),c.detachShader(p,h),c.detachShader(p,d),c.deleteShader(h),c.deleteShader(d),c.useProgram(p);const g=c.createBuffer();c.bindBuffer(34962,g),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const A=c.getAttribLocation(p,"aPosition");c.vertexAttribPointer(A,3,5126,!1,0,0),c.enableVertexAttribArray(A),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const m=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,m),c.deleteProgram(p),c.deleteBuffer(g),m.join("")}(t),r="801621810",s="8016218135",o="80162181161",a=kl!=null&&kl.isIpad?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["m1",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15],["a15",r,15],["a16",r,15],["a17",r,15]];let l;return i==="80162181255"?l=a.filter(([,,c])=>c>=14):(l=a.filter(([,c])=>c===i),l.length||(l=a)),l.map(([c])=>`apple ${c} gpu`)}let Hz=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};const HM=[],Qz=[];function qye(t,e){if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let i=t.length,r=e.length;for(;i>0&&t.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,o=0;for(;o<i&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,r-=o,i===0)return r;let a,l,c=0,u=0,f=0;for(;u<i;)Qz[u]=t.charCodeAt(o+u),HM[u]=++u;for(;f<r;)for(s=e.charCodeAt(o+f),a=f++,c=f,u=0;u<i;u++)l=s===Qz[u]?a:a+1,a=HM[u],c=HM[u]=a>c?l>c?c+1:l:l>a?a+1:l;return c}function $ye(t){return t!=null}const Kye=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:n={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@5.0.38/dist/benchmarks"}={})=>GM(void 0,void 0,void 0,function*(){const o={};if(sY)return{tier:0,type:"SSR"};const{isIpad:a=!!(kl!=null&&kl.isIpad),isMobile:l=!!(kl!=null&&kl.isMobile),screenSize:c=window.screen,loadBenchmarks:u=S=>GM(void 0,void 0,void 0,function*(){const C=yield fetch(`${s}/${S}`).then(b=>b.json());if(parseInt(C.shift().split(".")[0],10)<4)throw new Hz("Detect GPU benchmark data is out of date. Please update to version 4x");return C})}=n;let{renderer:f}=n;const h=(S,C,b,M,I)=>({device:I,fps:M,gpu:b,isMobile:l,tier:S,type:C});let d,p="";if(f)f=Gz(f),d=[f];else{const S=i||function(b,M=!1){const I={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:M,powerPreference:"high-performance",stencil:!1};b&&delete I.powerPreference;const T=window.document.createElement("canvas"),D=T.getContext("webgl",I)||T.getContext("experimental-webgl",I);return D??void 0}(kl==null?void 0:kl.isSafari12,r);if(!S)return h(0,"WEBGL_UNSUPPORTED");const C=kl!=null&&kl.isFirefox?null:S.getExtension("WEBGL_debug_renderer_info");if(f=C?S.getParameter(C.UNMASKED_RENDERER_WEBGL):S.getParameter(S.RENDERER),!f)return h(1,"FALLBACK");p=f,f=Gz(f),d=function(b,M,I){return M==="apple gpu"?Yye(b,M,I):[M]}(S,f,l)}const g=(yield Promise.all(d.map(function(S){var C;return GM(this,void 0,void 0,function*(){const b=(ne=>{const O=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const N of O)if(ne.includes(N))return N})(S);if(!b)return;const M=`${l?"m":"d"}-${b}${a?"-ipad":""}.json`,I=o[M]=(C=o[M])!==null&&C!==void 0?C:u(M);let T;try{T=yield I}catch(ne){if(ne instanceof Hz)throw ne;return}const D=function(ne){var O;const N=(ne=ne.replace(/\([^)]+\)/,"")).match(/\d+/)||ne.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(O=N==null?void 0:N.join("").replace(/\W|amd/g,""))!==null&&O!==void 0?O:""}(S);let R=T.filter(([,ne])=>ne===D);R.length||(R=T.filter(([ne])=>ne.includes(S)));const z=R.length;if(z===0)return;const F=S.split(/[.,()\[\]/\s]/g).sort().filter((ne,O,N)=>O===0||ne!==N[O-1]).join(" ");let V,[j,,,,Z]=z>1?R.map(ne=>[ne,qye(F,ne[2])]).sort(([,ne],[,O])=>ne-O)[0][0]:R[0],U=Number.MAX_VALUE;const{devicePixelRatio:$}=window,X=c.width*$*c.height*$;for(const ne of Z){const[O,N]=ne,G=O*N,H=Math.abs(X-G);H<U&&(U=H,V=ne)}if(!V)return;const[,,Q,J]=V;return[U,Q,j,J]})}))).filter($ye).sort(([S=Number.MAX_VALUE,C],[b=Number.MAX_VALUE,M])=>S===b?C-M:S-b);if(!g.length){const S=Xye.find(C=>f.includes(C));return S?h(0,"BLOCKLISTED",S):h(1,"FALLBACK",`${f} (${p})`)}const[,A,m,v]=g[0];if(A===-1)return h(0,"BLOCKLISTED",m,A,v);const y=l?t:e;let w=0;for(let S=0;S<y.length;S++)A>=y[S]&&(w=S);return h(w,"BENCHMARK",m,A,v)}),oY=t=>su(()=>Kye(t),["useDetectGPU"]);function Jye({children:t,...e}){const n=oY(e);return E.createElement(E.Fragment,null,t==null?void 0:t(n))}const aY=0,Zye=1,vS=2,Vz=2,QM=1.25,Wz=1,df=6*4+4+4,yS=65535,e2e=Math.pow(2,-24),VM=Symbol("SKIP_GENERATION");function lY(t){return t.index?t.index.count:t.attributes.position.count}function R0(t){return lY(t)/3}function cY(t,e=ArrayBuffer){return t>65535?new Uint32Array(new e(4*t)):new Uint16Array(new e(2*t))}function t2e(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=cY(n,i);t.setIndex(new Gt(r,1));for(let s=0;s<n;s++)r[s]=s}}function uY(t){const e=R0(t),n=t.drawRange,i=n.start/3,r=(n.start+n.count)/3,s=Math.max(0,i),o=Math.min(e,r)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function fY(t){if(!t.groups||!t.groups.length)return uY(t);const e=[],n=new Set,i=t.drawRange,r=i.start/3,s=(i.start+i.count)/3;for(const a of t.groups){const l=a.start/3,c=(a.start+a.count)/3;n.add(Math.max(r,l)),n.add(Math.min(s,c))}const o=Array.from(n.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],c=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function n2e(t){if(t.groups.length===0)return!1;const e=R0(t),n=fY(t).sort((s,o)=>s.offset-o.offset),i=n[n.length-1];i.count=Math.min(e-i.offset,i.count);let r=0;return n.forEach(({count:s})=>r+=s),e!==r}function WM(t,e,n,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,h=1/0,d=1/0,p=-1/0,g=-1/0,A=-1/0;for(let m=e*6,v=(e+n)*6;m<v;m+=6){const y=t[m+0],w=t[m+1],S=y-w,C=y+w;S<s&&(s=S),C>l&&(l=C),y<f&&(f=y),y>p&&(p=y);const b=t[m+2],M=t[m+3],I=b-M,T=b+M;I<o&&(o=I),T>c&&(c=T),b<h&&(h=b),b>g&&(g=b);const D=t[m+4],R=t[m+5],z=D-R,F=D+R;z<a&&(a=z),F>u&&(u=F),D<d&&(d=D),D>A&&(A=D)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,r[0]=f,r[1]=h,r[2]=d,r[3]=p,r[4]=g,r[5]=A}function i2e(t,e=null,n=null,i=null){const r=t.attributes.position,s=t.index?t.index.array:null,o=R0(t),a=r.normalized;let l;e===null?(l=new Float32Array(o*6*4),n=0,i=o):(l=e,n=n||0,i=i||o);const c=r.array,u=r.offset||0;let f=3;r.isInterleavedBufferAttribute&&(f=r.data.stride);const h=["getX","getY","getZ"];for(let d=n;d<n+i;d++){const p=d*3,g=d*6;let A=p+0,m=p+1,v=p+2;s&&(A=s[A],m=s[m],v=s[v]),a||(A=A*f+u,m=m*f+u,v=v*f+u);for(let y=0;y<3;y++){let w,S,C;a?(w=r[h[y]](A),S=r[h[y]](m),C=r[h[y]](v)):(w=c[A+y],S=c[m+y],C=c[v+y]);let b=w;S<b&&(b=S),C<b&&(b=C);let M=w;S>M&&(M=S),C>M&&(M=C);const I=(M-b)/2,T=y*2;l[g+T+0]=b+I,l[g+T+1]=I+(Math.abs(b)+I)*e2e}}return l}function Yi(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function jz(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function Xz(t,e){e.set(t)}function Yz(t,e,n){let i,r;for(let s=0;s<3;s++){const o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function jx(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function pg(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}const Tc=32,r2e=(t,e)=>t.candidate-e.candidate,Ru=new Array(Tc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Xx=new Float32Array(6);function s2e(t,e,n,i,r,s){let o=-1,a=0;if(s===aY)o=jz(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Zye)o=jz(t),o!==-1&&(a=o2e(n,i,r,o));else if(s===vS){const l=pg(t);let c=QM*r;const u=i*6,f=(i+r)*6;for(let h=0;h<3;h++){const d=e[h],A=(e[h+3]-d)/Tc;if(r<Tc/4){const m=[...Ru];m.length=r;let v=0;for(let w=u;w<f;w+=6,v++){const S=m[v];S.candidate=n[w+2*h],S.count=0;const{bounds:C,leftCacheBounds:b,rightCacheBounds:M}=S;for(let I=0;I<3;I++)M[I]=1/0,M[I+3]=-1/0,b[I]=1/0,b[I+3]=-1/0,C[I]=1/0,C[I+3]=-1/0;jx(w,n,C)}m.sort(r2e);let y=r;for(let w=0;w<y;w++){const S=m[w];for(;w+1<y&&m[w+1].candidate===S.candidate;)m.splice(w+1,1),y--}for(let w=u;w<f;w+=6){const S=n[w+2*h];for(let C=0;C<y;C++){const b=m[C];S>=b.candidate?jx(w,n,b.rightCacheBounds):(jx(w,n,b.leftCacheBounds),b.count++)}}for(let w=0;w<y;w++){const S=m[w],C=S.count,b=r-S.count,M=S.leftCacheBounds,I=S.rightCacheBounds;let T=0;C!==0&&(T=pg(M)/l);let D=0;b!==0&&(D=pg(I)/l);const R=Wz+QM*(T*C+D*b);R<c&&(o=h,c=R,a=S.candidate)}}else{for(let y=0;y<Tc;y++){const w=Ru[y];w.count=0,w.candidate=d+A+y*A;const S=w.bounds;for(let C=0;C<3;C++)S[C]=1/0,S[C+3]=-1/0}for(let y=u;y<f;y+=6){let C=~~((n[y+2*h]-d)/A);C>=Tc&&(C=Tc-1);const b=Ru[C];b.count++,jx(y,n,b.bounds)}const m=Ru[Tc-1];Xz(m.bounds,m.rightCacheBounds);for(let y=Tc-2;y>=0;y--){const w=Ru[y],S=Ru[y+1];Yz(w.bounds,S.rightCacheBounds,w.rightCacheBounds)}let v=0;for(let y=0;y<Tc-1;y++){const w=Ru[y],S=w.count,C=w.bounds,M=Ru[y+1].rightCacheBounds;S!==0&&(v===0?Xz(C,Xx):Yz(C,Xx,Xx)),v+=S;let I=0,T=0;v!==0&&(I=pg(Xx)/l);const D=r-v;D!==0&&(T=pg(M)/l);const R=Wz+QM*(I*v+T*D);R<c&&(o=h,c=R,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function o2e(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}class jM{constructor(){this.boundingData=new Float32Array(6)}}function a2e(t,e,n,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&n[o*6+c]<l;)o++;for(;o<=a&&n[a*6+c]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let f=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=f}for(let u=0;u<6;u++){let f=n[o*6+u];n[o*6+u]=n[a*6+u],n[a*6+u]=f}o++,a--}else return o}}function l2e(t,e,n,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&n[o*6+c]<l;)o++;for(;o<=a&&n[a*6+c]>=l;)a--;if(o<a){let u=t[o];t[o]=t[a],t[a]=u;for(let f=0;f<6;f++){let h=n[o*6+f];n[o*6+f]=n[a*6+f],n[a*6+f]=h}o++,a--}else return o}}function Hs(t,e){return e[t+15]===65535}function mo(t,e){return e[t+6]}function Fo(t,e){return e[t+14]}function Ea(t){return t+8}function Oo(t,e){return e[t+6]}function KB(t,e){return e[t+7]}let hY,Qg,J_,dY;const c2e=Math.pow(2,32);function UI(t){return"count"in t?1:1+UI(t.left)+UI(t.right)}function u2e(t,e,n){return hY=new Float32Array(n),Qg=new Uint32Array(n),J_=new Uint16Array(n),dY=new Uint8Array(n),kI(t,e)}function kI(t,e){const n=t/4,i=t/2,r="count"in e,s=e.boundingData;for(let o=0;o<6;o++)hY[n+o]=s[o];if(r)if(e.buffer){const o=e.buffer;dY.set(new Uint8Array(o),t);for(let a=t,l=t+o.byteLength;a<l;a+=df){const c=a/2;Hs(c,J_)||(Qg[a/4+6]+=n)}return t+o.byteLength}else{const o=e.offset,a=e.count;return Qg[n+6]=o,J_[i+14]=a,J_[i+15]=yS,t+df}else{const o=e.left,a=e.right,l=e.splitAxis;let c;if(c=kI(t+df,o),c/4>c2e)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return Qg[n+6]=c/4,c=kI(c,a),Qg[n+7]=l,c}}function f2e(t,e){const n=(t.index?t.index.count:t.attributes.position.count)/3,i=n>2**16,r=i?4:2,s=e?new SharedArrayBuffer(n*r):new ArrayBuffer(n*r),o=i?new Uint32Array(s):new Uint16Array(s);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function h2e(t,e,n,i,r){const{maxDepth:s,verbose:o,maxLeafTris:a,strategy:l,onProgress:c,indirect:u}=r,f=t._indirectBuffer,h=t.geometry,d=h.index?h.index.array:null,p=u?l2e:a2e,g=R0(h),A=new Float32Array(6);let m=!1;const v=new jM;return WM(e,n,i,v.boundingData,A),w(v,n,i,A),v;function y(S){c&&c(S/g)}function w(S,C,b,M=null,I=0){if(!m&&I>=s&&(m=!0,o&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(h))),b<=a||I>=s)return y(C+b),S.offset=C,S.count=b,S;const T=s2e(S.boundingData,M,e,C,b,l);if(T.axis===-1)return y(C+b),S.offset=C,S.count=b,S;const D=p(f,d,e,C,b,T);if(D===C||D===C+b)y(C+b),S.offset=C,S.count=b;else{S.splitAxis=T.axis;const R=new jM,z=C,F=D-C;S.left=R,WM(e,z,F,R.boundingData,A),w(R,z,F,A,I+1);const V=new jM,j=D,Z=b-F;S.right=V,WM(e,j,Z,V.boundingData,A),w(V,j,Z,A,I+1)}return S}}function d2e(t,e){const n=t.geometry;e.indirect&&(t._indirectBuffer=f2e(n,e.useSharedArrayBuffer),n2e(n)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),t._indirectBuffer||t2e(n,e);const i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=i2e(n),s=e.indirect?uY(n):fY(n);t._roots=s.map(o=>{const a=h2e(t,r,o.offset,o.count,e),l=UI(a),c=new i(df*l);return u2e(0,a,c),c})}class tu{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][n];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let s=0,o=n.length;s<o;s++){const a=n[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}tu.prototype.setFromBox=function(){const t=new L;return function(n,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=r.x*l+s.x*(1-l),t.y=r.y*c+s.y*(1-c),t.z=r.z*u+s.z*(1-u);const f=n.dot(t);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();const p2e=function(){const t=new L,e=new L,n=new L;return function(r,s,o){const a=r.start,l=t,c=s.start,u=e;n.subVectors(a,c),t.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const f=n.dot(u),h=u.dot(l),d=u.dot(u),p=n.dot(l),A=l.dot(l)*d-h*h;let m,v;A!==0?m=(f*h-p*d)/A:m=0,v=(f+m*h)/d,o.x=m,o.y=v}}(),JB=function(){const t=new Ie,e=new L,n=new L;return function(r,s,o,a){p2e(r,s,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let f;c<0?f=s.start:f=s.end;const h=e,d=n;if(r.closestPointToPoint(f,!0,e),s.closestPointToPoint(u,!0,n),h.distanceToSquared(f)<=d.distanceToSquared(u)){o.copy(h),a.copy(f);return}else{o.copy(u),a.copy(d);return}}}}(),m2e=function(){const t=new L,e=new L,n=new Wr,i=new fl;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:f}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a||(i.start=c,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a)||(i.start=u,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a))return!0;const g=o.getPlane(n);if(Math.abs(g.distanceToPoint(l))<=a){const m=g.projectPoint(l,e);if(o.containsPoint(m))return!0}return!1}}(),g2e=1e-15;function XM(t){return Math.abs(t)<g2e}class vl extends Tr{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new L),this.satBounds=new Array(4).fill().map(()=>new tu),this.points=[this.a,this.b,this.c],this.sphere=new $n,this.plane=new Wr,this.needsUpdate=!0}intersectsSphere(e){return m2e(e,this)}update(){const e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,n),u.setFromPoints(c,r);const f=s[2],h=o[2];f.subVectors(n,i),h.setFromPoints(f,r);const d=s[3],p=o[3];d.subVectors(i,e),p.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}vl.prototype.closestPointToSegment=function(){const t=new L,e=new L,n=new fl;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;n.start.copy(c[h]),n.end.copy(c[d]),JB(n,r,t,e),u=t.distanceToSquared(e),u<f&&(f=u,s&&s.copy(t),o&&o.copy(e))}return this.closestPointToPoint(a,t),u=a.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(a)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(l)),Math.sqrt(f)}}();vl.prototype.intersectsTriangle=function(){const t=new vl,e=new Array(3),n=new Array(3),i=new tu,r=new tu,s=new L,o=new L,a=new L,l=new L,c=new L,u=new fl,f=new fl,h=new fl,d=new L;function p(g,A,m){const v=g.points;let y=0,w=-1;for(let S=0;S<3;S++){const{start:C,end:b}=u;C.copy(v[S]),b.copy(v[(S+1)%3]),u.delta(o);const M=XM(A.distanceToPoint(C));if(XM(A.normal.dot(o))&&M){m.copy(u),y=2;break}const I=A.intersectLine(u,d);if(!I&&M&&d.copy(C),(I||M)&&!XM(d.distanceTo(b))){if(y<=1)(y===1?m.start:m.end).copy(d),M&&(w=y);else if(y>=2){(w===1?m.start:m.end).copy(d),y=2;break}if(y++,y===2&&w===-1)break}}return y}return function(A,m=null,v=!1){this.needsUpdate&&this.update(),A.isExtendedTriangle?A.needsUpdate&&A.update():(t.copy(A),t.update(),A=t);const y=this.plane,w=A.plane;if(Math.abs(y.normal.dot(w.normal))>1-1e-10){const S=this.satBounds,C=this.satAxes;n[0]=A.a,n[1]=A.b,n[2]=A.c;for(let I=0;I<4;I++){const T=S[I],D=C[I];if(i.setFromPoints(D,n),T.isSeparated(i))return!1}const b=A.satBounds,M=A.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let I=0;I<4;I++){const T=b[I],D=M[I];if(i.setFromPoints(D,e),T.isSeparated(i))return!1}for(let I=0;I<4;I++){const T=C[I];for(let D=0;D<4;D++){const R=M[D];if(s.crossVectors(T,R),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return m&&(v||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),m.start.set(0,0,0),m.end.set(0,0,0)),!0}else{const S=p(this,w,f);if(S===1&&A.containsPoint(f.end))return m&&(m.start.copy(f.end),m.end.copy(f.end)),!0;if(S!==2)return!1;const C=p(A,y,h);if(C===1&&this.containsPoint(h.end))return m&&(m.start.copy(h.end),m.end.copy(h.end)),!0;if(C!==2)return!1;if(f.delta(a),h.delta(l),a.dot(l)<0){let z=h.start;h.start=h.end,h.end=z}const b=f.start.dot(a),M=f.end.dot(a),I=h.start.dot(a),T=h.end.dot(a),D=M<I,R=b<T;return b!==T&&I!==M&&D===R?!1:(m&&(c.subVectors(f.start,h.start),c.dot(a)>0?m.start.copy(f.start):m.start.copy(h.start),c.subVectors(f.end,h.end),c.dot(a)<0?m.end.copy(f.end):m.end.copy(h.end)),!0)}}}();vl.prototype.distanceToPoint=function(){const t=new L;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();vl.prototype.distanceToTriangle=function(){const t=new L,e=new L,n=["a","b","c"],i=new fl,r=new fl;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let h;const d=n[f],p=o[d];this.closestPointToPoint(p,t),h=p.distanceToSquared(t),h<u&&(u=h,a&&a.copy(t),l&&l.copy(p));const g=this[d];o.closestPointToPoint(g,t),h=g.distanceToSquared(t),h<u&&(u=h,a&&a.copy(g),l&&l.copy(t))}for(let f=0;f<3;f++){const h=n[f],d=n[(f+1)%3];i.set(this[h],this[d]);for(let p=0;p<3;p++){const g=n[p],A=n[(p+1)%3];r.set(o[g],o[A]),JB(i,r,t,e);const m=t.distanceToSquared(e);m<u&&(u=m,a&&a.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}}();class Ks{constructor(e,n,i){this.isOrientedBox=!0,this.min=new L,this.max=new L,this.matrix=new Ge,this.invMatrix=new Ge,this.points=new Array(8).fill().map(()=>new L),this.satAxes=new Array(3).fill().map(()=>new L),this.satBounds=new Array(3).fill().map(()=>new tu),this.alignedSatBounds=new Array(3).fill().map(()=>new tu),this.needsUpdate=!1,e&&this.min.copy(e),n&&this.max.copy(n),i&&this.matrix.copy(i)}set(e,n,i){this.min.copy(e),this.max.copy(n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Ks.prototype.update=function(){return function(){const e=this.matrix,n=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const h=1*c|2*u|4*f,d=r[h];d.x=c?i.x:n.x,d.y=u?i.y:n.y,d.z=f?i.z:n.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],f=s[c],h=1<<c,d=r[h];u.subVectors(a,d),f.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ks.prototype.intersectsBox=function(){const t=new tu;return function(n){this.needsUpdate&&this.update();const i=n.min,r=n.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=i.x,t.max=r.x,a[0].isSeparated(t)||(t.min=i.y,t.max=r.y,a[1].isSeparated(t))||(t.min=i.z,t.max=r.z,a[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(t.setFromBox(c,n),u.isSeparated(t))return!1}return!0}}();Ks.prototype.intersectsTriangle=function(){const t=new vl,e=new Array(3),n=new tu,i=new tu,r=new L;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(t.copy(o),t.update(),o=t);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],p=l[h];if(n.setFromPoints(p,e),d.isSeparated(n))return!1}const c=o.satBounds,u=o.satAxes,f=this.points;for(let h=0;h<3;h++){const d=c[h],p=u[h];if(n.setFromPoints(p,f),d.isSeparated(n))return!1}for(let h=0;h<3;h++){const d=l[h];for(let p=0;p<4;p++){const g=u[p];if(r.crossVectors(d,g),n.setFromPoints(r,e),i.setFromPoints(r,f),n.isSeparated(i))return!1}}return!0}}();Ks.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();Ks.prototype.distanceToPoint=function(){const t=new L;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();Ks.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new fl),n=new Array(12).fill().map(()=>new fl),i=new L,r=new L;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,f=o.min,h=o.max,d=this.points;let p=1/0;for(let A=0;A<8;A++){const m=d[A];r.copy(m).clamp(f,h);const v=m.distanceToSquared(r);if(v<p&&(p=v,l&&l.copy(m),c&&c.copy(r),v<u))return Math.sqrt(v)}let g=0;for(let A=0;A<3;A++)for(let m=0;m<=1;m++)for(let v=0;v<=1;v++){const y=(A+1)%3,w=(A+2)%3,S=m<<y|v<<w,C=1<<A|m<<y|v<<w,b=d[S],M=d[C];e[g].set(b,M);const T=t[A],D=t[y],R=t[w],z=n[g],F=z.start,V=z.end;F[T]=f[T],F[D]=m?f[D]:h[D],F[R]=v?f[R]:h[D],V[T]=h[T],V[D]=m?f[D]:h[D],V[R]=v?f[R]:h[D],g++}for(let A=0;A<=1;A++)for(let m=0;m<=1;m++)for(let v=0;v<=1;v++){r.x=A?h.x:f.x,r.y=m?h.y:f.y,r.z=v?h.z:f.z,this.closestPointToPoint(r,i);const y=r.distanceToSquared(i);if(y<p&&(p=y,l&&l.copy(i),c&&c.copy(r),y<u))return Math.sqrt(y)}for(let A=0;A<12;A++){const m=e[A];for(let v=0;v<12;v++){const y=n[v];JB(m,y,i,r);const w=i.distanceToSquared(r);if(w<p&&(p=w,l&&l.copy(i),c&&c.copy(r),w<u))return Math.sqrt(w)}}return Math.sqrt(p)}}();class ZB{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class A2e extends ZB{constructor(){super(()=>new vl)}}const wa=new A2e;class v2e{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let n=null;this.setBuffer=i=>{n&&e.push(n),n=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{n=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Ci=new v2e;let $u,xm;const Mp=[],Yx=new ZB(()=>new xn);function y2e(t,e,n,i,r,s){$u=Yx.getPrimitive(),xm=Yx.getPrimitive(),Mp.push($u,xm),Ci.setBuffer(t._roots[e]);const o=NI(0,t.geometry,n,i,r,s);Ci.clearBuffer(),Yx.releasePrimitive($u),Yx.releasePrimitive(xm),Mp.pop(),Mp.pop();const a=Mp.length;return a>0&&(xm=Mp[a-1],$u=Mp[a-2]),o}function NI(t,e,n,i,r=null,s=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:c}=Ci;let u=t*2;if(Hs(u,l)){const h=mo(t,c),d=Fo(u,l);return Yi(t,a,$u),i(h,d,!1,o,s+t,$u)}else{let T=function(R){const{uint16Array:z,uint32Array:F}=Ci;let V=R*2;for(;!Hs(V,z);)R=Ea(R),V=R*2;return mo(R,F)},D=function(R){const{uint16Array:z,uint32Array:F}=Ci;let V=R*2;for(;!Hs(V,z);)R=Oo(R,F),V=R*2;return mo(R,F)+Fo(V,z)};const h=Ea(t),d=Oo(t,c);let p=h,g=d,A,m,v,y;if(r&&(v=$u,y=xm,Yi(p,a,v),Yi(g,a,y),A=r(v),m=r(y),m<A)){p=d,g=h;const R=A;A=m,m=R,v=y}v||(v=$u,Yi(p,a,v));const w=Hs(p*2,l),S=n(v,w,A,o+1,s+p);let C;if(S===Vz){const R=T(p),F=D(p)-R;C=i(R,F,!0,o+1,s+p,v)}else C=S&&NI(p,e,n,i,r,s,o+1);if(C)return!0;y=xm,Yi(g,a,y);const b=Hs(g*2,l),M=n(y,b,m,o+1,s+g);let I;if(M===Vz){const R=T(g),F=D(g)-R;I=i(R,F,!0,o+1,s+g,y)}else I=M&&NI(g,e,n,i,r,s,o+1);return!!I}}const mg=new L,YM=new L;function x2e(t,e,n={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(t.shapecast({boundsTraverseOrder:u=>(mg.copy(e).clamp(u.min,u.max),mg.distanceToSquared(e)),intersectsBounds:(u,f,h)=>h<a&&h<o,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,mg);const h=e.distanceToSquared(mg);return h<a&&(YM.copy(mg),a=h,l=f),h<s}}),a===1/0)return null;const c=Math.sqrt(a);return n.point?n.point.copy(YM):n.point=YM.clone(),n.distance=c,n.faceIndex=l,n}const Tp=new L,Ip=new L,Bp=new L,qx=new Ie,$x=new Ie,Kx=new Ie,qz=new L,$z=new L,Kz=new L,Jx=new L;function _2e(t,e,n,i,r,s,o,a){let l;if(s===Ki?l=t.intersectTriangle(i,n,e,!0,r):l=t.intersectTriangle(e,n,i,s!==Qn,r),l===null)return null;const c=t.origin.distanceTo(r);return c<o||c>a?null:{distance:c,point:r.clone()}}function E2e(t,e,n,i,r,s,o,a,l,c,u){Tp.fromBufferAttribute(e,s),Ip.fromBufferAttribute(e,o),Bp.fromBufferAttribute(e,a);const f=_2e(t,Tp,Ip,Bp,Jx,l,c,u);if(f){i&&(qx.fromBufferAttribute(i,s),$x.fromBufferAttribute(i,o),Kx.fromBufferAttribute(i,a),f.uv=Tr.getInterpolation(Jx,Tp,Ip,Bp,qx,$x,Kx,new Ie)),r&&(qx.fromBufferAttribute(r,s),$x.fromBufferAttribute(r,o),Kx.fromBufferAttribute(r,a),f.uv1=Tr.getInterpolation(Jx,Tp,Ip,Bp,qx,$x,Kx,new Ie)),n&&(qz.fromBufferAttribute(n,s),$z.fromBufferAttribute(n,o),Kz.fromBufferAttribute(n,a),f.normal=Tr.getInterpolation(Jx,Tp,Ip,Bp,qz,$z,Kz,new L),f.normal.dot(t.direction)>0&&f.normal.multiplyScalar(-1));const h={a:s,b:o,c:a,normal:new L,materialIndex:0};Tr.getNormal(Tp,Ip,Bp,h.normal),f.face=h,f.faceIndex=s}return f}function xS(t,e,n,i,r,s,o){const a=i*3;let l=a+0,c=a+1,u=a+2;const f=t.index;t.index&&(l=f.getX(l),c=f.getX(c),u=f.getX(u));const{position:h,normal:d,uv:p,uv1:g}=t.attributes,A=E2e(n,h,d,p,g,l,c,u,e,s,o);return A?(A.faceIndex=i,r&&r.push(A),A):null}function Er(t,e,n,i){const r=t.a,s=t.b,o=t.c;let a=e,l=e+1,c=e+2;n&&(a=n.getX(a),l=n.getX(l),c=n.getX(c)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function w2e(t,e,n,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=t;for(let u=i,f=i+r;u<f;u++)xS(l,e,n,u,s,o,a)}function S2e(t,e,n,i,r,s,o){const{geometry:a,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=xS(a,e,n,f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function C2e(t,e,n,i,r,s,o){const{geometry:a}=n,{index:l}=a,c=a.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=u,Er(o,h*3,l,c),o.needsUpdate=!0,i(o,h,r,s))return!0}return!1}function b2e(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let s,o,a,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,p=!1){const g=h*2;if(a[g+15]===yS){const m=o[h+6],v=a[g+14];let y=1/0,w=1/0,S=1/0,C=-1/0,b=-1/0,M=-1/0;for(let I=3*m,T=3*(m+v);I<T;I++){let D=i[I];const R=r.getX(D),z=r.getY(D),F=r.getZ(D);R<y&&(y=R),R>C&&(C=R),z<w&&(w=z),z>b&&(b=z),F<S&&(S=F),F>M&&(M=F)}return l[h+0]!==y||l[h+1]!==w||l[h+2]!==S||l[h+3]!==C||l[h+4]!==b||l[h+5]!==M?(l[h+0]=y,l[h+1]=w,l[h+2]=S,l[h+3]=C,l[h+4]=b,l[h+5]=M,!0):!1}else{const m=h+8,v=o[h+6],y=m+d,w=v+d;let S=p,C=!1,b=!1;e?S||(C=e.has(y),b=e.has(w),S=!C&&!b):(C=!0,b=!0);const M=S||C,I=S||b;let T=!1;M&&(T=f(m,d,S));let D=!1;I&&(D=f(v,d,S));const R=T||D;if(R)for(let z=0;z<3;z++){const F=m+z,V=v+z,j=l[F],Z=l[F+3],U=l[V],$=l[V+3];l[h+z]=j<U?j:U,l[h+z+3]=Z>$?Z:$}return R}}}function bf(t,e,n,i,r){let s,o,a,l,c,u;const f=1/n.direction.x,h=1/n.direction.y,d=1/n.direction.z,p=n.origin.x,g=n.origin.y,A=n.origin.z;let m=e[t],v=e[t+3],y=e[t+1],w=e[t+3+1],S=e[t+2],C=e[t+3+2];return f>=0?(s=(m-p)*f,o=(v-p)*f):(s=(v-p)*f,o=(m-p)*f),h>=0?(a=(y-g)*h,l=(w-g)*h):(a=(w-g)*h,l=(y-g)*h),s>l||a>o||((a>s||isNaN(s))&&(s=a),(l<o||isNaN(o))&&(o=l),d>=0?(c=(S-A)*d,u=(C-A)*d):(c=(C-A)*d,u=(S-A)*d),s>u||c>o)?!1:((c>s||s!==s)&&(s=c),(u<o||o!==o)&&(o=u),s<=r&&o>=i)}function M2e(t,e,n,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=t;for(let u=i,f=i+r;u<f;u++){let h=c?c[u]:u;xS(l,e,n,h,s,o,a)}}function T2e(t,e,n,i,r,s,o){const{geometry:a,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=xS(a,e,n,l?l[f]:f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function I2e(t,e,n,i,r,s,o){const{geometry:a}=n,{index:l}=a,c=a.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=n.resolveTriangleIndex(u),Er(o,h*3,l,c),o.needsUpdate=!0,i(o,h,r,s))return!0}return!1}function B2e(t,e,n,i,r,s,o){Ci.setBuffer(t._roots[e]),GI(0,t,n,i,r,s,o),Ci.clearBuffer()}function GI(t,e,n,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ci,u=t*2;if(Hs(u,l)){const h=mo(t,c),d=Fo(u,l);w2e(e,n,i,h,d,r,s,o)}else{const h=Ea(t);bf(h,a,i,s,o)&&GI(h,e,n,i,r,s,o);const d=Oo(t,c);bf(d,a,i,s,o)&&GI(d,e,n,i,r,s,o)}}const R2e=["x","y","z"];function P2e(t,e,n,i,r,s){Ci.setBuffer(t._roots[e]);const o=HI(0,t,n,i,r,s);return Ci.clearBuffer(),o}function HI(t,e,n,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ci;let c=t*2;if(Hs(c,a)){const f=mo(t,l),h=Fo(c,a);return S2e(e,n,i,f,h,r,s)}else{const f=KB(t,l),h=R2e[f],p=i.direction[h]>=0;let g,A;p?(g=Ea(t),A=Oo(t,l)):(g=Oo(t,l),A=Ea(t));const v=bf(g,o,i,r,s)?HI(g,e,n,i,r,s):null;if(v){const S=v.point[h];if(p?S<=o[A+f]:S>=o[A+f+3])return v}const w=bf(A,o,i,r,s)?HI(A,e,n,i,r,s):null;return v&&w?v.distance<=w.distance?v:w:v||w||null}}const Zx=new xn,Rp=new vl,Pp=new vl,gg=new Ge,Jz=new Ks,e_=new Ks;function D2e(t,e,n,i){Ci.setBuffer(t._roots[e]);const r=QI(0,t,n,i);return Ci.clearBuffer(),r}function QI(t,e,n,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ci;let l=t*2;if(r===null&&(n.boundingBox||n.computeBoundingBox(),Jz.set(n.boundingBox.min,n.boundingBox.max,i),r=Jz),Hs(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,p=n.attributes.position,g=mo(t,a),A=Fo(l,o);if(gg.copy(i).invert(),n.boundsTree)return Yi(t,s,e_),e_.matrix.copy(gg),e_.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:v=>e_.intersectsBox(v),intersectsTriangle:v=>{v.a.applyMatrix4(i),v.b.applyMatrix4(i),v.c.applyMatrix4(i),v.needsUpdate=!0;for(let y=g*3,w=(A+g)*3;y<w;y+=3)if(Er(Pp,y,f,h),Pp.needsUpdate=!0,v.intersectsTriangle(Pp))return!0;return!1}});for(let m=g*3,v=(A+g)*3;m<v;m+=3){Er(Rp,m,f,h),Rp.a.applyMatrix4(gg),Rp.b.applyMatrix4(gg),Rp.c.applyMatrix4(gg),Rp.needsUpdate=!0;for(let y=0,w=d.count;y<w;y+=3)if(Er(Pp,y,d,p),Pp.needsUpdate=!0,Rp.intersectsTriangle(Pp))return!0}}else{const u=t+8,f=a[t+6];return Yi(u,s,Zx),!!(r.intersectsBox(Zx)&&QI(u,e,n,i,r)||(Yi(f,s,Zx),r.intersectsBox(Zx)&&QI(f,e,n,i,r)))}}const t_=new Ge,qM=new Ks,Ag=new Ks,L2e=new L,F2e=new L,O2e=new L,z2e=new L;function U2e(t,e,n,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),qM.set(e.boundingBox.min,e.boundingBox.max,n),qM.needsUpdate=!0;const a=t.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=wa.getPrimitive(),d=wa.getPrimitive();let p=L2e,g=F2e,A=null,m=null;r&&(A=O2e,m=z2e);let v=1/0,y=null,w=null;return t_.copy(n).invert(),Ag.matrix.copy(t_),t.shapecast({boundsTraverseOrder:S=>qM.distanceToBox(S),intersectsBounds:(S,C,b)=>b<v&&b<o?(C&&(Ag.min.copy(S.min),Ag.max.copy(S.max),Ag.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:M=>Ag.distanceToBox(M),intersectsBounds:(M,I,T)=>T<v&&T<o,intersectsRange:(M,I)=>{for(let T=M,D=M+I;T<D;T++){Er(d,3*T,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let R=S,z=S+C;R<z;R++){Er(h,3*R,c,l),h.needsUpdate=!0;const F=h.distanceToTriangle(d,p,A);if(F<v&&(g.copy(p),m&&m.copy(A),v=F,y=R,w=T),F<s)return!0}}}});{const b=R0(e);for(let M=0,I=b;M<I;M++){Er(d,3*M,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let T=S,D=S+C;T<D;T++){Er(h,3*T,c,l),h.needsUpdate=!0;const R=h.distanceToTriangle(d,p,A);if(R<v&&(g.copy(p),m&&m.copy(A),v=R,y=T,w=M),R<s)return!0}}}}}),wa.releasePrimitive(h),wa.releasePrimitive(d),v===1/0?null:(i.point?i.point.copy(g):i.point=g.clone(),i.distance=v,i.faceIndex=y,r&&(r.point?r.point.copy(m):r.point=m.clone(),r.point.applyMatrix4(t_),g.applyMatrix4(t_),r.distance=g.sub(r.point).length(),r.faceIndex=w),i)}function k2e(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let s,o,a,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,p=!1){const g=h*2;if(a[g+15]===yS){const m=o[h+6],v=a[g+14];let y=1/0,w=1/0,S=1/0,C=-1/0,b=-1/0,M=-1/0;for(let I=m,T=m+v;I<T;I++){const D=3*t.resolveTriangleIndex(I);for(let R=0;R<3;R++){let z=D+R;z=i?i[z]:z;const F=r.getX(z),V=r.getY(z),j=r.getZ(z);F<y&&(y=F),F>C&&(C=F),V<w&&(w=V),V>b&&(b=V),j<S&&(S=j),j>M&&(M=j)}}return l[h+0]!==y||l[h+1]!==w||l[h+2]!==S||l[h+3]!==C||l[h+4]!==b||l[h+5]!==M?(l[h+0]=y,l[h+1]=w,l[h+2]=S,l[h+3]=C,l[h+4]=b,l[h+5]=M,!0):!1}else{const m=h+8,v=o[h+6],y=m+d,w=v+d;let S=p,C=!1,b=!1;e?S||(C=e.has(y),b=e.has(w),S=!C&&!b):(C=!0,b=!0);const M=S||C,I=S||b;let T=!1;M&&(T=f(m,d,S));let D=!1;I&&(D=f(v,d,S));const R=T||D;if(R)for(let z=0;z<3;z++){const F=m+z,V=v+z,j=l[F],Z=l[F+3],U=l[V],$=l[V+3];l[h+z]=j<U?j:U,l[h+z+3]=Z>$?Z:$}return R}}}function N2e(t,e,n,i,r,s,o){Ci.setBuffer(t._roots[e]),VI(0,t,n,i,r,s,o),Ci.clearBuffer()}function VI(t,e,n,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ci,u=t*2;if(Hs(u,l)){const h=mo(t,c),d=Fo(u,l);M2e(e,n,i,h,d,r,s,o)}else{const h=Ea(t);bf(h,a,i,s,o)&&VI(h,e,n,i,r,s,o);const d=Oo(t,c);bf(d,a,i,s,o)&&VI(d,e,n,i,r,s,o)}}const G2e=["x","y","z"];function H2e(t,e,n,i,r,s){Ci.setBuffer(t._roots[e]);const o=WI(0,t,n,i,r,s);return Ci.clearBuffer(),o}function WI(t,e,n,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ci;let c=t*2;if(Hs(c,a)){const f=mo(t,l),h=Fo(c,a);return T2e(e,n,i,f,h,r,s)}else{const f=KB(t,l),h=G2e[f],p=i.direction[h]>=0;let g,A;p?(g=Ea(t),A=Oo(t,l)):(g=Oo(t,l),A=Ea(t));const v=bf(g,o,i,r,s)?WI(g,e,n,i,r,s):null;if(v){const S=v.point[h];if(p?S<=o[A+f]:S>=o[A+f+3])return v}const w=bf(A,o,i,r,s)?WI(A,e,n,i,r,s):null;return v&&w?v.distance<=w.distance?v:w:v||w||null}}const n_=new xn,Dp=new vl,Lp=new vl,vg=new Ge,Zz=new Ks,i_=new Ks;function Q2e(t,e,n,i){Ci.setBuffer(t._roots[e]);const r=jI(0,t,n,i);return Ci.clearBuffer(),r}function jI(t,e,n,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ci;let l=t*2;if(r===null&&(n.boundingBox||n.computeBoundingBox(),Zz.set(n.boundingBox.min,n.boundingBox.max,i),r=Zz),Hs(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,p=n.attributes.position,g=mo(t,a),A=Fo(l,o);if(vg.copy(i).invert(),n.boundsTree)return Yi(t,s,i_),i_.matrix.copy(vg),i_.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:v=>i_.intersectsBox(v),intersectsTriangle:v=>{v.a.applyMatrix4(i),v.b.applyMatrix4(i),v.c.applyMatrix4(i),v.needsUpdate=!0;for(let y=g,w=A+g;y<w;y++)if(Er(Lp,3*e.resolveTriangleIndex(y),f,h),Lp.needsUpdate=!0,v.intersectsTriangle(Lp))return!0;return!1}});for(let m=g,v=A+g;m<v;m++){const y=e.resolveTriangleIndex(m);Er(Dp,3*y,f,h),Dp.a.applyMatrix4(vg),Dp.b.applyMatrix4(vg),Dp.c.applyMatrix4(vg),Dp.needsUpdate=!0;for(let w=0,S=d.count;w<S;w+=3)if(Er(Lp,w,d,p),Lp.needsUpdate=!0,Dp.intersectsTriangle(Lp))return!0}}else{const u=t+8,f=a[t+6];return Yi(u,s,n_),!!(r.intersectsBox(n_)&&jI(u,e,n,i,r)||(Yi(f,s,n_),r.intersectsBox(n_)&&jI(f,e,n,i,r)))}}const r_=new Ge,$M=new Ks,yg=new Ks,V2e=new L,W2e=new L,j2e=new L,X2e=new L;function Y2e(t,e,n,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),$M.set(e.boundingBox.min,e.boundingBox.max,n),$M.needsUpdate=!0;const a=t.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=wa.getPrimitive(),d=wa.getPrimitive();let p=V2e,g=W2e,A=null,m=null;r&&(A=j2e,m=X2e);let v=1/0,y=null,w=null;return r_.copy(n).invert(),yg.matrix.copy(r_),t.shapecast({boundsTraverseOrder:S=>$M.distanceToBox(S),intersectsBounds:(S,C,b)=>b<v&&b<o?(C&&(yg.min.copy(S.min),yg.max.copy(S.max),yg.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree){const b=e.boundsTree;return b.shapecast({boundsTraverseOrder:M=>yg.distanceToBox(M),intersectsBounds:(M,I,T)=>T<v&&T<o,intersectsRange:(M,I)=>{for(let T=M,D=M+I;T<D;T++){const R=b.resolveTriangleIndex(T);Er(d,3*R,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let z=S,F=S+C;z<F;z++){const V=t.resolveTriangleIndex(z);Er(h,3*V,c,l),h.needsUpdate=!0;const j=h.distanceToTriangle(d,p,A);if(j<v&&(g.copy(p),m&&m.copy(A),v=j,y=z,w=T),j<s)return!0}}}})}else{const b=R0(e);for(let M=0,I=b;M<I;M++){Er(d,3*M,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let T=S,D=S+C;T<D;T++){const R=t.resolveTriangleIndex(T);Er(h,3*R,c,l),h.needsUpdate=!0;const z=h.distanceToTriangle(d,p,A);if(z<v&&(g.copy(p),m&&m.copy(A),v=z,y=T,w=M),z<s)return!0}}}}}),wa.releasePrimitive(h),wa.releasePrimitive(d),v===1/0?null:(i.point?i.point.copy(g):i.point=g.clone(),i.distance=v,i.faceIndex=y,r&&(r.point?r.point.copy(m):r.point=m.clone(),r.point.applyMatrix4(r_),g.applyMatrix4(r_),r.distance=g.sub(r.point).length(),r.faceIndex=w),i)}function q2e(){return typeof SharedArrayBuffer<"u"}const vA=new Ci.constructor,IE=new Ci.constructor,Uu=new ZB(()=>new xn),Fp=new xn,Op=new xn,KM=new xn,JM=new xn;let ZM=!1;function $2e(t,e,n,i){if(ZM)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");ZM=!0;const r=t._roots,s=e._roots;let o,a=0,l=0;const c=new Ge().copy(n).invert();for(let u=0,f=r.length;u<f;u++){vA.setBuffer(r[u]),l=0;const h=Uu.getPrimitive();Yi(0,vA.float32Array,h),h.applyMatrix4(c);for(let d=0,p=s.length;d<p&&(IE.setBuffer(s[u]),o=$a(0,0,n,c,i,a,l,0,0,h),IE.clearBuffer(),l+=s[d].length,!o);d++);if(Uu.releasePrimitive(h),vA.clearBuffer(),a+=r[u].length,o)break}return ZM=!1,o}function $a(t,e,n,i,r,s=0,o=0,a=0,l=0,c=null,u=!1){let f,h;u?(f=IE,h=vA):(f=vA,h=IE);const d=f.float32Array,p=f.uint32Array,g=f.uint16Array,A=h.float32Array,m=h.uint32Array,v=h.uint16Array,y=t*2,w=e*2,S=Hs(y,g),C=Hs(w,v);let b=!1;if(C&&S)u?b=r(mo(e,m),Fo(e*2,v),mo(t,p),Fo(t*2,g),l,o+e,a,s+t):b=r(mo(t,p),Fo(t*2,g),mo(e,m),Fo(e*2,v),a,s+t,l,o+e);else if(C){const M=Uu.getPrimitive();Yi(e,A,M),M.applyMatrix4(n);const I=Ea(t),T=Oo(t,p);Yi(I,d,Fp),Yi(T,d,Op);const D=M.intersectsBox(Fp),R=M.intersectsBox(Op);b=D&&$a(e,I,i,n,r,o,s,l,a+1,M,!u)||R&&$a(e,T,i,n,r,o,s,l,a+1,M,!u),Uu.releasePrimitive(M)}else{const M=Ea(e),I=Oo(e,m);Yi(M,A,KM),Yi(I,A,JM);const T=c.intersectsBox(KM),D=c.intersectsBox(JM);if(T&&D)b=$a(t,M,n,i,r,s,o,a,l+1,c,u)||$a(t,I,n,i,r,s,o,a,l+1,c,u);else if(T)if(S)b=$a(t,M,n,i,r,s,o,a,l+1,c,u);else{const R=Uu.getPrimitive();R.copy(KM).applyMatrix4(n);const z=Ea(t),F=Oo(t,p);Yi(z,d,Fp),Yi(F,d,Op);const V=R.intersectsBox(Fp),j=R.intersectsBox(Op);b=V&&$a(M,z,i,n,r,o,s,l,a+1,R,!u)||j&&$a(M,F,i,n,r,o,s,l,a+1,R,!u),Uu.releasePrimitive(R)}else if(D)if(S)b=$a(t,I,n,i,r,s,o,a,l+1,c,u);else{const R=Uu.getPrimitive();R.copy(JM).applyMatrix4(n);const z=Ea(t),F=Oo(t,p);Yi(z,d,Fp),Yi(F,d,Op);const V=R.intersectsBox(Fp),j=R.intersectsBox(Op);b=V&&$a(I,z,i,n,r,o,s,l,a+1,R,!u)||j&&$a(I,F,i,n,r,o,s,l,a+1,R,!u),Uu.releasePrimitive(R)}}return b}const s_=new Ks,eU=new xn,K2e={strategy:aY,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0};class _S{static serialize(e,n={}){n={cloneBuffers:!0,...n};const i=e.geometry,r=e._roots,s=e._indirectBuffer,o=i.getIndex();let a;return n.cloneBuffers?a={roots:r.map(l=>l.slice()),index:o?o.array.slice():null,indirectBuffer:s?s.slice():null}:a={roots:r,index:o?o.array:null,indirectBuffer:s},a}static deserialize(e,n,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:s,indirectBuffer:o}=e,a=new _S(n,{...i,[VM]:!0});if(a._roots=s,a._indirectBuffer=o||null,i.setIndex){const l=n.getIndex();if(l===null){const c=new Gt(e.index,1,!1);n.setIndex(c)}else l.array!==r&&(l.array.set(r),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({...K2e,[VM]:!1},n),n.useSharedArrayBuffer&&!q2e())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,n[VM]||(d2e(this,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new xn))),this.resolveTriangleIndex=n.indirect?i=>this._indirectBuffer[i]:i=>i}refit(e=null){return(this.indirect?k2e:b2e)(this,e)}traverse(e,n=0){const i=this._roots[n],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===yS;if(u){const f=r[a+6],h=s[c+14];e(l,u,new Float32Array(i,a*4,6),f,h)}else{const f=a+df/4,h=r[a+6],d=r[a+7];e(l,u,new Float32Array(i,a*4,6),d)||(o(f,l+1),o(h,l+1))}}}raycast(e,n=js,i=0,r=1/0){const s=this._roots,o=this.geometry,a=[],l=n.isMaterial,c=Array.isArray(n),u=o.groups,f=l?n.side:n,h=this.indirect?N2e:B2e;for(let d=0,p=s.length;d<p;d++){const g=c?n[u[d].materialIndex].side:f,A=a.length;if(h(this,d,g,e,a,i,r),c){const m=u[d].materialIndex;for(let v=A,y=a.length;v<y;v++)a[v].face.materialIndex=m}}return a}raycastFirst(e,n=js,i=0,r=1/0){const s=this._roots,o=this.geometry,a=n.isMaterial,l=Array.isArray(n);let c=null;const u=o.groups,f=a?n.side:n,h=this.indirect?H2e:P2e;for(let d=0,p=s.length;d<p;d++){const g=l?n[u[d].materialIndex].side:f,A=h(this,d,g,e,i,r);A!=null&&(c==null||A.distance<c.distance)&&(c=A,l&&(A.face.materialIndex=u[d].materialIndex))}return c}intersectsGeometry(e,n){let i=!1;const r=this._roots,s=this.indirect?Q2e:D2e;for(let o=0,a=r.length;o<a&&(i=s(this,o,e,n),!i);o++);return i}shapecast(e){const n=wa.getPrimitive(),i=this.indirect?I2e:C2e;let{boundsTraverseOrder:r,intersectsBounds:s,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const f=o;o=(h,d,p,g,A)=>f(h,d,p,g,A)?!0:i(h,d,this,a,p,g,n)}else o||(a?o=(f,h,d,p)=>i(f,h,this,a,d,p,n):o=(f,h,d)=>d);let l=!1,c=0;const u=this._roots;for(let f=0,h=u.length;f<h;f++){const d=u[f];if(l=y2e(this,f,s,o,r,c),l)break;c+=d.byteLength}return wa.releasePrimitive(n),l}bvhcast(e,n,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=wa.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?p=>{const g=this.resolveTriangleIndex(p);Er(o,g*3,a,l)}:p=>{Er(o,p*3,a,l)},u=wa.getPrimitive(),f=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?p=>{const g=e.resolveTriangleIndex(p);Er(u,g*3,f,h)}:p=>{Er(u,p*3,f,h)};if(s){const p=(g,A,m,v,y,w,S,C)=>{for(let b=m,M=m+v;b<M;b++){d(b),u.a.applyMatrix4(n),u.b.applyMatrix4(n),u.c.applyMatrix4(n),u.needsUpdate=!0;for(let I=g,T=g+A;I<T;I++)if(c(I),o.needsUpdate=!0,s(o,u,I,b,y,w,S,C))return!0}return!1};if(r){const g=r;r=function(A,m,v,y,w,S,C,b){return g(A,m,v,y,w,S,C,b)?!0:p(A,m,v,y,w,S,C,b)}}else r=p}return $2e(this,e,n,r)}intersectsBox(e,n){return s_.set(e.min,e.max,n),s_.needsUpdate=!0,this.shapecast({intersectsBounds:i=>s_.intersectsBox(i),intersectsTriangle:i=>s_.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,i={},r={},s=0,o=1/0){return(this.indirect?Y2e:U2e)(this,e,n,i,r,s,o)}closestPointToPoint(e,n={},i=0,r=1/0){return x2e(this,e,n,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{Yi(0,new Float32Array(i),eU),e.union(eU)}),e}}function tU(t,e,n){return t===null?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t)}const o_=new Da,nU=new L,iU=new Ge,J2e=ut.prototype.raycast,rU=new L;function pY(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;iU.copy(this.matrixWorld).invert(),o_.copy(t.ray).applyMatrix4(iU),Z2e(this.matrixWorld,rU),nU.copy(o_.direction).multiply(rU);const n=nU.length(),i=t.near/n,r=t.far/n,s=this.geometry.boundsTree;if(t.firstHitOnly===!0){const o=tU(s.raycastFirst(o_,this.material,i,r),this,t);o&&e.push(o)}else{const o=s.raycast(o_,this.material,i,r);for(let a=0,l=o.length;a<l;a++){const c=tU(o[a],this,t);c&&e.push(c)}}}else J2e.call(this,t,e)}function mY(t){return this.boundsTree=new _S(this,t),this.boundsTree}function gY(){this.boundsTree=null}function Z2e(t,e){const n=t.elements,i=e.set(n[0],n[1],n[2]).length(),r=e.set(n[4],n[5],n[6]).length(),s=e.set(n[8],n[9],n[10]).length();return e.set(i,r,s)}function exe(t){switch(t){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function txe(t){switch(t){case 1:return co;case 2:return Gc;case 3:return In;case 4:return In}}function sU(t){switch(t){case 1:return x0;case 2:return _0;case 3:return xf;case 4:return xf}}class AY extends Yr{constructor(){super(),this.minFilter=fn,this.magFilter=fn,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const n=this.overrideItemSize,i=e.itemSize,r=e.count;if(n!==null){if(i*r%n!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=n,e.count=r*i/n}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,f=s;if(u===null)switch(l){case Float32Array:u=vn;break;case Uint8Array:case Uint16Array:case Uint32Array:u=Ss;break;case Int8Array:case Int16Array:case Int32Array:u=cf;break}let h,d,p,g,A=exe(s);switch(u){case vn:p=1,d=txe(s),a&&c===1?(g=l,A+="8",l===Uint8Array?h=Jn:(h=Km,A+="_SNORM")):(g=Float32Array,A+="32F",h=vn);break;case cf:A+=c*8+"I",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=sU(s),c===1?(g=Int8Array,h=Km):c===2?(g=Int16Array,h=Bv):(g=Int32Array,h=cf);break;case Ss:A+=c*8+"UI",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=sU(s),c===1?(g=Uint8Array,h=Jn):c===2?(g=Uint16Array,h=ic):(g=Uint32Array,h=Ss);break}f===3&&(d===In||d===xf)&&(f=4);const m=Math.ceil(Math.sqrt(o))||1,v=f*m*m,y=new g(v),w=e.normalized;e.normalized=!1;for(let S=0;S<o;S++){const C=f*S;y[C]=e.getX(S)/p,s>=2&&(y[C+1]=e.getY(S)/p),s>=3&&(y[C+2]=e.getZ(S)/p,f===4&&(y[C+3]=1)),s>=4&&(y[C+3]=e.getW(S)/p)}e.normalized=w,this.internalFormat=A,this.format=d,this.type=h,this.image.width=m,this.image.height=m,this.image.data=y,this.needsUpdate=!0,this.dispose(),e.itemSize=i,e.count=r}}class nxe extends AY{constructor(){super(),this._forcedType=Ss}}class ixe extends AY{constructor(){super(),this._forcedType=vn}}class vY{constructor(){this.index=new nxe,this.position=new ixe,this.bvhBounds=new Yr,this.bvhContents=new Yr,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){const{geometry:n}=e;if(sxe(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(n.attributes.position),e.indirect){const i=e._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==i.length)if(n.index)this._cachedIndexAttr=n.index.clone();else{const r=cY(lY(n));this._cachedIndexAttr=new Gt(r,1,!1)}rxe(n,i,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(n.index)}dispose(){const{index:e,position:n,bvhBounds:i,bvhContents:r}=this;e&&e.dispose(),n&&n.dispose(),i&&i.dispose(),r&&r.dispose()}}function rxe(t,e,n){const i=n.array,r=t.index?t.index.array:null;for(let s=0,o=e.length;s<o;s++){const a=3*s,l=3*e[s];for(let c=0;c<3;c++)i[a+c]=r?r[l+c]:l+c}}function sxe(t,e,n){const i=t._roots;if(i.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const r=i[0],s=new Uint16Array(r),o=new Uint32Array(r),a=new Float32Array(r),l=r.byteLength/df,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),f=Math.ceil(Math.sqrt(l)),h=new Uint32Array(2*f*f);for(let d=0;d<l;d++){const p=d*df/4,g=p*2,A=p;for(let m=0;m<3;m++)u[8*d+0+m]=a[A+0+m],u[8*d+4+m]=a[A+3+m];if(Hs(g,s)){const m=Fo(g,s),v=mo(p,o),y=4294901760|m;h[d*2+0]=y,h[d*2+1]=v}else{const m=4*Oo(p,o)/df,v=KB(p,o);h[d*2+0]=v,h[d*2+1]=m}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=In,e.type=vn,e.internalFormat="RGBA32F",e.minFilter=fn,e.magFilter=fn,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),n.image.data=h,n.image.width=f,n.image.height=f,n.format=_0,n.type=Ss,n.internalFormat="RG32UI",n.minFilter=fn,n.magFilter=fn,n.generateMipmaps=!1,n.needsUpdate=!0,n.dispose()}const oxe=`

// A stack of uint32 indices can can store the indices for
// a perfectly balanced tree with a depth up to 31. Lower stack
// depth gets higher performance.
//
// However not all trees are balanced. Best value to set this to
// is the trees max depth.
#ifndef BVH_STACK_DEPTH
#define BVH_STACK_DEPTH 60
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}
`,axe=`

#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

// Raycasting
bool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	dist = max( t0, 0.0 );

	return t1 >= dist;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	// geometry info and triangle range
	sampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// outputs
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;
		vec3 a = texelFetch1D( positionAttr, indices.x ).rgb;
		vec3 b = texelFetch1D( positionAttr, indices.y ).rgb;
		vec3 c = texelFetch1D( positionAttr, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

bool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {

	uint cni2 = currNodeIndex * 2u;
	vec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;
	vec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );

}

// use a macro to hide the fact that we need to expand the struct into separate fields
#define	bvhIntersectFirstHit(		bvh,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)	_bvhIntersectFirstHit(		bvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)

bool _bvhIntersectFirstHit(
	// bvh info
	sampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// output variables split into separate variables due to output precision
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ BVH_STACK_DEPTH ];
	stack[ 0 ] = 0u;

	float triangleDistance = INFINITY;
	bool found = false;
	while ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance;
		if (
			! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )
			|| boundsHitDistance > triangleDistance
		) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh_position, bvh_index, offset, count,
				rayOrigin, rayDirection, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,lxe=`
struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,cxe=lxe,uxe=`
	${oxe}
	${axe}
`,oU=t=>t.isMesh;function fxe(t,e){e={strategy:vS,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10,indirect:!1,...e},E.useEffect(()=>{if(t.current){t.current.raycast=pY;const n=t.current.geometry;return n.computeBoundsTree=mY,n.disposeBoundsTree=gY,n.computeBoundsTree(e),()=>{n.boundsTree&&n.disposeBoundsTree()}}},[t,JSON.stringify(e)])}const hxe=E.forwardRef(({enabled:t=!0,firstHitOnly:e=!1,children:n,strategy:i=vS,verbose:r=!1,setBoundingBox:s=!0,maxDepth:o=40,maxLeafTris:a=10,indirect:l=!1,...c},u)=>{const f=E.useRef(null),h=Fe(d=>d.raycaster);return E.useImperativeHandle(u,()=>f.current,[]),E.useEffect(()=>{if(t){const d={strategy:i,verbose:r,setBoundingBox:s,maxDepth:o,maxLeafTris:a,indirect:l},p=f.current;return h.firstHitOnly=e,p.traverse(g=>{oU(g)&&!g.geometry.boundsTree&&g.raycast===ut.prototype.raycast&&(g.raycast=pY,g.geometry.computeBoundsTree=mY,g.geometry.disposeBoundsTree=gY,g.geometry.computeBoundsTree(d))}),()=>{delete h.firstHitOnly,p.traverse(g=>{oU(g)&&g.geometry.boundsTree&&(g.geometry.disposeBoundsTree(),g.raycast=ut.prototype.raycast)})}}},[]),E.createElement("group",Te({ref:f},c),n)});function dxe(...t){const e=E.useRef([]);return e.current=t.map(n=>E.useContext(n)),E.useMemo(()=>({children:n})=>t.reduceRight((i,r,s)=>E.createElement(r.Provider,{value:e.current[s],children:i}),n),[])}function pxe(t,e){const n=E.useRef(),[i]=E.useState(()=>e?e instanceof Ht?{current:e}:e:n),[r]=E.useState(()=>new $8(void 0));E.useLayoutEffect(()=>{e&&(i.current=e instanceof Ht?e:e.current),r._root=i.current});const s=E.useRef({}),o=E.useMemo(()=>{const a={};return t.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:t,actions:a,names:t.map(l=>l.name),mixer:r}},[t]);return Ct((a,l)=>r.update(l)),E.useEffect(()=>{const a=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[t]),o}function yY(t){const e=E.useRef(null),n=E.useRef(!1),i=E.useRef(!1),r=E.useRef(t);return E.useLayoutEffect(()=>void(r.current=t),[t]),E.useEffect(()=>{const s=e.current;if(s){const o=Qv(()=>(n.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>n.current=!0;const l=Uw(()=>(n.current!==i.current&&(r.current==null||r.current(i.current=n.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const mxe=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,gxe=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,Axe=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,vxe=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function yxe(t,e,n){t.defines.BOX_PROJECTED_ENV_MAP=!0,t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:n},t.vertexShader=`
  varying vec3 vWorldPosition;
  ${t.vertexShader.replace("#include <worldpos_vertex>",mxe)}`,t.fragmentShader=`
    ${gxe}
    ${t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",Zt.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${Axe}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${vxe}
        `)}`}function xxe(t=new L,e=new L){const[n]=E.useState(()=>({position:new L,size:new L}));yr(n,{position:t,size:e});const i=E.useRef(null),r=E.useMemo(()=>({ref:i,onBeforeCompile:s=>yxe(s,n.position,n.size),customProgramCacheKey:()=>JSON.stringify(n.position.toArray())+JSON.stringify(n.size.toArray())}),[...n.position.toArray(),...n.size.toArray()]);return E.useLayoutEffect(()=>void(i.current.needsUpdate=!0),[n]),r}const aU=new xn,a_=new L,_xe=({anchor:t,...e})=>{const n=E.useRef(null),i=E.useRef(null);return E.useEffect(()=>{var r;(r=n.current)!=null&&(r=r.parent)!=null&&r.parent&&(i.current=n.current.parent,n.current.parent.parent.add(n.current))},[]),Ct(()=>{i.current&&(aU.setFromObject(i.current),aU.getSize(a_),n.current.position.set(i.current.position.x+a_.x*(Array.isArray(t)?t[0]:t.x)/2,i.current.position.y+a_.y*(Array.isArray(t)?t[1]:t.y)/2,i.current.position.z+a_.z*(Array.isArray(t)?t[2]:t.z)/2))}),E.createElement("group",Te({ref:n},e))};function Exe(t,e,n=.9){return e*n+t*(1-n)}const wxe=t=>Math.sqrt(1-Math.pow(t-1,2));class Sxe{constructor({size:e=256,maxAge:n=750,radius:i=.3,intensity:r=.2,interpolate:s=0,smoothing:o=0,minForce:a=.3,blend:l="screen",ease:c=wxe}={}){this.size=e,this.maxAge=n,this.radius=i,this.intensity=r,this.ease=c,this.interpolate=s,this.smoothing=o,this.minForce=a,this.blend=l,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size;const e=this.canvas.getContext("2d");if(e===null)throw new Error("2D not available");this.ctx=e,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new Bn(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(e){this.clear(),this.trail.forEach((n,i)=>{n.age+=e*1e3,n.age>this.maxAge&&this.trail.splice(i,1)}),this.trail.length||(this.force=0),this.trail.forEach(n=>{this.drawTouch(n)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(e){const n=this.trail[this.trail.length-1];if(n){const i=n.x-e.x,r=n.y-e.y,s=i*i+r*r,o=Math.max(this.minForce,Math.min(s*1e4,1));if(this.force=Exe(o,this.force,this.smoothing),this.interpolate){const a=Math.ceil(s/Math.pow(this.radius*.5/this.interpolate,2));if(a>1)for(let l=1;l<a;l++)this.trail.push({x:n.x-i/a*l,y:n.y-r/a*l,age:0,force:o})}}this.trail.push({x:e.x,y:e.y,age:0,force:this.force})}drawTouch(e){const n={x:e.x*this.size,y:(1-e.y)*this.size};let i=1;e.age<this.maxAge*.3?i=this.ease(e.age/(this.maxAge*.3)):i=this.ease(1-(e.age-this.maxAge*.3)/(this.maxAge*.7)),i*=e.force,this.ctx.globalCompositeOperation=this.blend;const r=this.size*this.radius*i,s=this.ctx.createRadialGradient(n.x,n.y,Math.max(0,r*.25),n.x,n.y,Math.max(0,r));s.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),s.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=s,this.ctx.arc(n.x,n.y,Math.max(0,r),0,Math.PI*2),this.ctx.fill()}}function xY(t={}){const{size:e,maxAge:n,radius:i,intensity:r,interpolate:s,smoothing:o,minForce:a,blend:l,ease:c}=t,u=E.useMemo(()=>new Sxe(t),[e,n,i,r,s,o,a,l,c]);Ct((h,d)=>void u.update(d));const f=E.useCallback(h=>u.addTouch(h.uv),[u]);return[u.texture,f]}const Cxe=({children:t,...e})=>{const n=xY(e);return E.createElement(E.Fragment,null,t==null?void 0:t(n))},eR=E.forwardRef(function({children:e,disable:n,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:f,onCentered:h,precise:d=!0,cacheKey:p=0,...g},A){const m=E.useRef(null),v=E.useRef(null),y=E.useRef(null);return E.useLayoutEffect(()=>{v.current.matrixWorld.identity();const w=new xn().setFromObject(y.current,d),S=new L,C=new $n,b=w.max.x-w.min.x,M=w.max.y-w.min.y,I=w.max.z-w.min.z;w.getCenter(S),w.getBoundingSphere(C);const T=l?M/2:c?-M/2:0,D=o?-b/2:a?b/2:0,R=u?I/2:f?-I/2:0;v.current.position.set(n||i?0:-S.x+D,n||r?0:-S.y+T,n||s?0:-S.z+R),typeof h<"u"&&h({parent:m.current.parent,container:m.current,width:b,height:M,depth:I,boundingBox:w,boundingSphere:C,center:S,verticalAlignment:T,horizontalAlignment:D,depthAlignment:R})},[p,h,l,o,u,n,i,r,s,d,a,c,f]),E.useImperativeHandle(A,()=>m.current,[]),E.createElement("group",Te({ref:m},g),E.createElement("group",{ref:v},E.createElement("group",{ref:y},e)))}),bxe=E.forwardRef(({font:t,color:e="#cbcbcb",bevelSize:n=.04,debug:i=!1,children:r,...s},o)=>{const[a,l]=E.useState(0),c=E.useCallback((h=1)=>l(a+h),[a]),u=E.useCallback((h=1)=>l(a-h),[a]),f=E.useMemo(()=>({incr:c,decr:u}),[c,u]);return E.useImperativeHandle(o,()=>f,[f]),E.createElement("group",s,E.createElement(E.Suspense,{fallback:null},E.createElement(eR,{top:!0,cacheKey:JSON.stringify({counter:a,font:t})},E.createElement(OX,{bevelEnabled:!0,bevelSize:n,font:t},i?E.createElement("meshNormalMaterial",{wireframe:!0}):E.createElement("meshStandardMaterial",{color:e}),a))),r)});var _Y={exports:{}},Mxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Txe=Mxe,Ixe=Txe;function EY(){}function wY(){}wY.resetWarningCache=EY;var Bxe=function(){function t(i,r,s,o,a,l){if(l!==Ixe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wY,resetWarningCache:EY};return n.PropTypes=n,n};_Y.exports=Bxe();var Rxe=_Y.exports;const xg=m0(Rxe);function SY(t){return CY(t.children,t.components)}SY.propTypes={children:xg.func.isRequired,components:xg.arrayOf(xg.oneOfType([xg.element,xg.func])).isRequired};function CY(t,e,n){if(n=n||[],!e[0])return t(n);function i(r){return CY(t,e.slice(1),n.concat([r]))}return typeof e[0]=="function"?e[0]({results:n,render:i}):E.cloneElement(e[0],{children:i})}const yA=(t,e)=>{"updateRanges"in t?t.updateRanges[0]=e:t.updateRange=e},Pxe=3e3,Dxe=3001;function Lxe(t){return typeof t=="function"}const lU=new Ge,cU=new Ge,l_=[],_g=new ut;class Fxe extends uo{constructor(){super(),this.color=new Je("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;_g.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,lU),cU.multiplyMatrices(r,lU),_g.matrixWorld=cU,i.material instanceof cr?_g.material.side=i.material.side:_g.material.side=i.material[0].side,_g.raycast(e,l_);for(let o=0,a=l_.length;o<a;o++){const l=l_[o];l.instanceId=s,l.object=this,n.push(l)}l_.length=0}}}const bY=E.createContext(null),uU=new Ge,fU=new Ge,Oxe=new Ge,hU=new L,dU=new Tt,pU=new L,tR=E.forwardRef(({context:t,children:e,...n},i)=>{E.useMemo(()=>ui({PositionMesh:Fxe}),[]);const r=E.useRef();E.useImperativeHandle(i,()=>r.current,[]);const{subscribe:s,getParent:o}=E.useContext(t||bY);return E.useLayoutEffect(()=>s(r),[]),E.createElement("positionMesh",Te({instance:o(),instanceKey:r,ref:r},n),e)}),nR=E.forwardRef(({children:t,range:e,limit:n=1e3,frames:i=1/0,...r},s)=>{const[{context:o,instance:a}]=E.useState(()=>{const A=E.createContext(null);return{context:A,instance:E.forwardRef((m,v)=>E.createElement(tR,Te({context:A},m,{ref:v})))}}),l=E.useRef(null);E.useImperativeHandle(s,()=>l.current,[]);const[c,u]=E.useState([]),[[f,h]]=E.useState(()=>{const A=new Float32Array(n*16);for(let m=0;m<n;m++)Oxe.identity().toArray(A,m*16);return[A,new Float32Array([...new Array(n*3)].map(()=>1))]});E.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,p=0;Ct(()=>{if(i===1/0||d<i){l.current.updateMatrix(),l.current.updateMatrixWorld(),uU.copy(l.current.matrixWorld).invert(),p=Math.min(n,e!==void 0?e:n,c.length),l.current.count=p,yA(l.current.instanceMatrix,{offset:0,count:p*16}),yA(l.current.instanceColor,{offset:0,count:p*3});for(let A=0;A<c.length;A++){const m=c[A].current;m.matrixWorld.decompose(hU,dU,pU),fU.compose(hU,dU,pU).premultiply(uU),fU.toArray(f,A*16),l.current.instanceMatrix.needsUpdate=!0,m.color.toArray(h,A*3),l.current.instanceColor.needsUpdate=!0}d++}});const g=E.useMemo(()=>({getParent:()=>l,subscribe:A=>(u(m=>[...m,A]),()=>u(m=>m.filter(v=>v.current!==A.current)))}),[]);return E.createElement("instancedMesh",Te({userData:{instances:c},matrixAutoUpdate:!1,ref:l,args:[null,null,0],raycast:()=>null},r),E.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:ws}),E.createElement("instancedBufferAttribute",{attach:"instanceColor",count:h.length/3,array:h,itemSize:3,usage:ws}),Lxe(t)?E.createElement(o.Provider,{value:g},t(a)):E.createElement(bY.Provider,{value:g},t))}),zxe=E.forwardRef(function({meshes:e,children:n,...i},r){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return E.createElement("group",{ref:r},E.createElement(SY,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>E.createElement(nR,Te({key:o.uuid,geometry:o,material:a},i)))},o=>s?n(...o):n(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))))}),MY=E.createContext(null);function Uxe(){return E.useContext(MY)}const kxe=E.forwardRef(({startFrame:t,endFrame:e,fps:n,frameName:i,textureDataURL:r,textureImageURL:s,loop:o,numberOfFrames:a,autoPlay:l,animationNames:c,onStart:u,onEnd:f,onLoopEnd:h,onFrame:d,play:p,pause:g,flipX:A,alphaTest:m,children:v,asSprite:y,offset:w,playBackwards:S,resetOnEnd:C,maxItems:b,instanceItems:M,spriteDataset:I,...T},D)=>{var R;const z=E.useRef(),F=E.useRef(null),V=E.useRef(),j=E.useRef(),Z=E.useRef(window.performance.now()),U=E.useRef(t||0),$=E.useRef(i||""),X=1e3/(n||30),[Q,J]=E.useState(new Bn),ne=E.useRef(0),[O,N]=E.useState([1,1,1]),G=A?-1:1,[H,oe]=E.useState(y??!0),de=E.useRef(g),ce=E.useRef(w),ge=E.useRef(!1),q=E.useRef([]),{spriteObj:xe,loadJsonAndTexture:ue}=AS(null,null,c,a);function me(){}const pe=E.useMemo(()=>({current:ce.current,offset:ce.current,imageUrl:s,reset:me,hasEnded:!1,ref:D}),[s,I]);E.useImperativeHandle(D,()=>z.current,[]),E.useLayoutEffect(()=>{ce.current=w},[w]);const Le=(Ee,_e)=>{const Ze=_e/Ee;return j.current&&j.current.scale.set(1,Ze,1),[1,Ze,1]};E.useEffect(()=>{if(I){var Ee;re(I==null||(Ee=I.spriteTexture)==null?void 0:Ee.clone(),I.spriteData)}else ue(s,r)},[I]),E.useEffect(()=>{if(xe){var Ee;re(xe==null||(Ee=xe.spriteTexture)==null?void 0:Ee.clone(),xe==null?void 0:xe.spriteData)}},[xe]),E.useEffect(()=>{oe(y??!0)},[y]),E.useEffect(()=>{pe.hasEnded=!1,F.current&&S===!0?U.current=F.current.frames.length-1:U.current=0},[S]),E.useLayoutEffect(()=>{ie()},[Q,A]),E.useEffect(()=>{l&&(de.current=!1)},[l]),E.useLayoutEffect(()=>{if($.current!==i&&i&&(U.current=0,$.current=i,pe.hasEnded=!1,F.current)){const{w:Ee,h:_e}=Me(F.current.frames).sourceSize,Ze=Le(Ee,_e);N(Ze)}},[i]);const re=(Ee,_e=null)=>{if(_e===null){if(a){const Oe=Ee.image.width,we=Ee.image.height;ne.current=a,S&&(U.current=a-1),F.current={frames:[],meta:{version:"1.0",size:{w:Oe,h:we},scale:"1"}},F.current.frames=_e}}else{F.current=_e,ne.current=F.current.frames.length,S&&(U.current=ne.current-1);const{w:Oe,h:we}=Me(F.current.frames).sourceSize,be=Le(Oe,we);N(be),V.current&&(V.current.map=Ee)}if(M)for(var Ze=0;Ze<M.length;Ze++){const Oe=Object.keys(F.current.frames),we=Oe[Math.floor(Math.random()*Oe.length)];q.current.push({key:Ze,frames:F.current.frames,selectedFrame:we,offset:{x:0,y:0}})}J(Ee)},ie=()=>{if(!F.current)return;const{meta:{size:Ee},frames:_e}=F.current,{w:Ze,h:Oe}=Array.isArray(_e)?_e[0].sourceSize:i?_e[i]?_e[i][0].sourceSize:{w:0,h:0}:{w:0,h:0};V.current.map.wrapS=V.current.map.wrapT=qr,V.current.map.center.set(0,0),V.current.map.repeat.set(1*G/(Ee.w/Ze),1/(Ee.h/Oe));const be=1/((Ee.h-1)/Oe);V.current.map.offset.x=0,V.current.map.offset.y=1-be,u&&u({currentFrameName:i,currentFrame:U.current})},te=()=>{const Ee=window.performance.now(),_e=Ee-Z.current,{meta:{size:Ze},frames:Oe}=F.current,{w:we,h:be}=Me(Oe).sourceSize,Be=Array.isArray(Oe)?Oe:i?Oe[i]:[],Ve=e||Be.length-1;var ot=w===void 0?pe.current:w,$e=S?U.current<0:U.current>Ve,qe=S?U.current===Ve:U.current===0,fe=S?U.current<0:U.current>=Ve;if($e){if(U.current=o?t??0:0,S&&(U.current=Ve),o?h==null||h({currentFrameName:i,currentFrame:U.current}):(f==null||f({currentFrameName:i,currentFrame:U.current}),pe.hasEnded=!C,C&&(de.current=!0)),!o)return}else qe&&(u==null||u({currentFrameName:i,currentFrame:U.current}));ot!==void 0&&fe?ge.current===!1&&(f==null||f({currentFrameName:i,currentFrame:U.current}),ge.current=!0):ge.current=!1,!(_e<=X)&&(Z.current=Ee-_e%X,W(we,be,Ze,Be))},W=(Ee,_e,Ze,Oe)=>{var we=w===void 0?pe.current:w;const be=U.current;let Be=0,Ve=0;Le(Ee,_e);const ot=Math.round((Ze.w-1)/Ee),$e=Math.round((Ze.h-1)/_e);if(!Oe[be])return;const{frame:{x:qe,y:fe},sourceSize:{w:Ue,h:it}}=Oe[be],Ae=1/ot,Ye=1/$e;if(Be=G>0?Ae*(qe/Ue):Ae*(qe/Ue)-V.current.map.repeat.x,Ve=Math.abs(1-Ye)-Ye*(fe/it),V.current.map.offset.x=Be,V.current.map.offset.y=Ve,we!=null){let ye=Math.floor(we*Oe.length);ye=Math.max(0,Math.min(ye,Oe.length-1)),isNaN(ye)&&(ye=0),U.current=ye}else S?U.current-=1:U.current+=1};Ct((Ee,_e)=>{var Ze,Oe;!((Ze=F.current)!=null&&Ze.frames)||!((Oe=V.current)!=null&&Oe.map)||de.current||!pe.hasEnded&&(l||p)&&(te(),d&&d({currentFrameName:$.current,currentFrame:U.current}))});const Me=Ee=>{if(Array.isArray(Ee))return Ee[0];if(typeof Ee=="object"&&Ee!==null){const _e=Object.keys(Ee);return i?Ee[i][0]:Ee[_e[0]][0]}else return{w:0,h:0}};function De(Ee,_e){let Ze=[];return typeof _e=="number"?Ze=[_e,_e,_e]:Array.isArray(_e)?Ze=_e:_e instanceof L&&(Ze=[_e.x,_e.y,_e.z]),Ee.map((we,be)=>we*Ze[be])}return E.createElement("group",Te({},T,{ref:z,scale:De(O??[1,1,1],(R=T.scale)!==null&&R!==void 0?R:1)}),E.createElement(MY.Provider,{value:pe},E.createElement(E.Suspense,{fallback:null},H&&E.createElement("sprite",{ref:j,scale:1},E.createElement("spriteMaterial",{premultipliedAlpha:!1,toneMapped:!1,ref:V,map:Q,transparent:!0,alphaTest:m??0})),!H&&E.createElement(nR,{limit:b??1},E.createElement("planeGeometry",{args:[1,1]}),E.createElement("meshBasicMaterial",{premultipliedAlpha:!1,toneMapped:!1,side:Qn,ref:V,map:Q,transparent:!0,alphaTest:m??0}),(M??[0]).map((Ee,_e)=>E.createElement(tR,{key:_e,ref:(M==null?void 0:M.length)===1?j:null,position:Ee,scale:1})))),v))}),Nxe=E.forwardRef(({children:t,curve:e},n)=>{const[i]=E.useState(()=>new Go),[r,s]=E.useState(),o=E.useRef();return E.useEffect(()=>{o.current=new Hme(i.children[0]),s(o.current.object3D)},[t]),E.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),E.useImperativeHandle(n,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),E.createElement(E.Fragment,null,ou(t,i),r&&E.createElement("primitive",{object:r}))});var Gxe=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Hxe extends qs{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Gxe}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const Qxe=E.forwardRef(({speed:t=1,...e},n)=>{const[i]=E.useState(()=>new Hxe);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),E.createElement("primitive",Te({object:i,ref:n,attach:"material"},e))});class Vxe extends pd{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const Wxe=E.forwardRef(({speed:t=1,...e},n)=>{const[i]=E.useState(()=>new Vxe);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),E.createElement("primitive",Te({object:i,ref:n,attach:"material"},e))});class jxe extends Fn{constructor(e=new Ie){super({uniforms:{inputBuffer:new ss(null),depthBuffer:new ss(null),resolution:new ss(new Ie),texelSize:new ss(new Ie),halfTexelSize:new ss(new Ie),kernel:new ss(0),scale:new ss(1),cameraNear:new ss(0),cameraFar:new ss(1),minDepthThreshold:new ss(0),maxDepthThreshold:new ss(1),depthScale:new ss(0),depthToBlurRatioBias:new ss(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:ba,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class TY{constructor({gl:e,resolution:n,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new Ln(n,n,{minFilter:Vt,magFilter:Vt,stencilBuffer:!1,depthBuffer:!1,type:On}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new jxe,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Ie(i,r)),this.scene=new Go,this.camera=new Rf,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),f=new Dt;f.setAttribute("position",new Gt(c,3)),f.setAttribute("uv",new Gt(u,2)),this.screen=new ut(f,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,i){const r=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=n.depthTexture;const u=l.kernel;let f=n,h,d,p;for(d=0,p=u.length-1;d<p;++d)h=d&1?a:o,c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(h),e.render(r,s),f=h;c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}let IY=class extends pd{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const Xxe=E.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:f,reflectorOffset:h=0,...d},p)=>{ui({MeshReflectorMaterialImpl:IY});const g=Fe(({gl:Q})=>Q),A=Fe(({camera:Q})=>Q),m=Fe(({scene:Q})=>Q);i=Array.isArray(i)?i:[i,i];const v=i[0]+i[1]>0,y=E.useRef(null);E.useImperativeHandle(p,()=>y.current,[]);const[w]=E.useState(()=>new Wr),[S]=E.useState(()=>new L),[C]=E.useState(()=>new L),[b]=E.useState(()=>new L),[M]=E.useState(()=>new Ge),[I]=E.useState(()=>new L(0,0,-1)),[T]=E.useState(()=>new Jt),[D]=E.useState(()=>new L),[R]=E.useState(()=>new L),[z]=E.useState(()=>new Jt),[F]=E.useState(()=>new Ge),[V]=E.useState(()=>new an),j=E.useCallback(()=>{var Q;const J=y.current.parent||((Q=y.current)==null?void 0:Q.__r3f.parent);if(!J||(C.setFromMatrixPosition(J.matrixWorld),b.setFromMatrixPosition(A.matrixWorld),M.extractRotation(J.matrixWorld),S.set(0,0,1),S.applyMatrix4(M),C.addScaledVector(S,h),D.subVectors(C,b),D.dot(S)>0))return;D.reflect(S).negate(),D.add(C),M.extractRotation(A.matrixWorld),I.set(0,0,-1),I.applyMatrix4(M),I.add(b),R.subVectors(C,I),R.reflect(S).negate(),R.add(C),V.position.copy(D),V.up.set(0,1,0),V.up.applyMatrix4(M),V.up.reflect(S),V.lookAt(R),V.far=A.far,V.updateMatrixWorld(),V.projectionMatrix.copy(A.projectionMatrix),F.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.multiply(V.projectionMatrix),F.multiply(V.matrixWorldInverse),F.multiply(J.matrixWorld),w.setFromNormalAndCoplanarPoint(S,C),w.applyMatrix4(V.matrixWorldInverse),T.set(w.normal.x,w.normal.y,w.normal.z,w.constant);const ne=V.projectionMatrix;z.x=(Math.sign(T.x)+ne.elements[8])/ne.elements[0],z.y=(Math.sign(T.y)+ne.elements[9])/ne.elements[5],z.z=-1,z.w=(1+ne.elements[10])/ne.elements[14],T.multiplyScalar(2/T.dot(z)),ne.elements[2]=T.x,ne.elements[6]=T.y,ne.elements[10]=T.z+1,ne.elements[14]=T.w},[A,h]),[Z,U,$,X]=E.useMemo(()=>{const Q={minFilter:Vt,magFilter:Vt,type:On},J=new Ln(n,n,Q);J.depthBuffer=!0,J.depthTexture=new hd(n,n),J.depthTexture.format=Zl,J.depthTexture.type=ic;const ne=new Ln(n,n,Q),O=new TY({gl:g,resolution:n,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),N={mirror:l,textureMatrix:F,mixBlur:t,tDiffuse:J.texture,tDepth:J.depthTexture,tDiffuseBlur:ne.texture,hasBlur:v,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:f,mixContrast:u,"defines-USE_BLUR":v?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":f?"":void 0};return[J,ne,O,N]},[g,i,F,n,l,v,t,e,r,s,o,a,c,f,u]);return Ct(()=>{var Q;const J=y.current.parent||((Q=y.current)==null?void 0:Q.__r3f.parent);if(!J)return;J.visible=!1;const ne=g.xr.enabled,O=g.shadowMap.autoUpdate;j(),g.xr.enabled=!1,g.shadowMap.autoUpdate=!1,g.setRenderTarget(Z),g.state.buffers.depth.setMask(!0),g.autoClear||g.clear(),g.render(m,V),v&&$.render(g,Z,U),g.xr.enabled=ne,g.shadowMap.autoUpdate=O,J.visible=!0,g.setRenderTarget(null)}),E.createElement("meshReflectorMaterialImpl",Te({attach:"material",key:"key"+X["defines-USE_BLUR"]+X["defines-USE_DEPTH"]+X["defines-USE_DISTORTION"],ref:y},X,d))}),Yxe=Vo({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new vY,color:new Je("white"),opacity:1,resolution:new Ie,viewMatrixInverse:new Ge,projectionMatrixInverse:new Ge},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #include <color_pars_vertex>

  void main() {
    #include <color_vertex>

    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #include <color_pars_fragment>

  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif

  uniform float bounces;
  ${cxe}
  ${uxe}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  uniform float opacity;

  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }

  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }

  #include <common>
  #include <cube_uv_reflection_fragment>

  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif

  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);

    vec4 diffuseColor = vec4(color, opacity);
    #include <color_fragment>

    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      diffuseColor.rgb *= vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      diffuseColor.rgb *= textureGradient(envMap, rayDirection, directionCamPerfect).rgb;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(diffuseColor.rgb, vec3(1.0), nFresnel), diffuseColor.a);

    #include <tonemapping_fragment>
    #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
  }`),qxe=t=>t&&t.isCubeTexture;function $xe({aberrationStrength:t=0,fastChroma:e=!0,envMap:n,...i}){ui({MeshRefractionMaterial:Yxe});const r=E.useRef(),{size:s}=Fe(),o=E.useMemo(()=>{var a,l;const c={},u=qxe(n),h=((a=u?(l=n.image[0])==null?void 0:l.width:n.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(h)),p=Math.pow(2,d),g=3*Math.max(p,16*7),A=4*p;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/g}`,c.CUBEUV_TEXEL_HEIGHT=`${1/A}`,c.CUBEUV_MAX_MIP=`${d}.0`,t>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[t,e]);return E.useLayoutEffect(()=>{var a;const l=(a=r.current)==null||(a=a.__r3f)==null||(a=a.parent)==null?void 0:a.geometry;l&&(r.current.bvh=new vY,r.current.bvh.updateFrom(new _S(l.clone().toNonIndexed(),{strategy:vS})))},[]),Ct(({camera:a})=>{r.current.viewMatrixInverse=a.matrixWorld,r.current.projectionMatrixInverse=a.projectionMatrixInverse}),E.createElement("meshRefractionMaterial",Te({key:JSON.stringify(o),defines:o,ref:r,resolution:[s.width,s.height],aberrationStrength:t,envMap:n},i))}const iR=Vo({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class Kxe extends qs{constructor(e=6,n=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new Je("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=i=>{i.uniforms={...i.uniforms,...this.uniforms},this.anisotropy>0&&(i.defines.USE_ANISOTROPY=""),n?i.defines.USE_SAMPLER="":i.defines.USE_TRANSMISSION="",i.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float rand(float seed) {
        float result = randomBase(vec3(gl_FragCoord.xy, seed));
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+i.fragmentShader,i.fragmentShader=i.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),i.fragmentShader=i.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        float runningSeed = 0.0;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand(runningSeed++);
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${e}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${e}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(i=>Object.defineProperty(this,i,{get:()=>this.uniforms[i].value,set:r=>this.uniforms[i].value=r}))}}const Jxe=E.forwardRef(({buffer:t,transmissionSampler:e=!1,backside:n=!1,side:i=js,transmission:r=1,thickness:s=0,backsideThickness:o=0,backsideEnvMapIntensity:a=1,samples:l=10,resolution:c,backsideResolution:u,background:f,anisotropy:h,anisotropicBlur:d,...p},g)=>{ui({MeshTransmissionMaterial:Kxe});const A=E.useRef(null),[m]=E.useState(()=>new iR),v=Vs(u||c),y=Vs(c);let w,S,C,b;return Ct(M=>{A.current.time=M.clock.getElapsedTime(),A.current.buffer===y.texture&&!e&&(b=A.current.__r3f.parent,b&&(C=M.gl.toneMapping,w=M.scene.background,S=A.current.envMapIntensity,M.gl.toneMapping=cl,f&&(M.scene.background=f),b.material=m,n&&(M.gl.setRenderTarget(v),M.gl.render(M.scene,M.camera),b.material=A.current,b.material.buffer=v.texture,b.material.thickness=o,b.material.side=Ki,b.material.envMapIntensity=a),M.gl.setRenderTarget(y),M.gl.render(M.scene,M.camera),b.material=A.current,b.material.thickness=s,b.material.side=i,b.material.buffer=y.texture,b.material.envMapIntensity=S,M.scene.background=w,M.gl.setRenderTarget(null),M.gl.toneMapping=C))}),E.useImperativeHandle(g,()=>A.current,[]),E.createElement("meshTransmissionMaterial",Te({args:[l,e],ref:A},p,{buffer:t||y.texture,_transmission:r,anisotropicBlur:d??h,transmission:e?r:0,thickness:s,side:i}))}),Zxe=E.forwardRef((t,e)=>(ui({DiscardMaterialImpl:iR}),E.createElement("discardMaterialImpl",Te({ref:e},t)))),e5=$s>=154?"opaque_fragment":"output_fragment";class BY extends zv{constructor(e){super(e),this.onBeforeCompile=(n,i)=>{const{isWebGL2:r}=i.capabilities;n.fragmentShader=n.fragmentShader.replace(`#include <${e5}>`,`
        ${r?`#include <${e5}>`:`#extension GL_OES_standard_derivatives : enable
#include <${e5}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const e_e=E.forwardRef((t,e)=>{const[n]=E.useState(()=>new BY(null));return E.createElement("primitive",Te({},t,{object:n,ref:e,attach:"material"}))}),t_e=({focus:t=0,size:e=25,samples:n=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${t});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${n}; i ++) {
    offset = (vogelDiskSample(j, ${n}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${n}; i++) {
    vogelSample = vogelDiskSample(j, ${n}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${n}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function mU(t,e,n){e.traverse(i=>{i.material&&(t.properties.remove(i.material),i.material.dispose==null||i.material.dispose())}),t.info.programs.length=0,t.compile(e,n)}function n_e({focus:t=0,samples:e=10,size:n=25}){const i=Fe(o=>o.gl),r=Fe(o=>o.scene),s=Fe(o=>o.camera);return E.useEffect(()=>{const o=Zt.shadowmap_pars_fragment;return Zt.shadowmap_pars_fragment=Zt.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+t_e({size:n,samples:e,focus:t})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),mU(i,r,s),()=>{Zt.shadowmap_pars_fragment=o,mU(i,r,s)}},[t,n,e]),null}function Fr(t,e){const n=t+"Geometry";return E.forwardRef(({args:i,children:r,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current),E.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),E.createElement("mesh",Te({ref:a},s),E.createElement(n,{attach:"geometry",args:i}),r)})}const i_e=Fr("box"),r_e=Fr("circle"),s_e=Fr("cone"),o_e=Fr("cylinder"),a_e=Fr("sphere"),l_e=Fr("plane"),c_e=Fr("tube"),u_e=Fr("torus"),f_e=Fr("torusKnot"),h_e=Fr("tetrahedron"),d_e=Fr("ring"),p_e=Fr("polyhedron"),m_e=Fr("icosahedron"),g_e=Fr("octahedron"),A_e=Fr("dodecahedron"),v_e=Fr("extrude"),y_e=Fr("lathe"),x_e=Fr("capsule"),__e=Fr("shape",({geometry:t})=>{const e=t.attributes.position,n=new xn().setFromBufferAttribute(e),i=new L;n.getSize(i);const r=[];let s=0,o=0,a=0,l=0;for(let c=0;c<e.count;c++)s=e.getX(c),o=e.getY(c),a=(s-n.min.x)/i.x,l=(o-n.min.y)/i.y,r.push(a,l);t.setAttribute("uv",new At(r,2))}),zl=1e-5;function E_e(t,e,n){const i=new Vc,r=n-zl;return i.absarc(zl,zl,zl,-Math.PI/2,-Math.PI,!0),i.absarc(zl,e-r*2,zl,Math.PI,Math.PI/2,!0),i.absarc(t-r*2,e-r*2,zl,Math.PI/2,0,!0),i.absarc(t-r*2,zl,zl,0,-Math.PI/2,!0),i}const w_e=E.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...u},f){const h=E.useMemo(()=>E_e(e,n,r),[e,n,r]),d=E.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-zl,bevelThickness:r,curveSegments:o}),[i,r,o]),p=E.useRef(null);return E.useLayoutEffect(()=>{p.current&&(p.current.center(),Pj(p.current,l))},[h,d]),E.createElement("mesh",Te({ref:f},u),E.createElement("extrudeGeometry",{ref:p,args:[h,d]}),c)});function S_e(){const t=new Dt,e=new Float32Array([-1,-1,3,-1,-1,3]);return t.boundingSphere=new $n,t.boundingSphere.set(new L,1/0),t.setAttribute("position",new Gt(e,2)),t}const C_e=E.forwardRef(function({children:e,...n},i){const r=E.useMemo(S_e,[]);return E.createElement("mesh",Te({ref:i,geometry:r,frustumCulled:!1},n),e)}),b_e=E.forwardRef(({children:t,width:e,height:n,depth:i,box3:r,precise:s=!0,...o},a)=>{const l=E.useRef(null),c=E.useRef(null),u=E.useRef(null);return E.useLayoutEffect(()=>{c.current.matrixWorld.identity();let f=r||new xn().setFromObject(u.current,s);const h=f.max.x-f.min.x,d=f.max.y-f.min.y,p=f.max.z-f.min.z;let g=Math.max(h,d,p);e&&(g=h),n&&(g=d),i&&(g=p),c.current.scale.setScalar(1/g)},[e,n,i,r,s]),E.useImperativeHandle(a,()=>l.current,[]),E.createElement("group",Te({ref:l},o),E.createElement("group",{ref:c},E.createElement("group",{ref:u},t)))});var sa=function(t){return t[t.NONE=0]="NONE",t[t.START=1]="START",t[t.ACTIVE=2]="ACTIVE",t}(sa||{});const zp=t=>t&&t.isOrthographicCamera,M_e=t=>t&&t.isBox3,T_e=t=>1-Math.exp(-5*t)+.007*t,RY=E.createContext(null);function PY({children:t,maxDuration:e=1,margin:n=1.2,observe:i,fit:r,clip:s,interpolateFunc:o=T_e,onFit:a}){const l=E.useRef(null),{camera:c,size:u,invalidate:f}=Fe(),h=Fe(S=>S.controls),d=E.useRef(a);d.current=a;const p=E.useRef({camPos:new L,camRot:new Tt,camZoom:1}),g=E.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),A=E.useRef(sa.NONE),m=E.useRef(0),[v]=E.useState(()=>new xn),y=E.useMemo(()=>{function S(){const C=v.getSize(new L),b=v.getCenter(new L),M=Math.max(C.x,C.y,C.z),I=zp(c)?M*4:M/(2*Math.atan(Math.PI*c.fov/360)),T=zp(c)?M*4:I/c.aspect,D=n*Math.max(I,T);return{box:v,size:C,center:b,distance:D}}return{getSize:S,refresh(C){if(M_e(C))v.copy(C);else{const b=C||l.current;if(!b)return this;b.updateWorldMatrix(!0,!0),v.setFromObject(b)}if(v.isEmpty()){const b=c.position.length()||10;v.setFromCenterAndSize(new L,new L(b,b,b))}return p.current.camPos.copy(c.position),p.current.camRot.copy(c.quaternion),zp(c)&&(p.current.camZoom=c.zoom),g.current.camPos=void 0,g.current.camRot=void 0,g.current.camZoom=void 0,g.current.camUp=void 0,g.current.target=void 0,this},reset(){const{center:C,distance:b}=S(),M=c.position.clone().sub(C).normalize();g.current.camPos=C.clone().addScaledVector(M,b),g.current.target=C.clone();const I=new Ge().lookAt(g.current.camPos,g.current.target,c.up);return g.current.camRot=new Tt().setFromRotationMatrix(I),A.current=sa.START,m.current=0,this},moveTo(C){return g.current.camPos=Array.isArray(C)?new L(...C):C.clone(),A.current=sa.START,m.current=0,this},lookAt({target:C,up:b}){g.current.target=Array.isArray(C)?new L(...C):C.clone(),b?g.current.camUp=Array.isArray(b)?new L(...b):b.clone():g.current.camUp=c.up.clone();const M=new Ge().lookAt(g.current.camPos||c.position,g.current.target,g.current.camUp);return g.current.camRot=new Tt().setFromRotationMatrix(M),A.current=sa.START,m.current=0,this},to({position:C,target:b}){return this.moveTo(C).lookAt({target:b})},fit(){if(!zp(c))return this.reset();let C=0,b=0;const M=[new L(v.min.x,v.min.y,v.min.z),new L(v.min.x,v.max.y,v.min.z),new L(v.min.x,v.min.y,v.max.z),new L(v.min.x,v.max.y,v.max.z),new L(v.max.x,v.max.y,v.max.z),new L(v.max.x,v.max.y,v.min.z),new L(v.max.x,v.min.y,v.max.z),new L(v.max.x,v.min.y,v.min.z)],I=g.current.camPos||c.position,T=g.current.target||(h==null?void 0:h.target),D=g.current.camUp||c.up,R=T?new Ge().lookAt(I,T,D).setPosition(I).invert():c.matrixWorldInverse;for(const V of M)V.applyMatrix4(R),C=Math.max(C,Math.abs(V.y)),b=Math.max(b,Math.abs(V.x));C*=2,b*=2;const z=(c.top-c.bottom)/C,F=(c.right-c.left)/b;return g.current.camZoom=Math.min(z,F)/n,A.current=sa.START,m.current=0,d.current&&d.current(this.getSize()),this},clip(){const{distance:C}=S();return c.near=C/100,c.far=C*100,c.updateProjectionMatrix(),h&&(h.maxDistance=C*10,h.update()),f(),this}}},[v,c,h,n,f]);E.useLayoutEffect(()=>{if(h){const S=()=>{if(h&&g.current.target&&A.current!==sa.NONE){const C=new L().setFromMatrixColumn(c.matrix,2),b=p.current.camPos.distanceTo(h.target),M=(g.current.camPos||p.current.camPos).distanceTo(g.current.target),I=(1-m.current)*b+m.current*M;h.target.copy(c.position).addScaledVector(C,-I),h.update()}A.current=sa.NONE};return h.addEventListener("start",S),()=>h.removeEventListener("start",S)}},[h]);const w=E.useRef(0);return E.useLayoutEffect(()=>{(i||w.current++===0)&&(y.refresh(),r&&y.reset().fit(),s&&y.clip())},[u,s,r,i,c,h]),Ct((S,C)=>{if(A.current===sa.START)A.current=sa.ACTIVE,f();else if(A.current===sa.ACTIVE){if(m.current+=C/e,m.current>=1)g.current.camPos&&c.position.copy(g.current.camPos),g.current.camRot&&c.quaternion.copy(g.current.camRot),g.current.camUp&&c.up.copy(g.current.camUp),g.current.camZoom&&zp(c)&&(c.zoom=g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),h&&g.current.target&&(h.target.copy(g.current.target),h.update()),A.current=sa.NONE;else{const b=o(m.current);g.current.camPos&&c.position.lerpVectors(p.current.camPos,g.current.camPos,b),g.current.camRot&&c.quaternion.slerpQuaternions(p.current.camRot,g.current.camRot,b),g.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),g.current.camZoom&&zp(c)&&(c.zoom=(1-b)*p.current.camZoom+b*g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}f()}}),E.createElement("group",{ref:l},E.createElement(RY.Provider,{value:y},t))}function DY(){return E.useContext(RY)}const I_e=E.forwardRef(({intensity:t=1,decay:e,decayRate:n=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=Fe(v=>v.camera),f=Fe(v=>v.controls),h=E.useRef(t),d=E.useRef(u.rotation.clone()),[p]=E.useState(()=>new rM),[g]=E.useState(()=>new rM),[A]=E.useState(()=>new rM),m=()=>{(h.current<0||h.current>1)&&(h.current=h.current<0?0:1)};return E.useImperativeHandle(c,()=>({getIntensity:()=>h.current,setIntensity:v=>{h.current=v,m()}}),[]),E.useEffect(()=>{if(f){const v=()=>void(d.current=u.rotation.clone());return f.addEventListener("change",v),v(),()=>void f.removeEventListener("change",v)}},[u,f]),Ct((v,y)=>{const w=Math.pow(h.current,2),S=i*w*p.noise(v.clock.elapsedTime*o,1),C=r*w*g.noise(v.clock.elapsedTime*a,1),b=s*w*A.noise(v.clock.elapsedTime*l,1);u.rotation.set(d.current.x+C,d.current.y+S,d.current.z+b),e&&h.current>0&&(h.current-=n*y,m())}),null}),B_e=E.forwardRef(({children:t,enabled:e=!0,speed:n=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=E.useRef(null);E.useImperativeHandle(a,()=>l.current,[]);const c=E.useRef(Math.random()*1e4);return Ct(u=>{var f,h;if(!e||n===0)return;const d=c.current+u.clock.getElapsedTime();l.current.rotation.x=Math.cos(d/4*n)/8*i,l.current.rotation.y=Math.sin(d/4*n)/8*i,l.current.rotation.z=Math.sin(d/4*n)/20*i;let p=Math.sin(d/4*n)/10;p=zt.mapLinear(p,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(h=s==null?void 0:s[1])!==null&&h!==void 0?h:.1),l.current.position.y=p*r,l.current.updateMatrix()}),E.createElement("group",o,E.createElement("group",{ref:l,matrixAutoUpdate:!1},t))}),LY=(t,e,n)=>{let i;switch(t){case Jn:i=new Uint8ClampedArray(e*n*4);break;case On:i=new Uint16Array(e*n*4);break;case Ss:i=new Uint32Array(e*n*4);break;case Km:i=new Int8Array(e*n*4);break;case Bv:i=new Int16Array(e*n*4);break;case cf:i=new Int32Array(e*n*4);break;case vn:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let c_;const R_e=(t,e,n,i)=>{if(c_!==void 0)return c_;const r=new Ln(1,1,i);e.setRenderTarget(r);const s=new ut(new vr,new Br({color:16777215}));e.render(s,n),e.setRenderTarget(null);const o=LY(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),c_=o[0]!==0,c_};class rR{constructor(e){var n,i,r,s,o,a,l,c,u,f,h,d,p,g,A,m;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(y){throw this._renderer.setRenderTarget(null),y}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const v={format:In,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Vt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Vt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:wi,wrapT:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:wi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=rR.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Go,this._camera=new Hn,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!R_e(this._type,this._renderer,this._camera,v)){let y;switch(this._type){case On:y=this._renderer.extensions.has("EXT_color_buffer_float")?vn:void 0;break}y!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${vn}`),this._type=y):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ut(new vr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ln(this.width,this.height,v),this._renderTarget.texture.mapping=((A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.mapping:Af}static instantiateRenderer(){const e=new T8;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=LY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new Yr(this.toArray(),this.width,this.height,In,this._type,(e==null?void 0:e.mapping)||Af,(e==null?void 0:e.wrapS)||wi,(e==null?void 0:e.wrapT)||wi,(e==null?void 0:e.magFilter)||Vt,(e==null?void 0:e.minFilter)||Vt,(e==null?void 0:e.anisotropy)||1,Ba);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Fn&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Bn&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Bn&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const P_e=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,D_e=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class L_e extends Fn{constructor({gamma:e,offsetHdr:n,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:P_e,fragmentShader:D_e,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new L(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new L().fromArray(n)},offsetSdr:{value:new L().fromArray(i)},gainMapMin:{value:new L().fromArray(r)},gainMapMax:{value:new L().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:ba,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class FY extends Error{}class OY extends Error{}const Eg=(t,e,n)=>{var i;let r;const s=(i=t.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=t.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(n)return n;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},F_e=t=>{var e,n;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(t):i=t.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=Eg(c,"hdrgm:GainMapMin","0"),f=Eg(c,"hdrgm:GainMapMax"),h=Eg(c,"hdrgm:Gamma","1"),d=Eg(c,"hdrgm:OffsetSDR","0.015625"),p=Eg(c,"hdrgm:OffsetHDR","0.015625");let g=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;g||(g="0");const A=(n=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||n===void 0?void 0:n.nodeValue;if(!A)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(m=>parseFloat(m)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(m=>parseFloat(m)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(h)?h.map(m=>parseFloat(m)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(m=>parseFloat(m)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(m=>parseFloat(m)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(A)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class O_e{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let h;if(s.getUint16(f)===18761)h=!1;else if(s.getUint16(f)===19789)h=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!h)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=s.getUint32(f+4,!h);if(d<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const p=f+d,g=s.getUint16(p,!h),A=p+2;let m=0;for(let S=A;S<A+12*g;S+=12)s.getUint16(S,!h)===45057&&(m=s.getUint32(S+8,!h));const y=p+2+g*12+4,w=[];for(let S=y;S<y+m*16;S+=16){const C={MPType:s.getUint32(S,!h),size:s.getUint32(S+4,!h),dataOffset:s.getUint32(S+8,!h),dependantImages:s.getUint32(S+12,!h),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=f+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,w.push(C)}if(this.options.extractNonFII&&w.length){const S=new Blob([s]),C=[];for(const b of w){if(b.isFII&&!this.options.extractFII)continue;const M=S.slice(b.start,b.end+1,"image/jpeg");C.push(M)}n(C)}}}a+=2+s.getUint16(a+2)}})}}const z_e=async t=>{const e=F_e(t);if(!e)throw new OY("Gain map XMP metadata not found");const i=await new O_e({extractFII:!0,extractNonFII:!0}).extract(t);if(i.length!==2)throw new FY("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},gU=t=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(t)});class zY extends Zi{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new Iw}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new L_e({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Bn,sdr:new Bn});return new rR({width:16,height:16,type:On,colorSpace:Ba,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?gU(s):Promise.resolve(void 0),gU(o)]);l=h[0],a=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=h[0],a=h[1]}const u=new Bn(l||new ImageData(2,2),Af,wi,wi,Vt,TT,In,Jn,1,Ba);u.flipY=c,u.needsUpdate=!0;const f=new Bn(a,Af,wi,wi,Vt,TT,In,Jn,1,oo);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class U_e extends zY{load([e,n,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(I){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let h=!0,d=0,p=0,g=!0,A=0,m=0,v=!0,y=0,w=0;const S=()=>{if(typeof s=="function"){const I=d+A+y,T=p+m+w,D=h&&g&&v;s(new ProgressEvent("progress",{lengthComputable:D,loaded:T,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const C=new Gi(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await f()},I=>{h=I.lengthComputable,p=I.loaded,d=I.total,S()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const b=new Gi(this._internalLoadingManager);b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(n,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");c=I,await f()},I=>{g=I.lengthComputable,m=I.loaded,A=I.total,S()},I=>{this.manager.itemError(n),typeof o=="function"&&o(I)});const M=new Gi(this._internalLoadingManager);return M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");u=JSON.parse(I),await f()},I=>{v=I.lengthComputable,w=I.loaded,y=I.total,S()},I=>{this.manager.itemError(i),typeof o=="function"&&o(I)}),a}}class k_e extends zY{load(e,n,i,r){const s=this.prepareQuadRenderer(),o=new Gi(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const h=await z_e(l);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof OY||h instanceof FY)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,f,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),s.disposeOnDemandRenderer();return}typeof n=="function"&&n(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const t5={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},N_e="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",u_=t=>Array.isArray(t);function sR({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1,l;if(n){if(!(n in t5))throw new Error("Preset must be one of: "+Object.keys(t5).join(", "));t=t5[n],e=N_e}const c=u_(t)&&t.length===6,u=u_(t)&&t.length===3&&t.some(A=>A.endsWith("json")),f=u_(t)?t[0]:t;if(a=u_(t),l=c?"cube":u?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(s=f.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?Bw:l==="hdr"?kge:l==="exr"?Nge:l==="jpg"||l==="jpeg"?k_e:l==="webp"?U_e:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const h=Fe(A=>A.gl),d=bi(o,a?[t]:t,A=>{(l==="webp"||l==="jpg"||l==="jpeg")&&A.setRenderer(h),A.setPath==null||A.setPath(e),r&&r(A)});let p=a?d[0]:d;if(l==="jpg"||l==="jpeg"||l==="webp"){var g;p=(g=p.renderTarget)==null?void 0:g.texture}return p.mapping=c?pl:yf,"colorSpace"in p?p.colorSpace=i??c?"srgb":"srgb-linear":p.encoding=i??c?Dxe:Pxe,p}const G_e=t=>t.current&&t.current.isScene,H_e=t=>G_e(t)?t.current:t;function oR(t,e,n,i,r={}){var s,o,a,l,c;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=H_e(e||n),f=u.background,h=u.environment,d={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return t!=="only"&&(u.environment=i),t&&(u.background=i),yr(u,r),()=>{t!=="only"&&(u.environment=h),t&&(u.background=f),yr(u,d)}}function ES({scene:t,background:e=!1,map:n,...i}){const r=Fe(s=>s.scene);return E.useLayoutEffect(()=>{if(n)return oR(e,t,r,n,i)}),null}function aR({background:t=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=sR(l),u=Fe(f=>f.scene);return E.useLayoutEffect(()=>oR(t,e,u,c,{blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function UY({children:t,near:e=1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:d,files:p,path:g,preset:A=void 0,extensions:m}){const v=Fe(M=>M.gl),y=Fe(M=>M.scene),w=E.useRef(null),[S]=E.useState(()=>new Go),C=E.useMemo(()=>{const M=new E0(i);return M.texture.type=On,M},[i]);E.useLayoutEffect(()=>(r===1&&w.current.update(v,S),oR(o,d,y,C.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})),[t,S,C.texture,d,y,o,r,v]);let b=1;return Ct(()=>{(r===1/0||b<r)&&(w.current.update(v,S),b++)}),E.createElement(E.Fragment,null,ou(E.createElement(E.Fragment,null,t,E.createElement("cubeCamera",{ref:w,args:[e,n,C]}),p||A?E.createElement(aR,{background:!0,files:p,preset:A,path:g,extensions:m}):s?E.createElement(ES,{background:!0,map:s,extensions:m}):null),S))}function Q_e(t){var e,n,i,r;const s=sR(t),o=t.map||s;E.useMemo(()=>ui({GroundProjectedEnvImpl:u0e}),[]);const a=E.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return E.createElement(E.Fragment,null,E.createElement(ES,Te({},t,{map:o})),E.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function kY(t){return t.ground?E.createElement(Q_e,t):t.map?E.createElement(ES,t):t.children?E.createElement(UY,t):E.createElement(aR,t)}const NY=E.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:i=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:h,...d},p)=>{const g=E.useRef(null),A=Fe(F=>F.scene),m=Fe(F=>F.gl),v=E.useRef(null);i=i*(Array.isArray(t)?t[0]:t||1),r=r*(Array.isArray(t)?t[1]:t||1);const[y,w,S,C,b,M,I]=E.useMemo(()=>{const F=new Ln(l,l),V=new Ln(l,l);V.texture.generateMipmaps=F.texture.generateMipmaps=!1;const j=new vr(i,r).rotateX(Math.PI/2),Z=new ut(j),U=new Dv;U.depthTest=U.depthWrite=!1,U.onBeforeCompile=Q=>{Q.uniforms={...Q.uniforms,ucolor:{value:new Je(u)}},Q.fragmentShader=Q.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Q.fragmentShader=Q.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const $=new Fn(Q1e),X=new Fn(V1e);return X.depthTest=$.depthTest=!1,[F,j,U,Z,$,X,V]},[l,i,r,t,u]),T=F=>{C.visible=!0,C.material=b,b.uniforms.tDiffuse.value=y.texture,b.uniforms.h.value=F*1/256,m.setRenderTarget(I),m.render(C,v.current),C.material=M,M.uniforms.tDiffuse.value=I.texture,M.uniforms.v.value=F*1/256,m.setRenderTarget(y),m.render(C,v.current),C.visible=!1};let D=0,R,z;return Ct(()=>{v.current&&(e===1/0||D<e)&&(D++,R=A.background,z=A.overrideMaterial,g.current.visible=!1,A.background=null,A.overrideMaterial=S,m.setRenderTarget(y),m.render(A,v.current),T(s),c&&T(s*.4),m.setRenderTarget(null),g.current.visible=!0,A.overrideMaterial=z,A.background=R)}),E.useImperativeHandle(p,()=>g.current,[]),E.createElement("group",Te({"rotation-x":Math.PI/2},d,{ref:g}),E.createElement("mesh",{renderOrder:h,geometry:w,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},E.createElement("meshBasicMaterial",{transparent:!0,map:y.texture,opacity:n,depthWrite:f})),E.createElement("orthographicCamera",{ref:v,args:[-i/2,i/2,r/2,-r/2,o,a]}))});function V_e(t){return t.isLight}function W_e(t){return!!t.geometry}const lR=E.createContext(null),j_e=Vo({color:new Je,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),GY=E.forwardRef(({children:t,temporal:e,frames:n=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:f=!0,...h},d)=>{ui({SoftShadowMaterial:j_e});const p=Fe(C=>C.gl),g=Fe(C=>C.scene),A=Fe(C=>C.camera),m=Fe(C=>C.invalidate),v=E.useRef(null),y=E.useRef(null),[w]=E.useState(()=>new X_e(p,g,u));E.useLayoutEffect(()=>{w.configure(v.current)},[]);const S=E.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>v.current,reset:()=>{w.clear();const C=v.current.material;C.opacity=0,C.alphaTest=0,S.count=0},update:(C=1)=>{const b=v.current.material;S.temporal?(b.opacity=Math.min(o,b.opacity+o/S.blend),b.alphaTest=Math.min(a,b.alphaTest+a/S.blend)):(b.opacity=o,b.alphaTest=a),y.current.visible=!0,w.prepare();for(let M=0;M<C;M++)S.lights.forEach(I=>I.update()),w.update(A,S.blend);y.current.visible=!1,w.finish()}}),[w,A,g,e,n,r,o,a]);return E.useLayoutEffect(()=>{S.reset(),!S.temporal&&S.frames!==1/0&&S.update(S.blend)}),E.useImperativeHandle(d,()=>S,[S]),Ct(()=>{(S.temporal||S.frames===1/0)&&S.count<S.frames&&S.count<i&&(m(),S.update(),S.count++)}),E.createElement("group",h,E.createElement("group",{traverse:()=>null,ref:y},E.createElement(lR.Provider,{value:S},t)),E.createElement("mesh",{receiveShadow:!0,ref:v,scale:s,rotation:[-Math.PI/2,0,0]},E.createElement("planeGeometry",null),E.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:l,blend:c,map:w.progressiveLightMap2.texture})))}),HY=E.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:n=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=$s>=155?Math.PI:1,ambient:f=.5,...h},d)=>{const p=E.useRef(null),g=new L(...a).length(),A=E.useContext(lR),m=E.useCallback(()=>{let y;if(p.current)for(let w=0;w<p.current.children.length;w++)if(y=p.current.children[w],Math.random()>f)y.position.set(a[0]+zt.randFloatSpread(l),a[1]+zt.randFloatSpread(l),a[2]+zt.randFloatSpread(l));else{let S=Math.acos(2*Math.random()-1)-Math.PI/2,C=2*Math.PI*Math.random();y.position.set(Math.cos(S)*Math.cos(C)*g,Math.abs(Math.cos(S)*Math.sin(C)*g),Math.sin(S)*g)}},[l,f,g,...a]),v=E.useMemo(()=>({update:m}),[m]);return E.useImperativeHandle(d,()=>v,[v]),E.useLayoutEffect(()=>{var y;const w=p.current;return A&&((y=A.lights)==null||y.set(w.uuid,v)),()=>{var S;return void(A==null||(S=A.lights)==null?void 0:S.delete(w.uuid))}},[A,v]),E.createElement("group",Te({ref:p},h),Array.from({length:c},(y,w)=>E.createElement("directionalLight",{key:w,castShadow:t,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/c},E.createElement("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]}))))});class X_e{constructor(e,n,i=1024){this.renderer=e,this.res=i,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Je,this.clearAlpha=0;const r={type:On,magFilter:fn,minFilter:fn};this.progressiveLightMap1=new Ln(this.res,this.res,r),this.progressiveLightMap2=new Ln(this.res,this.res,r),this.discardMat=new iR,this.targetMat=new Gv({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{W_e(e)?this.meshes.push({object:e,material:e.material}):V_e(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const Y_e={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function q_e({radius:t,adjustCamera:e}){const n=DY();return E.useEffect(()=>{e&&n.refresh().clip().fit()},[t,e]),null}function $_e({children:t,center:e,adjustCamera:n=!0,intensity:i=.5,shadows:r="contact",environment:s="city",preset:o="rembrandt",...a}){var l,c,u,f,h,d,p,g;const A=typeof o=="string"?Y_e[o]:o,[{radius:m,height:v},y]=E.useState({radius:0,width:0,height:0,depth:0}),w=(l=r==null?void 0:r.bias)!==null&&l!==void 0?l:-1e-4,S=(c=r==null?void 0:r.normalBias)!==null&&c!==void 0?c:0,C=(u=r==null?void 0:r.size)!==null&&u!==void 0?u:1024,b=(f=r==null?void 0:r.offset)!==null&&f!==void 0?f:0,M=r==="contact"||(r==null?void 0:r.type)==="contact",I=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",T={...typeof r=="object"?r:{}},D=s?typeof s=="string"?{preset:s}:s:null,R=E.useCallback(z=>{const{width:F,height:V,depth:j,boundingSphere:Z}=z;y({radius:Z.radius,width:F,height:V,depth:j}),e!=null&&e.onCentered&&e.onCentered(z)},[]);return E.createElement(E.Fragment,null,E.createElement("ambientLight",{intensity:i/3}),E.createElement("spotLight",{penumbra:1,position:[A.main[0]*m,A.main[1]*m,A.main[2]*m],intensity:i*2,castShadow:!!r,"shadow-bias":w,"shadow-normalBias":S,"shadow-mapSize":C}),E.createElement("pointLight",{position:[A.fill[0]*m,A.fill[1]*m,A.fill[2]*m],intensity:i}),E.createElement(PY,Te({fit:!!n,clip:!!n,margin:Number(n),observe:!0},a),E.createElement(q_e,{radius:m,adjustCamera:n}),E.createElement(eR,Te({},e,{position:[0,b/2,0],onCentered:R}),t)),E.createElement("group",{position:[0,-v/2-b/2,0]},M&&E.createElement(NY,Te({scale:m*4,far:m,blur:2},T)),I&&E.createElement(GY,Te({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:m*4},T),E.createElement(HY,{amount:(h=T.amount)!==null&&h!==void 0?h:8,radius:(d=T.radius)!==null&&d!==void 0?d:m,ambient:(p=T.ambient)!==null&&p!==void 0?p:.5,intensity:(g=T.intensity)!==null&&g!==void 0?g:1,position:[A.main[0]*m,A.main[1]*m,A.main[2]*m],size:m*4,bias:-w,mapSize:C}))),s&&E.createElement(kY,D))}const K_e=t=>t===0?0:Math.pow(2,10*t-10);function J_e({children:t,floor:e=.25,segments:n=20,receiveShadow:i,...r}){const s=E.useRef(null);return E.useLayoutEffect(()=>{let o=0;const a=n/n/2,l=s.current.attributes.position;for(let c=0;c<n+1;c++)for(let u=0;u<n+1;u++)l.setXYZ(o++,c/n-a+(c===0?-e:0),u/n-a,K_e(c/n));l.needsUpdate=!0,s.current.computeVertexNormals()},[n,e]),E.createElement("group",r,E.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},E.createElement("planeGeometry",{ref:s,args:[1,1,n,n]}),t))}const Z_e=E.forwardRef(({fog:t=!1,renderOrder:e,depthWrite:n=!1,colorStop:i=0,color:r="black",opacity:s=.5,...o},a)=>{const l=E.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),f=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return f.addColorStop(i,new Je(r).getStyle()),f.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=f,u.fillRect(0,0,c.width,c.height),c},[r,i]);return E.createElement("mesh",Te({renderOrder:e,ref:a,"rotation-x":-Math.PI/2},o),E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,opacity:s,fog:t,depthWrite:n,side:Qn},E.createElement("canvasTexture",{attach:"map",args:[l]})))});function AU(t=js){const e={value:new Ge};return Object.assign(new G8({side:t}),{viewMatrix:e,onBeforeCompile:n=>{n.uniforms.viewMatrix=e,n.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+n.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const e3e=Vo({causticsTexture:null,causticsTextureB:null,color:new Je,lightProjMatrix:new Ge,lightViewMatrix:new Ge},`varying vec3 vWorldPosition;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture;
  uniform sampler2D causticsTextureB;
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5;
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),t3e=Vo({cameraMatrixWorld:new Ge,cameraProjectionMatrixInv:new Ge,normalTexture:null,depthTexture:null,lightDir:new L(0,1,0),lightPlaneNormal:new L(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new Ge,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),vU={depth:!0,minFilter:Vt,magFilter:Vt,type:Jn},yU={minFilter:Qs,magFilter:Vt,type:vn,generateMipmaps:!0},n3e=E.forwardRef(({debug:t,children:e,frames:n=1,ior:i=1.1,color:r="white",causticsOnly:s=!1,backside:o=!1,backsideIOR:a=1.1,worldRadius:l=.3125,intensity:c=.05,resolution:u=2024,lightSource:f=[5,5,5],...h},d)=>{ui({CausticsProjectionMaterial:e3e});const p=E.useRef(null),g=E.useRef(null),A=E.useRef(null),m=E.useRef(null),v=Fe(G=>G.gl),y=$B(t&&g,dV),w=Vs(u,u,vU),S=Vs(u,u,vU),C=Vs(u,u,yU),b=Vs(u,u,yU),[M]=E.useState(()=>AU()),[I]=E.useState(()=>AU(Ki)),[T]=E.useState(()=>new t3e),[D]=E.useState(()=>new Uc(T));E.useLayoutEffect(()=>{p.current.updateWorldMatrix(!1,!0)});let R=0;const z=new L,F=new fd,V=new Ge,j=new Wr,Z=new L,U=new L,$=new xn,X=new L,Q=[],J=[],ne=[],O=[],N=new L;for(let G=0;G<8;G++)Q.push(new L),J.push(new L),ne.push(new L),O.push(new L);return Ct(()=>{if(n===1/0||R++<n){var G,H;Array.isArray(f)?Z.fromArray(f).normalize():Z.copy(p.current.worldToLocal(f.current.getWorldPosition(z)).normalize()),U.copy(Z).multiplyScalar(-1),(G=A.current.parent)==null||G.matrixWorld.identity(),$.setFromObject(A.current,!0),Q[0].set($.min.x,$.min.y,$.min.z),Q[1].set($.min.x,$.min.y,$.max.z),Q[2].set($.min.x,$.max.y,$.min.z),Q[3].set($.min.x,$.max.y,$.max.z),Q[4].set($.max.x,$.min.y,$.min.z),Q[5].set($.max.x,$.min.y,$.max.z),Q[6].set($.max.x,$.max.y,$.min.z),Q[7].set($.max.x,$.max.y,$.max.z);for(let ie=0;ie<8;ie++)J[ie].copy(Q[ie]);$.getCenter(X),Q.map(ie=>ie.sub(X));const oe=j.set(U,0);Q.map((ie,te)=>oe.projectPoint(ie,ne[te]));const de=ne.reduce((ie,te)=>ie.add(te),z.set(0,0,0)).divideScalar(ne.length),ce=ne.map(ie=>ie.distanceTo(de)).reduce((ie,te)=>Math.max(ie,te)),ge=Q.map(ie=>ie.dot(Z)).reduce((ie,te)=>Math.max(ie,te));g.current.position.copy(N.copy(Z).multiplyScalar(ge).add(X)),g.current.lookAt(A.current.localToWorld(X));const q=V.lookAt(g.current.position,X,z.set(0,1,0));g.current.left=-ce,g.current.right=ce,g.current.top=ce,g.current.bottom=-ce;const xe=z.set(0,ce,0).applyMatrix4(q),ue=(g.current.position.y+xe.y)/Z.y;g.current.near=.1,g.current.far=ue,g.current.updateProjectionMatrix(),g.current.updateMatrixWorld();const me=J.map((ie,te)=>ie.add(O[te].copy(Z).multiplyScalar(-ie.y/Z.y))),pe=me.reduce((ie,te)=>ie.add(te),z.set(0,0,0)).divideScalar(me.length),Le=2*me.map(ie=>Math.hypot(ie.x-pe.x,ie.z-pe.z)).reduce((ie,te)=>Math.max(ie,te));m.current.scale.setScalar(Le),m.current.position.copy(pe),t&&((H=y.current)==null||H.update()),I.viewMatrix.value=M.viewMatrix.value=g.current.matrixWorldInverse;const re=F.setFromProjectionMatrix(V.multiplyMatrices(g.current.projectionMatrix,g.current.matrixWorldInverse)).planes[4];T.cameraMatrixWorld=g.current.matrixWorld,T.cameraProjectionMatrixInv=g.current.projectionMatrixInverse,T.lightDir=U,T.lightPlaneNormal=re.normal,T.lightPlaneConstant=re.constant,T.near=g.current.near,T.far=g.current.far,T.resolution=u,T.size=ce,T.intensity=c,T.worldRadius=l,A.current.visible=!0,v.setRenderTarget(w),v.clear(),A.current.overrideMaterial=M,v.render(A.current,g.current),v.setRenderTarget(S),v.clear(),o&&(A.current.overrideMaterial=I,v.render(A.current,g.current)),A.current.overrideMaterial=null,T.ior=i,m.current.material.lightProjMatrix=g.current.projectionMatrix,m.current.material.lightViewMatrix=g.current.matrixWorldInverse,T.normalTexture=w.texture,T.depthTexture=w.depthTexture,v.setRenderTarget(C),v.clear(),D.render(v),T.ior=a,T.normalTexture=S.texture,T.depthTexture=S.depthTexture,v.setRenderTarget(b),v.clear(),o&&D.render(v),v.setRenderTarget(null),s&&(A.current.visible=!1)}}),E.useImperativeHandle(d,()=>p.current,[]),E.createElement("group",Te({ref:p},h),E.createElement("scene",{ref:A},E.createElement("orthographicCamera",{ref:g,up:[0,1,0]}),e),E.createElement("mesh",{renderOrder:2,ref:m,"rotation-x":-Math.PI/2},E.createElement("planeGeometry",null),E.createElement("causticsProjectionMaterial",{transparent:!0,color:r,causticsTexture:C.texture,causticsTextureB:b.texture,blending:tw,blendSrc:nw,blendDst:kA,depthWrite:!1}),t&&E.createElement(UX,null,E.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))}),i3e=E.forwardRef(({mixBlur:t=0,mixStrength:e=.5,resolution:n=256,blur:i=[0,0],args:r=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:f=0,distortion:h=1,mixContrast:d=1,distortionMap:p,...g},A)=>{ui({MeshReflectorMaterial:IY}),E.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const m=Fe(({gl:ne})=>ne),v=Fe(({camera:ne})=>ne),y=Fe(({scene:ne})=>ne);i=Array.isArray(i)?i:[i,i];const w=i[0]+i[1]>0,S=E.useRef(null);E.useImperativeHandle(A,()=>S.current,[]);const[C]=E.useState(()=>new Wr),[b]=E.useState(()=>new L),[M]=E.useState(()=>new L),[I]=E.useState(()=>new L),[T]=E.useState(()=>new Ge),[D]=E.useState(()=>new L(0,0,-1)),[R]=E.useState(()=>new Jt),[z]=E.useState(()=>new L),[F]=E.useState(()=>new L),[V]=E.useState(()=>new Jt),[j]=E.useState(()=>new Ge),[Z]=E.useState(()=>new an),U=E.useCallback(()=>{if(M.setFromMatrixPosition(S.current.matrixWorld),I.setFromMatrixPosition(v.matrixWorld),T.extractRotation(S.current.matrixWorld),b.set(0,0,1),b.applyMatrix4(T),z.subVectors(M,I),z.dot(b)>0)return;z.reflect(b).negate(),z.add(M),T.extractRotation(v.matrixWorld),D.set(0,0,-1),D.applyMatrix4(T),D.add(I),F.subVectors(M,D),F.reflect(b).negate(),F.add(M),Z.position.copy(z),Z.up.set(0,1,0),Z.up.applyMatrix4(T),Z.up.reflect(b),Z.lookAt(F),Z.far=v.far,Z.updateMatrixWorld(),Z.projectionMatrix.copy(v.projectionMatrix),j.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),j.multiply(Z.projectionMatrix),j.multiply(Z.matrixWorldInverse),j.multiply(S.current.matrixWorld),C.setFromNormalAndCoplanarPoint(b,M),C.applyMatrix4(Z.matrixWorldInverse),R.set(C.normal.x,C.normal.y,C.normal.z,C.constant);const ne=Z.projectionMatrix;V.x=(Math.sign(R.x)+ne.elements[8])/ne.elements[0],V.y=(Math.sign(R.y)+ne.elements[9])/ne.elements[5],V.z=-1,V.w=(1+ne.elements[10])/ne.elements[14],R.multiplyScalar(2/R.dot(V)),ne.elements[2]=R.x,ne.elements[6]=R.y,ne.elements[10]=R.z+1,ne.elements[14]=R.w},[]),[$,X,Q,J]=E.useMemo(()=>{const ne={type:On,minFilter:Vt,magFilter:Vt},O=new Ln(n,n,ne);O.depthBuffer=!0,O.depthTexture=new hd(n,n),O.depthTexture.format=Zl,O.depthTexture.type=ic;const N=new Ln(n,n,ne),G=new TY({gl:m,resolution:n,width:i[0],height:i[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),H={mirror:c,textureMatrix:j,mixBlur:t,tDiffuse:O.texture,tDepth:O.depthTexture,tDiffuseBlur:N.texture,hasBlur:w,mixStrength:e,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,transparent:!0,debug:f,distortion:h,distortionMap:p,mixContrast:d,"defines-USE_BLUR":w?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0};return[O,N,G,H]},[m,i,j,n,c,w,t,e,s,o,a,l,f,h,p,d]);return Ct(()=>{if(!(S!=null&&S.current))return;S.current.visible=!1;const ne=m.xr.enabled,O=m.shadowMap.autoUpdate;U(),m.xr.enabled=!1,m.shadowMap.autoUpdate=!1,m.setRenderTarget($),m.state.buffers.depth.setMask(!0),m.autoClear||m.clear(),m.render(y,Z),w&&Q.render(m,$,X),m.xr.enabled=ne,m.shadowMap.autoUpdate=O,S.current.visible=!0,m.setRenderTarget(null)}),E.createElement("mesh",Te({ref:S},g),E.createElement("planeGeometry",{args:r}),u?u("meshReflectorMaterial",J):E.createElement("meshReflectorMaterial",J))});class r3e extends Fn{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new L(0,0,0)},lightColor:{value:new Je("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new Ie(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;
        uniform vec3 spotPosition;
        uniform float attenuation;

        #include <common>
        #include <logdepthbuf_pars_vertex>

        void main() {
          // compute intensity
          vNormal = normalize(normalMatrix * normal);
          vec4 worldPosition = modelMatrix * vec4(position, 1);
          vec4 viewPosition = viewMatrix * worldPosition;
          vViewZ = viewPosition.z;

          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);

          gl_Position = projectionMatrix * viewPosition;

          #include <logdepthbuf_vertex>
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;

        uniform vec3 lightColor;
        uniform float anglePower;
        uniform sampler2D depth;
        uniform vec2 resolution;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float opacity;

        #include <packing>
        #include <logdepthbuf_pars_fragment>

        float readDepth(sampler2D depthSampler, vec2 uv) {
          float fragCoordZ = texture(depthSampler, uv).r;

          // https://github.com/mrdoob/three.js/issues/23072
          #ifdef USE_LOGDEPTHBUF
            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));
          #else
            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
          #endif

          return viewZ;
        }

        void main() {
          #include <logdepthbuf_fragment>

          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));
          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);
          float intensity = vIntensity * angleIntensity;

          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
          if (isSoft) {
            vec2 uv = gl_FragCoord.xy / resolution;
            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));
          }

          gl_FragColor = vec4(lightColor, intensity * opacity);

          #include <tonemapping_fragment>
          #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}}var s3e=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const o3e=t=>t==null?void 0:t.isSpotLight;function a3e({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5}){const c=E.useRef(null),u=Fe(A=>A.size),f=Fe(A=>A.camera),h=Fe(A=>A.viewport.dpr),[d]=E.useState(()=>new r3e),[p]=E.useState(()=>new L);e=e===void 0?.1:e,n=n===void 0?o*7:n,Ct(()=>{d.uniforms.spotPosition.value.copy(c.current.getWorldPosition(p)),c.current.lookAt(c.current.parent.target.getWorldPosition(p))});const g=E.useMemo(()=>{const A=new Qr(e,n,s,128,64,!0);return A.applyMatrix4(new Ge().makeTranslation(0,-s/2,0)),A.applyMatrix4(new Ge().makeRotationX(-Math.PI/2)),A},[s,e,n]);return E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,geometry:g,raycast:()=>null},E.createElement("primitive",{object:d,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":r,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":i,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":i?[u.width*h,u.height*h]:[0,0]})))}function QY(t,e,n,i,r){const[[s,o]]=E.useState(()=>[new L,new L]);E.useLayoutEffect(()=>{if(o3e(t.current))t.current.shadow.mapSize.set(n,i),t.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[t,n,i]),Ct(()=>{if(!t.current)return;const a=t.current.position,l=t.current.target.position;o.copy(l).sub(a);var c=o.length();o.normalize().multiplyScalar(c*r),s.copy(a).add(o),e.current.position.copy(s),e.current.lookAt(t.current.target.position)})}function l3e({distance:t=.4,alphaTest:e=.5,map:n,shader:i=s3e,width:r=512,height:s=512,scale:o=1,children:a,...l}){const c=E.useRef(null),u=l.spotlightRef,f=l.debug;QY(u,c,r,s,t);const h=E.useMemo(()=>new Ln(r,s,{format:In,stencilBuffer:!1}),[r,s]),d=E.useRef({uShadowMap:{value:n},uTime:{value:0}});E.useEffect(()=>void(d.current.uShadowMap.value=n),[n]);const p=E.useMemo(()=>new Uc(new Fn({uniforms:d.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:i})),[i]);return E.useEffect(()=>()=>{p.material.dispose(),p.dispose()},[p]),E.useEffect(()=>()=>h.dispose(),[h]),Ct(({gl:g},A)=>{d.current.uTime.value+=A,g.setRenderTarget(h),p.render(g),g.setRenderTarget(null)}),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,scale:o,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:Qn,alphaTest:e,alphaMap:h.texture,"alphaMap-wrapS":qr,"alphaMap-wrapT":qr,opacity:f?1:0},a)))}function c3e({distance:t=.4,alphaTest:e=.5,map:n,width:i=512,height:r=512,scale:s,children:o,...a}){const l=E.useRef(null),c=a.spotlightRef,u=a.debug;return QY(c,l,i,r,t),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:l,scale:s,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:Qn,alphaTest:e,alphaMap:n,"alphaMap-wrapS":qr,"alphaMap-wrapT":qr,opacity:u?1:0},o)))}function u3e(t){return t.shader?E.createElement(l3e,t):E.createElement(c3e,t)}const f3e=E.forwardRef(({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,volumetric:c=!0,debug:u=!1,children:f,...h},d)=>{const p=E.useRef(null);return E.useImperativeHandle(d,()=>p.current,[]),E.createElement("group",null,u&&p.current&&E.createElement("spotLightHelper",{args:[p.current]}),E.createElement("spotLight",Te({ref:p,angle:o,color:r,distance:s,castShadow:!0},h),c&&E.createElement(a3e,{debug:u,opacity:t,radiusTop:e,radiusBottom:n,depthBuffer:i,color:r,distance:s,angle:o,attenuation:a,anglePower:l})),f&&E.cloneElement(f,{spotlightRef:p,debug:u}))}),h3e=E.forwardRef(({args:t,map:e,toneMapped:n=!1,color:i="white",form:r="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const f=E.useRef(null);return E.useImperativeHandle(u,()=>f.current,[]),E.useLayoutEffect(()=>{!l&&!c.material&&(yr(f.current.material,{color:i}),f.current.material.color.multiplyScalar(s))},[i,s,l,c.material]),E.useLayoutEffect(()=>{a&&f.current.lookAt(Array.isArray(a)?new L(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,E.createElement("mesh",Te({ref:f,scale:o},c),r==="circle"?E.createElement("ringGeometry",{args:[0,1,64]}):r==="ring"?E.createElement("ringGeometry",{args:[.5,1,64]}):r==="rect"?E.createElement("planeGeometry",null):E.createElement(r,{args:t}),l||(c.material?null:E.createElement("meshBasicMaterial",{toneMapped:n,map:e,side:Qn})))});function VY(t,e,n=new L){const i=Math.PI*(t-.5),r=2*Math.PI*(e-.5);return n.x=Math.cos(r),n.y=Math.sin(i),n.z=Math.sin(r),n}const d3e=E.forwardRef(({inclination:t=.6,azimuth:e=.1,distance:n=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=VY(t,e),...l},c)=>{const u=E.useMemo(()=>new L().setScalar(n),[n]),[f]=E.useState(()=>new NB);return E.createElement("primitive",Te({object:f,ref:c,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u},l))});class p3e extends Fn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const m3e=t=>new L().setFromSpherical(new ed(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),g3e=E.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=E.useRef(),[c,u,f]=E.useMemo(()=>{const d=[],p=[],g=Array.from({length:n},()=>(.5+.5*Math.random())*r),A=new Je;let m=t+e;const v=e/n;for(let y=0;y<n;y++)m-=v*Math.random(),d.push(...m3e(m).toArray()),A.setHSL(y/n,i,.9),p.push(A.r,A.g,A.b);return[new Float32Array(d),new Float32Array(p),new Float32Array(g)]},[n,e,r,t,i]);Ct(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[h]=E.useState(()=>new p3e);return E.createElement("points",{ref:a},E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),E.createElement("primitive",{ref:l,object:h,attach:"material",blending:L3,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});let f_;const A3e=new Uint8Array(16);function v3e(){if(!f_&&(f_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!f_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f_(A3e)}const rs=[];for(let t=0;t<256;++t)rs.push((t+256).toString(16).slice(1));function y3e(t,e=0){return rs[t[e+0]]+rs[t[e+1]]+rs[t[e+2]]+rs[t[e+3]]+"-"+rs[t[e+4]]+rs[t[e+5]]+"-"+rs[t[e+6]]+rs[t[e+7]]+"-"+rs[t[e+8]]+rs[t[e+9]]+"-"+rs[t[e+10]]+rs[t[e+11]]+rs[t[e+12]]+rs[t[e+13]]+rs[t[e+14]]+rs[t[e+15]]}const x3e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xU={randomUUID:x3e};function _3e(t,e,n){if(xU.randomUUID&&!e&&!t)return xU.randomUUID();t=t||{};const i=t.random||(t.rng||v3e)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,y3e(i)}const E3e="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",_U=new Ge,h_=new L,d_=new Tt,EU=new L,wU=new Tt,wg=new L,cR=E.createContext(null),WY=E.forwardRef(({children:t,material:e=Gv,texture:n=E3e,range:i,limit:r=200,frustumCulled:s,...o},a)=>{var l,c;const u=E.useMemo(()=>class extends e{constructor(){super();const M=parseInt(yl.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=I=>{I.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+I.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),I.fragmentShader=`varying float vOpacity;
              `+I.fragmentShader.replace(`#include <${M}>`,`#include <${M}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[e]);ui({CloudMaterial:u});const f=E.useRef(null),h=E.useRef([]),d=E.useMemo(()=>new Float32Array(Array.from({length:r},()=>1)),[r]),p=E.useMemo(()=>new Float32Array(Array.from({length:r},()=>[1,1,1]).flat()),[r]),g=Of(n);let A=0,m=0,v;const y=new Tt,w=new L(0,0,1),S=new L;Ct((M,I)=>{for(A=M.clock.getElapsedTime(),_U.copy(f.current.matrixWorld).invert(),M.camera.matrixWorld.decompose(EU,wU,wg),m=0;m<h.current.length;m++)v=h.current[m],v.ref.current.matrixWorld.decompose(h_,d_,wg),h_.add(S.copy(v.position).applyQuaternion(d_).multiply(wg)),d_.copy(wU).multiply(y.setFromAxisAngle(w,v.rotation+=I*v.rotationFactor)),wg.multiplyScalar(v.volume+(1+Math.sin(A*v.density*v.speed))/2*v.growth),v.matrix.compose(h_,d_,wg).premultiply(_U),v.dist=h_.distanceTo(EU);for(h.current.sort((T,D)=>D.dist-T.dist),m=0;m<h.current.length;m++)v=h.current[m],d[m]=v.opacity*(v.dist<v.fade-1?v.dist/v.fade:1),f.current.setMatrixAt(m,v.matrix),f.current.setColorAt(m,v.color);f.current.geometry.attributes.opacity.needsUpdate=!0,f.current.instanceMatrix.needsUpdate=!0,f.current.instanceColor&&(f.current.instanceColor.needsUpdate=!0)}),E.useLayoutEffect(()=>{const M=Math.min(r,i!==void 0?i:r,h.current.length);f.current.count=M,yA(f.current.instanceMatrix,{offset:0,count:M*16}),f.current.instanceColor&&yA(f.current.instanceColor,{offset:0,count:M*3}),yA(f.current.geometry.attributes.opacity,{offset:0,count:M})});let C=[(l=g.image.width)!==null&&l!==void 0?l:1,(c=g.image.height)!==null&&c!==void 0?c:1],b=Math.max(C[0],C[1]);return C=[C[0]/b,C[1]/b],E.createElement("group",Te({ref:a},o),E.createElement(cR.Provider,{value:h},t,E.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:f,args:[null,null,r],frustumCulled:s},E.createElement("instancedBufferAttribute",{usage:ws,attach:"instanceColor",args:[p,3]}),E.createElement("planeGeometry",{args:[...C]},E.createElement("instancedBufferAttribute",{usage:ws,attach:"attributes-opacity",args:[d,1]})),E.createElement("cloudMaterial",{key:e.name,map:g,transparent:!0,depthWrite:!1}))))}),XI=E.forwardRef(({opacity:t=1,speed:e=0,bounds:n=[5,1,1],segments:i=20,color:r="#ffffff",fade:s=10,volume:o=6,smallestVolume:a=.25,distribute:l=null,growth:c=4,concentrate:u="inside",seed:f=Math.random(),...h},d)=>{function p(){const y=Math.sin(f++)*1e4;return y-Math.floor(y)}const g=E.useContext(cR),A=E.useRef(null),[m]=E.useState(()=>_3e()),v=E.useMemo(()=>[...new Array(i)].map((y,w)=>({segments:i,bounds:new L(1,1,1),position:new L,uuid:m,index:w,ref:A,dist:0,matrix:new Ge,color:new Je,rotation:w*(Math.PI/i)})),[i,m]);return E.useLayoutEffect(()=>{v.forEach((y,w)=>{var S;yr(y,{volume:o,color:r,speed:e,growth:c,opacity:t,fade:s,bounds:n,density:Math.max(.5,p()),rotationFactor:Math.max(.2,.5*p())*e});const C=l==null?void 0:l(y,w);(C||i>1)&&y.position.copy(y.bounds).multiply((S=C==null?void 0:C.point)!==null&&S!==void 0?S:{x:p()*2-1,y:p()*2-1,z:p()*2-1});const b=Math.abs(y.position.x),M=Math.abs(y.position.y),I=Math.abs(y.position.z),T=Math.max(b,M,I);y.length=1,b===T&&(y.length-=b/y.bounds.x),M===T&&(y.length-=M/y.bounds.y),I===T&&(y.length-=I/y.bounds.z),y.volume=((C==null?void 0:C.volume)!==void 0?C.volume:Math.max(Math.max(0,a),u==="random"?p():u==="inside"?y.length:1-y.length))*o})},[u,n,s,r,t,c,o,f,i,e]),E.useLayoutEffect(()=>{const y=v;return g.current=[...g.current,...y],()=>{g.current=g.current.filter(w=>w.uuid!==m)}},[v]),E.useImperativeHandle(d,()=>A.current,[]),E.createElement("group",Te({ref:A},h))}),w3e=E.forwardRef((t,e)=>E.useContext(cR)?E.createElement(XI,Te({ref:e},t)):E.createElement(WY,null,E.createElement(XI,Te({ref:e},t)))),S3e=Vo({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),jY=t=>t&&t.constructor===Float32Array,C3e=t=>[t.r,t.g,t.b],XY=t=>t instanceof Ie||t instanceof L||t instanceof Jt,YY=t=>Array.isArray(t)?t:XY(t)?t.toArray():[t,t,t];function Sg(t,e,n){return E.useMemo(()=>{if(e!==void 0){if(jY(e))return e;if(e instanceof Je){const i=Array.from({length:t*3},()=>C3e(e)).flat();return Float32Array.from(i)}else if(XY(e)||Array.isArray(e)){const i=Array.from({length:t*3},()=>YY(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:t},()=>e)}return Float32Array.from({length:t},n)},[e])}const b3e=E.forwardRef(({noise:t=1,count:e=100,speed:n=1,opacity:i=1,scale:r=1,size:s,color:o,children:a,...l},c)=>{E.useMemo(()=>ui({SparklesImplMaterial:S3e}),[]);const u=E.useRef(null),f=Fe(y=>y.viewport.dpr),h=YY(r),d=E.useMemo(()=>Float32Array.from(Array.from({length:e},()=>h.map(zt.randFloatSpread)).flat()),[e,...h]),p=Sg(e,s,Math.random),g=Sg(e,i),A=Sg(e,n),m=Sg(e*3,t),v=Sg(o===void 0?e*3:e,jY(o)?o:new Je(o),()=>1);return Ct(y=>{u.current&&u.current.material&&(u.current.material.time=y.clock.elapsedTime)}),E.useImperativeHandle(c,()=>u.current,[]),E.createElement("points",Te({key:`particle-${e}-${JSON.stringify(r)}`},l,{ref:u}),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[p,1]}),E.createElement("bufferAttribute",{attach:"attributes-opacity",args:[g,1]}),E.createElement("bufferAttribute",{attach:"attributes-speed",args:[A,1]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[v,3]}),E.createElement("bufferAttribute",{attach:"attributes-noise",args:[m,3]})),a||E.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))});function M3e(t){switch(t){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const T3e="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",I3e="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function qY(t=0,e=1024,n){const i=su(()=>fetch(T3e).then(u=>u.json()),["matcapList"]),r=i[0],s=E.useMemo(()=>Object.keys(i).length,[]),a=`${E.useMemo(()=>typeof t=="string"?t:typeof t=="number"?i[t]:null,[t])||r}${M3e(e)}.png`,l=`${I3e}/${e}/${a}`;return[Of(l,n),l,s]}const B3e=({children:t,id:e,format:n,onLoad:i})=>{const r=qY(e,n,i);return E.createElement(E.Fragment,null,t==null?void 0:t(r))},R3e="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",P3e="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function $Y(t=0,e={},n){const{repeat:i=[1,1],anisotropy:r=1,offset:s=[0,0]}=e,o=su(()=>fetch(P3e).then(h=>h.json()),["normalsList"]),a=E.useMemo(()=>Object.keys(o).length,[]),l=o[0],c=o[t]||l,u=`${R3e}/normals/${c}`,f=Of(u,n);return E.useLayoutEffect(()=>{f&&(f.wrapS=f.wrapT=qr,f.repeat=new Ie(i[0],i[1]),f.offset=new Ie(s[0],s[1]),f.anisotropy=r)},[f,r,i,s]),[f,u,a]}const D3e=({children:t,id:e,onLoad:n,...i})=>{const r=$Y(e,i,n);return E.createElement(E.Fragment,null,t==null?void 0:t(r))},pf={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new Je("#ff0000"),backfaceStroke:new Je("#0000ff"),fill:new Je("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},L3e=Vo(pf.uniforms,pf.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,pf.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function F3e(t,e){t.onBeforeCompile=n=>{n.uniforms={...n.uniforms,...e},n.vertexShader=n.vertexShader.replace("void main() {",`
		  ${pf.vertex}
		  void main() {
			initWireframe();
		`),n.fragmentShader=n.fragmentShader.replace("void main() {",`
		  ${pf.fragment}
		  void main() {
		`),n.fragmentShader=n.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},t.side=Qn,t.transparent=!0}function O3e(t,e){E.useEffect(()=>{var n;return void(t.fillOpacity.value=(n=e.fillOpacity)!==null&&n!==void 0?n:t.fillOpacity.value)},[e.fillOpacity]),E.useEffect(()=>{var n;return void(t.fillMix.value=(n=e.fillMix)!==null&&n!==void 0?n:t.fillMix.value)},[e.fillMix]),E.useEffect(()=>{var n;return void(t.strokeOpacity.value=(n=e.strokeOpacity)!==null&&n!==void 0?n:t.strokeOpacity.value)},[e.strokeOpacity]),E.useEffect(()=>{var n;return void(t.thickness.value=(n=e.thickness)!==null&&n!==void 0?n:t.thickness.value)},[e.thickness]),E.useEffect(()=>void(t.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),E.useEffect(()=>void(t.dash.value=!!e.dash),[e.dash]),E.useEffect(()=>void(t.dashInvert.value=!!e.dashInvert),[e.dashInvert]),E.useEffect(()=>{var n;return void(t.dashRepeats.value=(n=e.dashRepeats)!==null&&n!==void 0?n:t.dashRepeats.value)},[e.dashRepeats]),E.useEffect(()=>{var n;return void(t.dashLength.value=(n=e.dashLength)!==null&&n!==void 0?n:t.dashLength.value)},[e.dashLength]),E.useEffect(()=>void(t.squeeze.value=!!e.squeeze),[e.squeeze]),E.useEffect(()=>{var n;return void(t.squeezeMin.value=(n=e.squeezeMin)!==null&&n!==void 0?n:t.squeezeMin.value)},[e.squeezeMin]),E.useEffect(()=>{var n;return void(t.squeezeMax.value=(n=e.squeezeMax)!==null&&n!==void 0?n:t.squeezeMax.value)},[e.squeezeMax]),E.useEffect(()=>void(t.stroke.value=e.stroke?new Je(e.stroke):t.stroke.value),[e.stroke]),E.useEffect(()=>void(t.fill.value=e.fill?new Je(e.fill):t.fill.value),[e.fill]),E.useEffect(()=>void(t.backfaceStroke.value=e.backfaceStroke?new Je(e.backfaceStroke):t.backfaceStroke.value),[e.backfaceStroke])}function z3e(t){return!!(t!=null&&t.geometry)}function U3e(t){return!!(t!=null&&t.isBufferGeometry)}function k3e(t){return!!(t!=null&&t.current)}function SU(t){return(t==null?void 0:t.current)!==void 0}function CU(t){return t.type==="WireframeGeometry"}function N3e(){const t={};for(const e in pf.uniforms)t[e]={value:pf.uniforms[e]};return t}function G3e(t,e){const i=t.getAttribute("position").count,r=[];for(let s=0;s<i;s++){const o=s%2===0,a=e?1:0;o?r.push(0,0,1,0,1,0,1,0,a):r.push(0,1,0,0,0,1,1,0,a)}return new Gt(Float32Array.from(r),3)}function KY(t){const e=k3e(t)?t.current:t;if(U3e(e))return e;{if(CU(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const n=e.parent;if(z3e(n)){if(CU(n.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return n.geometry}}}function JY(t,e){if(t.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const i=t.toNonIndexed();t.copy(i),t.setIndex(null)}const n=G3e(t,e);t.setAttribute("barycentric",n)}function H3e({geometry:t,simplify:e=!1,...n}){ui({MeshWireframeMaterial:L3e});const[i,r]=E.useState(null);E.useLayoutEffect(()=>{const o=KY(t);if(!o)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");JY(o,e),SU(t)&&r(o)},[e,t]);const s=SU(t)?i:t;return E.createElement(E.Fragment,null,s&&E.createElement("mesh",{geometry:s},E.createElement("meshWireframeMaterial",Te({attach:"material",transparent:!0,side:Qn,polygonOffset:!0,polygonOffsetFactor:-4},n,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function Q3e({simplify:t=!1,...e}){const n=E.useRef(null),i=E.useMemo(()=>N3e(),[pf.uniforms]);return O3e(i,e),E.useLayoutEffect(()=>{const r=KY(n);if(!r)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=r.clone();return JY(r,t),()=>{r.copy(s),s.dispose()}},[t]),E.useLayoutEffect(()=>{const r=n.current.parent,s=r.material.clone();return F3e(r.material,i),()=>{r.material.dispose(),r.material=s}},[]),E.createElement("object3D",{ref:n})}function V3e({geometry:t,...e}){return t?E.createElement(H3e,Te({geometry:t},e)):E.createElement(Q3e,e)}function W3e({opacity:t,alphaMap:e}){const n=E.useRef(null),i=E.useRef(null),r=E.useRef({value:1}),s=E.useRef({value:null}),o=E.useRef({value:!1});return E.useLayoutEffect(()=>{n.current.onBeforeCompile=i.current.onBeforeCompile=a=>{const l=a.fragmentShader.indexOf("void main");let c="",u,f=l;for(;u!==`
`&&f<l+100;)u=a.fragmentShader.charAt(f),c+=u,f++;c=c.trim(),a.vertexShader=a.vertexShader.replace("void main() {",`
        varying vec2 custom_vUv;

        void main() {
          custom_vUv = uv;
          
        `),a.fragmentShader=a.fragmentShader.replace(c,`
          uniform float uShadowOpacity;
          uniform sampler2D uAlphaMap;
          uniform bool uHasAlphaMap;

          varying vec2 custom_vUv;
  
          float bayerDither2x2( vec2 v ) {
            return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );
          }
    
          float bayerDither4x4( vec2 v ) {
            vec2 P1 = mod( v, 2.0 );
            vec2 P2 = mod( floor( 0.5  * v ), 2.0 );
            return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );
          }
  
          void main() {
            float alpha = 
              uHasAlphaMap ? 
                uShadowOpacity * texture2D(uAlphaMap, custom_vUv).x
              : uShadowOpacity;

            if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;
            
          `),a.uniforms.uShadowOpacity=r.current,a.uniforms.uAlphaMap=s.current,a.uniforms.uHasAlphaMap=o.current}},[]),Ct(()=>{var a;const l=(a=n.current.__r3f)==null?void 0:a.parent;if(l){const c=l.material;c&&(r.current.value=t??c.opacity,e===!1?(s.current.value=null,o.current.value=!1):(s.current.value=e||c.alphaMap,o.current.value=!!s.current.value))}}),E.createElement(E.Fragment,null,E.createElement("meshDepthMaterial",{ref:n,attach:"customDepthMaterial",depthPacking:aw}),E.createElement("meshDistanceMaterial",{ref:i,attach:"customDistanceMaterial"}))}const bU=new Ge,n5=new Da,MU=new $n,j3e=new L;class ZY extends uo{constructor(){super(),this.size=0,this.color=new Je("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){var i,r;const s=this.instance.current;if(!s||!s.geometry)return;const o=s.userData.instances.indexOf(this.instanceKey);if(o===-1||o>s.geometry.drawRange.count)return;const a=(i=(r=e.params.Points)==null?void 0:r.threshold)!==null&&i!==void 0?i:1;if(MU.set(this.getWorldPosition(j3e),a),e.ray.intersectsSphere(MU)===!1)return;bU.copy(s.matrixWorld).invert(),n5.copy(e.ray).applyMatrix4(bU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=n5.distanceSqToPoint(this.position);if(u<c){const f=new L;n5.closestPointToPoint(this.position,f),f.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(f);if(h<e.near||h>e.far)return;n.push({distance:h,distanceToRay:Math.sqrt(u),point:f,index:o,face:null,object:this})}}}let yh,Cg;const eq=E.createContext(null),TU=new Ge,IU=new L,X3e=E.forwardRef(({children:t,range:e,limit:n=1e3,...i},r)=>{const s=E.useRef(null);E.useImperativeHandle(r,()=>s.current,[]);const[o,a]=E.useState([]),[[l,c,u]]=E.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);E.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Ct(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),TU.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),yh=0;yh<o.length;yh++)Cg=o[yh].current,Cg.getWorldPosition(IU).applyMatrix4(TU),IU.toArray(l,yh*3),s.current.geometry.attributes.position.needsUpdate=!0,Cg.matrixWorldNeedsUpdate=!0,Cg.color.toArray(c,yh*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([Cg.size],yh),s.current.geometry.attributes.size.needsUpdate=!0});const f=E.useMemo(()=>({getParent:()=>s,subscribe:h=>(a(d=>[...d,h]),()=>a(d=>d.filter(p=>p.current!==h.current)))}),[]);return E.createElement("points",Te({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:ws}),E.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:ws}),E.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:ws})),E.createElement(eq.Provider,{value:f},t))}),Y3e=E.forwardRef(({children:t,...e},n)=>{E.useMemo(()=>ui({PositionPoint:ZY}),[]);const i=E.useRef(null);E.useImperativeHandle(n,()=>i.current,[]);const{subscribe:r,getParent:s}=E.useContext(eq);return E.useLayoutEffect(()=>r(i),[]),E.createElement("positionPoint",Te({instance:s(),instanceKey:i,ref:i},e),t)}),tq=E.forwardRef(({children:t,positions:e,colors:n,sizes:i,stride:r=3,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current,[]),Ct(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),E.createElement("points",Te({ref:a},s),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:ws}),n&&E.createElement("bufferAttribute",{attach:"attributes-color",count:n.length/r,array:n,itemSize:3,usage:ws}),i&&E.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:ws})),t)}),q3e=E.forwardRef((t,e)=>t.positions instanceof Float32Array?E.createElement(tq,Te({},t,{ref:e})):E.createElement(X3e,Te({},t,{ref:e}))),nq=E.createContext(null),$3e=E.forwardRef((t,e)=>{E.useMemo(()=>ui({SegmentObject:iq}),[]);const{limit:n=1e3,lineWidth:i=1,children:r,...s}=t,[o,a]=E.useState([]),[l]=E.useState(()=>new EX),[c]=E.useState(()=>new uS),[u]=E.useState(()=>new cS),[f]=E.useState(()=>new Ie(512,512)),[h]=E.useState(()=>Array(n*6).fill(0)),[d]=E.useState(()=>Array(n*6).fill(0)),p=E.useMemo(()=>({subscribe:g=>(a(A=>[...A,g]),()=>a(A=>A.filter(m=>m.current!==g.current)))}),[]);return Ct(()=>{for(let A=0;A<n;A++){var g;const m=(g=o[A])==null?void 0:g.current;m&&(h[A*6+0]=m.start.x,h[A*6+1]=m.start.y,h[A*6+2]=m.start.z,h[A*6+3]=m.end.x,h[A*6+4]=m.end.y,h[A*6+5]=m.end.z,d[A*6+0]=m.color.r,d[A*6+1]=m.color.g,d[A*6+2]=m.color.b,d[A*6+3]=m.color.r,d[A*6+4]=m.color.g,d[A*6+5]=m.color.b)}u.setColors(d),u.setPositions(h),l.computeLineDistances()}),E.createElement("primitive",{object:l,ref:e},E.createElement("primitive",{object:u,attach:"geometry"}),E.createElement("primitive",Te({object:c,attach:"material",vertexColors:!0,resolution:f,linewidth:i},s)),E.createElement(nq.Provider,{value:p},r))});class iq{constructor(){this.color=new Je("white"),this.start=new L(0,0,0),this.end=new L(0,0,0)}}const BU=t=>t instanceof L?t:new L(...typeof t=="number"?[t,t,t]:t),K3e=E.forwardRef(({color:t,start:e,end:n},i)=>{const r=E.useContext(nq);if(!r)throw"Segment must used inside Segments component.";const s=E.useRef(null);return E.useImperativeHandle(i,()=>s.current,[]),E.useLayoutEffect(()=>r.subscribe(s),[]),E.createElement("segmentObject",{ref:s,color:t,start:BU(e),end:BU(n)})}),J3e=E.forwardRef(({children:t,hysteresis:e=0,distances:n,...i},r)=>{const s=E.useRef(null);return E.useImperativeHandle(r,()=>s.current,[]),E.useLayoutEffect(()=>{const{current:o}=s;o.levels.length=0,o.children.forEach((a,l)=>o.levels.push({object:a,hysteresis:e,distance:n[l]}))}),Ct(o=>{var a;return(a=s.current)==null?void 0:a.update(o.camera)}),E.createElement("lOD",Te({ref:s},i),t)});function Z3e({all:t,scene:e,camera:n}){const i=Fe(({gl:o})=>o),r=Fe(({camera:o})=>o),s=Fe(({scene:o})=>o);return E.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,n||r);const a=new E0(128);new fw(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function eEe(){const t=Fe(e=>e.gl);return E.useEffect(()=>(t.shadowMap.autoUpdate=!1,t.shadowMap.needsUpdate=!0,()=>{t.shadowMap.autoUpdate=t.shadowMap.needsUpdate=!0}),[t.shadowMap]),null}const RU=new Ge,PU=new Da,i5=new $n,r5=new L;function tEe(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),i5.copy(n.boundingSphere),i5.applyMatrix4(r),t.ray.intersectsSphere(i5)!==!1&&(RU.copy(r).invert(),PU.copy(t.ray).applyMatrix4(RU),!(n.boundingBox!==null&&PU.intersectBox(n.boundingBox,r5)===null)&&e.push({distance:r5.distanceTo(t.ray.origin),point:r5.clone(),object:this})))}function nEe({pixelated:t}){const e=Fe(o=>o.gl),n=Fe(o=>o.internal.active),i=Fe(o=>o.performance.current),r=Fe(o=>o.viewport.initialDpr),s=Fe(o=>o.setDpr);return E.useEffect(()=>{const o=e.domElement;return()=>{n&&s(r),t&&o&&(o.style.imageRendering="auto")}},[]),E.useEffect(()=>{s(i*r),t&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function iEe(){const t=Fe(i=>i.get),e=Fe(i=>i.setEvents),n=Fe(i=>i.performance.current);return E.useEffect(()=>{const i=t().events.enabled;return()=>e({enabled:i})},[]),E.useEffect(()=>e({enabled:n===1}),[n]),null}const rq=E.createContext(null);function rEe({iterations:t=10,ms:e=250,threshold:n=.75,step:i=.1,factor:r=.5,flipflops:s=1/0,bounds:o=h=>h>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:f}){const h=Math.pow(10,0),[d,p]=E.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:A=>{const m=Symbol();return d.subscriptions.set(m,A.current),()=>void d.subscriptions.delete(m)}}));let g=0;return Ct(()=>{const{frames:A,averages:m}=d;if(!d.fallback&&m.length<t){A.push(performance.now());const v=A[A.length-1]-A[0];if(v>=e){if(d.fps=Math.round(A.length/v*1e3*h)/h,d.refreshrate=Math.max(d.refreshrate,d.fps),m[d.index++%t]=d.fps,m.length===t){const[y,w]=o(d.refreshrate),S=m.filter(b=>b>=w),C=m.filter(b=>b<y);S.length>t*n&&(d.factor=Math.min(1,d.factor+i),d.flipped++,a&&a(d),d.subscriptions.forEach(b=>b.onIncline&&b.onIncline(d))),C.length>t*n&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(b=>b.onDecline&&b.onDecline(d))),g!==d.factor&&(g=d.factor,c&&c(d),d.subscriptions.forEach(b=>b.onChange&&b.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(b=>b.onFallback&&b.onFallback(d))),d.averages=[]}d.frames=[]}}}),E.createElement(rq.Provider,{value:d},f)}function sEe({onIncline:t,onDecline:e,onChange:n,onFallback:i}){const r=E.useContext(rq),s=E.useRef({onIncline:t,onDecline:e,onChange:n,onFallback:i});E.useLayoutEffect(()=>{s.current.onIncline=t,s.current.onDecline=e,s.current.onChange=n,s.current.onFallback=i},[t,e,n,i]),E.useLayoutEffect(()=>r.subscribe(s),[r])}const sq=E.forwardRef(({children:t,compute:e,width:n,height:i,samples:r=8,renderPriority:s=0,eventPriority:o=0,frames:a=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...f},h)=>{const{size:d,viewport:p}=Fe(),g=Vs((n||d.width)*p.dpr,(i||d.height)*p.dpr,{samples:r,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[A]=E.useState(()=>new Go),m=E.useCallback((v,y,w)=>{var S,C;let b=(S=g.texture)==null?void 0:S.__r3f.parent;for(;b&&!(b instanceof Ht);)b=b.__r3f.parent;if(!b)return!1;w.raycaster.camera||w.events.compute(v,w,(C=w.previousRoot)==null?void 0:C.getState());const[M]=w.raycaster.intersectObject(b);if(!M)return!1;const I=M.uv;if(!I)return!1;y.raycaster.setFromCamera(y.pointer.set(I.x*2-1,I.y*2-1),y.camera)},[]);return E.useImperativeHandle(h,()=>g.texture,[g]),E.createElement(E.Fragment,null,ou(E.createElement(oEe,{renderPriority:s,frames:a,fbo:g},t,E.createElement("group",{onPointerOver:()=>null})),A,{events:{compute:e||m,priority:o}}),E.createElement("primitive",Te({object:g.texture},f)))});function oEe({frames:t,renderPriority:e,children:n,fbo:i}){let r=0,s,o,a,l;return Ct(c=>{(t===1/0||r<t)&&(s=c.gl.autoClear,o=c.gl.xr.enabled,a=c.gl.getRenderTarget(),l=c.gl.xr.isPresenting,c.gl.autoClear=!0,c.gl.xr.enabled=!1,c.gl.xr.isPresenting=!1,c.gl.setRenderTarget(i),c.gl.render(c.scene,c.camera),c.gl.setRenderTarget(a),c.gl.autoClear=s,c.gl.xr.enabled=o,c.gl.xr.isPresenting=l,r++)},e),E.createElement(E.Fragment,null,n)}const oq=E.forwardRef(({children:t,compute:e,renderPriority:n=-1,eventPriority:i=0,frames:r=1/0,stencilBuffer:s=!1,depthBuffer:o=!0,generateMipmaps:a=!1,resolution:l=896,near:c=.1,far:u=1e3,flip:f=!1,position:h,rotation:d,scale:p,quaternion:g,matrix:A,matrixAutoUpdate:m,...v},y)=>{const{size:w,viewport:S}=Fe(),C=E.useRef(null),b=E.useMemo(()=>{const I=new E0(Math.max((l||w.width)*S.dpr,(l||w.height)*S.dpr),{stencilBuffer:s,depthBuffer:o,generateMipmaps:a});return I.texture.isRenderTargetTexture=!f,I.texture.flipY=!0,I.texture.type=On,I},[l,f]);E.useEffect(()=>()=>b.dispose(),[b]);const[M]=E.useState(()=>new Go);return E.useImperativeHandle(y,()=>({scene:M,fbo:b,camera:C.current}),[b]),E.createElement(E.Fragment,null,ou(E.createElement(aEe,{renderPriority:n,frames:r,camera:C},t,E.createElement("group",{onPointerOver:()=>null})),M,{events:{compute:e,priority:i}}),E.createElement("primitive",Te({object:b.texture},v)),E.createElement("cubeCamera",{ref:C,args:[c,u,b],position:h,rotation:d,scale:p,quaternion:g,matrix:A,matrixAutoUpdate:m}))});function aEe({frames:t,renderPriority:e,children:n,camera:i}){let r=0;return Ct(s=>{(t===1/0||r<t)&&(i.current.update(s.gl,s.scene),r++)},e),E.createElement(E.Fragment,null,n)}const lEe=E.forwardRef(({id:t=1,colorWrite:e=!1,depthWrite:n=!1,...i},r)=>{const s=E.useRef(null),o=E.useMemo(()=>({colorWrite:e,depthWrite:n,stencilWrite:!0,stencilRef:t,stencilFunc:nE,stencilFail:k_,stencilZFail:k_,stencilZPass:k_}),[t,e,n]);return E.useLayoutEffect(()=>{Object.assign(s.current.material,o)}),E.useImperativeHandle(r,()=>s.current,[]),E.createElement("mesh",Te({ref:s,renderOrder:-t},i))});function cEe(t,e=!1){return{stencilWrite:!0,stencilRef:t,stencilFunc:e?fQ:uQ,stencilFail:Hl,stencilZFail:Hl,stencilZPass:Hl}}function uEe({renderPriority:t=1,zoom:e=0,segments:n=64,children:i,resolution:r=896,...s}){const o=E.useRef(null),a=E.useRef(null),{width:l,height:c}=Fe(A=>A.size),[u]=E.useState(()=>new Hn);E.useLayoutEffect(()=>{u.position.set(0,0,100),u.zoom=100,u.left=l/-2,u.right=l/2,u.top=c/2,u.bottom=c/-2,u.updateProjectionMatrix()},[l,c]);const f=Math.sqrt(l*l+c*c)/100*(.5+e/2),h=new L,d=new $n(new L,f),p=new jt,g=E.useCallback((A,m,v)=>{if(m.pointer.set(A.offsetX/m.size.width*2-1,-(A.offsetY/m.size.height)*2+1),m.raycaster.setFromCamera(m.pointer,u),m.raycaster.ray.intersectSphere(d,h))h.normalize();else return;p.getNormalMatrix(a.current.camera.matrixWorld),a.current.camera.getWorldPosition(m.raycaster.ray.origin),m.raycaster.ray.direction.set(0,0,1).reflect(h),m.raycaster.ray.direction.x*=-1,m.raycaster.ray.direction.applyNormalMatrix(p).multiplyScalar(-1)},[]);return Ct(A=>{t&&A.gl.render(o.current,u)},t),E.createElement(E.Fragment,null,E.createElement("mesh",Te({ref:o},s,{scale:f}),E.createElement("sphereGeometry",{args:[1,n,n]}),E.createElement("meshBasicMaterial",null,E.createElement(oq,{compute:g,attach:"envMap",flip:!0,resolution:r,ref:a},i,E.createElement(fEe,{api:a})))))}function fEe({api:t}){const e=new L,n=new Tt,i=new L,r=new gi(0,Math.PI,0);return Ct(s=>{s.camera.matrixWorld.decompose(e,n,i),t.current.camera.position.copy(e),t.current.camera.quaternion.setFromEuler(r).premultiply(n)}),null}const hEe=Vo({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new Ie},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),dEe=E.forwardRef(({children:t,events:e=void 0,blur:n=0,eventPriority:i=0,renderPriority:r=0,worldUnits:s=!1,resolution:o=512,...a},l)=>{ui({PortalMaterialImpl:hEe});const c=E.useRef(null),{scene:u,gl:f,size:h,viewport:d,setEvents:p}=Fe(),g=Vs(o,o),[A,m]=E.useState(0);Ct(()=>{const C=c.current.blend>0?Math.max(1,r):0;A!==C&&m(C)}),E.useEffect(()=>{e!==void 0&&p({enabled:!e})},[e]);const[v,y]=E.useState(!0),w=yY(y);E.useLayoutEffect(()=>{var C;w.current=(C=c.current)==null?void 0:C.__r3f.parent},[]),E.useLayoutEffect(()=>{if(w.current&&n&&c.current.sdf===null){const C=new ut(w.current.geometry,new Br),b=new xn().setFromBufferAttribute(C.geometry.attributes.position),M=new Hn(b.min.x*(1+2/o),b.max.x*(1+2/o),b.max.y*(1+2/o),b.min.y*(1+2/o),.1,1e3);M.position.set(0,0,1),M.lookAt(0,0,0),f.setRenderTarget(g),f.render(C,M);const T=mEe(o,o,f)(g.texture),D=new Float32Array(o*o);f.readRenderTargetPixels(T,0,0,o,o,D);let R=1/0;for(let z=0;z<D.length;z++)D[z]<R&&(R=D[z]);R=-R,c.current.size=R,c.current.sdf=T.texture,f.setRenderTarget(null)}},[o,n]),E.useImperativeHandle(l,()=>c.current);const S=E.useCallback((C,b,M)=>{var I;if(!w.current)return!1;if(b.pointer.set(C.offsetX/b.size.width*2-1,-(C.offsetY/b.size.height)*2+1),b.raycaster.setFromCamera(b.pointer,b.camera),((I=c.current)==null?void 0:I.blend)===0){const[T]=b.raycaster.intersectObject(w.current);if(!T)return b.raycaster.camera=void 0,!1}},[]);return E.createElement("portalMaterialImpl",Te({ref:c,blur:n,blend:0,resolution:[h.width*d.dpr,h.height*d.dpr],attach:"material"},a),E.createElement(sq,{attach:"map",frames:v?1/0:0,eventPriority:i,renderPriority:r,compute:S},t,E.createElement(pEe,{events:e,rootScene:u,priority:A,material:c,worldUnits:s})))});function pEe({events:t=void 0,rootScene:e,material:n,priority:i,worldUnits:r}){const s=Fe(f=>f.scene),o=Fe(f=>f.setEvents),a=Vs(),l=Vs();E.useLayoutEffect(()=>{s.matrixAutoUpdate=!1},[]),E.useEffect(()=>{t!==void 0&&o({enabled:t})},[t]);const[c,u]=E.useMemo(()=>{const f={value:0};return[new Uc(new Fn({uniforms:{a:{value:a.texture},b:{value:l.texture},blend:f},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${$s>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),f]},[]);return Ct(f=>{var h;let d=n==null||(h=n.current)==null?void 0:h.__r3f.parent;if(d){if(r)s.matrixWorld.identity();else{var p;i&&((p=n.current)==null?void 0:p.blend)===1&&d.updateWorldMatrix(!0,!1),s.matrixWorld.copy(d.matrixWorld)}if(i){var g,A,m;((g=n.current)==null?void 0:g.blend)>0&&((A=n.current)==null?void 0:A.blend)<1?(u.value=n.current.blend,f.gl.setRenderTarget(a),f.gl.render(s,f.camera),f.gl.setRenderTarget(l),f.gl.render(e,f.camera),f.gl.setRenderTarget(null),c.render(f.gl)):((m=n.current)==null?void 0:m.blend)===1&&f.gl.render(s,f.camera)}}},i),E.createElement(E.Fragment,null)}const mEe=(t,e,n)=>{let i=new Ln(t,e,{minFilter:Qs,magFilter:Vt,type:vn,format:co,generateMipmaps:!0}),r=new Ln(t,e,{minFilter:fn,magFilter:fn}),s=new Ln(t,e,{minFilter:fn,magFilter:fn}),o=new Ln(t,e,{minFilter:fn,magFilter:fn}),a=new Ln(t,e,{minFilter:fn,magFilter:fn}),l=new Ln(t,e,{minFilter:fn,magFilter:fn,type:vn,format:co}),c=new Ln(t,e,{minFilter:fn,magFilter:fn,type:vn,format:co});const u=new Uc(new Fn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),f=new Uc(new Fn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),h=new Uc(new Fn({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/t}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),d=new Uc(new Fn({uniforms:{tex:{value:null},size:{value:new Ie(t,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),p=new Uc(new Fn({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return g=>{let A=i;g.minFilter=fn,g.magFilter=fn,u.material.uniforms.tex.value=g,n.setRenderTarget(r),u.render(n);const m=Math.ceil(Math.log(Math.max(t,e))/Math.log(2));let v=r,y=null;for(let w=0;w<m;w++){const S=Math.pow(2,m-w-1);y=v===r?o:r,h.material.uniforms.level.value=w,h.material.uniforms.maxSteps.value=m,h.material.uniforms.offset.value=S,h.material.uniforms.tex.value=v.texture,n.setRenderTarget(y),h.render(n),v=y}n.setRenderTarget(l),d.material.uniforms.tex.value=y.texture,d.render(n),f.material.uniforms.tex.value=g,n.setRenderTarget(s),f.render(n),v=s;for(let w=0;w<m;w++){const S=Math.pow(2,m-w-1);y=v===s?a:s,h.material.uniforms.level.value=w,h.material.uniforms.maxSteps.value=m,h.material.uniforms.offset.value=S,h.material.uniforms.tex.value=v.texture,n.setRenderTarget(y),h.render(n),v=y}return n.setRenderTarget(c),d.material.uniforms.tex.value=y.texture,d.render(n),n.setRenderTarget(A),p.material.uniforms.tex.value=g,p.render(n),n.setRenderTarget(null),A}};var gEe={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const DU=t=>{let e;const n=new Set,i=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const d=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,d))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(gEe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(i,r,l);return l},AEe=t=>t?DU(t):DU;var aq={exports:{}},lq={},cq={exports:{}},uq={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=E;function vEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yEe=typeof Object.is=="function"?Object.is:vEe,xEe=h0.useState,_Ee=h0.useEffect,EEe=h0.useLayoutEffect,wEe=h0.useDebugValue;function SEe(t,e){var n=e(),i=xEe({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return EEe(function(){r.value=n,r.getSnapshot=e,s5(r)&&s({inst:r})},[t,n,e]),_Ee(function(){return s5(r)&&s({inst:r}),t(function(){s5(r)&&s({inst:r})})},[t]),wEe(n),n}function s5(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yEe(t,n)}catch{return!0}}function CEe(t,e){return e()}var bEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CEe:SEe;uq.useSyncExternalStore=h0.useSyncExternalStore!==void 0?h0.useSyncExternalStore:bEe;cq.exports=uq;var MEe=cq.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=E,TEe=MEe;function IEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var BEe=typeof Object.is=="function"?Object.is:IEe,REe=TEe.useSyncExternalStore,PEe=wS.useRef,DEe=wS.useEffect,LEe=wS.useMemo,FEe=wS.useDebugValue;lq.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=PEe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=LEe(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&o.hasValue){var p=o.value;if(r(p,d))return f=p}return f=d}if(p=f,BEe(u,d))return p;var g=i(d);return r!==void 0&&r(p,g)?p:(u=d,f=g)}var c=!1,u,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,i,r]);var a=REe(t,s[0],s[1]);return DEe(function(){o.hasValue=!0,o.value=a},[a]),FEe(a),a};aq.exports=lq;var OEe=aq.exports;const zEe=m0(OEe);var fq={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:UEe}=Es,{useSyncExternalStoreWithSelector:kEe}=zEe;let LU=!1;const NEe=t=>t;function GEe(t,e=NEe,n){(fq?"production":void 0)!=="production"&&n&&!LU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),LU=!0);const i=kEe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return UEe(i),i}const FU=t=>{(fq?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?AEe(t):t,n=(i,r)=>GEe(e,i,r);return Object.assign(n,e),n},HEe=t=>t?FU(t):FU;var OU,zU;const UU=typeof window<"u"&&((OU=window.document)!=null&&OU.createElement||((zU=window.navigator)==null?void 0:zU.product)==="ReactNative")?Es.useLayoutEffect:Es.useEffect;function QEe(){const t=HEe(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const n=t(r=>r.set),i=t(r=>r.version);return UU(()=>{n(r=>({version:r.version+1}))},[]),UU(()=>(n(({current:r})=>({current:[...r,e]})),()=>n(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=t(n=>n.current);return Es.createElement(Es.Fragment,null,e)}}}const VEe=t=>t&&t.isOrthographicCamera,kU=new Je,hq=QEe();function dq(t){return"top"in t}function o5(t,e){const{right:n,top:i,left:r,bottom:s,width:o,height:a}=e,l=e.bottom<0||i>t.height||n<0||e.left>t.width;if(dq(t)){const f=t.top+t.height-s,h=r-t.left;return{position:{width:o,height:a,left:h,top:i,bottom:f,right:n},isOffscreen:l}}const c=t.height-s;return{position:{width:o,height:a,top:i,left:r,bottom:c,right:n},isOffscreen:l}}function a5(t,{left:e,bottom:n,width:i,height:r}){let s;const o=i/r;return VEe(t.camera)?(t.camera.left!==i/-2||t.camera.right!==i/2||t.camera.top!==r/2||t.camera.bottom!==r/-2)&&(Object.assign(t.camera,{left:i/-2,right:i/2,top:r/2,bottom:r/-2}),t.camera.updateProjectionMatrix()):t.camera.aspect!==o&&(t.camera.aspect=o,t.camera.updateProjectionMatrix()),s=t.gl.autoClear,t.gl.autoClear=!1,t.gl.setViewport(e,n,i,r),t.gl.setScissor(e,n,i,r),t.gl.setScissorTest(!0),s}function l5(t,e){t.gl.setScissorTest(!1),t.gl.autoClear=e}function NU(t){t.gl.getClearColor(kU),t.gl.setClearColor(kU,t.gl.getClearAlpha()),t.gl.clear(!0,!0)}function WEe({visible:t=!0,canvasSize:e,scene:n,index:i,children:r,frames:s,rect:o,track:a}){const l=Fe(),[c,u]=E.useState(!1);let f=0;return Ct(h=>{if(s===1/0||f<=s){var d;a&&(o.current=(d=a.current)==null?void 0:d.getBoundingClientRect()),f++}if(o.current){const{position:p,isOffscreen:g}=o5(e,o.current);if(c!==g&&u(g),t&&!c&&o.current){const A=a5(h,p);h.gl.render(r?h.scene:n,h.camera),l5(h,A)}}},i),E.useLayoutEffect(()=>{const h=o.current;if(h&&(!t||!c)){const{position:d}=o5(e,h),p=a5(l,d);NU(l),l5(l,p)}},[t,c]),E.useEffect(()=>{if(!a)return;const h=o.current,d=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(h){const{position:p}=o5(e,h),g=a5(l,p);NU(l),l5(l,g)}l.setEvents({connected:d})}},[a]),E.useEffect(()=>{dq(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),E.createElement(E.Fragment,null,r,E.createElement("group",{onPointerOver:()=>null}))}const pq=E.forwardRef(({track:t,visible:e=!0,index:n=1,id:i,style:r,className:s,frames:o=1/0,children:a,...l},c)=>{var u,f,h,d;const p=E.useRef(null),{size:g,scene:A}=Fe(),[m]=E.useState(()=>new Go),[v,y]=E.useReducer(()=>!0,!1),w=E.useCallback((S,C)=>{if(p.current&&t&&t.current&&S.target===t.current){const{width:b,height:M,left:I,top:T}=p.current,D=S.clientX-I,R=S.clientY-T;C.pointer.set(D/b*2-1,-(R/M)*2+1),C.raycaster.setFromCamera(C.pointer,C.camera)}},[p,t]);return E.useEffect(()=>{var S;t&&(p.current=(S=t.current)==null?void 0:S.getBoundingClientRect()),y()},[t]),E.createElement("group",Te({ref:c},l),v&&ou(E.createElement(WEe,{visible:e,canvasSize:g,frames:o,scene:A,track:t,rect:p,index:n},a),m,{events:{compute:w,priority:n},size:{width:(u=p.current)==null?void 0:u.width,height:(f=p.current)==null?void 0:f.height,top:(h=p.current)==null?void 0:h.top,left:(d=p.current)==null?void 0:d.left}}))}),jEe=E.forwardRef(({as:t="div",id:e,visible:n,className:i,style:r,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const f=E.useId(),h=E.useRef(null);return E.useImperativeHandle(u,()=>h.current),E.createElement(E.Fragment,null,E.createElement(t,Te({ref:h,id:e,className:i,style:r},c)),E.createElement(hq.In,null,E.createElement(pq,{visible:n,key:f,track:h,frames:a,index:s},l)))}),mq=E.forwardRef((t,e)=>E.useContext(td)?E.createElement(pq,Te({ref:e},t)):E.createElement(jEe,Te({ref:e},t)));mq.Port=()=>E.createElement(hq.Out,null);const ny=E.createContext(null),p_=new L,GU=new L,XEe=(t,e,n,i)=>{const r=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(i);return o===0?-s/r:(p_.copy(i).multiplyScalar(r/o).sub(e),GU.copy(i).multiplyScalar(s/o).add(n).sub(t),-p_.dot(GU)/p_.dot(p_))},YEe=new L(0,1,0),HU=new Ge,c5=({direction:t,axis:e})=>{const{translation:n,translationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:g,userData:A}=E.useContext(ny),m=Fe(Z=>Z.controls),v=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(0),[C,b]=E.useState(!1),M=E.useCallback(Z=>{r&&(v.current.innerText=`${n.current[e].toFixed(2)}`,v.current.style.display="block"),Z.stopPropagation();const U=new Ge().extractRotation(y.current.matrixWorld),$=Z.point.clone(),X=new L().setFromMatrixPosition(y.current.matrixWorld),Q=t.clone().applyMatrix4(U).normalize();w.current={clickPoint:$,dir:Q},S.current=n.current[e],d({component:"Arrow",axis:e,origin:X,directions:[Q]}),m&&(m.enabled=!1),Z.target.setPointerCapture(Z.pointerId)},[r,t,m,d,n,e]),I=E.useCallback(Z=>{if(Z.stopPropagation(),C||b(!0),w.current){const{clickPoint:U,dir:$}=w.current,[X,Q]=(i==null?void 0:i[e])||[void 0,void 0];let J=XEe(U,$,Z.ray.origin,Z.ray.direction);X!==void 0&&(J=Math.max(J,X-S.current)),Q!==void 0&&(J=Math.min(J,Q-S.current)),n.current[e]=S.current+J,r&&(v.current.innerText=`${n.current[e].toFixed(2)}`),HU.makeTranslation($.x*J,$.y*J,$.z*J),p(HU)}},[r,p,C,n,i,e]),T=E.useCallback(Z=>{r&&(v.current.style.display="none"),Z.stopPropagation(),w.current=null,g(),m&&(m.enabled=!0),Z.target.releasePointerCapture(Z.pointerId)},[r,m,g]),D=E.useCallback(Z=>{Z.stopPropagation(),b(!1)},[]),{cylinderLength:R,coneWidth:z,coneLength:F,matrixL:V}=E.useMemo(()=>{const Z=c?l/a*1.6:a/20,U=c?.2:a/5,$=c?1-U:a-U,X=new Tt().setFromUnitVectors(YEe,t.clone().normalize()),Q=new Ge().makeRotationFromQuaternion(X);return{cylinderLength:$,coneWidth:Z,coneLength:U,matrixL:Q}},[t,a,l,c]),j=C?f:u[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:V,matrixAutoUpdate:!1,onPointerDown:M,onPointerMove:I,onPointerUp:T,onPointerOut:D},r&&E.createElement($v,{position:[0,-F,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:v})),E.createElement("mesh",{visible:!1,position:[0,(R+F)/2,0],userData:A},E.createElement("cylinderGeometry",{args:[z*1.4,z*1.4,R+F,8,1]})),E.createElement(Al,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,R,0],lineWidth:l,side:Qn,color:j,opacity:h,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),E.createElement("mesh",{raycast:()=>null,position:[0,R+F/2,0],renderOrder:500},E.createElement("coneGeometry",{args:[z,F,24,1]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:j,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},u5=new L,f5=new L,h5=t=>t*180/Math.PI,qEe=t=>t*Math.PI/180,$Ee=(t,e,n,i,r)=>{u5.copy(t).sub(n),f5.copy(e).sub(n);const s=i.dot(i),o=r.dot(r),a=u5.dot(i)/s,l=u5.dot(r)/o,c=f5.dot(i)/s,u=f5.dot(r)/o,f=Math.atan2(l,a);return Math.atan2(u,c)-f},KEe=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},QU=t=>{let e=KEe(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},m_=new Ge,VU=new L,g_=new Da,d5=new L,p5=({dir1:t,dir2:e,axis:n})=>{const{rotationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:g,userData:A}=E.useContext(ny),m=Fe(j=>j.controls),v=E.useRef(null),y=E.useRef(null),w=E.useRef(0),S=E.useRef(0),C=E.useRef(null),[b,M]=E.useState(!1),I=E.useCallback(j=>{r&&(v.current.innerText=`${h5(S.current).toFixed(0)}º`,v.current.style.display="block"),j.stopPropagation();const Z=j.point.clone(),U=new L().setFromMatrixPosition(y.current.matrixWorld),$=new L().setFromMatrixColumn(y.current.matrixWorld,0).normalize(),X=new L().setFromMatrixColumn(y.current.matrixWorld,1).normalize(),Q=new L().setFromMatrixColumn(y.current.matrixWorld,2).normalize(),J=new Wr().setFromNormalAndCoplanarPoint(Q,U);C.current={clickPoint:Z,origin:U,e1:$,e2:X,normal:Q,plane:J},d({component:"Rotator",axis:n,origin:U,directions:[$,X,Q]}),m&&(m.enabled=!1),j.target.setPointerCapture(j.pointerId)},[r,m,d,n]),T=E.useCallback(j=>{if(j.stopPropagation(),b||M(!0),C.current){const{clickPoint:Z,origin:U,e1:$,e2:X,normal:Q,plane:J}=C.current,[ne,O]=(i==null?void 0:i[n])||[void 0,void 0];g_.copy(j.ray),g_.intersectPlane(J,d5),g_.direction.negate(),g_.intersectPlane(J,d5);let N=$Ee(Z,d5,U,$,X),G=h5(N);j.shiftKey&&(G=Math.round(G/10)*10,N=qEe(G)),ne!==void 0&&O!==void 0&&O-ne<2*Math.PI?(N=QU(N),N=N>Math.PI?N-2*Math.PI:N,N=zt.clamp(N,ne-w.current,O-w.current),S.current=w.current+N):(S.current=QU(w.current+N),S.current=S.current>Math.PI?S.current-2*Math.PI:S.current),r&&(G=h5(S.current),v.current.innerText=`${G.toFixed(0)}º`),m_.makeRotationAxis(Q,N),VU.copy(U).applyMatrix4(m_).sub(U).negate(),m_.setPosition(VU),p(m_)}},[r,p,b,i,n]),D=E.useCallback(j=>{r&&(v.current.style.display="none"),j.stopPropagation(),w.current=S.current,C.current=null,g(),m&&(m.enabled=!0),j.target.releasePointerCapture(j.pointerId)},[r,m,g]),R=E.useCallback(j=>{j.stopPropagation(),M(!1)},[]),z=E.useMemo(()=>{const j=t.clone().normalize(),Z=e.clone().normalize();return new Ge().makeBasis(j,Z,j.clone().cross(Z))},[t,e]),F=c?.65:a*.65,V=E.useMemo(()=>{const Z=[];for(let U=0;U<=32;U++){const $=U*(Math.PI/2)/32;Z.push(new L(Math.cos($)*F,Math.sin($)*F,0))}return Z},[F]);return E.createElement("group",{ref:y,onPointerDown:I,onPointerMove:T,onPointerUp:D,onPointerOut:R,matrix:z,matrixAutoUpdate:!1},r&&E.createElement($v,{position:[F,F,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:v})),E.createElement(Al,{points:V,lineWidth:l*4,visible:!1,userData:A}),E.createElement(Al,{transparent:!0,raycast:()=>null,depthTest:o,points:V,lineWidth:l,side:Qn,color:b?f:u[n],opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},JEe=(t,e,n)=>{const i=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,r=[0,1,2].sort((p,g)=>Math.abs(e.getComponent(g))-Math.abs(e.getComponent(p))),s=i===r[0]?r[1]:r[0],o=t.getComponent(i),a=t.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=n.getComponent(i),h=(n.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-h*l)/o,h]},A_=new Da,v_=new L,WU=new Ge,m5=({dir1:t,dir2:e,axis:n})=>{const{translation:i,translationLimits:r,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:c,fixed:u,axisColors:f,hoveredColor:h,opacity:d,onDragStart:p,onDrag:g,onDragEnd:A,userData:m}=E.useContext(ny),v=Fe($=>$.controls),y=E.useRef(null),w=E.useRef(null),S=E.useRef(null),C=E.useRef(0),b=E.useRef(0),[M,I]=E.useState(!1),T=E.useCallback($=>{s&&(y.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`,y.current.style.display="block"),$.stopPropagation();const X=$.point.clone(),Q=new L().setFromMatrixPosition(w.current.matrixWorld),J=new L().setFromMatrixColumn(w.current.matrixWorld,0).normalize(),ne=new L().setFromMatrixColumn(w.current.matrixWorld,1).normalize(),O=new L().setFromMatrixColumn(w.current.matrixWorld,2).normalize(),N=new Wr().setFromNormalAndCoplanarPoint(O,Q);S.current={clickPoint:X,e1:J,e2:ne,plane:N},C.current=i.current[(n+1)%3],b.current=i.current[(n+2)%3],p({component:"Slider",axis:n,origin:Q,directions:[J,ne,O]}),v&&(v.enabled=!1),$.target.setPointerCapture($.pointerId)},[s,v,p,n]),D=E.useCallback($=>{if($.stopPropagation(),M||I(!0),S.current){const{clickPoint:X,e1:Q,e2:J,plane:ne}=S.current,[O,N]=(r==null?void 0:r[(n+1)%3])||[void 0,void 0],[G,H]=(r==null?void 0:r[(n+2)%3])||[void 0,void 0];A_.copy($.ray),A_.intersectPlane(ne,v_),A_.direction.negate(),A_.intersectPlane(ne,v_),v_.sub(X);let[oe,de]=JEe(Q,J,v_);O!==void 0&&(oe=Math.max(oe,O-C.current)),N!==void 0&&(oe=Math.min(oe,N-C.current)),G!==void 0&&(de=Math.max(de,G-b.current)),H!==void 0&&(de=Math.min(de,H-b.current)),i.current[(n+1)%3]=C.current+oe,i.current[(n+2)%3]=b.current+de,s&&(y.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`),WU.makeTranslation(oe*Q.x+de*J.x,oe*Q.y+de*J.y,oe*Q.z+de*J.z),g(WU)}},[s,g,M,i,r,n]),R=E.useCallback($=>{s&&(y.current.style.display="none"),$.stopPropagation(),S.current=null,A(),v&&(v.enabled=!0),$.target.releasePointerCapture($.pointerId)},[s,v,A]),z=E.useCallback($=>{$.stopPropagation(),I(!1)},[]),F=E.useMemo(()=>{const $=t.clone().normalize(),X=e.clone().normalize();return new Ge().makeBasis($,X,$.clone().cross(X))},[t,e]),V=u?1/7:l/7,j=u?.225:l*.225,Z=M?h:f[n],U=E.useMemo(()=>[new L(0,0,0),new L(0,j,0),new L(j,j,0),new L(j,0,0),new L(0,0,0)],[j]);return E.createElement("group",{ref:w,matrix:F,matrixAutoUpdate:!1},s&&E.createElement($v,{position:[0,0,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:y})),E.createElement("group",{position:[V*1.7,V*1.7,0]},E.createElement("mesh",{visible:!0,onPointerDown:T,onPointerMove:D,onPointerUp:R,onPointerOut:z,scale:j,userData:m},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:Z,polygonOffset:!0,polygonOffsetFactor:-10,side:Qn,fog:!1})),E.createElement(Al,{position:[-j/2,-j/2,0],transparent:!0,depthTest:a,points:U,lineWidth:c,color:Z,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:m,fog:!1})))},Vg=new L,jU=new L,ZEe=(t,e,n,i)=>{const r=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(i);return o===0?-s/r:(Vg.copy(i).multiplyScalar(r/o).sub(e),jU.copy(i).multiplyScalar(s/o).add(n).sub(t),-Vg.dot(jU)/Vg.dot(Vg))},ewe=new L(0,1,0),bg=new L,XU=new Ge,g5=({direction:t,axis:e})=>{const{scaleLimits:n,annotations:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,opacity:f,onDragStart:h,onDrag:d,onDragEnd:p,userData:g}=E.useContext(ny),A=Fe(U=>U.size),m=Fe(U=>U.controls),v=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(1),C=E.useRef(1),b=E.useRef(null),[M,I]=E.useState(!1),T=l?1.2:1.2*o,D=E.useCallback(U=>{i&&(v.current.innerText=`${C.current.toFixed(2)}`,v.current.style.display="block"),U.stopPropagation();const $=new Ge().extractRotation(y.current.matrixWorld),X=U.point.clone(),Q=new L().setFromMatrixPosition(y.current.matrixWorld),J=t.clone().applyMatrix4($).normalize(),ne=y.current.matrixWorld.clone(),O=ne.clone().invert(),N=l?1/fS(y.current.getWorldPosition(Vg),o,U.camera,A):1;b.current={clickPoint:X,dir:J,mPLG:ne,mPLGInv:O,offsetMultiplier:N},h({component:"Sphere",axis:e,origin:Q,directions:[J]}),m&&(m.enabled=!1),U.target.setPointerCapture(U.pointerId)},[i,m,t,h,e,l,o,A]),R=E.useCallback(U=>{if(U.stopPropagation(),M||I(!0),b.current){const{clickPoint:$,dir:X,mPLG:Q,mPLGInv:J,offsetMultiplier:ne}=b.current,[O,N]=(n==null?void 0:n[e])||[1e-5,void 0],H=ZEe($,X,U.ray.origin,U.ray.direction)*ne,oe=l?H:H/o;let de=Math.pow(2,oe*.2);U.shiftKey&&(de=Math.round(de*10)/10),de=Math.max(de,O/S.current),N!==void 0&&(de=Math.min(de,N/S.current)),C.current=S.current*de,w.current.position.set(0,T+H,0),i&&(v.current.innerText=`${C.current.toFixed(2)}`),bg.set(1,1,1),bg.setComponent(e,de),XU.makeScale(bg.x,bg.y,bg.z).premultiply(Q).multiply(J),d(XU)}},[i,T,d,M,n,e]),z=E.useCallback(U=>{i&&(v.current.style.display="none"),U.stopPropagation(),S.current=C.current,b.current=null,w.current.position.set(0,T,0),p(),m&&(m.enabled=!0),U.target.releasePointerCapture(U.pointerId)},[i,m,p,T]),F=E.useCallback(U=>{U.stopPropagation(),I(!1)},[]),{radius:V,matrixL:j}=E.useMemo(()=>{const U=l?a/o*1.8:o/22.5,$=new Tt().setFromUnitVectors(ewe,t.clone().normalize()),X=new Ge().makeRotationFromQuaternion($);return{radius:U,matrixL:X}},[t,o,a,l]),Z=M?u:c[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:j,matrixAutoUpdate:!1,onPointerDown:D,onPointerMove:R,onPointerUp:z,onPointerOut:F},i&&E.createElement($v,{position:[0,T/2,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:v})),E.createElement("mesh",{ref:w,position:[0,T,0],renderOrder:500,userData:g},E.createElement("sphereGeometry",{args:[V,12,12]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:Z,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},YU=new Ge,qU=new Ge,$U=new Ge,y_=new Ge,A5=new Ge,Up=new Ge,KU=new Ge,JU=new Ge,ZU=new Ge,kp=new xn,v5=new xn,ek=new L,tk=new L,nk=new L,ik=new L,Mg=new L,Np=new L(1,0,0),Gp=new L(0,1,0),Hp=new L(0,0,1),twe=E.forwardRef(({enabled:t=!0,matrix:e,onDragStart:n,onDrag:i,onDragEnd:r,autoTransform:s=!0,anchor:o,disableAxes:a=!1,disableSliders:l=!1,disableRotations:c=!1,disableScaling:u=!1,activeAxes:f=[!0,!0,!0],offset:h=[0,0,0],rotation:d=[0,0,0],scale:p=1,lineWidth:g=4,fixed:A=!1,translationLimits:m,rotationLimits:v,scaleLimits:y,depthTest:w=!0,axisColors:S=["#ff2060","#20df80","#2080ff"],hoveredColor:C="#ffff40",annotations:b=!1,annotationsClass:M,opacity:I=1,visible:T=!0,userData:D,children:R,...z},F)=>{const V=Fe(N=>N.invalidate),j=E.useRef(null),Z=E.useRef(null),U=E.useRef(null),$=E.useRef(null),X=E.useRef([0,0,0]),Q=E.useRef(new L(1,1,1)),J=E.useRef(new L(1,1,1));E.useLayoutEffect(()=>{o&&($.current.updateWorldMatrix(!0,!0),y_.copy($.current.matrixWorld).invert(),kp.makeEmpty(),$.current.traverse(N=>{N.geometry&&(N.geometry.boundingBox||N.geometry.computeBoundingBox(),Up.copy(N.matrixWorld).premultiply(y_),v5.copy(N.geometry.boundingBox),v5.applyMatrix4(Up),kp.union(v5))}),ek.copy(kp.max).add(kp.min).multiplyScalar(.5),tk.copy(kp.max).sub(kp.min).multiplyScalar(.5),nk.copy(tk).multiply(new L(...o)).add(ek),ik.set(...h).add(nk),U.current.position.copy(ik),V())});const ne=E.useMemo(()=>({onDragStart:N=>{YU.copy(Z.current.matrix),qU.copy(Z.current.matrixWorld),n&&n(N),V()},onDrag:N=>{$U.copy(j.current.matrixWorld),y_.copy($U).invert(),A5.copy(qU).premultiply(N),Up.copy(A5).premultiply(y_),KU.copy(YU).invert(),JU.copy(Up).multiply(KU),s&&Z.current.matrix.copy(Up),i&&i(Up,JU,A5,N),V()},onDragEnd:()=>{r&&r(),V()},translation:X,translationLimits:m,rotationLimits:v,axisColors:S,hoveredColor:C,opacity:I,scale:p,lineWidth:g,fixed:A,depthTest:w,userData:D,annotations:b,annotationsClass:M}),[n,i,r,X,m,v,y,w,p,g,A,...S,C,I,D,s,b,M]),O=new L;return Ct(N=>{if(A){const G=fS(U.current.getWorldPosition(O),p,N.camera,N.size);Q.current.setScalar(G)}e&&e instanceof Ge&&(Z.current.matrix=e),Z.current.updateWorldMatrix(!0,!0),ZU.makeRotationFromEuler(U.current.rotation).setPosition(U.current.position).premultiply(Z.current.matrixWorld),J.current.setFromMatrixScale(ZU),Mg.copy(Q.current).divide(J.current),(Math.abs(U.current.scale.x-Mg.x)>1e-4||Math.abs(U.current.scale.y-Mg.y)>1e-4||Math.abs(U.current.scale.z-Mg.z)>1e-4)&&(U.current.scale.copy(Mg),N.invalidate())}),E.useImperativeHandle(F,()=>Z.current,[]),E.createElement(ny.Provider,{value:ne},E.createElement("group",{ref:j},E.createElement("group",Te({ref:Z,matrix:e,matrixAutoUpdate:!1},z),E.createElement("group",{visible:T,ref:U,position:h,rotation:d},t&&E.createElement(E.Fragment,null,!a&&f[0]&&E.createElement(c5,{axis:0,direction:Np}),!a&&f[1]&&E.createElement(c5,{axis:1,direction:Gp}),!a&&f[2]&&E.createElement(c5,{axis:2,direction:Hp}),!l&&f[0]&&f[1]&&E.createElement(m5,{axis:2,dir1:Np,dir2:Gp}),!l&&f[0]&&f[2]&&E.createElement(m5,{axis:1,dir1:Hp,dir2:Np}),!l&&f[2]&&f[1]&&E.createElement(m5,{axis:0,dir1:Gp,dir2:Hp}),!c&&f[0]&&f[1]&&E.createElement(p5,{axis:2,dir1:Np,dir2:Gp}),!c&&f[0]&&f[2]&&E.createElement(p5,{axis:1,dir1:Hp,dir2:Np}),!c&&f[2]&&f[1]&&E.createElement(p5,{axis:0,dir1:Gp,dir2:Hp}),!u&&f[0]&&E.createElement(g5,{axis:0,direction:Np}),!u&&f[1]&&E.createElement(g5,{axis:1,direction:Gp}),!u&&f[2]&&E.createElement(g5,{axis:2,direction:Hp}))),E.createElement("group",{ref:$},R))))}),nwe=new L(0,0,-1),iwe=function(){const t=new L,e=new L,n=new L,i=new L,r=new L;return function(s,o,a,l){return t.copy(s),e.copy(o),n.copy(a),i.copy(e).sub(t),r.copy(n).sub(t),l.crossVectors(r,i).normalize()}}();function rwe(t,e){return t.clone().add(e).multiplyScalar(.5)}const gq=E.forwardRef(({points:t=Z_.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:e,facialTransformationMatrix:n,faceBlendshapes:i,offset:r,offsetScalar:s=80,width:o,height:a,depth:l=1,verticalTri:c=[159,386,152],origin:u,eyes:f=!0,eyesAsOrigin:h=!1,debug:d=!1,children:p,...g},A)=>{var m;e&&(t=e.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));const v=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(null),C=E.useRef(null),b=E.useRef(null),M=E.useRef(null),[I]=E.useState(()=>new L),[T]=E.useState(()=>new Ht),[D]=E.useState(()=>new Tt),[R]=E.useState(()=>new L),{invalidate:z}=Fe();E.useEffect(()=>{var $;($=C.current)==null||$.geometry.setIndex(Z_.TRIANGULATION)},[]);const[F]=E.useState(()=>new L);E.useEffect(()=>{var $,X;const Q=($=C.current)==null?void 0:$.geometry;if(!Q)return;if(Q.setFromPoints(t),Q.setDrawRange(0,Z_.TRIANGULATION.length),n)if(T.matrix.fromArray(n.data),T.matrix.decompose(T.position,T.quaternion,T.scale),T.rotation.y*=-1,T.rotation.z*=-1,D.setFromEuler(T.rotation),r){var J;T.position.y*=-1,T.position.z*=-1,(J=v.current)==null||J.position.copy(T.position.divideScalar(s))}else{var ne;(ne=v.current)==null||ne.position.set(0,0,0)}else iwe(t[c[0]],t[c[1]],t[c[2]],I),D.setFromUnitVectors(nwe,I);const O=D.clone().invert();if(Q.computeBoundingBox(),d&&z(),Q.center(),Q.applyQuaternion(O),(X=S.current)==null||X.setRotationFromQuaternion(D),f){if(!i)console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(b.current&&M.current&&w.current)if(h){const N=b.current._computeSphere(Q),G=M.current._computeSphere(Q);u=rwe(N.center,G.center).negate(),b.current._update(Q,i,N),M.current._update(Q,i,G)}else b.current._update(Q,i),M.current._update(Q,i)}if(w.current){if(u!==void 0)if(typeof u=="number"){const N=Q.getAttribute("position");R.set(-N.getX(u),-N.getY(u),-N.getZ(u))}else u.isVector3&&R.copy(u);else R.setScalar(0);w.current.position.copy(R)}if(y.current){let N=1;(o||a||l)&&(Q.boundingBox.getSize(F),o&&(N=o/F.x),a&&(N=a/F.y),l&&(N=l/F.z)),y.current.scale.setScalar(N!==1?N:1)}Q.computeVertexNormals(),Q.attributes.position.needsUpdate=!0},[t,n,i,T,r,s,o,a,l,c,u,f,d,z,I,D,F,R]);const V=E.useMemo(()=>({outerRef:S,meshRef:C,eyeRightRef:b,eyeLeftRef:M}),[]);E.useImperativeHandle(A,()=>V,[V]);const[j]=E.useState(()=>new L),Z=(m=C.current)==null?void 0:m.geometry.boundingBox,U=(Z==null?void 0:Z.getSize(j).z)||1;return E.createElement("group",g,E.createElement("group",{ref:v},E.createElement("group",{ref:S},E.createElement("group",{ref:y},d?E.createElement(E.Fragment,null,E.createElement("axesHelper",{args:[U]}),E.createElement(Al,{points:[[0,0,0],[0,0,-U]],color:65535})):null,E.createElement("group",{ref:w},f&&i&&E.createElement("group",{name:"eyes"},E.createElement(YI,{side:"left",ref:b,debug:d}),E.createElement(YI,{side:"right",ref:M,debug:d})),E.createElement("mesh",{ref:C,name:"face"},p,d?E.createElement(E.Fragment,null,Z&&E.createElement("box3Helper",{args:[Z]})):null))))))}),nm={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},YI=E.forwardRef(({side:t,debug:e=!0},n)=>{const i=E.useRef(null),r=E.useRef(null),[s]=E.useState(()=>new $n),o=E.useCallback(f=>{const h=f.getAttribute("position"),p=nm.contourLandmarks[t].map(g=>new L(h.getX(g),h.getY(g),h.getZ(g)));return s.center.set(0,0,0),p.forEach(g=>s.center.add(g)),s.center.divideScalar(p.length),s.radius=p[0].sub(p[1]).length()/2,s},[s,t]),[a]=E.useState(()=>new gi),l=E.useCallback((f,h,d)=>{if(i.current){var p;(p=d)!==null&&p!==void 0||(d=o(f)),i.current.position.copy(d.center),i.current.scale.setScalar(d.radius)}if(h&&r.current){const g=nm.blendshapes[t],A=h.categories[g[0]].score,m=h.categories[g[1]].score,v=h.categories[g[2]].score,y=h.categories[g[3]].score,w=nm.fov.horizontal*zt.DEG2RAD,S=nm.fov.vertical*zt.DEG2RAD,C=w*.5*(y-v),b=S*.5*(A-m)*(t==="left"?1:-1);a.set(C,b,0),r.current.setRotationFromEuler(a)}},[o,t,a]),c=E.useMemo(()=>({eyeMeshRef:i,irisDirRef:r,_computeSphere:o,_update:l}),[o,l]);E.useImperativeHandle(n,()=>c,[c]);const u=nm.color[t];return E.createElement("group",null,E.createElement("group",{ref:i},e&&E.createElement("axesHelper",null),E.createElement("group",{ref:r},E.createElement(E.Fragment,null,e&&E.createElement(Al,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:u})))))}),Z_={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}},Aq=E.createContext({}),qI={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function swe({basePath:t=qI.basePath,options:e=qI.options,children:n}){const i=JSON.stringify(e),r=su(async()=>{const{FilesetResolver:s,FaceLandmarker:o}=await eY(async()=>{const{FilesetResolver:l,FaceLandmarker:c}=await import("./vision_bundle-DAfdqQjW.js");return{FilesetResolver:l,FaceLandmarker:c}},[]),a=await s.forVisionTasks(t);return o.createFromOptions(a,e)},[t,i]);return E.useEffect(()=>()=>{r==null||r.close(),zw([t,i])},[r,t,i]),E.createElement(Aq.Provider,{value:r},n)}function vq(){return E.useContext(Aq)}function rk(t,e){return t.clone().add(e).multiplyScalar(.5)}function Qp(t,e,n){const i=t.localToWorld(e);return n.worldToLocal(i)}const yq=E.createContext({}),owe=E.forwardRef(({camera:t,autostart:e=!0,webcam:n=!0,webcamVideoTextureSrc:i,manualUpdate:r=!1,manualDetect:s=!1,onVideoFrame:o,smoothTime:a=.25,offset:l=!0,offsetScalar:c=80,eyes:u=!1,eyesAsOrigin:f=!0,depth:h=.15,debug:d=!1,facemesh:p,makeDefault:g},A)=>{var m,v;const y=Fe(G=>G.scene),w=Fe(G=>G.camera),S=Fe(G=>G.set),C=Fe(G=>G.get),b=t||w,M=E.useRef(null),I=E.useRef(null),[T]=E.useState(()=>new Ht),[D]=E.useState(()=>new L),[R]=E.useState(()=>new L),[z]=E.useState(()=>new L),[F]=E.useState(()=>new L),V=E.useCallback(()=>{T.parent=b.parent;const G=I.current;if(G){const{outerRef:H,eyeRightRef:oe,eyeLeftRef:de}=G;if(oe.current&&de.current){const{irisDirRef:ce}=oe.current,{irisDirRef:ge}=de.current;ce.current&&ge.current&&H.current&&(D.copy(Qp(ce.current,new L(0,0,0),H.current)),R.copy(Qp(ge.current,new L(0,0,0),H.current)),T.position.copy(Qp(H.current,rk(D,R),b.parent||y)),z.copy(Qp(ce.current,new L(0,0,1),H.current)),F.copy(Qp(ge.current,new L(0,0,1),H.current)),T.lookAt(H.current.localToWorld(rk(z,F))))}else H.current&&(T.position.copy(Qp(H.current,new L(0,0,0),b.parent||y)),T.lookAt(H.current.localToWorld(new L(0,0,1))))}return T},[b,R,F,D,z,y,T]),[j]=E.useState(()=>new Ht),Z=E.useCallback(function(G,H){if(b){var oe;(oe=H)!==null&&oe!==void 0||(H=V()),a>0?(l0.damp3(j.position,H.position,a,G,void 0,void 0,1e-9),l0.dampE(j.rotation,H.rotation,a,G,void 0,void 0,1e-9)):(j.position.copy(H.position),j.rotation.copy(H.rotation)),b.position.copy(j.position),b.rotation.copy(j.rotation)}},[b,V,a,j.position,j.rotation]),[U,$]=E.useState(),X=vq(),Q=E.useCallback((G,H)=>{const oe=X==null?void 0:X.detectForVideo(G,H);$(oe)},[X]);Ct((G,H)=>{r||Z(H)});const J=E.useMemo(()=>Object.assign(Object.create($r.prototype),{detect:Q,computeTarget:V,update:Z,facemeshApiRef:I,webcamApiRef:M,play:()=>{var G;(G=M.current)==null||(G=G.videoTextureApiRef.current)==null||G.texture.source.data.play()},pause:()=>{var G;(G=M.current)==null||(G=G.videoTextureApiRef.current)==null||G.texture.source.data.pause()}}),[Q,V,Z]);E.useImperativeHandle(A,()=>J,[J]),E.useEffect(()=>{const G=H=>{s||Q(H.texture.source.data,H.time),o&&o(H)};return J.addEventListener("videoFrame",G),()=>{J.removeEventListener("videoFrame",G)}},[J,Q,X,s,o]),E.useEffect(()=>{if(g){const G=C().controls;return S({controls:J}),()=>S({controls:G})}},[g,J,C,S]);const ne=U==null?void 0:U.faceLandmarks[0],O=U==null||(m=U.facialTransformationMatrixes)==null?void 0:m[0],N=U==null||(v=U.faceBlendshapes)==null?void 0:v[0];return E.createElement(yq.Provider,{value:J},n&&E.createElement(E.Suspense,{fallback:null},E.createElement(awe,{ref:M,autostart:e,videoTextureSrc:i})),E.createElement(gq,Te({ref:I},p,{points:ne,depth:h,facialTransformationMatrix:O,faceBlendshapes:N,eyes:u,eyesAsOrigin:f,offset:l,offsetScalar:c,debug:d,"rotation-z":Math.PI,visible:d}),E.createElement("meshBasicMaterial",{side:Qn})))}),uR=()=>E.useContext(yq),awe=E.forwardRef(({videoTextureSrc:t,autostart:e=!0},n)=>{const i=E.useRef(null),r=uR(),s=su(async()=>t?Promise.resolve(null):await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}),[t]);E.useEffect(()=>(r.dispatchEvent({type:"stream",stream:s}),()=>{s==null||s.getTracks().forEach(a=>a.stop()),zw([t])}),[s,r,t]);const o=E.useMemo(()=>({videoTextureApiRef:i}),[]);return E.useImperativeHandle(n,()=>o,[o]),E.createElement(E.Suspense,{fallback:null},E.createElement(lwe,{ref:i,src:t||s,start:e}))}),lwe=E.forwardRef(({src:t,start:e},n)=>{const i=qB(t,{start:e}),r=i.source.data,s=uR(),o=E.useCallback(l=>{s.dispatchEvent({type:"videoFrame",texture:i,time:l})},[i,s]);cwe(r,o);const a=E.useMemo(()=>({texture:i}),[i]);return E.useImperativeHandle(n,()=>a,[a]),E.createElement(E.Fragment,null)}),cwe=(t,e)=>{E.useEffect(()=>{if(!t||!t.requestVideoFrameCallback)return;let n;function i(...r){e(...r),n=t.requestVideoFrameCallback(i)}return t.requestVideoFrameCallback(i),()=>t.cancelVideoFrameCallback(n)},[t,e])},uwe=Object.freeze(Object.defineProperty({__proto__:null,AccumulativeShadows:GY,AdaptiveDpr:nEe,AdaptiveEvents:iEe,ArcballControls:iye,AsciiRenderer:kve,BBAnchor:_xe,Backdrop:J_e,BakeShadows:eEe,Billboard:qge,Bounds:PY,Box:i_e,Bvh:hxe,CameraControls:uye,CameraShake:I_e,Capsule:x_e,CatmullRomLine:aAe,Caustics:n3e,Center:eR,Circle:r_e,Clone:mv,Cloud:w3e,CloudInstance:XI,Clouds:WY,ComputedAttribute:Bve,Cone:s_e,ContactShadows:NY,CubeCamera:Kve,CubeTexture:Tye,CubicBezierLine:oAe,CurveModifier:Nxe,CycleRaycast:Jfe,Cylinder:o_e,Decal:Ove,Detailed:J3e,DetectGPU:Jye,DeviceOrientationControls:Jve,Dodecahedron:A_e,DragControls:mde,Edges:UX,Effects:uve,Environment:kY,EnvironmentCube:aR,EnvironmentMap:ES,EnvironmentPortal:UY,Example:bxe,Extrude:v_e,FaceControls:owe,FaceLandmarker:swe,FaceLandmarkerDefaults:qI,Facemesh:gq,FacemeshDatas:Z_,FacemeshEye:YI,FacemeshEyeDefaults:nm,Fbo:Xve,Fbx:Iye,FirstPersonControls:oye,Fisheye:uEe,Float:B_e,FlyControls:Zve,GizmoHelper:Aye,GizmoViewcube:Sye,GizmoViewport:Cye,Gltf:Uve,GradientTexture:fve,GradientType:FI,Grid:Mye,Helper:Oye,Html:$v,Hud:qX,Icosahedron:m_e,Image:gve,Instance:tR,Instances:nR,IsObject:km,KeyboardControls:Lme,Ktx2:Bye,Lathe:y_e,Lightformer:h3e,Line:Al,Loader:nhe,MapControls:eye,MarchingCube:Dve,MarchingCubes:Pve,MarchingPlane:Lve,Mask:lEe,MatcapTexture:B3e,Merged:zxe,MeshDiscardMaterial:Zxe,MeshDistortMaterial:Qxe,MeshPortalMaterial:dEe,MeshReflectorMaterial:Xxe,MeshRefractionMaterial:$xe,MeshTransmissionMaterial:Jxe,MeshWobbleMaterial:Wxe,MotionPathControls:dye,NormalTexture:D3e,Octahedron:g_e,OrbitControls:tye,OrthographicCamera:VX,Outlines:Ave,PerformanceMonitor:rEe,PerspectiveCamera:$ve,PivotControls:twe,Plane:l_e,Point:Y3e,PointMaterial:e_e,PointMaterialImpl:BY,PointerLockControls:sye,Points:q3e,PointsBuffer:tq,Polyhedron:p_e,PositionPoint:ZY,PositionalAudio:lAe,Preload:Z3e,PresentationControls:Pme,Progress:ehe,QuadraticBezierLine:sAe,RandomizedLight:HY,Reflector:i3e,RenderCubeTexture:oq,RenderTexture:sq,Resize:b_e,Ring:d_e,RoundedBox:w_e,Sampler:Ive,ScreenQuad:C_e,ScreenSizer:iAe,ScreenSpace:$ge,Scroll:gpe,ScrollControls:dpe,Segment:K3e,SegmentObject:iq,Segments:$3e,Select:Xge,Shadow:Z_e,ShadowAlpha:W3e,Shape:__e,Sky:d3e,SoftShadows:n_e,Sparkles:b3e,Sphere:a_e,Splat:jve,SpotLight:f3e,SpotLightShadow:u3e,SpriteAnimator:kxe,Stage:$_e,Stars:g3e,Stats:Nye,StatsGl:Qye,Svg:zve,Tetrahedron:h_e,Text:rve,Text3D:OX,Texture:hve,Torus:u_e,TorusKnot:f_e,TrackballControls:nye,Trail:Tve,TrailTexture:Cxe,TransformControls:rye,Tube:c_e,VideoTexture:Fye,View:mq,Wireframe:V3e,accumulativeContext:lR,calcPosFromAngles:VY,calculateAspectRatio:zI,calculateScaleFactor:fS,checkIfFrameIsEmpty:nY,getFirstItem:tY,isWebGL2Available:cve,meshBounds:tEe,shaderMaterial:Vo,useAnimations:pxe,useAspect:Wye,useBVH:fxe,useBounds:DY,useBoxProjectedEnv:xxe,useCamera:jye,useContextBridge:dxe,useCubeCamera:WX,useCubeTexture:YB,useCursor:Zfe,useDepthBuffer:Vye,useDetectGPU:oY,useEnvironment:sR,useFBO:Vs,useFBX:mS,useFaceControls:uR,useFaceLandmarker:vq,useFont:dS,useGLTF:ty,useGizmoContext:pS,useHelper:$B,useIntersect:yY,useKTX2:gS,useKeyboardControls:Fme,useMask:cEe,useMatcapTexture:qY,useMotion:YX,useNormalTexture:$Y,usePerformanceMonitor:sEe,useProgress:CB,useScroll:TB,useSelect:Yge,useSpriteAnimator:Uxe,useSpriteLoader:AS,useSurfaceSampler:GX,useTexture:Of,useTrail:NX,useTrailTexture:xY,useVideoTexture:qB},Symbol.toStringTag,{value:"Module"}));function gv(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const fwe=Object.freeze(Object.defineProperty({__proto__:null,default:gv},Symbol.toStringTag,{value:"Module"})),fR="$$material";function bs(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function xq(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var hwe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dwe=xq(function(t){return hwe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),pwe=!1;function mwe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function gwe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Awe=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!pwe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gwe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=mwe(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ys="-ms-",BE="-moz-",Vn="-webkit-",_q="comm",hR="rule",dR="decl",vwe="@import",Eq="@keyframes",ywe="@layer",xwe=Math.abs,SS=String.fromCharCode,_we=Object.assign;function Ewe(t,e){return as(t,0)^45?(((e<<2^as(t,0))<<2^as(t,1))<<2^as(t,2))<<2^as(t,3):0}function wq(t){return t.trim()}function wwe(t,e){return(t=e.exec(t))?t[0]:t}function Wn(t,e,n){return t.replace(e,n)}function $I(t,e){return t.indexOf(e)}function as(t,e){return t.charCodeAt(e)|0}function Av(t,e,n){return t.slice(e,n)}function Wl(t){return t.length}function pR(t){return t.length}function x_(t,e){return e.push(t),t}function Swe(t,e){return t.map(e).join("")}var CS=1,d0=1,Sq=0,xo=0,xr=0,P0="";function bS(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:CS,column:d0,length:o,return:""}}function Tg(t,e){return _we(bS("",null,null,"",null,null,0),t,{length:-t.length},e)}function Cwe(){return xr}function bwe(){return xr=xo>0?as(P0,--xo):0,d0--,xr===10&&(d0=1,CS--),xr}function ko(){return xr=xo<Sq?as(P0,xo++):0,d0++,xr===10&&(d0=1,CS++),xr}function tc(){return as(P0,xo)}function e3(){return xo}function iy(t,e){return Av(P0,t,e)}function vv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cq(t){return CS=d0=1,Sq=Wl(P0=t),xo=0,[]}function bq(t){return P0="",t}function t3(t){return wq(iy(xo-1,KI(t===91?t+2:t===40?t+1:t)))}function Mwe(t){for(;(xr=tc())&&xr<33;)ko();return vv(t)>2||vv(xr)>3?"":" "}function Twe(t,e){for(;--e&&ko()&&!(xr<48||xr>102||xr>57&&xr<65||xr>70&&xr<97););return iy(t,e3()+(e<6&&tc()==32&&ko()==32))}function KI(t){for(;ko();)switch(xr){case t:return xo;case 34:case 39:t!==34&&t!==39&&KI(xr);break;case 40:t===41&&KI(t);break;case 92:ko();break}return xo}function Iwe(t,e){for(;ko()&&t+xr!==57;)if(t+xr===84&&tc()===47)break;return"/*"+iy(e,xo-1)+"*"+SS(t===47?t:ko())}function Bwe(t){for(;!vv(tc());)ko();return iy(t,xo)}function Rwe(t){return bq(n3("",null,null,null,[""],t=Cq(t),0,[0],t))}function n3(t,e,n,i,r,s,o,a,l){for(var c=0,u=0,f=o,h=0,d=0,p=0,g=1,A=1,m=1,v=0,y="",w=r,S=s,C=i,b=y;A;)switch(p=v,v=ko()){case 40:if(p!=108&&as(b,f-1)==58){$I(b+=Wn(t3(v),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:b+=t3(v);break;case 9:case 10:case 13:case 32:b+=Mwe(p);break;case 92:b+=Twe(e3()-1,7);continue;case 47:switch(tc()){case 42:case 47:x_(Pwe(Iwe(ko(),e3()),e,n),l);break;default:b+="/"}break;case 123*g:a[c++]=Wl(b)*m;case 125*g:case 59:case 0:switch(v){case 0:case 125:A=0;case 59+u:m==-1&&(b=Wn(b,/\f/g,"")),d>0&&Wl(b)-f&&x_(d>32?ok(b+";",i,n,f-1):ok(Wn(b," ","")+";",i,n,f-2),l);break;case 59:b+=";";default:if(x_(C=sk(b,e,n,c,u,r,a,y,w=[],S=[],f),s),v===123)if(u===0)n3(b,e,C,C,w,s,f,a,S);else switch(h===99&&as(b,3)===110?100:h){case 100:case 108:case 109:case 115:n3(t,C,C,i&&x_(sk(t,C,C,0,0,r,a,y,r,w=[],f),S),r,S,f,a,i?w:S);break;default:n3(b,C,C,C,[""],S,0,a,S)}}c=u=d=0,g=m=1,y=b="",f=o;break;case 58:f=1+Wl(b),d=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&bwe()==125)continue}switch(b+=SS(v),v*g){case 38:m=u>0?1:(b+="\f",-1);break;case 44:a[c++]=(Wl(b)-1)*m,m=1;break;case 64:tc()===45&&(b+=t3(ko())),h=tc(),u=f=Wl(y=b+=Bwe(e3())),v++;break;case 45:p===45&&Wl(b)==2&&(g=0)}}return s}function sk(t,e,n,i,r,s,o,a,l,c,u){for(var f=r-1,h=r===0?s:[""],d=pR(h),p=0,g=0,A=0;p<i;++p)for(var m=0,v=Av(t,f+1,f=xwe(g=o[p])),y=t;m<d;++m)(y=wq(g>0?h[m]+" "+v:Wn(v,/&\f/g,h[m])))&&(l[A++]=y);return bS(t,e,n,r===0?hR:a,l,c,u)}function Pwe(t,e,n){return bS(t,e,n,_q,SS(Cwe()),Av(t,2,-2),0)}function ok(t,e,n,i){return bS(t,e,n,dR,Av(t,0,i),Av(t,i+1,-1),i)}function Nm(t,e){for(var n="",i=pR(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function Dwe(t,e,n,i){switch(t.type){case ywe:if(t.children.length)break;case vwe:case dR:return t.return=t.return||t.value;case _q:return"";case Eq:return t.return=t.value+"{"+Nm(t.children,i)+"}";case hR:t.value=t.props.join(",")}return Wl(n=Nm(t.children,i))?t.return=t.value+"{"+n+"}":""}function Lwe(t){var e=pR(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function Fwe(t){return function(e){e.root||(e=e.return)&&t(e)}}var Owe=function(e,n,i){for(var r=0,s=0;r=s,s=tc(),r===38&&s===12&&(n[i]=1),!vv(s);)ko();return iy(e,xo)},zwe=function(e,n){var i=-1,r=44;do switch(vv(r)){case 0:r===38&&tc()===12&&(n[i]=1),e[i]+=Owe(xo-1,n,i);break;case 2:e[i]+=t3(r);break;case 4:if(r===44){e[++i]=tc()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=SS(r)}while(r=ko());return e},Uwe=function(e,n){return bq(zwe(Cq(e),n))},ak=new WeakMap,kwe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!ak.get(i))&&!r){ak.set(e,!0);for(var s=[],o=Uwe(n,s),a=i.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},Nwe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Mq(t,e){switch(Ewe(t,e)){case 5103:return Vn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Vn+t+BE+t+ys+t+t;case 6828:case 4268:return Vn+t+ys+t+t;case 6165:return Vn+t+ys+"flex-"+t+t;case 5187:return Vn+t+Wn(t,/(\w+).+(:[^]+)/,Vn+"box-$1$2"+ys+"flex-$1$2")+t;case 5443:return Vn+t+ys+"flex-item-"+Wn(t,/flex-|-self/,"")+t;case 4675:return Vn+t+ys+"flex-line-pack"+Wn(t,/align-content|flex-|-self/,"")+t;case 5548:return Vn+t+ys+Wn(t,"shrink","negative")+t;case 5292:return Vn+t+ys+Wn(t,"basis","preferred-size")+t;case 6060:return Vn+"box-"+Wn(t,"-grow","")+Vn+t+ys+Wn(t,"grow","positive")+t;case 4554:return Vn+Wn(t,/([^-])(transform)/g,"$1"+Vn+"$2")+t;case 6187:return Wn(Wn(Wn(t,/(zoom-|grab)/,Vn+"$1"),/(image-set)/,Vn+"$1"),t,"")+t;case 5495:case 3959:return Wn(t,/(image-set\([^]*)/,Vn+"$1$`$1");case 4968:return Wn(Wn(t,/(.+:)(flex-)?(.*)/,Vn+"box-pack:$3"+ys+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vn+t+t;case 4095:case 3583:case 4068:case 2532:return Wn(t,/(.+)-inline(.+)/,Vn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wl(t)-1-e>6)switch(as(t,e+1)){case 109:if(as(t,e+4)!==45)break;case 102:return Wn(t,/(.+:)(.+)-([^]+)/,"$1"+Vn+"$2-$3$1"+BE+(as(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~$I(t,"stretch")?Mq(Wn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(as(t,e+1)!==115)break;case 6444:switch(as(t,Wl(t)-3-(~$I(t,"!important")&&10))){case 107:return Wn(t,":",":"+Vn)+t;case 101:return Wn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vn+(as(t,14)===45?"inline-":"")+"box$3$1"+Vn+"$2$3$1"+ys+"$2box$3")+t}break;case 5936:switch(as(t,e+11)){case 114:return Vn+t+ys+Wn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Vn+t+ys+Wn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Vn+t+ys+Wn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Vn+t+ys+t+t}return t}var Gwe=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case dR:e.return=Mq(e.value,e.length);break;case Eq:return Nm([Tg(e,{value:Wn(e.value,"@","@"+Vn)})],r);case hR:if(e.length)return Swe(e.props,function(s){switch(wwe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Nm([Tg(e,{props:[Wn(s,/:(read-\w+)/,":"+BE+"$1")]})],r);case"::placeholder":return Nm([Tg(e,{props:[Wn(s,/:(plac\w+)/,":"+Vn+"input-$1")]}),Tg(e,{props:[Wn(s,/:(plac\w+)/,":"+BE+"$1")]}),Tg(e,{props:[Wn(s,/:(plac\w+)/,ys+"input-$1")]})],r)}return""})}},Hwe=[Gwe],Tq=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(g){var A=g.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var r=e.stylisPlugins||Hwe,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var A=g.getAttribute("data-emotion").split(" "),m=1;m<A.length;m++)s[A[m]]=!0;a.push(g)});var l,c=[kwe,Nwe];{var u,f=[Dwe,Fwe(function(g){u.insert(g)})],h=Lwe(c.concat(r,f)),d=function(A){return Nm(Rwe(A),h)};l=function(A,m,v,y){u=v,d(A?A+"{"+m.styles+"}":m.styles),y&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new Awe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},Iq={exports:{}},ei={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr=typeof Symbol=="function"&&Symbol.for,mR=Kr?Symbol.for("react.element"):60103,gR=Kr?Symbol.for("react.portal"):60106,MS=Kr?Symbol.for("react.fragment"):60107,TS=Kr?Symbol.for("react.strict_mode"):60108,IS=Kr?Symbol.for("react.profiler"):60114,BS=Kr?Symbol.for("react.provider"):60109,RS=Kr?Symbol.for("react.context"):60110,AR=Kr?Symbol.for("react.async_mode"):60111,PS=Kr?Symbol.for("react.concurrent_mode"):60111,DS=Kr?Symbol.for("react.forward_ref"):60112,LS=Kr?Symbol.for("react.suspense"):60113,Qwe=Kr?Symbol.for("react.suspense_list"):60120,FS=Kr?Symbol.for("react.memo"):60115,OS=Kr?Symbol.for("react.lazy"):60116,Vwe=Kr?Symbol.for("react.block"):60121,Wwe=Kr?Symbol.for("react.fundamental"):60117,jwe=Kr?Symbol.for("react.responder"):60118,Xwe=Kr?Symbol.for("react.scope"):60119;function Wo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case mR:switch(t=t.type,t){case AR:case PS:case MS:case IS:case TS:case LS:return t;default:switch(t=t&&t.$$typeof,t){case RS:case DS:case OS:case FS:case BS:return t;default:return e}}case gR:return e}}}function Bq(t){return Wo(t)===PS}ei.AsyncMode=AR;ei.ConcurrentMode=PS;ei.ContextConsumer=RS;ei.ContextProvider=BS;ei.Element=mR;ei.ForwardRef=DS;ei.Fragment=MS;ei.Lazy=OS;ei.Memo=FS;ei.Portal=gR;ei.Profiler=IS;ei.StrictMode=TS;ei.Suspense=LS;ei.isAsyncMode=function(t){return Bq(t)||Wo(t)===AR};ei.isConcurrentMode=Bq;ei.isContextConsumer=function(t){return Wo(t)===RS};ei.isContextProvider=function(t){return Wo(t)===BS};ei.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===mR};ei.isForwardRef=function(t){return Wo(t)===DS};ei.isFragment=function(t){return Wo(t)===MS};ei.isLazy=function(t){return Wo(t)===OS};ei.isMemo=function(t){return Wo(t)===FS};ei.isPortal=function(t){return Wo(t)===gR};ei.isProfiler=function(t){return Wo(t)===IS};ei.isStrictMode=function(t){return Wo(t)===TS};ei.isSuspense=function(t){return Wo(t)===LS};ei.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===MS||t===PS||t===IS||t===TS||t===LS||t===Qwe||typeof t=="object"&&t!==null&&(t.$$typeof===OS||t.$$typeof===FS||t.$$typeof===BS||t.$$typeof===RS||t.$$typeof===DS||t.$$typeof===Wwe||t.$$typeof===jwe||t.$$typeof===Xwe||t.$$typeof===Vwe)};ei.typeOf=Wo;Iq.exports=ei;var Ywe=Iq.exports,Rq=Ywe,qwe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$we={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Pq={};Pq[Rq.ForwardRef]=qwe;Pq[Rq.Memo]=$we;var Kwe=!0;function Jwe(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var Dq=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||Kwe===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},Lq=function(e,n,i){Dq(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Zwe(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var eSe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tSe=!1,nSe=/[A-Z]|^ms/g,iSe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Fq=function(e){return e.charCodeAt(1)===45},lk=function(e){return e!=null&&typeof e!="boolean"},y5=xq(function(t){return Fq(t)?t:t.replace(nSe,"-$&").toLowerCase()}),ck=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(iSe,function(i,r,s){return jl={name:r,styles:s,next:jl},r})}return eSe[e]!==1&&!Fq(e)&&typeof n=="number"&&n!==0?n+"px":n},rSe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function yv(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return jl={name:r.name,styles:r.styles,next:jl},r.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)jl={name:o.name,styles:o.styles,next:jl},o=o.next;var a=s.styles+";";return a}return sSe(t,e,n)}case"function":{if(t!==void 0){var l=jl,c=n(t);return jl=l,yv(t,e,c)}break}}var u=n;if(e==null)return u;var f=e[u];return f!==void 0?f:u}function sSe(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=yv(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?i+=s+"{"+e[a]+"}":lk(a)&&(i+=y5(s)+":"+ck(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&tSe)throw new Error(rSe);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)lk(o[l])&&(i+=y5(s)+":"+ck(s,o[l])+";");else{var c=yv(t,e,o);switch(s){case"animation":case"animationName":{i+=y5(s)+":"+c+";";break}default:i+=s+"{"+c+"}"}}}}return i}var uk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,jl;function vR(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";jl=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,r+=yv(n,e,s);else{var o=s;r+=o[0]}for(var a=1;a<t.length;a++)if(r+=yv(n,e,t[a]),i){var l=s;r+=l[a]}uk.lastIndex=0;for(var c="",u;(u=uk.exec(r))!==null;)c+="-"+u[1];var f=Zwe(r)+c;return{name:f,styles:r,next:jl}}var oSe=function(e){return e()},Oq=c3.useInsertionEffect?c3.useInsertionEffect:!1,aSe=Oq||oSe,fk=Oq||E.useLayoutEffect,zq=E.createContext(typeof HTMLElement<"u"?Tq({key:"css"}):null),lSe=zq.Provider,Uq=function(e){return E.forwardRef(function(n,i){var r=E.useContext(zq);return e(n,r,i)})},zS=E.createContext({}),x5={exports:{}},hk;function kq(){return hk||(hk=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var s in r)({}).hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(x5)),x5.exports}kq();var cSe=Uq(function(t,e){var n=t.styles,i=vR([n],void 0,E.useContext(zS)),r=E.useRef();return fk(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),r.current=[o,a],function(){o.flush()}},[e]),fk(function(){var s=r.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(i.next!==void 0&&Lq(e,i.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",i,o,!1)},[e,i.name]),null});function Nq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return vR(e)}var US=function(){var e=Nq.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},uSe=dwe,fSe=function(e){return e!=="theme"},dk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?uSe:fSe},pk=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},hSe=!1,dSe=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return Dq(n,i,r),aSe(function(){return Lq(n,i,r)}),null},pSe=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=pk(e,n,i),l=a||dk(r),c=!l("as");return function(){var u=arguments,f=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{f.push(u[0][0]);for(var h=u.length,d=1;d<h;d++)f.push(u[d],u[0][d])}var p=Uq(function(g,A,m){var v=c&&g.as||r,y="",w=[],S=g;if(g.theme==null){S={};for(var C in g)S[C]=g[C];S.theme=E.useContext(zS)}typeof g.className=="string"?y=Jwe(A.registered,w,g.className):g.className!=null&&(y=g.className+" ");var b=vR(f.concat(w),A.registered,S);y+=A.key+"-"+b.name,o!==void 0&&(y+=" "+o);var M=c&&a===void 0?dk(v):l,I={};for(var T in g)c&&T==="as"||M(T)&&(I[T]=g[T]);return I.className=y,m&&(I.ref=m),E.createElement(E.Fragment,null,E.createElement(dSe,{cache:A,serialized:b,isStringTag:typeof v=="string"}),E.createElement(v,I))});return p.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=r,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return o===void 0&&hSe?"NO_COMPONENT_SELECTOR":"."+o}}),p.withComponent=function(g,A){return t(g,Te({},n,A,{shouldForwardProp:pk(p,A,!0)})).apply(void 0,f)},p}},mSe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],JI=pSe.bind();mSe.forEach(function(t){JI[t]=JI(t)});let ZI;typeof document=="object"&&(ZI=Tq({key:"css",prepend:!0}));function gSe(t){const{injectFirst:e,children:n}=t;return e&&ZI?Re.jsx(lSe,{value:ZI,children:n}):n}function ASe(t){return t==null||Object.keys(t).length===0}function vSe(t){const{styles:e,defaultTheme:n={}}=t,i=typeof e=="function"?r=>e(ASe(r)?n:r):e;return Re.jsx(cSe,{styles:i})}function Gq(t,e){return JI(t,e)}const ySe=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},xSe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:vSe,StyledEngineProvider:gSe,ThemeContext:zS,css:Nq,default:Gq,internal_processStyles:ySe,keyframes:US},Symbol.toStringTag,{value:"Module"}));function Hu(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Hq(t){if(!Hu(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Hq(t[n])}),e}function nc(t,e,n={clone:!0}){const i=n.clone?Te({},t):t;return Hu(t)&&Hu(e)&&Object.keys(e).forEach(r=>{Hu(e[r])&&Object.prototype.hasOwnProperty.call(t,r)&&Hu(t[r])?i[r]=nc(t[r],e[r],n):n.clone?i[r]=Hu(e[r])?Hq(e[r]):e[r]:i[r]=e[r]}),i}const _Se=Object.freeze(Object.defineProperty({__proto__:null,default:nc,isPlainObject:Hu},Symbol.toStringTag,{value:"Module"})),ESe=["values","unit","step"],wSe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>Te({},n,{[i.key]:i.val}),{})};function Qq(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=t,r=bs(t,ESe),s=wSe(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-i/100}${n})`}function c(h,d){const p=o.indexOf(d);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:d)-i/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function f(h){const d=o.indexOf(h);return d===0?a(o[1]):d===o.length-1?l(o[d]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return Te({keys:o,values:s,up:a,down:l,between:c,only:u,not:f,unit:n},r)}const SSe={borderRadius:4};function xA(t,e){return e?nc(t,e,{clone:!1}):t}const yR={xs:0,sm:600,md:900,lg:1200,xl:1536},mk={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${yR[t]}px)`};function nu(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||mk;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=i.breakpoints||mk;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||yR).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function CSe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function bSe(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function Pi(t){if(typeof t!="string")throw new Error(gv(7));return t.charAt(0).toUpperCase()+t.slice(1)}const MSe=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"}));function kS(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function RE(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=kS(t,n)||i,e&&(r=e(r,i,t)),r}function ur(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=kS(l,i)||{};return nu(o,a,f=>{let h=RE(c,r,f);return f===h&&typeof f=="string"&&(h=RE(c,r,`${e}${f==="default"?"":Pi(f)}`,f)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function TSe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const ISe={m:"margin",p:"padding"},BSe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},RSe=TSe(t=>{if(t.length>2)if(gk[t])t=gk[t];else return[t];const[e,n]=t.split(""),i=ISe[e],r=BSe[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),xR=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_R=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...xR,..._R];function ry(t,e,n,i){var r;const s=(r=kS(t,e,!1))!=null?r:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function Vq(t){return ry(t,"spacing",8)}function sy(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),i=t(n);return e>=0?i:typeof i=="number"?-i:`-${i}`}function PSe(t,e){return n=>t.reduce((i,r)=>(i[r]=sy(e,n),i),{})}function DSe(t,e,n,i){if(e.indexOf(n)===-1)return null;const r=RSe(n),s=PSe(r,i),o=t[n];return nu(t,o,s)}function Wq(t,e){const n=Vq(t.theme);return Object.keys(t).map(i=>DSe(t,e,i,n)).reduce(xA,{})}function Wi(t){return Wq(t,xR)}Wi.propTypes={};Wi.filterProps=xR;function ji(t){return Wq(t,_R)}ji.propTypes={};ji.filterProps=_R;function LSe(t=8){if(t.mui)return t;const e=Vq({spacing:t}),n=(...i)=>(i.length===0?[1]:i).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function NS(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?xA(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function ga(t){return typeof t!="number"?t:`${t}px solid`}function Fa(t,e){return ur({prop:t,themeKey:"borders",transform:e})}const FSe=Fa("border",ga),OSe=Fa("borderTop",ga),zSe=Fa("borderRight",ga),USe=Fa("borderBottom",ga),kSe=Fa("borderLeft",ga),NSe=Fa("borderColor"),GSe=Fa("borderTopColor"),HSe=Fa("borderRightColor"),QSe=Fa("borderBottomColor"),VSe=Fa("borderLeftColor"),WSe=Fa("outline",ga),jSe=Fa("outlineColor"),GS=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=ry(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:sy(e,i)});return nu(t,t.borderRadius,n)}return null};GS.propTypes={};GS.filterProps=["borderRadius"];NS(FSe,OSe,zSe,USe,kSe,NSe,GSe,HSe,QSe,VSe,GS,WSe,jSe);const HS=t=>{if(t.gap!==void 0&&t.gap!==null){const e=ry(t.theme,"spacing",8),n=i=>({gap:sy(e,i)});return nu(t,t.gap,n)}return null};HS.propTypes={};HS.filterProps=["gap"];const QS=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=ry(t.theme,"spacing",8),n=i=>({columnGap:sy(e,i)});return nu(t,t.columnGap,n)}return null};QS.propTypes={};QS.filterProps=["columnGap"];const VS=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=ry(t.theme,"spacing",8),n=i=>({rowGap:sy(e,i)});return nu(t,t.rowGap,n)}return null};VS.propTypes={};VS.filterProps=["rowGap"];const XSe=ur({prop:"gridColumn"}),YSe=ur({prop:"gridRow"}),qSe=ur({prop:"gridAutoFlow"}),$Se=ur({prop:"gridAutoColumns"}),KSe=ur({prop:"gridAutoRows"}),JSe=ur({prop:"gridTemplateColumns"}),ZSe=ur({prop:"gridTemplateRows"}),eCe=ur({prop:"gridTemplateAreas"}),tCe=ur({prop:"gridArea"});NS(HS,QS,VS,XSe,YSe,qSe,$Se,KSe,JSe,ZSe,eCe,tCe);function Gm(t,e){return e==="grey"?e:t}const nCe=ur({prop:"color",themeKey:"palette",transform:Gm}),iCe=ur({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Gm}),rCe=ur({prop:"backgroundColor",themeKey:"palette",transform:Gm});NS(nCe,iCe,rCe);function Do(t){return t<=1&&t!==0?`${t*100}%`:t}const sCe=ur({prop:"width",transform:Do}),ER=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,r;const s=((i=t.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[n])||yR[n];return s?((r=t.theme)==null||(r=r.breakpoints)==null?void 0:r.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Do(n)}};return nu(t,t.maxWidth,e)}return null};ER.filterProps=["maxWidth"];const oCe=ur({prop:"minWidth",transform:Do}),aCe=ur({prop:"height",transform:Do}),lCe=ur({prop:"maxHeight",transform:Do}),cCe=ur({prop:"minHeight",transform:Do});ur({prop:"size",cssProperty:"width",transform:Do});ur({prop:"size",cssProperty:"height",transform:Do});const uCe=ur({prop:"boxSizing"});NS(sCe,ER,oCe,aCe,lCe,cCe,uCe);const oy={border:{themeKey:"borders",transform:ga},borderTop:{themeKey:"borders",transform:ga},borderRight:{themeKey:"borders",transform:ga},borderBottom:{themeKey:"borders",transform:ga},borderLeft:{themeKey:"borders",transform:ga},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ga},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:GS},color:{themeKey:"palette",transform:Gm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Gm},backgroundColor:{themeKey:"palette",transform:Gm},p:{style:ji},pt:{style:ji},pr:{style:ji},pb:{style:ji},pl:{style:ji},px:{style:ji},py:{style:ji},padding:{style:ji},paddingTop:{style:ji},paddingRight:{style:ji},paddingBottom:{style:ji},paddingLeft:{style:ji},paddingX:{style:ji},paddingY:{style:ji},paddingInline:{style:ji},paddingInlineStart:{style:ji},paddingInlineEnd:{style:ji},paddingBlock:{style:ji},paddingBlockStart:{style:ji},paddingBlockEnd:{style:ji},m:{style:Wi},mt:{style:Wi},mr:{style:Wi},mb:{style:Wi},ml:{style:Wi},mx:{style:Wi},my:{style:Wi},margin:{style:Wi},marginTop:{style:Wi},marginRight:{style:Wi},marginBottom:{style:Wi},marginLeft:{style:Wi},marginX:{style:Wi},marginY:{style:Wi},marginInline:{style:Wi},marginInlineStart:{style:Wi},marginInlineEnd:{style:Wi},marginBlock:{style:Wi},marginBlockStart:{style:Wi},marginBlockEnd:{style:Wi},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:HS},rowGap:{style:VS},columnGap:{style:QS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Do},maxWidth:{style:ER},minWidth:{transform:Do},height:{transform:Do},maxHeight:{transform:Do},minHeight:{transform:Do},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function fCe(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function hCe(t,e){return typeof t=="function"?t(e):t}function jq(){function t(n,i,r,s){const o={[n]:i,theme:r},a=s[n];if(!a)return{[n]:i};const{cssProperty:l=n,themeKey:c,transform:u,style:f}=a;if(i==null)return null;if(c==="typography"&&i==="inherit")return{[n]:i};const h=kS(r,c)||{};return f?f(o):nu(o,i,p=>{let g=RE(h,u,p);return p===g&&typeof p=="string"&&(g=RE(h,u,`${n}${p==="default"?"":Pi(p)}`,p)),l===!1?g:{[l]:g}})}function e(n){var i;const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=(i=s.unstable_sxConfig)!=null?i:oy;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=CSe(s.breakpoints),f=Object.keys(u);let h=u;return Object.keys(c).forEach(d=>{const p=hCe(c[d],s);if(p!=null)if(typeof p=="object")if(o[d])h=xA(h,t(d,p,s,o));else{const g=nu({theme:s},p,A=>({[d]:A}));fCe(g,p)?h[d]=e({sx:p,theme:s}):h=xA(h,g)}else h=xA(h,t(d,p,s,o))}),bSe(f,h)}return Array.isArray(r)?r.map(a):a(r)}return e}const ay=jq();ay.filterProps=["sx"];function Xq(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const dCe=["breakpoints","palette","spacing","shape"];function wR(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={}}=t,o=bs(t,dCe),a=Qq(n),l=LSe(r);let c=nc({breakpoints:a,direction:"ltr",components:{},palette:Te({mode:"light"},i),spacing:l,shape:Te({},SSe,s)},o);return c.applyStyles=Xq,c=e.reduce((u,f)=>nc(u,f),c),c.unstable_sxConfig=Te({},oy,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(f){return ay({sx:f,theme:this})},c}const pCe=Object.freeze(Object.defineProperty({__proto__:null,default:wR,private_createBreakpoints:Qq,unstable_applyStyles:Xq},Symbol.toStringTag,{value:"Module"}));function mCe(t){return Object.keys(t).length===0}function gCe(t=null){const e=E.useContext(zS);return!e||mCe(e)?t:e}const ACe=wR();function Yq(t=ACe){return gCe(t)}const vCe=["sx"],yCe=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:oy;return Object.keys(t).forEach(s=>{r[s]?i.systemProps[s]=t[s]:i.otherProps[s]=t[s]}),i};function SR(t){const{sx:e}=t,n=bs(t,vCe),{systemProps:i,otherProps:r}=yCe(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Hu(a)?Te({},i,a):i}:s=Te({},i,e),Te({},r,{sx:s})}const xCe=Object.freeze(Object.defineProperty({__proto__:null,default:ay,extendSxProp:SR,unstable_createStyleFunctionSx:jq,unstable_defaultSxConfig:oy},Symbol.toStringTag,{value:"Module"})),Ak=t=>t,_Ce=()=>{let t=Ak;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Ak}}},CR=_Ce();function qq(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=qq(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function qi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=qq(t))&&(i&&(i+=" "),i+=e);return i}const ECe=["className","component"];function wCe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:r}=t,s=Gq("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ay);return E.forwardRef(function(l,c){const u=Yq(n),f=SR(l),{className:h,component:d="div"}=f,p=bs(f,ECe);return Re.jsx(s,Te({as:d,ref:c,className:qi(h,r?r(i):i),theme:e&&u[e]||u},p))})}const SCe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function D0(t,e,n="Mui"){const i=SCe[e];return i?`${n}-${i}`:`${CR.generate(t)}-${e}`}function xd(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=D0(t,r,n)}),i}var $q={exports:{}},ti={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR=Symbol.for("react.element"),MR=Symbol.for("react.portal"),WS=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),XS=Symbol.for("react.profiler"),YS=Symbol.for("react.provider"),qS=Symbol.for("react.context"),CCe=Symbol.for("react.server_context"),$S=Symbol.for("react.forward_ref"),KS=Symbol.for("react.suspense"),JS=Symbol.for("react.suspense_list"),ZS=Symbol.for("react.memo"),eC=Symbol.for("react.lazy"),bCe=Symbol.for("react.offscreen"),Kq;Kq=Symbol.for("react.module.reference");function Oa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case bR:switch(t=t.type,t){case WS:case XS:case jS:case KS:case JS:return t;default:switch(t=t&&t.$$typeof,t){case CCe:case qS:case $S:case eC:case ZS:case YS:return t;default:return e}}case MR:return e}}}ti.ContextConsumer=qS;ti.ContextProvider=YS;ti.Element=bR;ti.ForwardRef=$S;ti.Fragment=WS;ti.Lazy=eC;ti.Memo=ZS;ti.Portal=MR;ti.Profiler=XS;ti.StrictMode=jS;ti.Suspense=KS;ti.SuspenseList=JS;ti.isAsyncMode=function(){return!1};ti.isConcurrentMode=function(){return!1};ti.isContextConsumer=function(t){return Oa(t)===qS};ti.isContextProvider=function(t){return Oa(t)===YS};ti.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===bR};ti.isForwardRef=function(t){return Oa(t)===$S};ti.isFragment=function(t){return Oa(t)===WS};ti.isLazy=function(t){return Oa(t)===eC};ti.isMemo=function(t){return Oa(t)===ZS};ti.isPortal=function(t){return Oa(t)===MR};ti.isProfiler=function(t){return Oa(t)===XS};ti.isStrictMode=function(t){return Oa(t)===jS};ti.isSuspense=function(t){return Oa(t)===KS};ti.isSuspenseList=function(t){return Oa(t)===JS};ti.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WS||t===XS||t===jS||t===KS||t===JS||t===bCe||typeof t=="object"&&t!==null&&(t.$$typeof===eC||t.$$typeof===ZS||t.$$typeof===YS||t.$$typeof===qS||t.$$typeof===$S||t.$$typeof===Kq||t.getModuleId!==void 0)};ti.typeOf=Oa;$q.exports=ti;var vk=$q.exports;const MCe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Jq(t){const e=`${t}`.match(MCe);return e&&e[1]||""}function Zq(t,e=""){return t.displayName||t.name||Jq(t)||e}function yk(t,e,n){const i=Zq(e);return t.displayName||(i!==""?`${n}(${i})`:n)}function TCe(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Zq(t,"Component");if(typeof t=="object")switch(t.$$typeof){case vk.ForwardRef:return yk(t,t.render,"ForwardRef");case vk.Memo:return yk(t,t.type,"memo");default:return}}}const ICe=Object.freeze(Object.defineProperty({__proto__:null,default:TCe,getFunctionName:Jq},Symbol.toStringTag,{value:"Module"}));function e6(t,e){const n=Te({},e);return Object.keys(t).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=Te({},t[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=t[i]||{},s=e[i];n[i]={},!s||!Object.keys(s)?n[i]=r:!r||!Object.keys(r)?n[i]=s:(n[i]=Te({},s),Object.keys(r).forEach(o=>{n[i][o]=e6(r[o],s[o])}))}else n[i]===void 0&&(n[i]=t[i])}),n}const TR=typeof window<"u"?E.useLayoutEffect:E.useEffect;function im(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const BCe=Object.freeze(Object.defineProperty({__proto__:null,default:im},Symbol.toStringTag,{value:"Module"}));function RCe(...t){return t.reduce((e,n)=>n==null?e:function(...r){e.apply(this,r),n.apply(this,r)},()=>{})}function PCe(t,e=166){let n;function i(...r){const s=()=>{t.apply(this,r)};clearTimeout(n),n=setTimeout(s,e)}return i.clear=()=>{clearTimeout(n)},i}function DCe(t,e){return()=>null}function LCe(t,e){var n,i;return E.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(i=t.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function Hm(t){return t&&t.ownerDocument||document}function FCe(t){return Hm(t).defaultView||window}function OCe(t,e){return()=>null}function e$(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let xk=0;function zCe(t){const[e,n]=E.useState(t),i=t||e;return E.useEffect(()=>{e==null&&(xk+=1,n(`mui-${xk}`))},[e]),i}const _k=c3.useId;function UCe(t){if(_k!==void 0){const e=_k();return t??e}return zCe(t)}function kCe(t,e,n,i,r){return null}function t$({controlled:t,default:e,name:n,state:i="value"}){const{current:r}=E.useRef(t!==void 0),[s,o]=E.useState(e),a=r?t:s,l=E.useCallback(c=>{r||o(c)},[]);return[a,l]}function Ku(t){const e=E.useRef(t);return TR(()=>{e.current=t}),E.useRef((...n)=>(0,e.current)(...n)).current}function p0(...t){return E.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{e$(n,e)})},t)}const Ek={};function NCe(t,e){const n=E.useRef(Ek);return n.current===Ek&&(n.current=t(e)),n}const GCe=[];function HCe(t){E.useEffect(t,GCe)}class tC{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new tC}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function QCe(){const t=NCe(tC.create).current;return HCe(t.disposeEffect),t}let nC=!0,t6=!1;const VCe=new tC,WCe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function jCe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&WCe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function XCe(t){t.metaKey||t.altKey||t.ctrlKey||(nC=!0)}function _5(){nC=!1}function YCe(){this.visibilityState==="hidden"&&t6&&(nC=!0)}function qCe(t){t.addEventListener("keydown",XCe,!0),t.addEventListener("mousedown",_5,!0),t.addEventListener("pointerdown",_5,!0),t.addEventListener("touchstart",_5,!0),t.addEventListener("visibilitychange",YCe,!0)}function $Ce(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return nC||jCe(e)}function IR(){const t=E.useCallback(r=>{r!=null&&qCe(r.ownerDocument)},[]),e=E.useRef(!1);function n(){return e.current?(t6=!0,VCe.start(100,()=>{t6=!1}),e.current=!1,!0):!1}function i(r){return $Ce(r)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:n,ref:t}}const KCe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function ly(t,e,n=void 0){const i={};return Object.keys(t).forEach(r=>{i[r]=t[r].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),i}function _A(t){return typeof t=="string"}function JCe(t,e,n){return t===void 0||_A(t)?e:Te({},e,{ownerState:Te({},e.ownerState,n)})}function i3(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function wk(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function ZCe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const d=qi(n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),p=Te({},n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),g=Te({},n,r,i);return d.length>0&&(g.className=d),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=i3(Te({},r,i)),a=wk(i),l=wk(r),c=e(o),u=qi(c==null?void 0:c.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),f=Te({},c==null?void 0:c.style,n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),h=Te({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(f).length>0&&(h.style=f),{props:h,internalRef:c.ref}}function e4e(t,e,n){return typeof t=="function"?t(e,n):t}const t4e=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Pu(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r,skipResolvingSlotProps:s=!1}=t,o=bs(t,t4e),a=s?{}:e4e(i,r),{props:l,internalRef:c}=ZCe(Te({},o,{externalSlotProps:a})),u=p0(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return JCe(n,Te({},l,{ref:u}),r)}const n4e=E.createContext(),i4e=()=>{const t=E.useContext(n4e);return t??!1},r4e=E.createContext(void 0);function s4e(t){const{theme:e,name:n,props:i}=t;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?e6(r.defaultProps,i):!r.styleOverrides&&!r.variants?e6(r,i):i}function o4e({props:t,name:e}){const n=E.useContext(r4e);return s4e({props:t,name:e,theme:{components:n}})}function a4e(t,e){return Te({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var fr={},n$={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(n$);var L0=n$.exports;const l4e=iu(fwe),c4e=iu(BCe);var i$=L0;Object.defineProperty(fr,"__esModule",{value:!0});var PE=fr.alpha=a$;fr.blend=x4e;fr.colorChannel=void 0;var n6=fr.darken=RR;fr.decomposeColor=Pa;fr.emphasize=l$;var u4e=fr.getContrastRatio=m4e;fr.getLuminance=DE;fr.hexToRgb=r$;fr.hslToRgb=o$;var i6=fr.lighten=PR;fr.private_safeAlpha=g4e;fr.private_safeColorChannel=void 0;fr.private_safeDarken=A4e;fr.private_safeEmphasize=y4e;fr.private_safeLighten=v4e;fr.recomposeColor=F0;fr.rgbToHex=p4e;var Sk=i$(l4e),f4e=i$(c4e);function BR(t,e=0,n=1){return(0,f4e.default)(t,e,n)}function r$(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function h4e(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Pa(t){if(t.type)return t;if(t.charAt(0)==="#")return Pa(r$(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,Sk.default)(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error((0,Sk.default)(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}const s$=t=>{const e=Pa(t);return e.values.slice(0,3).map((n,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${n}%`:n).join(" ")};fr.colorChannel=s$;const d4e=(t,e)=>{try{return s$(t)}catch{return t}};fr.private_safeColorChannel=d4e;function F0(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.indexOf("rgb")!==-1?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function p4e(t){if(t.indexOf("#")===0)return t;const{values:e}=Pa(t);return`#${e.map((n,i)=>h4e(i===3?Math.round(255*n):n)).join("")}`}function o$(t){t=Pa(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),o=(c,u=(c+n/30)%12)=>r-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),F0({type:a,values:l})}function DE(t){t=Pa(t);let e=t.type==="hsl"||t.type==="hsla"?Pa(o$(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function m4e(t,e){const n=DE(t),i=DE(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function a$(t,e){return t=Pa(t),e=BR(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,F0(t)}function g4e(t,e,n){try{return a$(t,e)}catch{return t}}function RR(t,e){if(t=Pa(t),e=BR(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return F0(t)}function A4e(t,e,n){try{return RR(t,e)}catch{return t}}function PR(t,e){if(t=Pa(t),e=BR(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return F0(t)}function v4e(t,e,n){try{return PR(t,e)}catch{return t}}function l$(t,e=.15){return DE(t)>.5?RR(t,e):PR(t,e)}function y4e(t,e,n){try{return l$(t,e)}catch{return t}}function x4e(t,e,n,i=1){const r=(l,c)=>Math.round((l**(1/i)*(1-n)+c**(1/i)*n)**i),s=Pa(t),o=Pa(e),a=[r(s.values[0],o.values[0]),r(s.values[1],o.values[1]),r(s.values[2],o.values[2])];return F0({type:"rgb",values:a})}const xv={black:"#000",white:"#fff"},_4e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Vp={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Wp={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ig={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},jp={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Xp={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Yp={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},E4e=["mode","contrastThreshold","tonalOffset"],Ck={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:xv.white,default:xv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E5={text:{primary:xv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:xv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function bk(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=i6(t.main,r):e==="dark"&&(t.dark=n6(t.main,s)))}function w4e(t="light"){return t==="dark"?{main:jp[200],light:jp[50],dark:jp[400]}:{main:jp[700],light:jp[400],dark:jp[800]}}function S4e(t="light"){return t==="dark"?{main:Vp[200],light:Vp[50],dark:Vp[400]}:{main:Vp[500],light:Vp[300],dark:Vp[700]}}function C4e(t="light"){return t==="dark"?{main:Wp[500],light:Wp[300],dark:Wp[700]}:{main:Wp[700],light:Wp[400],dark:Wp[800]}}function b4e(t="light"){return t==="dark"?{main:Xp[400],light:Xp[300],dark:Xp[700]}:{main:Xp[700],light:Xp[500],dark:Xp[900]}}function M4e(t="light"){return t==="dark"?{main:Yp[400],light:Yp[300],dark:Yp[700]}:{main:Yp[800],light:Yp[500],dark:Yp[900]}}function T4e(t="light"){return t==="dark"?{main:Ig[400],light:Ig[300],dark:Ig[700]}:{main:"#ed6c02",light:Ig[500],dark:Ig[900]}}function I4e(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2}=t,r=bs(t,E4e),s=t.primary||w4e(e),o=t.secondary||S4e(e),a=t.error||C4e(e),l=t.info||b4e(e),c=t.success||M4e(e),u=t.warning||T4e(e);function f(g){return u4e(g,E5.text.primary)>=n?E5.text.primary:Ck.text.primary}const h=({color:g,name:A,mainShade:m=500,lightShade:v=300,darkShade:y=700})=>{if(g=Te({},g),!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(gv(11,A?` (${A})`:"",m));if(typeof g.main!="string")throw new Error(gv(12,A?` (${A})`:"",JSON.stringify(g.main)));return bk(g,"light",v,i),bk(g,"dark",y,i),g.contrastText||(g.contrastText=f(g.main)),g},d={dark:E5,light:Ck};return nc(Te({common:Te({},xv),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:_4e,contrastThreshold:n,getContrastText:f,augmentColor:h,tonalOffset:i},d[e]),r)}const B4e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function R4e(t){return Math.round(t*1e5)/1e5}const Mk={textTransform:"uppercase"},Tk='"Roboto", "Helvetica", "Arial", sans-serif';function P4e(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:i=Tk,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:f}=n,h=bs(n,B4e),d=r/14,p=f||(m=>`${m/c*d}rem`),g=(m,v,y,w,S)=>Te({fontFamily:i,fontWeight:m,fontSize:p(v),lineHeight:y},i===Tk?{letterSpacing:`${R4e(w/v)}em`}:{},S,u),A={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,Mk),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,Mk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return nc(Te({htmlFontSize:c,pxToRem:p,fontFamily:i,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},A),h,{clone:!1})}const D4e=.2,L4e=.14,F4e=.12;function Ii(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${D4e})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${L4e})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${F4e})`].join(",")}const O4e=["none",Ii(0,2,1,-1,0,1,1,0,0,1,3,0),Ii(0,3,1,-2,0,2,2,0,0,1,5,0),Ii(0,3,3,-2,0,3,4,0,0,1,8,0),Ii(0,2,4,-1,0,4,5,0,0,1,10,0),Ii(0,3,5,-1,0,5,8,0,0,1,14,0),Ii(0,3,5,-1,0,6,10,0,0,1,18,0),Ii(0,4,5,-2,0,7,10,1,0,2,16,1),Ii(0,5,5,-3,0,8,10,1,0,3,14,2),Ii(0,5,6,-3,0,9,12,1,0,3,16,2),Ii(0,6,6,-3,0,10,14,1,0,4,18,3),Ii(0,6,7,-4,0,11,15,1,0,4,20,3),Ii(0,7,8,-4,0,12,17,2,0,5,22,4),Ii(0,7,8,-4,0,13,19,2,0,5,24,4),Ii(0,7,9,-4,0,14,21,2,0,5,26,4),Ii(0,8,9,-5,0,15,22,2,0,6,28,5),Ii(0,8,10,-5,0,16,24,2,0,6,30,5),Ii(0,8,11,-5,0,17,26,2,0,6,32,5),Ii(0,9,11,-5,0,18,28,2,0,7,34,6),Ii(0,9,12,-6,0,19,29,2,0,7,36,6),Ii(0,10,13,-6,0,20,31,3,0,8,38,7),Ii(0,10,13,-6,0,21,33,3,0,8,40,7),Ii(0,10,14,-6,0,22,35,3,0,8,42,7),Ii(0,11,14,-7,0,23,36,3,0,9,44,8),Ii(0,11,15,-7,0,24,38,3,0,9,46,8)],z4e=["duration","easing","delay"],U4e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},k4e={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ik(t){return`${Math.round(t)}ms`}function N4e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function G4e(t){const e=Te({},U4e,t.easing),n=Te({},k4e,t.duration);return Te({getAutoHeightDuration:N4e,create:(r=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return bs(s,z4e),(Array.isArray(r)?r:[r]).map(c=>`${c} ${typeof o=="string"?o:Ik(o)} ${a} ${typeof l=="string"?l:Ik(l)}`).join(",")}},t,{easing:e,duration:n})}const H4e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Q4e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function c$(t={},...e){const{mixins:n={},palette:i={},transitions:r={},typography:s={}}=t,o=bs(t,Q4e);if(t.vars)throw new Error(gv(18));const a=I4e(i),l=wR(t);let c=nc(l,{mixins:a4e(l.breakpoints,n),palette:a,shadows:O4e.slice(),typography:P4e(a,s),transitions:G4e(r),zIndex:Te({},H4e)});return c=nc(c,o),c=e.reduce((u,f)=>nc(u,f),c),c.unstable_sxConfig=Te({},oy,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(f){return ay({sx:f,theme:this})},c}const u$=c$();function V4e(){const t=Yq(u$);return t[fR]||t}var cy={},w5={exports:{}},Bk;function W4e(){return Bk||(Bk=1,function(t){function e(n,i){if(n==null)return{};var r={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(i.indexOf(s)>=0)continue;r[s]=n[s]}return r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(w5)),w5.exports}const j4e=iu(xSe),X4e=iu(_Se),Y4e=iu(MSe),q4e=iu(ICe),$4e=iu(pCe),K4e=iu(xCe);var O0=L0;Object.defineProperty(cy,"__esModule",{value:!0});var J4e=cy.default=fbe;cy.shouldForwardProp=r3;cy.systemDefaultTheme=void 0;var aa=O0(kq()),r6=O0(W4e()),Rk=sbe(j4e),Z4e=X4e;O0(Y4e);O0(q4e);var ebe=O0($4e),tbe=O0(K4e);const nbe=["ownerState"],ibe=["variants"],rbe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f$(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(f$=function(i){return i?n:e})(t)}function sbe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=f$(e);if(n&&n.has(t))return n.get(t);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=r?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}function obe(t){return Object.keys(t).length===0}function abe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function r3(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const lbe=cy.systemDefaultTheme=(0,ebe.default)(),cbe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function __({defaultTheme:t,theme:e,themeId:n}){return obe(e)?t:e[n]||e}function ube(t){return t?(e,n)=>n[t]:null}function s3(t,e){let{ownerState:n}=e,i=(0,r6.default)(e,nbe);const r=typeof t=="function"?t((0,aa.default)({ownerState:n},i)):t;if(Array.isArray(r))return r.flatMap(s=>s3(s,(0,aa.default)({ownerState:n},i)));if(r&&typeof r=="object"&&Array.isArray(r.variants)){const{variants:s=[]}=r;let a=(0,r6.default)(r,ibe);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,aa.default)({ownerState:n},i,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&i[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,aa.default)({ownerState:n},i,n)):l.style))}),a}return r}function fbe(t={}){const{themeId:e,defaultTheme:n=lbe,rootShouldForwardProp:i=r3,slotShouldForwardProp:r=r3}=t,s=o=>(0,tbe.default)((0,aa.default)({},o,{theme:__((0,aa.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,Rk.internal_processStyles)(o,S=>S.filter(C=>!(C!=null&&C.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:f,overridesResolver:h=ube(cbe(c))}=a,d=(0,r6.default)(a,rbe),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=f||!1;let A,m=r3;c==="Root"||c==="root"?m=i:c?m=r:abe(o)&&(m=void 0);const v=(0,Rk.default)(o,(0,aa.default)({shouldForwardProp:m,label:A},d)),y=S=>typeof S=="function"&&S.__emotion_real!==S||(0,Z4e.isPlainObject)(S)?C=>s3(S,(0,aa.default)({},C,{theme:__({theme:C.theme,defaultTheme:n,themeId:e})})):S,w=(S,...C)=>{let b=y(S);const M=C?C.map(y):[];l&&h&&M.push(D=>{const R=__((0,aa.default)({},D,{defaultTheme:n,themeId:e}));if(!R.components||!R.components[l]||!R.components[l].styleOverrides)return null;const z=R.components[l].styleOverrides,F={};return Object.entries(z).forEach(([V,j])=>{F[V]=s3(j,(0,aa.default)({},D,{theme:R}))}),h(D,F)}),l&&!p&&M.push(D=>{var R;const z=__((0,aa.default)({},D,{defaultTheme:n,themeId:e})),F=z==null||(R=z.components)==null||(R=R[l])==null?void 0:R.variants;return s3({variants:F},(0,aa.default)({},D,{theme:z}))}),g||M.push(s);const I=M.length-C.length;if(Array.isArray(S)&&I>0){const D=new Array(I).fill("");b=[...S,...D],b.raw=[...S.raw,...D]}const T=v(b,...M);return o.muiName&&(T.muiName=o.muiName),T};return v.withConfig&&(w.withConfig=v.withConfig),w}}function DR(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const hbe=t=>DR(t)&&t!=="classes",Ms=J4e({themeId:fR,defaultTheme:u$,rootShouldForwardProp:hbe}),dbe=xd("MuiBox",["root"]),pbe=c$(),Bg=wCe({themeId:fR,defaultTheme:pbe,defaultClassName:dbe.root,generateClassName:CR.generate});function z0(t){return o4e(t)}function mbe(t){return D0("MuiTypography",t)}xd("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const gbe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Abe=t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${Pi(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return ly(a,mbe,o)},vbe=Ms("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Pi(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>Te({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Pk={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ybe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},xbe=t=>ybe[t]||t,o3=E.forwardRef(function(e,n){const i=z0({props:e,name:"MuiTypography"}),r=xbe(i.color),s=SR(Te({},i,{color:r})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:f=!1,variant:h="body1",variantMapping:d=Pk}=s,p=bs(s,gbe),g=Te({},s,{align:o,color:r,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:f,variant:h,variantMapping:d}),A=l||(f?"p":d[h]||Pk[h])||"span",m=Abe(g);return Re.jsx(vbe,Te({as:A,ref:n,ownerState:g,className:qi(m.root,a)},p))});function _be(t,e,n=(i,r)=>i===r){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}const Ebe=2;function h$(t,e){return t-e}function Dk(t,e){var n;const{index:i}=(n=t.reduce((r,s,o)=>{const a=Math.abs(e-s);return r===null||a<r.distance||a===r.distance?{distance:a,index:o}:r},null))!=null?n:{};return i}function E_(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let i=0;i<n.changedTouches.length;i+=1){const r=n.changedTouches[i];if(r.identifier===e.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function LE(t,e,n){return(t-e)*100/(n-e)}function wbe(t,e,n){return(n-e)*t+e}function Sbe(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),i=n[0].split(".")[1];return(i?i.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Cbe(t,e,n){const i=Math.round((t-n)/e)*e+n;return Number(i.toFixed(Sbe(e)))}function Lk({values:t,newValue:e,index:n}){const i=t.slice();return i[n]=e,i.sort(h$)}function w_({sliderRef:t,activeIndex:e,setActive:n}){var i,r;const s=Hm(t.current);if(!((i=t.current)!=null&&i.contains(s.activeElement))||Number(s==null||(r=s.activeElement)==null?void 0:r.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function S_(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?_be(t,e):!1}const bbe={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Mbe=t=>t;let C_;function Fk(){return C_===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?C_=CSS.supports("touch-action","none"):C_=!0),C_}function Tbe(t){const{"aria-labelledby":e,defaultValue:n,disabled:i=!1,disableSwap:r=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:f,orientation:h="horizontal",rootRef:d,scale:p=Mbe,step:g=1,shiftStep:A=10,tabIndex:m,value:v}=t,y=E.useRef(),[w,S]=E.useState(-1),[C,b]=E.useState(-1),[M,I]=E.useState(!1),T=E.useRef(0),[D,R]=t$({controlled:v,default:n??l,name:"Slider"}),z=u&&((we,be,Be)=>{const Ve=we.nativeEvent||we,ot=new Ve.constructor(Ve.type,Ve);Object.defineProperty(ot,"target",{writable:!0,value:{value:be,name:c}}),u(ot,be,Be)}),F=Array.isArray(D);let V=F?D.slice().sort(h$):[D];V=V.map(we=>we==null?l:im(we,l,a));const j=o===!0&&g!==null?[...Array(Math.floor((a-l)/g)+1)].map((we,be)=>({value:l+g*be})):o||[],Z=j.map(we=>we.value),{isFocusVisibleRef:U,onBlur:$,onFocus:X,ref:Q}=IR(),[J,ne]=E.useState(-1),O=E.useRef(),N=p0(Q,O),G=p0(d,N),H=we=>be=>{var Be;const Ve=Number(be.currentTarget.getAttribute("data-index"));X(be),U.current===!0&&ne(Ve),b(Ve),we==null||(Be=we.onFocus)==null||Be.call(we,be)},oe=we=>be=>{var Be;$(be),U.current===!1&&ne(-1),b(-1),we==null||(Be=we.onBlur)==null||Be.call(we,be)},de=(we,be)=>{const Be=Number(we.currentTarget.getAttribute("data-index")),Ve=V[Be],ot=Z.indexOf(Ve);let $e=be;if(j&&g==null){const qe=Z[Z.length-1];$e>qe?$e=qe:$e<Z[0]?$e=Z[0]:$e=$e<Ve?Z[ot-1]:Z[ot+1]}if($e=im($e,l,a),F){r&&($e=im($e,V[Be-1]||-1/0,V[Be+1]||1/0));const qe=$e;$e=Lk({values:V,newValue:$e,index:Be});let fe=Be;r||(fe=$e.indexOf(qe)),w_({sliderRef:O,activeIndex:fe})}R($e),ne(Be),z&&!S_($e,D)&&z(we,$e,Be),f&&f(we,$e)},ce=we=>be=>{var Be;if(g!==null){const Ve=Number(be.currentTarget.getAttribute("data-index")),ot=V[Ve];let $e=null;(be.key==="ArrowLeft"||be.key==="ArrowDown")&&be.shiftKey||be.key==="PageDown"?$e=Math.max(ot-A,l):((be.key==="ArrowRight"||be.key==="ArrowUp")&&be.shiftKey||be.key==="PageUp")&&($e=Math.min(ot+A,a)),$e!==null&&(de(be,$e),be.preventDefault())}we==null||(Be=we.onKeyDown)==null||Be.call(we,be)};TR(()=>{if(i&&O.current.contains(document.activeElement)){var we;(we=document.activeElement)==null||we.blur()}},[i]),i&&w!==-1&&S(-1),i&&J!==-1&&ne(-1);const ge=we=>be=>{var Be;(Be=we.onChange)==null||Be.call(we,be),de(be,be.target.valueAsNumber)},q=E.useRef();let xe=h;s&&h==="horizontal"&&(xe+="-reverse");const ue=({finger:we,move:be=!1})=>{const{current:Be}=O,{width:Ve,height:ot,bottom:$e,left:qe}=Be.getBoundingClientRect();let fe;xe.indexOf("vertical")===0?fe=($e-we.y)/ot:fe=(we.x-qe)/Ve,xe.indexOf("-reverse")!==-1&&(fe=1-fe);let Ue;if(Ue=wbe(fe,l,a),g)Ue=Cbe(Ue,g,l);else{const Ae=Dk(Z,Ue);Ue=Z[Ae]}Ue=im(Ue,l,a);let it=0;if(F){be?it=q.current:it=Dk(V,Ue),r&&(Ue=im(Ue,V[it-1]||-1/0,V[it+1]||1/0));const Ae=Ue;Ue=Lk({values:V,newValue:Ue,index:it}),r&&be||(it=Ue.indexOf(Ae),q.current=it)}return{newValue:Ue,activeIndex:it}},me=Ku(we=>{const be=E_(we,y);if(!be)return;if(T.current+=1,we.type==="mousemove"&&we.buttons===0){pe(we);return}const{newValue:Be,activeIndex:Ve}=ue({finger:be,move:!0});w_({sliderRef:O,activeIndex:Ve,setActive:S}),R(Be),!M&&T.current>Ebe&&I(!0),z&&!S_(Be,D)&&z(we,Be,Ve)}),pe=Ku(we=>{const be=E_(we,y);if(I(!1),!be)return;const{newValue:Be}=ue({finger:be,move:!0});S(-1),we.type==="touchend"&&b(-1),f&&f(we,Be),y.current=void 0,re()}),Le=Ku(we=>{if(i)return;Fk()||we.preventDefault();const be=we.changedTouches[0];be!=null&&(y.current=be.identifier);const Be=E_(we,y);if(Be!==!1){const{newValue:ot,activeIndex:$e}=ue({finger:Be});w_({sliderRef:O,activeIndex:$e,setActive:S}),R(ot),z&&!S_(ot,D)&&z(we,ot,$e)}T.current=0;const Ve=Hm(O.current);Ve.addEventListener("touchmove",me,{passive:!0}),Ve.addEventListener("touchend",pe,{passive:!0})}),re=E.useCallback(()=>{const we=Hm(O.current);we.removeEventListener("mousemove",me),we.removeEventListener("mouseup",pe),we.removeEventListener("touchmove",me),we.removeEventListener("touchend",pe)},[pe,me]);E.useEffect(()=>{const{current:we}=O;return we.addEventListener("touchstart",Le,{passive:Fk()}),()=>{we.removeEventListener("touchstart",Le),re()}},[re,Le]),E.useEffect(()=>{i&&re()},[i,re]);const ie=we=>be=>{var Be;if((Be=we.onMouseDown)==null||Be.call(we,be),i||be.defaultPrevented||be.button!==0)return;be.preventDefault();const Ve=E_(be,y);if(Ve!==!1){const{newValue:$e,activeIndex:qe}=ue({finger:Ve});w_({sliderRef:O,activeIndex:qe,setActive:S}),R($e),z&&!S_($e,D)&&z(be,$e,qe)}T.current=0;const ot=Hm(O.current);ot.addEventListener("mousemove",me,{passive:!0}),ot.addEventListener("mouseup",pe)},te=LE(F?V[0]:l,l,a),W=LE(V[V.length-1],l,a)-te,Me=(we={})=>{const be=i3(we),Be={onMouseDown:ie(be||{})},Ve=Te({},be,Be);return Te({},we,{ref:G},Ve)},De=we=>be=>{var Be;(Be=we.onMouseOver)==null||Be.call(we,be);const Ve=Number(be.currentTarget.getAttribute("data-index"));b(Ve)},Ee=we=>be=>{var Be;(Be=we.onMouseLeave)==null||Be.call(we,be),b(-1)};return{active:w,axis:xe,axisProps:bbe,dragging:M,focusedThumbIndex:J,getHiddenInputProps:(we={})=>{var be;const Be=i3(we),Ve={onChange:ge(Be||{}),onFocus:H(Be||{}),onBlur:oe(Be||{}),onKeyDown:ce(Be||{})},ot=Te({},Be,Ve);return Te({tabIndex:m,"aria-labelledby":e,"aria-orientation":h,"aria-valuemax":p(a),"aria-valuemin":p(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(be=t.step)!=null?be:void 0,disabled:i},we,ot,{style:Te({},KCe,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Me,getThumbProps:(we={})=>{const be=i3(we),Be={onMouseOver:De(be||{}),onMouseLeave:Ee(be||{})};return Te({},we,be,Be)},marks:j,open:C,range:F,rootRef:G,trackLeap:W,trackOffset:te,values:V,getThumbStyle:we=>({pointerEvents:w!==-1&&w!==we?"none":void 0})}}const Ibe=t=>!t||!_A(t);function Bbe(t){return D0("MuiSlider",t)}const Sa=xd("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Rbe=t=>{const{open:e}=t;return{offset:qi(e&&Sa.valueLabelOpen),circle:Sa.valueLabelCircle,label:Sa.valueLabelLabel}};function Pbe(t){const{children:e,className:n,value:i}=t,r=Rbe(t);return e?E.cloneElement(e,{className:qi(e.props.className)},Re.jsxs(E.Fragment,{children:[e.props.children,Re.jsx("span",{className:qi(r.offset,n),"aria-hidden":!0,children:Re.jsx("span",{className:r.circle,children:Re.jsx("span",{className:r.label,children:i})})})]})):null}const Dbe=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Ok(t){return t}const Lbe=Ms("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Pi(n.color)}`],n.size!=="medium"&&e[`size${Pi(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t})=>{var e;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Sa.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Sa.dragging}`]:{[`& .${Sa.thumb}, & .${Sa.track}`]:{transition:"none"}},variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var i;return((i=t.vars)!=null?i:t).palette[n].main}).map(n=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),Fbe=Ms("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Obe=Ms("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>{var e;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var i;return((i=t.vars)!=null?i:t).palette[n].main}).map(n=>({props:{color:n,track:"inverted"},style:Te({},t.vars?{backgroundColor:t.vars.palette.Slider[`${n}Track`],borderColor:t.vars.palette.Slider[`${n}Track`]}:Te({backgroundColor:i6(t.palette[n].main,.62),borderColor:i6(t.palette[n].main,.62)},t.applyStyles("dark",{backgroundColor:n6(t.palette[n].main,.5)}),t.applyStyles("dark",{borderColor:n6(t.palette[n].main,.5)})))}))]}}),zbe=Ms("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Pi(n.color)}`],n.size!=="medium"&&e[`thumbSize${Pi(n.size)}`]]}})(({theme:t})=>{var e;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Sa.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var i;return((i=t.vars)!=null?i:t).palette[n].main}).map(n=>({props:{color:n},style:{[`&:hover, &.${Sa.focusVisible}`]:Te({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${PE(t.palette[n].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${Sa.active}`]:Te({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${PE(t.palette[n].main,.16)}`})}}))]}}),Ube=Ms(Pbe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t})=>Te({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Sa.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Sa.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),kbe=Ms("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>DR(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]})),Nbe=Ms("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>DR(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t})=>Te({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})),Gbe=t=>{const{disabled:e,dragging:n,marked:i,orientation:r,track:s,classes:o,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",i&&"marked",r==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${Pi(a)}`,l&&`size${Pi(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${Pi(l)}`,a&&`thumbColor${Pi(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ly(c,Bbe,o)},Hbe=({children:t})=>t,Qbe=E.forwardRef(function(e,n){var i,r,s,o,a,l,c,u,f,h,d,p,g,A,m,v,y,w,S,C,b,M,I,T;const D=z0({props:e,name:"MuiSlider"}),R=i4e(),{"aria-label":z,"aria-valuetext":F,"aria-labelledby":V,component:j="span",components:Z={},componentsProps:U={},color:$="primary",classes:X,className:Q,disableSwap:J=!1,disabled:ne=!1,getAriaLabel:O,getAriaValueText:N,marks:G=!1,max:H=100,min:oe=0,orientation:de="horizontal",shiftStep:ce=10,size:ge="medium",step:q=1,scale:xe=Ok,slotProps:ue,slots:me,track:pe="normal",valueLabelDisplay:Le="off",valueLabelFormat:re=Ok}=D,ie=bs(D,Dbe),te=Te({},D,{isRtl:R,max:H,min:oe,classes:X,disabled:ne,disableSwap:J,orientation:de,marks:G,color:$,size:ge,step:q,shiftStep:ce,scale:xe,track:pe,valueLabelDisplay:Le,valueLabelFormat:re}),{axisProps:W,getRootProps:Me,getHiddenInputProps:De,getThumbProps:Ee,open:_e,active:Ze,axis:Oe,focusedThumbIndex:we,range:be,dragging:Be,marks:Ve,values:ot,trackOffset:$e,trackLeap:qe,getThumbStyle:fe}=Tbe(Te({},te,{rootRef:n}));te.marked=Ve.length>0&&Ve.some(se=>se.label),te.dragging=Be,te.focusedThumbIndex=we;const Ue=Gbe(te),it=(i=(r=me==null?void 0:me.root)!=null?r:Z.Root)!=null?i:Lbe,Ae=(s=(o=me==null?void 0:me.rail)!=null?o:Z.Rail)!=null?s:Fbe,Ye=(a=(l=me==null?void 0:me.track)!=null?l:Z.Track)!=null?a:Obe,ye=(c=(u=me==null?void 0:me.thumb)!=null?u:Z.Thumb)!=null?c:zbe,He=(f=(h=me==null?void 0:me.valueLabel)!=null?h:Z.ValueLabel)!=null?f:Ube,lt=(d=(p=me==null?void 0:me.mark)!=null?p:Z.Mark)!=null?d:kbe,mt=(g=(A=me==null?void 0:me.markLabel)!=null?A:Z.MarkLabel)!=null?g:Nbe,dt=(m=(v=me==null?void 0:me.input)!=null?v:Z.Input)!=null?m:"input",Ot=(y=ue==null?void 0:ue.root)!=null?y:U.root,Xt=(w=ue==null?void 0:ue.rail)!=null?w:U.rail,gt=(S=ue==null?void 0:ue.track)!=null?S:U.track,en=(C=ue==null?void 0:ue.thumb)!=null?C:U.thumb,_n=(b=ue==null?void 0:ue.valueLabel)!=null?b:U.valueLabel,vi=(M=ue==null?void 0:ue.mark)!=null?M:U.mark,zn=(I=ue==null?void 0:ue.markLabel)!=null?I:U.markLabel,er=(T=ue==null?void 0:ue.input)!=null?T:U.input,tr=Pu({elementType:it,getSlotProps:Me,externalSlotProps:Ot,externalForwardedProps:ie,additionalProps:Te({},Ibe(it)&&{as:j}),ownerState:Te({},te,Ot==null?void 0:Ot.ownerState),className:[Ue.root,Q]}),hr=Pu({elementType:Ae,externalSlotProps:Xt,ownerState:te,className:Ue.rail}),Di=Pu({elementType:Ye,externalSlotProps:gt,additionalProps:{style:Te({},W[Oe].offset($e),W[Oe].leap(qe))},ownerState:Te({},te,gt==null?void 0:gt.ownerState),className:Ue.track}),fi=Pu({elementType:ye,getSlotProps:Ee,externalSlotProps:en,ownerState:Te({},te,en==null?void 0:en.ownerState),className:Ue.thumb}),Yt=Pu({elementType:He,externalSlotProps:_n,ownerState:Te({},te,_n==null?void 0:_n.ownerState),className:Ue.valueLabel}),si=Pu({elementType:lt,externalSlotProps:vi,ownerState:te,className:Ue.mark}),Or=Pu({elementType:mt,externalSlotProps:zn,ownerState:te,className:Ue.markLabel}),ee=Pu({elementType:dt,getSlotProps:De,externalSlotProps:er,ownerState:te});return Re.jsxs(it,Te({},tr,{children:[Re.jsx(Ae,Te({},hr)),Re.jsx(Ye,Te({},Di)),Ve.filter(se=>se.value>=oe&&se.value<=H).map((se,Ce)=>{const K=LE(se.value,oe,H),ae=W[Oe].offset(K);let le;return pe===!1?le=ot.indexOf(se.value)!==-1:le=pe==="normal"&&(be?se.value>=ot[0]&&se.value<=ot[ot.length-1]:se.value<=ot[0])||pe==="inverted"&&(be?se.value<=ot[0]||se.value>=ot[ot.length-1]:se.value>=ot[0]),Re.jsxs(E.Fragment,{children:[Re.jsx(lt,Te({"data-index":Ce},si,!_A(lt)&&{markActive:le},{style:Te({},ae,si.style),className:qi(si.className,le&&Ue.markActive)})),se.label!=null?Re.jsx(mt,Te({"aria-hidden":!0,"data-index":Ce},Or,!_A(mt)&&{markLabelActive:le},{style:Te({},ae,Or.style),className:qi(Ue.markLabel,Or.className,le&&Ue.markLabelActive),children:se.label})):null]},Ce)}),ot.map((se,Ce)=>{const K=LE(se,oe,H),ae=W[Oe].offset(K),le=Le==="off"?Hbe:He;return Re.jsx(le,Te({},!_A(le)&&{valueLabelFormat:re,valueLabelDisplay:Le,value:typeof re=="function"?re(xe(se),Ce):re,index:Ce,open:_e===Ce||Ze===Ce||Le==="on",disabled:ne},Yt,{children:Re.jsx(ye,Te({"data-index":Ce},fi,{className:qi(Ue.thumb,fi.className,Ze===Ce&&Ue.active,we===Ce&&Ue.focusVisible),style:Te({},ae,fe(Ce),fi.style),children:Re.jsx(dt,Te({"data-index":Ce,"aria-label":O?O(Ce):z,"aria-valuenow":xe(se),"aria-labelledby":V,"aria-valuetext":N?N(xe(se),Ce):F,value:ot[Ce]},ee))}))}),Ce)})]}))});function s6(t,e){return s6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},s6(t,e)}function Vbe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s6(t,e)}const zk=Es.createContext(null);function Wbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LR(t,e){var n=function(s){return e&&E.isValidElement(s)?e(s):s},i=Object.create(null);return t&&E.Children.map(t,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function jbe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var i=Object.create(null),r=[];for(var s in t)s in e?r.length&&(i[s]=r,r=[]):r.push(s);var o,a={};for(var l in e){if(i[l])for(o=0;o<i[l].length;o++){var c=i[l][o];a[i[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<r.length;o++)a[r[o]]=n(r[o]);return a}function Oh(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Xbe(t,e){return LR(t.children,function(n){return E.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Oh(n,"appear",t),enter:Oh(n,"enter",t),exit:Oh(n,"exit",t)})})}function Ybe(t,e,n){var i=LR(t.children),r=jbe(e,i);return Object.keys(r).forEach(function(s){var o=r[s];if(E.isValidElement(o)){var a=s in e,l=s in i,c=e[s],u=E.isValidElement(c)&&!c.props.in;l&&(!a||u)?r[s]=E.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Oh(o,"exit",t),enter:Oh(o,"enter",t)}):!l&&a&&!u?r[s]=E.cloneElement(o,{in:!1}):l&&a&&E.isValidElement(c)&&(r[s]=E.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Oh(o,"exit",t),enter:Oh(o,"enter",t)}))}}),r}var qbe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},$be={component:"div",childFactory:function(e){return e}},FR=function(t){Vbe(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=s.handleExited.bind(Wbe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Xbe(r,a):Ybe(r,o,a),firstRender:!1}},n.handleExited=function(r,s){var o=LR(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(a){var l=Te({},a.children);return delete l[r.key],{children:l}}))},n.render=function(){var r=this.props,s=r.component,o=r.childFactory,a=bs(r,["component","childFactory"]),l=this.state.contextValue,c=qbe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Es.createElement(zk.Provider,{value:l},c):Es.createElement(zk.Provider,{value:l},Es.createElement(s,a,c))},e}(Es.Component);FR.propTypes={};FR.defaultProps=$be;function Kbe(t){const{className:e,classes:n,pulsate:i=!1,rippleX:r,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,f]=E.useState(!1),h=qi(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),d={width:o,height:o,top:-(o/2)+s,left:-(o/2)+r},p=qi(n.child,u&&n.childLeaving,i&&n.childPulsate);return!a&&!u&&f(!0),E.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),Re.jsx("span",{className:h,style:d,children:Re.jsx("span",{className:p})})}const fa=xd("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Jbe=["center","classes","className"];let iC=t=>t,Uk,kk,Nk,Gk;const o6=550,Zbe=80,eMe=US(Uk||(Uk=iC`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),tMe=US(kk||(kk=iC`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),nMe=US(Nk||(Nk=iC`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),iMe=Ms("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),rMe=Ms(Kbe,{name:"MuiTouchRipple",slot:"Ripple"})(Gk||(Gk=iC`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),fa.rippleVisible,eMe,o6,({theme:t})=>t.transitions.easing.easeInOut,fa.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,fa.child,fa.childLeaving,tMe,o6,({theme:t})=>t.transitions.easing.easeInOut,fa.childPulsate,nMe,({theme:t})=>t.transitions.easing.easeInOut),sMe=E.forwardRef(function(e,n){const i=z0({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o}=i,a=bs(i,Jbe),[l,c]=E.useState([]),u=E.useRef(0),f=E.useRef(null);E.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const h=E.useRef(!1),d=QCe(),p=E.useRef(null),g=E.useRef(null),A=E.useCallback(w=>{const{pulsate:S,rippleX:C,rippleY:b,rippleSize:M,cb:I}=w;c(T=>[...T,Re.jsx(rMe,{classes:{ripple:qi(s.ripple,fa.ripple),rippleVisible:qi(s.rippleVisible,fa.rippleVisible),ripplePulsate:qi(s.ripplePulsate,fa.ripplePulsate),child:qi(s.child,fa.child),childLeaving:qi(s.childLeaving,fa.childLeaving),childPulsate:qi(s.childPulsate,fa.childPulsate)},timeout:o6,pulsate:S,rippleX:C,rippleY:b,rippleSize:M},u.current)]),u.current+=1,f.current=I},[s]),m=E.useCallback((w={},S={},C=()=>{})=>{const{pulsate:b=!1,center:M=r||S.pulsate,fakeElement:I=!1}=S;if((w==null?void 0:w.type)==="mousedown"&&h.current){h.current=!1;return}(w==null?void 0:w.type)==="touchstart"&&(h.current=!0);const T=I?null:g.current,D=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,z,F;if(M||w===void 0||w.clientX===0&&w.clientY===0||!w.clientX&&!w.touches)R=Math.round(D.width/2),z=Math.round(D.height/2);else{const{clientX:V,clientY:j}=w.touches&&w.touches.length>0?w.touches[0]:w;R=Math.round(V-D.left),z=Math.round(j-D.top)}if(M)F=Math.sqrt((2*D.width**2+D.height**2)/3),F%2===0&&(F+=1);else{const V=Math.max(Math.abs((T?T.clientWidth:0)-R),R)*2+2,j=Math.max(Math.abs((T?T.clientHeight:0)-z),z)*2+2;F=Math.sqrt(V**2+j**2)}w!=null&&w.touches?p.current===null&&(p.current=()=>{A({pulsate:b,rippleX:R,rippleY:z,rippleSize:F,cb:C})},d.start(Zbe,()=>{p.current&&(p.current(),p.current=null)})):A({pulsate:b,rippleX:R,rippleY:z,rippleSize:F,cb:C})},[r,A,d]),v=E.useCallback(()=>{m({},{pulsate:!0})},[m]),y=E.useCallback((w,S)=>{if(d.clear(),(w==null?void 0:w.type)==="touchend"&&p.current){p.current(),p.current=null,d.start(0,()=>{y(w,S)});return}p.current=null,c(C=>C.length>0?C.slice(1):C),f.current=S},[d]);return E.useImperativeHandle(n,()=>({pulsate:v,start:m,stop:y}),[v,m,y]),Re.jsx(iMe,Te({className:qi(fa.root,s.root,o),ref:g},a,{children:Re.jsx(FR,{component:null,exit:!0,children:l})}))});function oMe(t){return D0("MuiButtonBase",t)}const aMe=xd("MuiButtonBase",["root","disabled","focusVisible"]),lMe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],cMe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,o=ly({root:["root",e&&"disabled",n&&"focusVisible"]},oMe,r);return n&&i&&(o.root+=` ${i}`),o},uMe=Ms("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${aMe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),fMe=E.forwardRef(function(e,n){const i=z0({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:h=!1,LinkComponent:d="a",onBlur:p,onClick:g,onContextMenu:A,onDragLeave:m,onFocus:v,onFocusVisible:y,onKeyDown:w,onKeyUp:S,onMouseDown:C,onMouseLeave:b,onMouseUp:M,onTouchEnd:I,onTouchMove:T,onTouchStart:D,tabIndex:R=0,TouchRippleProps:z,touchRippleRef:F,type:V}=i,j=bs(i,lMe),Z=E.useRef(null),U=E.useRef(null),$=p0(U,F),{isFocusVisibleRef:X,onFocus:Q,onBlur:J,ref:ne}=IR(),[O,N]=E.useState(!1);c&&O&&N(!1),E.useImperativeHandle(r,()=>({focusVisible:()=>{N(!0),Z.current.focus()}}),[]);const[G,H]=E.useState(!1);E.useEffect(()=>{H(!0)},[]);const oe=G&&!u&&!c;E.useEffect(()=>{O&&h&&!u&&G&&U.current.pulsate()},[u,h,O,G]);function de(be,Be,Ve=f){return Ku(ot=>(Be&&Be(ot),!Ve&&U.current&&U.current[be](ot),!0))}const ce=de("start",C),ge=de("stop",A),q=de("stop",m),xe=de("stop",M),ue=de("stop",be=>{O&&be.preventDefault(),b&&b(be)}),me=de("start",D),pe=de("stop",I),Le=de("stop",T),re=de("stop",be=>{J(be),X.current===!1&&N(!1),p&&p(be)},!1),ie=Ku(be=>{Z.current||(Z.current=be.currentTarget),Q(be),X.current===!0&&(N(!0),y&&y(be)),v&&v(be)}),te=()=>{const be=Z.current;return l&&l!=="button"&&!(be.tagName==="A"&&be.href)},W=E.useRef(!1),Me=Ku(be=>{h&&!W.current&&O&&U.current&&be.key===" "&&(W.current=!0,U.current.stop(be,()=>{U.current.start(be)})),be.target===be.currentTarget&&te()&&be.key===" "&&be.preventDefault(),w&&w(be),be.target===be.currentTarget&&te()&&be.key==="Enter"&&!c&&(be.preventDefault(),g&&g(be))}),De=Ku(be=>{h&&be.key===" "&&U.current&&O&&!be.defaultPrevented&&(W.current=!1,U.current.stop(be,()=>{U.current.pulsate(be)})),S&&S(be),g&&be.target===be.currentTarget&&te()&&be.key===" "&&!be.defaultPrevented&&g(be)});let Ee=l;Ee==="button"&&(j.href||j.to)&&(Ee=d);const _e={};Ee==="button"?(_e.type=V===void 0?"button":V,_e.disabled=c):(!j.href&&!j.to&&(_e.role="button"),c&&(_e["aria-disabled"]=c));const Ze=p0(n,ne,Z),Oe=Te({},i,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:h,tabIndex:R,focusVisible:O}),we=cMe(Oe);return Re.jsxs(uMe,Te({as:Ee,className:qi(we.root,a),ownerState:Oe,onBlur:re,onClick:g,onContextMenu:ge,onFocus:ie,onKeyDown:Me,onKeyUp:De,onMouseDown:ce,onMouseLeave:ue,onMouseUp:xe,onDragLeave:q,onTouchEnd:pe,onTouchMove:Le,onTouchStart:me,ref:Ze,tabIndex:c?-1:R,type:V},_e,j,{children:[o,oe?Re.jsx(sMe,Te({ref:$,center:s},z)):null]}))});function hMe(t){return D0("MuiIconButton",t)}const dMe=xd("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),pMe=["edge","children","className","color","disabled","disableFocusRipple","size"],mMe=t=>{const{classes:e,disabled:n,color:i,edge:r,size:s}=t,o={root:["root",n&&"disabled",i!=="default"&&`color${Pi(i)}`,r&&`edge${Pi(r)}`,`size${Pi(s)}`]};return ly(o,hMe,e)},gMe=Ms(fMe,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Pi(n.color)}`],n.edge&&e[`edge${Pi(n.edge)}`],e[`size${Pi(n.size)}`]]}})(({theme:t,ownerState:e})=>Te({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:PE(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const i=(n=(t.vars||t).palette)==null?void 0:n[e.color];return Te({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Te({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":Te({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:PE(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${dMe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),S5=E.forwardRef(function(e,n){const i=z0({props:e,name:"MuiIconButton"}),{edge:r=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=i,f=bs(i,pMe),h=Te({},i,{edge:r,color:a,disabled:l,disableFocusRipple:c,size:u}),d=mMe(h);return Re.jsx(gMe,Te({className:qi(d.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n},f,{ownerState:h,children:s}))});var OR={},C5={};function AMe(t){return D0("MuiSvgIcon",t)}xd("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const vMe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],yMe=t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root",e!=="inherit"&&`color${Pi(e)}`,`fontSize${Pi(n)}`]};return ly(r,AMe,i)},xMe=Ms("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Pi(n.color)}`],e[`fontSize${Pi(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,i,r,s,o,a,l,c,u,f,h,d,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(r=t.transitions)==null||(r=r.duration)==null?void 0:r.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(f=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?f:{action:(d=(t.vars||t).palette)==null||(d=d.action)==null?void 0:d.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),a6=E.forwardRef(function(e,n){const i=z0({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:h="0 0 24 24"}=i,d=bs(i,vMe),p=E.isValidElement(r)&&r.type==="svg",g=Te({},i,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),A={};u||(A.viewBox=h);const m=yMe(g);return Re.jsxs(xMe,Te({as:a,className:qi(m.root,s),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n},A,d,p&&r.props,{ownerState:g,children:[p?r.props.children:r,f?Re.jsx("title",{children:f}):null]}))});a6.muiName="SvgIcon";function _Me(t,e){function n(i,r){return Re.jsx(a6,Te({"data-testid":`${e}Icon`,ref:r},i,{children:t}))}return n.muiName=a6.muiName,E.memo(E.forwardRef(n))}const EMe={configure:t=>{CR.configure(t)}},wMe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Pi,createChainedFunction:RCe,createSvgIcon:_Me,debounce:PCe,deprecatedPropType:DCe,isMuiElement:LCe,ownerDocument:Hm,ownerWindow:FCe,requirePropFactory:OCe,setRef:e$,unstable_ClassNameGenerator:EMe,unstable_useEnhancedEffect:TR,unstable_useId:UCe,unsupportedProp:kCe,useControlled:t$,useEventCallback:Ku,useForkRef:p0,useIsFocusVisible:IR},Symbol.toStringTag,{value:"Module"})),SMe=iu(wMe);var Hk;function rC(){return Hk||(Hk=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=SMe}(C5)),C5}var CMe=L0;Object.defineProperty(OR,"__esModule",{value:!0});var d$=OR.default=void 0,bMe=CMe(rC()),MMe=Re;d$=OR.default=(0,bMe.default)((0,MMe.jsx)("path",{d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2m6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2"}),"PauseRounded");var zR={},TMe=L0;Object.defineProperty(zR,"__esModule",{value:!0});var p$=zR.default=void 0,IMe=TMe(rC()),BMe=Re;p$=zR.default=(0,IMe.default)((0,BMe.jsx)("path",{d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82"}),"PlayArrowRounded");var UR={},RMe=L0;Object.defineProperty(UR,"__esModule",{value:!0});var m$=UR.default=void 0,PMe=RMe(rC()),DMe=Re;m$=UR.default=(0,PMe.default)((0,DMe.jsx)("path",{d:"m5.58 16.89 5.77-4.07c.56-.4.56-1.24 0-1.63L5.58 7.11C4.91 6.65 4 7.12 4 7.93v8.14c0 .81.91 1.28 1.58.82M13 7.93v8.14c0 .81.91 1.28 1.58.82l5.77-4.07c.56-.4.56-1.24 0-1.63l-5.77-4.07c-.67-.47-1.58 0-1.58.81"}),"FastForwardRounded");var kR={},LMe=L0;Object.defineProperty(kR,"__esModule",{value:!0});var g$=kR.default=void 0,FMe=LMe(rC()),OMe=Re;g$=kR.default=(0,FMe.default)((0,OMe.jsx)("path",{d:"M11 16.07V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.56.4-.56 1.24 0 1.63l5.77 4.07c.67.47 1.58 0 1.58-.81m1.66-3.25 5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64"}),"FastRewindRounded");const zMe=Ms("div")(()=>({width:"100%",margin:"auto",position:"relative",zIndex:1})),UMe=Ms("div")({width:100,height:100,objectFit:"cover",overflow:"hidden",flexShrink:0,borderRadius:8,backgroundColor:"rgba(0,0,0,0.08)","& > img":{width:"100%"}}),Qk=Ms(o3)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function kMe({currentlyPlayingTrack:t,onNextTrack:e,onPrevTrack:n}){var m,v;const i=V4e(),[r,s]=E.useState(0),[o,a]=E.useState(!1),[l,c]=E.useState(0),[u,f]=E.useState(null);E.useEffect(()=>{t&&(c(t.duration_ms/1e3),s(t.position_ms/1e3||0),a(!!t.is_playing))},[t]),E.useEffect(()=>{let y;return!o&&r<l&&(y=setInterval(()=>{s(w=>Math.min(w+1,l))},1e3)),()=>clearInterval(y)},[o,r,l]);function h(y){const w=Math.floor(y/60),S=Math.floor(y-w*60);return`${w}:${S<10?`0${S}`:S}`}const d="#fff",p=E.useCallback(()=>localStorage.getItem("access_token"),[]),g=E.useCallback(async()=>{const y=p();if(!y)return;const w=`https://api.spotify.com/v1/me/player/${o?"play":"pause"}`;try{const S=await fetch(w,{method:"PUT",headers:{Authorization:"Bearer "+y},body:JSON.stringify({device_id:u})});if(S.ok)a(!o);else{const C=await S.json();console.error("Failed to play/pause",C)}}catch(S){console.error("Error during play/pause:",S)}},[o,u,p]),A=E.useCallback(async(y,w)=>{const S=p();if(S)try{(await fetch(`https://api.spotify.com/v1/me/player/seek?position_ms=${w*1e3}`,{method:"PUT",headers:{Authorization:`Bearer ${S}`},...u&&{body:JSON.stringify({device_id:u})}})).ok?s(w):console.error("Failed to seek")}catch(C){console.error("Error during seek:",C)}},[u,p]);return E.useEffect(()=>{(async()=>{const w=p();if(w)try{const b=(await(await fetch("https://api.spotify.com/v1/me/player/devices",{headers:{Authorization:`Bearer ${w}`}})).json()).devices.find(M=>M.is_active);b&&f(b.id)}catch(S){console.error("Error fetching devices:",S)}})()},[p]),Re.jsxs(Bg,{sx:{display:"flex",gap:10,width:"100%",overflow:"hidden",background:"#00000036",backdropFilter:"blur(20px)",padding:"12px",borderRadius:"15px"},children:[Re.jsxs(Bg,{sx:{display:"flex",alignItems:"center"},children:[Re.jsx(UMe,{children:Re.jsx("img",{alt:(t==null?void 0:t.name)||"Album cover",src:((m=t==null?void 0:t.album.images[0])==null?void 0:m.url)||"default-image-url"})}),Re.jsxs(Bg,{sx:{ml:1.5,minWidth:0},children:[Re.jsx(o3,{variant:"caption",color:"text.secondary",fontWeight:500,children:(t==null?void 0:t.name)||"Unknown Track"}),Re.jsx(o3,{noWrap:!0,children:Re.jsx("b",{children:((v=t==null?void 0:t.artists[0])==null?void 0:v.name)||"Unknown Artist"})}),Re.jsx(o3,{noWrap:!0,letterSpacing:-.25,children:(t==null?void 0:t.album.name)||"Unknown Album"})]})]}),Re.jsxs(zMe,{children:[Re.jsxs(Bg,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:-1},children:[Re.jsx(S5,{"aria-label":"previous song",onClick:n,children:Re.jsx(g$,{fontSize:"large",htmlColor:d})}),Re.jsx(S5,{"aria-label":o?"play":"pause",onClick:g,children:o?Re.jsx(p$,{sx:{fontSize:"3rem"},htmlColor:d}):Re.jsx(d$,{sx:{fontSize:"3rem"},htmlColor:d})}),Re.jsx(S5,{"aria-label":"next song",onClick:e,children:Re.jsx(m$,{fontSize:"large",htmlColor:d})})]}),Re.jsxs(Bg,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:-2},children:[Re.jsx(Qk,{children:h(r)}),Re.jsxs(Qk,{children:["-",h(l-r)]})]}),Re.jsx(Qbe,{"aria-label":"time-indicator",size:"small",value:r,min:0,step:1,max:l,onChange:A,sx:{color:"#fff",height:4,"& .MuiSlider-thumb":{width:8,height:8,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:`0px 0px 0px 8px ${i.palette.mode==="dark"?"rgb(255 255 255 / 16%)":"rgb(0 0 0 / 16%)"}`},"&.Mui-active":{width:20,height:20}},"& .MuiSlider-rail":{opacity:.28}}})]})]})}/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NMe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A$=(...t)=>t.filter((e,n,i)=>!!e&&i.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GMe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HMe=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>E.createElement("svg",{ref:l,...GMe,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:A$("lucide",r),...a},[...o.map(([c,u])=>E.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=(t,e)=>{const n=E.forwardRef(({className:i,...r},s)=>E.createElement(HMe,{ref:s,iconNode:e,className:A$(`lucide-${NMe(t)}`,i),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QMe=uy("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VMe=uy("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WMe=uy("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jMe=uy("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XMe=uy("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);function v$(t,e){return function(){return t.apply(e,arguments)}}const{toString:YMe}=Object.prototype,{getPrototypeOf:NR}=Object,sC=(t=>e=>{const n=YMe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),El=t=>(t=t.toLowerCase(),e=>sC(e)===t),oC=t=>e=>typeof e===t,{isArray:U0}=Array,_v=oC("undefined");function qMe(t){return t!==null&&!_v(t)&&t.constructor!==null&&!_v(t.constructor)&&Ma(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const y$=El("ArrayBuffer");function $Me(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&y$(t.buffer),e}const KMe=oC("string"),Ma=oC("function"),x$=oC("number"),aC=t=>t!==null&&typeof t=="object",JMe=t=>t===!0||t===!1,a3=t=>{if(sC(t)!=="object")return!1;const e=NR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ZMe=El("Date"),e5e=El("File"),t5e=El("Blob"),n5e=El("FileList"),i5e=t=>aC(t)&&Ma(t.pipe),r5e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ma(t.append)&&((e=sC(t))==="formdata"||e==="object"&&Ma(t.toString)&&t.toString()==="[object FormData]"))},s5e=El("URLSearchParams"),[o5e,a5e,l5e,c5e]=["ReadableStream","Request","Response","Headers"].map(El),u5e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fy(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),U0(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,t[a],a,t)}}function _$(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const E$=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,w$=t=>!_v(t)&&t!==E$;function l6(){const{caseless:t}=w$(this)&&this||{},e={},n=(i,r)=>{const s=t&&_$(e,r)||r;a3(e[s])&&a3(i)?e[s]=l6(e[s],i):a3(i)?e[s]=l6({},i):U0(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&fy(arguments[i],n);return e}const f5e=(t,e,n,{allOwnKeys:i}={})=>(fy(e,(r,s)=>{n&&Ma(r)?t[s]=v$(r,n):t[s]=r},{allOwnKeys:i}),t),h5e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),d5e=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},p5e=(t,e,n,i)=>{let r,s,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&NR(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},m5e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},g5e=t=>{if(!t)return null;if(U0(t))return t;let e=t.length;if(!x$(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},A5e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&NR(Uint8Array)),v5e=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},y5e=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},x5e=El("HTMLFormElement"),_5e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Vk=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),E5e=El("RegExp"),S$=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};fy(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},w5e=t=>{S$(t,(e,n)=>{if(Ma(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Ma(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},S5e=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return U0(t)?i(t):i(String(t).split(e)),n},C5e=()=>{},b5e=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,b5="abcdefghijklmnopqrstuvwxyz",Wk="0123456789",C$={DIGIT:Wk,ALPHA:b5,ALPHA_DIGIT:b5+b5.toUpperCase()+Wk},M5e=(t=16,e=C$.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function T5e(t){return!!(t&&Ma(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const I5e=t=>{const e=new Array(10),n=(i,r)=>{if(aC(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=U0(i)?[]:{};return fy(i,(o,a)=>{const l=n(o,r+1);!_v(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return n(t,0)},B5e=El("AsyncFunction"),R5e=t=>t&&(aC(t)||Ma(t))&&Ma(t.then)&&Ma(t.catch),et={isArray:U0,isArrayBuffer:y$,isBuffer:qMe,isFormData:r5e,isArrayBufferView:$Me,isString:KMe,isNumber:x$,isBoolean:JMe,isObject:aC,isPlainObject:a3,isReadableStream:o5e,isRequest:a5e,isResponse:l5e,isHeaders:c5e,isUndefined:_v,isDate:ZMe,isFile:e5e,isBlob:t5e,isRegExp:E5e,isFunction:Ma,isStream:i5e,isURLSearchParams:s5e,isTypedArray:A5e,isFileList:n5e,forEach:fy,merge:l6,extend:f5e,trim:u5e,stripBOM:h5e,inherits:d5e,toFlatObject:p5e,kindOf:sC,kindOfTest:El,endsWith:m5e,toArray:g5e,forEachEntry:v5e,matchAll:y5e,isHTMLForm:x5e,hasOwnProperty:Vk,hasOwnProp:Vk,reduceDescriptors:S$,freezeMethods:w5e,toObjectSet:S5e,toCamelCase:_5e,noop:C5e,toFiniteNumber:b5e,findKey:_$,global:E$,isContextDefined:w$,ALPHABET:C$,generateString:M5e,isSpecCompliantForm:T5e,toJSONObject:I5e,isAsyncFn:B5e,isThenable:R5e};function An(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}et.inherits(An,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const b$=An.prototype,M$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{M$[t]={value:t}});Object.defineProperties(An,M$);Object.defineProperty(b$,"isAxiosError",{value:!0});An.from=(t,e,n,i,r,s)=>{const o=Object.create(b$);return et.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),An.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const P5e=null;function c6(t){return et.isPlainObject(t)||et.isArray(t)}function T$(t){return et.endsWith(t,"[]")?t.slice(0,-2):t}function jk(t,e,n){return t?t.concat(e).map(function(r,s){return r=T$(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function D5e(t){return et.isArray(t)&&!t.some(c6)}const L5e=et.toFlatObject(et,{},null,function(e){return/^is[A-Z]/.test(e)});function lC(t,e,n){if(!et.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=et.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,A){return!et.isUndefined(A[g])});const i=n.metaTokens,r=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(e);if(!et.isFunction(r))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(et.isDate(p))return p.toISOString();if(!l&&et.isBlob(p))throw new An("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(p)||et.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,A){let m=p;if(p&&!A&&typeof p=="object"){if(et.endsWith(g,"{}"))g=i?g:g.slice(0,-2),p=JSON.stringify(p);else if(et.isArray(p)&&D5e(p)||(et.isFileList(p)||et.endsWith(g,"[]"))&&(m=et.toArray(p)))return g=T$(g),m.forEach(function(y,w){!(et.isUndefined(y)||y===null)&&e.append(o===!0?jk([g],w,s):o===null?g:g+"[]",c(y))}),!1}return c6(p)?!0:(e.append(jk(A,g,s),c(p)),!1)}const f=[],h=Object.assign(L5e,{defaultVisitor:u,convertValue:c,isVisitable:c6});function d(p,g){if(!et.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),et.forEach(p,function(m,v){(!(et.isUndefined(m)||m===null)&&r.call(e,m,et.isString(v)?v.trim():v,g,h))===!0&&d(m,g?g.concat(v):[v])}),f.pop()}}if(!et.isObject(t))throw new TypeError("data must be an object");return d(t),e}function Xk(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function GR(t,e){this._pairs=[],t&&lC(t,this,e)}const I$=GR.prototype;I$.append=function(e,n){this._pairs.push([e,n])};I$.toString=function(e){const n=e?function(i){return e.call(this,i,Xk)}:Xk;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function F5e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function B$(t,e,n){if(!e)return t;const i=n&&n.encode||F5e,r=n&&n.serialize;let s;if(r?s=r(e,n):s=et.isURLSearchParams(e)?e.toString():new GR(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Yk{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){et.forEach(this.handlers,function(i){i!==null&&e(i)})}}const R$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},O5e=typeof URLSearchParams<"u"?URLSearchParams:GR,z5e=typeof FormData<"u"?FormData:null,U5e=typeof Blob<"u"?Blob:null,k5e={isBrowser:!0,classes:{URLSearchParams:O5e,FormData:z5e,Blob:U5e},protocols:["http","https","file","blob","url","data"]},HR=typeof window<"u"&&typeof document<"u",N5e=(t=>HR&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),G5e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",H5e=HR&&window.location.href||"http://localhost",Q5e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:HR,hasStandardBrowserEnv:N5e,hasStandardBrowserWebWorkerEnv:G5e,origin:H5e},Symbol.toStringTag,{value:"Module"})),hl={...Q5e,...k5e};function V5e(t,e){return lC(t,new hl.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return hl.isNode&&et.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function W5e(t){return et.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function j5e(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function P$(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&et.isArray(r)?r.length:o,l?(et.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!et.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&et.isArray(r[o])&&(r[o]=j5e(r[o])),!a)}if(et.isFormData(t)&&et.isFunction(t.entries)){const n={};return et.forEachEntry(t,(i,r)=>{e(W5e(i),r,n,0)}),n}return null}function X5e(t,e,n){if(et.isString(t))try{return(e||JSON.parse)(t),et.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const hy={transitional:R$,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=et.isObject(e);if(s&&et.isHTMLForm(e)&&(e=new FormData(e)),et.isFormData(e))return r?JSON.stringify(P$(e)):e;if(et.isArrayBuffer(e)||et.isBuffer(e)||et.isStream(e)||et.isFile(e)||et.isBlob(e)||et.isReadableStream(e))return e;if(et.isArrayBufferView(e))return e.buffer;if(et.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return V5e(e,this.formSerializer).toString();if((a=et.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lC(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),X5e(e)):e}],transformResponse:[function(e){const n=this.transitional||hy.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(et.isResponse(e)||et.isReadableStream(e))return e;if(e&&et.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?An.from(a,An.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hl.classes.FormData,Blob:hl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],t=>{hy.headers[t]={}});const Y5e=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q5e=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&Y5e[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},qk=Symbol("internals");function Rg(t){return t&&String(t).trim().toLowerCase()}function l3(t){return t===!1||t==null?t:et.isArray(t)?t.map(l3):String(t)}function $5e(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const K5e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function M5(t,e,n,i,r){if(et.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!et.isString(e)){if(et.isString(i))return e.indexOf(i)!==-1;if(et.isRegExp(i))return i.test(e)}}function J5e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function Z5e(t,e){const n=et.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}class yo{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(a,l,c){const u=Rg(l);if(!u)throw new Error("header name must be a non-empty string");const f=et.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=l3(a))}const o=(a,l)=>et.forEach(a,(c,u)=>s(c,u,l));if(et.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(et.isString(e)&&(e=e.trim())&&!K5e(e))o(q5e(e),n);else if(et.isHeaders(e))for(const[a,l]of e.entries())s(l,a,i);else e!=null&&s(n,e,i);return this}get(e,n){if(e=Rg(e),e){const i=et.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return $5e(r);if(et.isFunction(n))return n.call(this,r,i);if(et.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Rg(e),e){const i=et.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||M5(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=Rg(o),o){const a=et.findKey(i,o);a&&(!n||M5(i,i[a],a,n))&&(delete i[a],r=!0)}}return et.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||M5(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return et.forEach(this,(r,s)=>{const o=et.findKey(i,s);if(o){n[o]=l3(r),delete n[s];return}const a=e?J5e(s):String(s).trim();a!==s&&delete n[s],n[a]=l3(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return et.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&et.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[qk]=this[qk]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Rg(o);i[a]||(Z5e(r,o),i[a]=!0)}return et.isArray(e)?e.forEach(s):s(e),this}}yo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(yo.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});et.freezeMethods(yo);function T5(t,e){const n=this||hy,i=e||n,r=yo.from(i.headers);let s=i.data;return et.forEach(t,function(a){s=a.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function D$(t){return!!(t&&t.__CANCEL__)}function k0(t,e,n){An.call(this,t??"canceled",An.ERR_CANCELED,e,n),this.name="CanceledError"}et.inherits(k0,An,{__CANCEL__:!0});function L$(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new An("Request failed with status code "+n.status,[An.ERR_BAD_REQUEST,An.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eTe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function tTe(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];o||(o=c),n[r]=l,i[r]=c;let f=s,h=0;for(;f!==r;)h+=n[f++],f=f%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),c-o<e)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function nTe(t,e){let n=0;const i=1e3/e;let r=null;return function(){const o=this===!0,a=Date.now();if(o||a-n>i)return r&&(clearTimeout(r),r=null),n=a,t.apply(null,arguments);r||(r=setTimeout(()=>(r=null,n=Date.now(),t.apply(null,arguments)),i-(a-n)))}}const FE=(t,e,n=3)=>{let i=0;const r=tTe(50,250);return nTe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,c=r(l),u=o<=a;i=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null};f[e?"download":"upload"]=!0,t(f)},n)},iTe=hl.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const a=et.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),rTe=hl.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];et.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),et.isString(i)&&o.push("path="+i),et.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sTe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oTe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function F$(t,e){return t&&!sTe(e)?oTe(t,e):e}const $k=t=>t instanceof yo?{...t}:t;function ld(t,e){e=e||{};const n={};function i(c,u,f){return et.isPlainObject(c)&&et.isPlainObject(u)?et.merge.call({caseless:f},c,u):et.isPlainObject(u)?et.merge({},u):et.isArray(u)?u.slice():u}function r(c,u,f){if(et.isUndefined(u)){if(!et.isUndefined(c))return i(void 0,c,f)}else return i(c,u,f)}function s(c,u){if(!et.isUndefined(u))return i(void 0,u)}function o(c,u){if(et.isUndefined(u)){if(!et.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,f){if(f in e)return i(c,u);if(f in t)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>r($k(c),$k(u),!0)};return et.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||r,h=f(t[u],e[u],u);et.isUndefined(h)&&f!==a||(n[u]=h)}),n}const O$=t=>{const e=ld({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=yo.from(o),e.url=B$(F$(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(et.isFormData(n)){if(hl.hasStandardBrowserEnv||hl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(hl.hasStandardBrowserEnv&&(i&&et.isFunction(i)&&(i=i(e)),i||i!==!1&&iTe(e.url))){const c=r&&s&&rTe.read(s);c&&o.set(r,c)}return e},aTe=typeof XMLHttpRequest<"u",lTe=aTe&&function(t){return new Promise(function(n,i){const r=O$(t);let s=r.data;const o=yo.from(r.headers).normalize();let{responseType:a}=r,l;function c(){r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let u=new XMLHttpRequest;u.open(r.method.toUpperCase(),r.url,!0),u.timeout=r.timeout;function f(){if(!u)return;const d=yo.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:d,config:t,request:u};L$(function(m){n(m),c()},function(m){i(m),c()},g),u=null}"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(i(new An("Request aborted",An.ECONNABORTED,r,u)),u=null)},u.onerror=function(){i(new An("Network Error",An.ERR_NETWORK,r,u)),u=null},u.ontimeout=function(){let p=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const g=r.transitional||R$;r.timeoutErrorMessage&&(p=r.timeoutErrorMessage),i(new An(p,g.clarifyTimeoutError?An.ETIMEDOUT:An.ECONNABORTED,r,u)),u=null},s===void 0&&o.setContentType(null),"setRequestHeader"in u&&et.forEach(o.toJSON(),function(p,g){u.setRequestHeader(g,p)}),et.isUndefined(r.withCredentials)||(u.withCredentials=!!r.withCredentials),a&&a!=="json"&&(u.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&u.addEventListener("progress",FE(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",FE(r.onUploadProgress)),(r.cancelToken||r.signal)&&(l=d=>{u&&(i(!d||d.type?new k0(null,t,u):d),u.abort(),u=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const h=eTe(r.url);if(h&&hl.protocols.indexOf(h)===-1){i(new An("Unsupported protocol "+h+":",An.ERR_BAD_REQUEST,t));return}u.send(s||null)})},cTe=(t,e)=>{let n=new AbortController,i;const r=function(l){if(!i){i=!0,o();const c=l instanceof Error?l:this.reason;n.abort(c instanceof An?c:new k0(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{r(new An(`timeout ${e} of ms exceeded`,An.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",r):l.unsubscribe(r))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},uTe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},fTe=async function*(t,e,n){for await(const i of t)yield*uTe(ArrayBuffer.isView(i)?i:await n(String(i)),e)},Kk=(t,e,n,i,r)=>{const s=fTe(t,e,r);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),i();return}let u=c.byteLength;n&&n(o+=u),a.enqueue(new Uint8Array(c))},cancel(a){return i(a),s.return()}},{highWaterMark:2})},Jk=(t,e)=>{const n=t!=null;return i=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:i}))},cC=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",z$=cC&&typeof ReadableStream=="function",u6=cC&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),hTe=z$&&(()=>{let t=!1;const e=new Request(hl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),Zk=64*1024,f6=z$&&!!(()=>{try{return et.isReadableStream(new Response("").body)}catch{}})(),OE={stream:f6&&(t=>t.body)};cC&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!OE[e]&&(OE[e]=et.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new An(`Response type '${e}' is not supported`,An.ERR_NOT_SUPPORT,i)})})})(new Response);const dTe=async t=>{if(t==null)return 0;if(et.isBlob(t))return t.size;if(et.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(et.isArrayBufferView(t))return t.byteLength;if(et.isURLSearchParams(t)&&(t=t+""),et.isString(t))return(await u6(t)).byteLength},pTe=async(t,e)=>{const n=et.toFiniteNumber(t.getContentLength());return n??dTe(e)},mTe=cC&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=O$(t);c=c?(c+"").toLowerCase():"text";let[d,p]=r||s||o?cTe([r,s],o):[],g,A;const m=()=>{!g&&setTimeout(()=>{d&&d.unsubscribe()}),g=!0};let v;try{if(l&&hTe&&n!=="get"&&n!=="head"&&(v=await pTe(u,i))!==0){let C=new Request(e,{method:"POST",body:i,duplex:"half"}),b;et.isFormData(i)&&(b=C.headers.get("content-type"))&&u.setContentType(b),C.body&&(i=Kk(C.body,Zk,Jk(v,FE(l)),null,u6))}et.isString(f)||(f=f?"cors":"omit"),A=new Request(e,{...h,signal:d,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",withCredentials:f});let y=await fetch(A);const w=f6&&(c==="stream"||c==="response");if(f6&&(a||w)){const C={};["status","statusText","headers"].forEach(M=>{C[M]=y[M]});const b=et.toFiniteNumber(y.headers.get("content-length"));y=new Response(Kk(y.body,Zk,a&&Jk(b,FE(a,!0)),w&&m,u6),C)}c=c||"text";let S=await OE[et.findKey(OE,c)||"text"](y,t);return!w&&m(),p&&p(),await new Promise((C,b)=>{L$(C,b,{data:S,headers:yo.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:A})})}catch(y){throw m(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new An("Network Error",An.ERR_NETWORK,t,A),{cause:y.cause||y}):An.from(y,y&&y.code,t,A)}}),h6={http:P5e,xhr:lTe,fetch:mTe};et.forEach(h6,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const eN=t=>`- ${t}`,gTe=t=>et.isFunction(t)||t===null||t===!1,U$={getAdapter:t=>{t=et.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!gTe(n)&&(i=h6[(o=String(n)).toLowerCase()],i===void 0))throw new An(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(eN).join(`
`):" "+eN(s[0]):"as no adapter specified";throw new An("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:h6};function I5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new k0(null,t)}function tN(t){return I5(t),t.headers=yo.from(t.headers),t.data=T5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),U$.getAdapter(t.adapter||hy.adapter)(t).then(function(i){return I5(t),i.data=T5.call(t,t.transformResponse,i),i.headers=yo.from(i.headers),i},function(i){return D$(i)||(I5(t),i&&i.response&&(i.response.data=T5.call(t,t.transformResponse,i.response),i.response.headers=yo.from(i.response.headers))),Promise.reject(i)})}const k$="1.7.2",QR={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{QR[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const nN={};QR.transitional=function(e,n,i){function r(s,o){return"[Axios v"+k$+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new An(r(o," has been removed"+(n?" in "+n:"")),An.ERR_DEPRECATED);return n&&!nN[o]&&(nN[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function ATe(t,e,n){if(typeof t!="object")throw new An("options must be an object",An.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new An("option "+s+" must be "+l,An.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new An("Unknown option "+s,An.ERR_BAD_OPTION)}}const d6={assertOptions:ATe,validators:QR},Du=d6.validators;class Vh{constructor(e){this.defaults=e,this.interceptors={request:new Yk,response:new Yk}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ld(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&d6.assertOptions(i,{silentJSONParsing:Du.transitional(Du.boolean),forcedJSONParsing:Du.transitional(Du.boolean),clarifyTimeoutError:Du.transitional(Du.boolean)},!1),r!=null&&(et.isFunction(r)?n.paramsSerializer={serialize:r}:d6.assertOptions(r,{encode:Du.function,serialize:Du.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&et.merge(s.common,s[n.method]);s&&et.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=yo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,f=0,h;if(!l){const p=[tN.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),h=p.length,u=Promise.resolve(n);f<h;)u=u.then(p[f++],p[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const p=a[f++],g=a[f++];try{d=p(d)}catch(A){g.call(this,A);break}}try{u=tN.call(this,d)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=ld(this.defaults,e);const n=F$(e.baseURL,e.url);return B$(n,e.params,e.paramsSerializer)}}et.forEach(["delete","get","head","options"],function(e){Vh.prototype[e]=function(n,i){return this.request(ld(i||{},{method:e,url:n,data:(i||{}).data}))}});et.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,a){return this.request(ld(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Vh.prototype[e]=n(),Vh.prototype[e+"Form"]=n(!0)});class VR{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new k0(s,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new VR(function(r){e=r}),cancel:e}}}function vTe(t){return function(n){return t.apply(null,n)}}function yTe(t){return et.isObject(t)&&t.isAxiosError===!0}const p6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(p6).forEach(([t,e])=>{p6[e]=t});function N$(t){const e=new Vh(t),n=v$(Vh.prototype.request,e);return et.extend(n,Vh.prototype,e,{allOwnKeys:!0}),et.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return N$(ld(t,r))},n}const wr=N$(hy);wr.Axios=Vh;wr.CanceledError=k0;wr.CancelToken=VR;wr.isCancel=D$;wr.VERSION=k$;wr.toFormData=lC;wr.AxiosError=An;wr.Cancel=wr.CanceledError;wr.all=function(e){return Promise.all(e)};wr.spread=vTe;wr.isAxiosError=yTe;wr.mergeConfig=ld;wr.AxiosHeaders=yo;wr.formToJSON=t=>P$(et.isHTMLForm(t)?new FormData(t):t);wr.getAdapter=U$.getAdapter;wr.HttpStatusCode=p6;wr.default=wr;const xTe=async()=>{const t="https://newsdata.io/api/1/news",e="pub_4917465ad804d2e4471f179d79d2a08e9af28",n="en",i="technology";try{return(await wr.get(t,{params:{apikey:e,language:n,category:i}})).data}catch(r){throw console.error("Error fetching data:",r),r}};/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ev.apply(this,arguments)}var Ju;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ju||(Ju={}));const iN="popstate";function _Te(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return m6("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:H$(r)}return wTe(e,n,null,t)}function Pr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function G$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ETe(){return Math.random().toString(36).substr(2,8)}function rN(t,e){return{usr:t.state,key:t.key,idx:e}}function m6(t,e,n,i){return n===void 0&&(n=null),Ev({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?N0(e):e,{state:n,key:e&&e.key||i||ETe()})}function H$(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function N0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function wTe(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ju.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ev({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Ju.Pop;let A=u(),m=A==null?null:A-c;c=A,l&&l({action:a,location:g.location,delta:m})}function h(A,m){a=Ju.Push;let v=m6(g.location,A,m);c=u()+1;let y=rN(v,c),w=g.createHref(v);try{o.pushState(y,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(w)}s&&l&&l({action:a,location:g.location,delta:1})}function d(A,m){a=Ju.Replace;let v=m6(g.location,A,m);c=u();let y=rN(v,c),w=g.createHref(v);o.replaceState(y,"",w),s&&l&&l({action:a,location:g.location,delta:0})}function p(A){let m=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof A=="string"?A:H$(A);return v=v.replace(/ $/,"%20"),Pr(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let g={get action(){return a},get location(){return t(r,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(iN,f),l=A,()=>{r.removeEventListener(iN,f),l=null}},createHref(A){return e(r,A)},createURL:p,encodeLocation(A){let m=p(A);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:d,go(A){return o.go(A)}};return g}var sN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sN||(sN={}));function STe(t,e,n){return n===void 0&&(n="/"),CTe(t,e,n,!1)}function CTe(t,e,n,i){let r=typeof e=="string"?N0(e):e,s=W$(r.pathname||"/",n);if(s==null)return null;let o=Q$(t);bTe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=zTe(s);a=FTe(o[l],c,i)}return a}function Q$(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Pr(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Wh([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Pr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Q$(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:DTe(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of V$(s.path))r(s,o,l)}),e}function V$(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=V$(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function bTe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LTe(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const MTe=/^:[\w-]+$/,TTe=3,ITe=2,BTe=1,RTe=10,PTe=-2,oN=t=>t==="*";function DTe(t,e){let n=t.split("/"),i=n.length;return n.some(oN)&&(i+=PTe),e&&(i+=ITe),n.filter(r=>!oN(r)).reduce((r,s)=>r+(MTe.test(s)?TTe:s===""?BTe:RTe),i)}function LTe(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function FTe(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=aN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f&&c&&n&&!i[i.length-1].route.index&&(f=aN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Wh([s,f.pathname]),pathnameBase:QTe(Wh([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Wh([s,f.pathnameBase]))}return o}function aN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=OTe(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:h,isOptional:d}=u;if(h==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function OTe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),G$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function zTe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function W$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function UTe(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?N0(t):t;return{pathname:n?n.startsWith("/")?n:kTe(n,e):e,search:VTe(i),hash:WTe(r)}}function kTe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function B5(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NTe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GTe(t,e){let n=NTe(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function HTe(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=N0(t):(r=Ev({},t),Pr(!r.pathname||!r.pathname.includes("?"),B5("?","pathname","search",r)),Pr(!r.pathname||!r.pathname.includes("#"),B5("#","pathname","hash",r)),Pr(!r.search||!r.search.includes("#"),B5("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;r.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=UTe(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Wh=t=>t.join("/").replace(/\/\/+/g,"/"),QTe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VTe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WTe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jTe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const j$=["post","put","patch","delete"];new Set(j$);const XTe=["get",...j$];new Set(XTe);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wv(){return wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wv.apply(this,arguments)}const WR=E.createContext(null),YTe=E.createContext(null),uC=E.createContext(null),fC=E.createContext(null),G0=E.createContext({outlet:null,matches:[],isDataRoute:!1}),X$=E.createContext(null);function hC(){return E.useContext(fC)!=null}function Y$(){return hC()||Pr(!1),E.useContext(fC).location}function q$(t){E.useContext(uC).static||E.useLayoutEffect(t)}function qTe(){let{isDataRoute:t}=E.useContext(G0);return t?lIe():$Te()}function $Te(){hC()||Pr(!1);let t=E.useContext(WR),{basename:e,future:n,navigator:i}=E.useContext(uC),{matches:r}=E.useContext(G0),{pathname:s}=Y$(),o=JSON.stringify(GTe(r,n.v7_relativeSplatPath)),a=E.useRef(!1);return q$(()=>{a.current=!0}),E.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=HTe(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Wh([e,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[e,i,o,s,t])}function KTe(t,e){return JTe(t,e)}function JTe(t,e,n,i){hC()||Pr(!1);let{navigator:r}=E.useContext(uC),{matches:s}=E.useContext(G0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Y$(),u;if(e){var f;let A=typeof e=="string"?N0(e):e;l==="/"||(f=A.pathname)!=null&&f.startsWith(l)||Pr(!1),u=A}else u=c;let h=u.pathname||"/",d=h;if(l!=="/"){let A=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(A.length).join("/")}let p=STe(t,{pathname:d}),g=iIe(p&&p.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Wh([l,r.encodeLocation?r.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Wh([l,r.encodeLocation?r.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,i);return e&&g?E.createElement(fC.Provider,{value:{location:wv({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ju.Pop}},g):g}function ZTe(){let t=aIe(),e=jTe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:r},n):null,null)}const eIe=E.createElement(ZTe,null);class tIe extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(G0.Provider,{value:this.props.routeContext},E.createElement(X$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nIe(t){let{routeContext:e,match:n,children:i}=t,r=E.useContext(WR);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(G0.Provider,{value:e},i)}function iIe(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Pr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:d}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,h)=>{let d,p=!1,g=null,A=null;n&&(d=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||eIe,l&&(c<0&&h===0?(p=!0,A=null):c===h&&(p=!0,A=f.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),v=()=>{let y;return d?y=g:p?y=A:f.route.Component?y=E.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=u,E.createElement(nIe,{match:f,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?E.createElement(tIe,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var $$=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($$||{}),zE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zE||{});function rIe(t){let e=E.useContext(WR);return e||Pr(!1),e}function sIe(t){let e=E.useContext(YTe);return e||Pr(!1),e}function oIe(t){let e=E.useContext(G0);return e||Pr(!1),e}function K$(t){let e=oIe(),n=e.matches[e.matches.length-1];return n.route.id||Pr(!1),n.route.id}function aIe(){var t;let e=E.useContext(X$),n=sIe(zE.UseRouteError),i=K$(zE.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function lIe(){let{router:t}=rIe($$.UseNavigateStable),e=K$(zE.UseNavigateStable),n=E.useRef(!1);return q$(()=>{n.current=!0}),E.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,wv({fromRouteId:e},s)))},[t,e])}function g6(t){Pr(!1)}function cIe(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ju.Pop,navigator:s,static:o=!1,future:a}=t;hC()&&Pr(!1);let l=e.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:s,static:o,future:wv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=N0(i));let{pathname:u="/",search:f="",hash:h="",state:d=null,key:p="default"}=i,g=E.useMemo(()=>{let A=W$(u,l);return A==null?null:{location:{pathname:A,search:f,hash:h,state:d,key:p},navigationType:r}},[l,u,f,h,d,p,r]);return g==null?null:E.createElement(uC.Provider,{value:c},E.createElement(fC.Provider,{children:n,value:g}))}function uIe(t){let{children:e,location:n}=t;return KTe(A6(e),n)}new Promise(()=>{});function A6(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(i,r)=>{if(!E.isValidElement(i))return;let s=[...e,r];if(i.type===E.Fragment){n.push.apply(n,A6(i.props.children,s));return}i.type!==g6&&Pr(!1),!i.props.index||!i.props.children||Pr(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=A6(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const fIe="6";try{window.__reactRouterVersion=fIe}catch{}const hIe="startTransition",lN=c3[hIe];function dIe(t){let{basename:e,children:n,future:i,window:r}=t,s=E.useRef();s.current==null&&(s.current=_Te({window:r,v5Compat:!0}));let o=s.current,[a,l]=E.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=E.useCallback(f=>{c&&lN?lN(()=>l(f)):l(f)},[l,c]);return E.useLayoutEffect(()=>o.listen(u),[o,u]),E.createElement(cIe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}var cN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cN||(cN={}));var uN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uN||(uN={}));const pIe="4613ad851712424d87c043c5b029da27",mIe="99661f511d374780a6447471f4ba13bf",gIe="http://localhost:5173/callback";function AIe(){const t=qTe();E.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("code");i&&e(i)},[]);async function e(n){try{const r=await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:n,redirect_uri:gIe,client_id:pIe,client_secret:mIe})})).json();console.log("Token response:",r),r.access_token?(localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),t("/")):console.error("No access token received")}catch(i){console.error("Error exchanging code for token:",i)}}return Re.jsx("div",{children:"Loading..."})}const vIe="4613ad851712424d87c043c5b029da27",yIe="https://accounts.spotify.com/authorize",xIe="http://localhost:5173/callback",_Ie=["user-read-currently-playing","user-read-playback-state","user-modify-playback-state"];function EIe(){const[t,e]=E.useState([]),[n,i]=E.useState(!0),[r,s]=E.useState(!1),[o,a]=E.useState(null);function l(){window.location=`${yIe}?client_id=${vIe}&redirect_uri=${xIe}&scope=${_Ie.join("%20")}&response_type=code&show_dialog=true`}E.useEffect(()=>{const h=localStorage.getItem("access_token");h!=="undefined"&&h!==null&&s(!0)},[]);async function c(){const h=localStorage.getItem("access_token");if(h){var d={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};try{const p=await fetch("https://api.spotify.com/v1/me/player",d);if(p.status===200){const g=await p.json();a(g.item)}else if(p.status===204)console.log("No track currently playing");else{console.log("Error fetching currently playing track");const g=await p.json();console.log("Error details:",g)}}catch(p){console.error("Error:",p)}}}E.useEffect(()=>{c()},[]);const u=async()=>{const h=localStorage.getItem("access_token");if(h)try{await fetch("https://api.spotify.com/v1/me/player/next",{method:"POST",headers:{Authorization:`Bearer ${h}`}}),await c()}catch(d){console.error("Error skipping to next track:",d)}},f=async()=>{const h=localStorage.getItem("access_token");if(h)try{await fetch("https://api.spotify.com/v1/me/player/previous",{method:"POST",headers:{Authorization:`Bearer ${h}`}}),await c()}catch(d){console.error("Error going to previous track:",d)}};return E.useEffect(()=>{(async()=>{try{const d=await xTe();e(d.results.slice(0,2)),i(!1)}catch(d){console.error("Error fetching data:",d),i(!1)}})()},[]),Re.jsx(dIe,{children:Re.jsxs(uIe,{children:[Re.jsx(g6,{path:"/callback",element:Re.jsx(AIe,{})}),Re.jsx(g6,{path:"/",element:Re.jsxs(Re.Fragment,{children:[Re.jsxs("div",{className:"h-dvh w-screen flex flex-col justify-between",children:[Re.jsx("div",{className:" flex z-50 relative flex-col flex-wrap bg-transparent",children:Re.jsxs("div",{className:"w-screen flex flex-wrap lg:flex-nowrap justify-between border-x-0 border-y-2 border-t-0 text-white",children:[Re.jsxs("div",{className:"grow lg:grow-0 order-1 p-5 text-sm  lg:text-3xl border border-y-0 border-l-0 flex items-center gap-14",children:[Re.jsx("p",{children:"2nd July 2024"}),Re.jsx("p",{children:"6:35 PM"})]}),Re.jsx("div",{className:"grow order-3 lg:order-2 lg:grow-0 p-1 w-[65%] border-t-2 lg:border-0",children:r?Re.jsx(Re.Fragment,{children:Re.jsx(kMe,{currentlyPlayingTrack:o,onNextTrack:u,onPrevTrack:f})}):Re.jsx("button",{onClick:l,children:"Login Spotify"})}),Re.jsx("div",{className:"p-5 order-2 lg:order-3 border border-y-0 border-r-0 border-t-0 content-center",children:Re.jsx("p",{className:"bg-[url('/assets/logo.png')] w-20 h-10 lg:w-28 lg:h-14 bg-contain bg-no-repeat m-auto"})})]})}),Re.jsxs("div",{className:"flex flex-col gap-10 lg:gap-0 lg:flex-row z-50 h-auto md:h-full relative",children:[Re.jsxs("div",{className:"border-r-white mt-10 lg:mt-0 lg:border-r lg:flex-1 flex flex-col gap-10 justify-center items-center",children:[Re.jsxs("div",{className:"hidden lg:flex w-fit gap-3 bg-[#161616]/40 backdrop-blur-md p-2 rounded-3xl",children:[Re.jsxs("div",{className:"flex flex-col gap-3",children:[Re.jsx("div",{className:"bg-black/40 w-60 h-2/4 flex justify-center items-center rounded-2xl",children:Re.jsx(WMe,{})}),Re.jsx("div",{className:"bg-black/40 w-60 h-2/4 flex justify-center items-center rounded-2xl",children:Re.jsx(XMe,{})})]}),Re.jsx("div",{className:"bg-custom-gradient w-56 h-56 flex justify-center items-center rounded-2xl",children:Re.jsx(VMe,{size:60})})]}),Re.jsx("div",{className:"w-full",children:Re.jsxs("div",{className:"relative w-11/12 m-auto",children:[Re.jsx("input",{className:"bg-black/40 backdrop-blur-md w-full md:w-[485px] h-10 p-4 pl-10 flex justify-center items-center rounded-lg border placeholder-gray-400 text-white",type:"search",placeholder:"Where do you wanna go today?"}),Re.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:Re.jsx(jMe,{})}),Re.jsx("button",{className:"absolute inset-y-0 right-0 m-auto h-fit flex items-center mr-2 bg-white rounded-lg text-sm p-1 px-5 text-black",children:"search"})]})}),Re.jsx("h1",{className:"text-3xl md:text-6xl w-[485px] leading-snug text-center",children:"Meet the web again"})]}),Re.jsx("div",{className:"px-7 lg:p-0 lg:border-l lg:flex-1 flex flex-col gap-10 lg:justify-center items-center w-full",children:Re.jsxs("div",{className:"flex flex-col gap-5 md:gap-10 bg-[#192C3D] p-5 lg:p-10 md:w-4/5 lg:h-4/5 rounded-3xl border bg-[url('./assets/aibg.jpg')] bg-cover bg-blend-multiply bg-center ",children:[Re.jsxs("div",{className:"flex justify-center items-center gap-5",children:[Re.jsx(QMe,{}),Re.jsx("p",{className:"text-lg md:text-3xl font-thin",children:"Hey Milan how's your day going"})]}),Re.jsx("input",{className:"bg-black/40 backdrop-blur-md w-full h-12 p-4 pl-10 flex justify-center items-center rounded-2xl text-center border placeholder-gray-400 text-white",type:"search",placeholder:"Talk to our ai "}),Re.jsxs("div",{className:"lg:h-36 md:p-5 bg-black/40 rounded-3xl flex gap-20 justify-center items-center overflow-scroll",children:[Re.jsx("img",{src:"https://www.google.com/s2/favicons?domain=figma.com&sz=40",alt:""}),Re.jsx("img",{src:"https://www.google.com/s2/favicons?domain=youtube.com&sz=40",alt:""}),Re.jsx("img",{src:"https://www.google.com/s2/favicons?domain=x.com&sz=40",alt:""}),Re.jsx("img",{src:"https://www.google.com/s2/favicons?domain=whatsapp.com&sz=40",alt:""}),Re.jsx("img",{src:"https://www.google.com/s2/favicons?domain=savee.it&sz=40",alt:""})]}),n?Re.jsx("p",{children:"Loading..."}):Re.jsx("ul",{className:"list-disc text-2xl p-5 rounded-3xl flex flex-col gap-5",children:t.map((h,d)=>Re.jsx("li",{className:"text-sm md:text-1xl",children:h.title},d))})]})})]}),Re.jsxs("div",{className:"flex z-50 items-center justify-center relative h-20 border-t-2 overflow-scroll md:overflow-hidden text-xs md:text-1xl",children:[Re.jsx("div",{className:"border-r-1 px-2 w-fit min-w-28 md:px-10 flex justify-center items-center",children:"100 cookies blocked"}),Re.jsx("div",{className:"w-[2px] h-5 bg-white rounded-md"}),Re.jsx("div",{className:"border-r-1 px-2 w-fit min-w-28 md:px-10 flex justify-center items-center",children:"34Mbps & 20Mbps "}),Re.jsx("div",{className:"w-[2px] h-5 bg-white rounded-md"}),Re.jsx("div",{className:"border-r-1 px-2 w-fit min-w-28 md:px-10 flex justify-center items-center",children:"weather is rainy today"}),Re.jsx("div",{className:"w-[2px] h-5 bg-white rounded-md"}),Re.jsx("div",{className:"border-r-1 px-2 w-fit min-w-28 md:px-10 flex justify-center items-center",children:"you have visited 2700 unique websites"}),Re.jsx("div",{className:"w-[2px] h-5 bg-white rounded-md"}),Re.jsx("div",{className:"border-r-1 px-2 w-fit min-w-28 md:px-10 flex justify-center items-center",children:"you have spent 300 hours and 47 minutes here with us"})]})]}),Re.jsx("div",{className:"h-screen w-screen z-10 top-0 absolute pointer-events-none opacity-35",children:Re.jsx("p",{className:"bg-[url('./assets/noise.webp')] object-cover h-screen"})}),Re.jsx("div",{className:"h-screen w-screen z-0 top-0 absolute pointer-events-none",children:Re.jsx(Eue,{importedFiber:{...yle,...uwe,...tue},style:{position:"absolute",pointerEvents:"none",top:0},className:"pointer-events-none z-0",children:Re.jsx(Hfe,{control:"query",urlString:"https://www.shadergradient.co/customize?animate=on&axesHelper=off&bgColor1=%23ff08ea&bgColor2=%2300b83a&brightness=1.2&cAzimuthAngle=250&cDistance=1.5&cPolarAngle=140&cameraZoom=12.5&color1=%2300400d&color2=%23005252&color3=%2300ebeb&embedMode=off&envPreset=dawn&fov=45&gizmoHelper=hide&grain=off&lightType=env&pixelDensity=2.2&positionX=0&positionY=0&positionZ=0&reflection=0.5&rotationX=0&rotationY=0&rotationZ=140&shader=defaults&type=sphere&uAmplitude=2.6&uDensity=0.7&uFrequency=5.5&uSpeed=0.1"})})})]})})]})})}R5.createRoot(document.getElementById("root")).render(Re.jsx(Es.StrictMode,{children:Re.jsx(EIe,{})}));export{IK as c,m0 as g};
